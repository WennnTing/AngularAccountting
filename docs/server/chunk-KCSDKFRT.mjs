import './polyfills.server.mjs';
import{$ as L,A as xr,Aa as FL,B as An,Ba as Zw,C as je,Ca as ML,D as j,E as NE,Ea as xL,F as Ko,Fa as LL,G as ln,Ga as xE,H as Oi,Ha as Ec,I as RA,Ia as OL,J as _L,Ja as UL,K as Ct,Ka as LE,L as It,La as PL,M as Sd,N as vL,O as ds,Oa as VL,P as bd,Q as Dd,R as K,S as Ye,Sa as GL,T as Rd,Ta as OE,U as FE,Ua as qL,V as ci,W as Xo,Wa as UE,X as Ht,Xa as $w,Y as he,Z as SL,_ as P,a as hs,aa as Br,b as EL,ba as gc,c as uc,ca as fc,d as mL,da as Lr,e as jo,ea as bL,f as hc,fa as Je,g as tr,ga as Se,h as Mr,ha as DL,i as ot,ia as X,j as CL,ja as Sn,k as vd,ka as ME,l as bA,la as RL,m as IL,ma as pc,n as RE,na as TL,o as yL,oa as Zo,p as TE,pa as TA,q as DA,qa as kL,r as BL,ra as Kw,s as Ww,sa as NL,t as QL,u as kE,v as li,w as zw,x as jw,y as wL,ya as Xw,z as dc}from"./chunk-7OIZI4HQ.mjs";import{A as ce,B as Qr,C as cn,D as r0,E as ZL,F as Nd,G as de,H as bn,I as YE,J as i0,K as hi,L as ea,M as ho,N as Ic,O as $L,P as Or,Q as Mt,R as NX,a as x,b as mc,c as PE,d as HL,e as YL,f as dn,g as Cc,h as Td,i as e0,j as JL,k as gs,l as t0,m as VE,n as GE,o as WL,p as qE,q as $t,r as zL,s as jL,t as ui,u as $o,v as HE,w as kd,x as n0,y as KL,z as XL}from"./chunk-PFDBP37X.mjs";import{a as M,b as se,c as B,d as cs,e as C,g as DE,h as Jw,i as E,j as cc,k as us,l as SA,m as Pn}from"./chunk-DYTSPR25.mjs";var Cs=C((p0,E1)=>{"use strict";var ZE=B("buffer"),ms=ZE.Buffer;function p1(t,e){for(var n in t)e[n]=t[n]}ms.from&&ms.alloc&&ms.allocUnsafe&&ms.allocUnsafeSlow?E1.exports=ZE:(p1(ZE,p0),p0.Buffer=kA);function kA(t,e,n){return ms(t,e,n)}kA.prototype=Object.create(ms.prototype);p1(ms,kA);kA.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ms(t,e,n)};kA.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=ms(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};kA.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ms(t)};kA.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ZE.SlowBuffer(t)}});var I1=C(E0=>{"use strict";var m1=B("stream").Stream,C1=B("util"),NA=function(t){this.readable=this.writable=!0,this._paused=!1,this._driver=t};C1.inherits(NA,m1);NA.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0};NA.prototype.resume=function(){this._paused=!1,this.emit("drain");var t=this._driver.messages;t._paused=!1,t.emit("drain")};NA.prototype.write=function(t){return this.writable?(this._driver.parse(t),!this._paused):!1};NA.prototype.end=function(t){if(this.writable){t!==void 0&&this.write(t),this.writable=!1;var e=this._driver.messages;e.readable&&(e.readable=e.writable=!1,e.emit("end"))}};NA.prototype.destroy=function(){this.end()};var FA=function(t){this.readable=this.writable=!0,this._paused=!1,this._driver=t};C1.inherits(FA,m1);FA.prototype.pause=function(){this._driver.io._paused=!0};FA.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")};FA.prototype.write=function(t){return this.writable?(typeof t=="string"?this._driver.text(t):this._driver.binary(t),!this._paused):!1};FA.prototype.end=function(t){t!==void 0&&this.write(t)};FA.prototype.destroy=function(){};E0.IO=NA;E0.Messages=FA});var $E=C((fTe,y1)=>{"use strict";var yc=function(){this.clear()};yc.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"];yc.prototype.clear=function(){this._sent={},this._lines=[]};yc.prototype.set=function(t,e){if(e!==void 0){t=this._strip(t),e=this._strip(e);var n=t.toLowerCase();(!this._sent.hasOwnProperty(n)||this.ALLOWED_DUPLICATES.indexOf(n)>=0)&&(this._sent[n]=!0,this._lines.push(t+": "+e+`\r
`))}};yc.prototype.toString=function(){return this._lines.join("")};yc.prototype._strip=function(t){return t.toString().replace(/^ */,"").replace(/ *$/,"")};y1.exports=yc});var Q1=C((pTe,B1)=>{"use strict";var em=Cs().Buffer,tm=function(){this._queue=[],this._queueSize=0,this._offset=0};tm.prototype.put=function(t){!t||t.length===0||(em.isBuffer(t)||(t=em.from(t)),this._queue.push(t),this._queueSize+=t.length)};tm.prototype.read=function(t){if(t>this._queueSize)return null;if(t===0)return em.alloc(0);this._queueSize-=t;var e=this._queue,n=t,r=e[0],i,s;if(r.length>=t)return r.length===t?e.shift():(s=r.slice(0,t),e[0]=r.slice(t),s);for(var o=0,a=e.length;o<a&&!(n<e[o].length);o++)n-=e[o].length;return i=e.splice(0,o),n>0&&e.length>0&&(i.push(e[0].slice(0,n)),e[0]=e[0].slice(n)),em.concat(i,t)};tm.prototype.eachByte=function(t,e){for(var n,r,i;this._queue.length>0;){for(n=this._queue[0],r=n.length;this._offset<r;)i=this._offset,this._offset+=1,t.call(e,n[i]);this._offset=0,this._queue.shift()}};B1.exports=tm});var ia=C((ETe,D1)=>{"use strict";var w1=Cs().Buffer,S1=B("events").EventEmitter,mZ=B("util"),_1=I1(),b1=$E(),CZ=Q1(),nr=function(t,e,n){S1.call(this),nr.validateOptions(n||{},["maxLength","masking","requireMasking","protocols"]),this._request=t,this._reader=new CZ,this._options=n||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new b1,this.__queue=[],this.readyState=0,this.url=e,this.io=new _1.IO(this),this.messages=new _1.Messages(this),this._bindEventListeners()};mZ.inherits(nr,S1);nr.isWebSocket=function(t){var e=t.headers.connection||"",n=t.headers.upgrade||"";return t.method==="GET"&&e.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&n.toLowerCase()==="websocket"};nr.validateOptions=function(t,e){for(var n in t)if(e.indexOf(n)<0)throw new Error("Unrecognized option: "+n)};var v1={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var t=this;this.messages.on("error",function(){}),this.on("message",function(e){var n=t.messages;n.readable&&n.emit("data",e.data)}),this.on("error",function(e){var n=t.messages;n.readable&&n.emit("error",e)}),this.on("close",function(){var e=t.messages;e.readable&&(e.readable=e.writable=!1,e.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(t){return!1},setHeader:function(t,e){return this.readyState>0?!1:(this._headers.set(t,e),!0)},start:function(){if(this.readyState!==0)return!1;if(!nr.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var t;try{t=this._handshakeResponse()}catch(e){return this._failHandshake(e)}return this._write(t),this._stage!==-1&&this._open(),!0},_failHandshake:function(t){var e=new b1;return e.set("Content-Type","text/plain"),e.set("Content-Length",w1.byteLength(t.message,"utf8")),e=["HTTP/1.1 400 Bad Request",e.toString(),t.message],this._write(w1.from(e.join(`\r
`),"utf8")),this._fail("protocol_error",t.message),!1},text:function(t){return this.frame(t)},binary:function(t){return!1},ping:function(){return!1},pong:function(){return!1},close:function(t,e){return this.readyState!==1?!1:(this.readyState=3,this.emit("close",new nr.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(t){this.frame.apply(this,t)},this),this.__queue=[],this.emit("open",new nr.OpenEvent)},_queue:function(t){return this.__queue.push(t),!0},_write:function(t){var e=this.io;e.readable&&e.emit("data",t)},_fail:function(t,e){this.readyState=2,this.emit("error",new Error(e)),this.close()}};for(m0 in v1)nr.prototype[m0]=v1[m0];var m0;nr.ConnectEvent=function(){};nr.OpenEvent=function(){};nr.CloseEvent=function(t,e){this.code=t,this.reason=e};nr.MessageEvent=function(t){this.data=t};nr.PingEvent=function(t){this.data=t};nr.PongEvent=function(t){this.data=t};D1.exports=nr});var F1=C(B0=>{"use strict";var I0=B("assert");B0.HTTPParser=ie;function ie(t){I0.ok(t===ie.REQUEST||t===ie.RESPONSE||t===void 0),t===void 0||this.initialize(t),this.maxHeaderSize=ie.maxHeaderSize}ie.prototype.initialize=function(t,e){I0.ok(t===ie.REQUEST||t===ie.RESPONSE),this.type=t,this.state=t+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1};ie.encoding="ascii";ie.maxHeaderSize=80*1024;ie.REQUEST="REQUEST";ie.RESPONSE="RESPONSE";var R1=ie.kOnHeaders=1,C0=ie.kOnHeadersComplete=2,nm=ie.kOnBody=3,y0=ie.kOnMessageComplete=4;ie.prototype[R1]=ie.prototype[C0]=ie.prototype[nm]=ie.prototype[y0]=function(){};var T1=!0;Object.defineProperty(ie,"kOnExecute",{get:function(){return T1=!1,99}});var k1=B0.methods=ie.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],N1=k1.indexOf("CONNECT");ie.prototype.reinitialize=ie;ie.prototype.close=ie.prototype.pause=ie.prototype.resume=ie.prototype.free=function(){};ie.prototype._compatMode0_11=!1;ie.prototype.getAsyncId=function(){return 0};var IZ={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};ie.prototype.execute=function(t,e,n){if(!(this instanceof ie))throw new TypeError("not a HTTPParser");e=e||0,n=typeof n=="number"?n:t.length,this.chunk=t,this.offset=e;var r=this.end=e+n;try{for(;this.offset<r&&!this[this.state](););}catch(i){if(this.isUserCall)throw i;return this.hadError=!0,i}return this.chunk=null,n=this.offset-e,IZ[this.state]&&(this.headerSize+=n,this.headerSize>(this.maxHeaderSize||ie.maxHeaderSize))?new Error("max header size exceeded"):n};var yZ={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};ie.prototype.finish=function(){if(!this.hadError){if(!yZ[this.state])return new Error("invalid state for EOF");this.state==="BODY_RAW"&&this.userCall()(this[y0]())}};ie.prototype.consume=ie.prototype.unconsume=ie.prototype.getCurrentBuffer=function(){};ie.prototype.userCall=function(){this.isUserCall=!0;var t=this;return function(e){return t.isUserCall=!1,e}};ie.prototype.nextRequest=function(){this.userCall()(this[y0]()),this.reinitialize(this.type)};ie.prototype.consumeLine=function(){for(var t=this.end,e=this.chunk,n=this.offset;n<t;n++)if(e[n]===10){var r=this.line+e.toString(ie.encoding,this.offset,n);return r.charAt(r.length-1)==="\r"&&(r=r.substr(0,r.length-1)),this.line="",this.offset=n+1,r}this.line+=e.toString(ie.encoding,this.offset,this.end),this.offset=this.end};var BZ=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,QZ=/^[ \t]+(.*[^ \t])/;ie.prototype.parseHeader=function(t,e){if(t.indexOf("\r")!==-1)throw rm("HPE_LF_EXPECTED");var n=BZ.exec(t),r=n&&n[1];if(r)e.push(r),e.push(n[2]);else{var i=QZ.exec(t);i&&e.length&&(e[e.length-1]&&(e[e.length-1]+=" "),e[e.length-1]+=i[1])}};var wZ=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;ie.prototype.REQUEST_LINE=function(){var t=this.consumeLine();if(t){var e=wZ.exec(t);if(e===null)throw rm("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?e[1]:k1.indexOf(e[1]),this.info.method===-1)throw new Error("invalid request method");this.info.url=e[2],this.info.versionMajor=+e[3],this.info.versionMinor=+e[4],this.body_bytes=0,this.state="HEADER"}};var _Z=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;ie.prototype.RESPONSE_LINE=function(){var t=this.consumeLine();if(t){var e=_Z.exec(t);if(e===null)throw rm("HPE_INVALID_CONSTANT");this.info.versionMajor=+e[1],this.info.versionMinor=+e[2];var n=this.info.statusCode=+e[3];this.info.statusMessage=e[4],((n/100|0)===1||n===204||n===304)&&(this.body_bytes=0),this.state="HEADER"}};ie.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf("close")!==-1)return!1}else if(this.connection.indexOf("keep-alive")===-1)return!1;return!!(this.body_bytes!==null||this.isChunked)};ie.prototype.HEADER=function(){var t=this.consumeLine();if(t!==void 0){var e=this.info;if(t)this.parseHeader(t,e.headers);else{for(var n=e.headers,r=!1,i,s=!1,o=0;o<n.length;o+=2)switch(n[o].toLowerCase()){case"transfer-encoding":this.isChunked=n[o+1].toLowerCase()==="chunked";break;case"content-length":if(i=+n[o+1],r){if(i!==this.body_bytes)throw rm("HPE_UNEXPECTED_CONTENT_LENGTH")}else r=!0,this.body_bytes=i;break;case"connection":this.connection+=n[o+1].toLowerCase();break;case"upgrade":s=!0;break}this.isChunked&&r&&(r=!1,this.body_bytes=null),s&&this.connection.indexOf("upgrade")!=-1?e.upgrade=this.type===ie.REQUEST||e.statusCode===101:e.upgrade=e.method===N1,this.isChunked&&e.upgrade&&(this.isChunked=!1),e.shouldKeepAlive=this.shouldKeepAlive();var a;if(T1?a=this.userCall()(this[C0](e)):a=this.userCall()(this[C0](e.versionMajor,e.versionMinor,e.headers,e.method,e.url,e.statusCode,e.statusMessage,e.upgrade,e.shouldKeepAlive)),a===2)return this.nextRequest(),!0;if(this.isChunked&&!a)this.state="BODY_CHUNKHEAD";else{if(a||this.body_bytes===0)return this.nextRequest(),e.upgrade;this.body_bytes===null?this.state="BODY_RAW":this.state="BODY_SIZED"}}}};ie.prototype.BODY_CHUNKHEAD=function(){var t=this.consumeLine();t!==void 0&&(this.body_bytes=parseInt(t,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")};ie.prototype.BODY_CHUNK=function(){var t=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[nm](this.chunk,this.offset,t)),this.offset+=t,this.body_bytes-=t,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")};ie.prototype.BODY_CHUNKEMPTYLINE=function(){var t=this.consumeLine();t!==void 0&&(I0.equal(t,""),this.state="BODY_CHUNKHEAD")};ie.prototype.BODY_CHUNKTRAILERS=function(){var t=this.consumeLine();t!==void 0&&(t?this.parseHeader(t,this.trailers):(this.trailers.length&&this.userCall()(this[R1](this.trailers,"")),this.nextRequest()))};ie.prototype.BODY_RAW=function(){var t=this.end-this.offset;this.userCall()(this[nm](this.chunk,this.offset,t)),this.offset=this.end};ie.prototype.BODY_SIZED=function(){var t=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[nm](this.chunk,this.offset,t)),this.offset+=t,this.body_bytes-=t,this.body_bytes||this.nextRequest()};["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(t){var e=ie["kOn"+t];Object.defineProperty(ie.prototype,"on"+t,{get:function(){return this[e]},set:function(n){return this._compatMode0_11=!0,N1="CONNECT",this[e]=n}})});function rm(t){var e=new Error("Parse Error");return e.code=t,e}});var sm=C((CTe,x1)=>{"use strict";var im=F1().HTTPParser,vZ=Cs().Buffer,SZ={request:im.REQUEST||"request",response:im.RESPONSE||"response"},rr=function(t){this._type=t,this._parser=new im(SZ[t]),this._complete=!1,this.headers={};var e=null,n=this;this._parser.onHeaderField=function(r,i,s){e=r.toString("utf8",i,i+s).toLowerCase()},this._parser.onHeaderValue=function(r,i,s){var o=r.toString("utf8",i,i+s);n.headers.hasOwnProperty(e)?n.headers[e]+=", "+o:n.headers[e]=o},this._parser.onHeadersComplete=this._parser[im.kOnHeadersComplete]=function(r,i,s,o,a,A){var l=arguments[0];if(typeof l=="object"&&(o=l.method,a=l.url,A=l.statusCode,s=l.headers),n.method=typeof o=="number"?rr.METHODS[o]:o,n.statusCode=A,n.url=a,!!s){for(var c=0,u=s.length,h,d;c<u;c+=2)h=s[c].toLowerCase(),d=s[c+1],n.headers.hasOwnProperty(h)?n.headers[h]+=", "+d:n.headers[h]=d;n._complete=!0}}};rr.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var M1=process.version?process.version.match(/[0-9]+/g).map(function(t){return parseInt(t,10)}):[];M1[0]===0&&M1[1]===12&&(rr.METHODS[16]="REPORT",rr.METHODS[17]="MKACTIVITY",rr.METHODS[18]="CHECKOUT",rr.METHODS[19]="MERGE",rr.METHODS[20]="M-SEARCH",rr.METHODS[21]="NOTIFY",rr.METHODS[22]="SUBSCRIBE",rr.METHODS[23]="UNSUBSCRIBE",rr.METHODS[24]="PATCH",rr.METHODS[25]="PURGE");rr.prototype.isComplete=function(){return this._complete};rr.prototype.parse=function(t){var e=this._parser.execute(t,0,t.length);if(typeof e!="number"){this.error=e,this._complete=!0;return}this._complete&&(this.body=e<t.length?t.slice(e):vZ.alloc(0))};x1.exports=rr});var U1=C((ITe,O1)=>{"use strict";var Q0=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,bZ=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,DZ=/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/,w0=new RegExp(Q0.source+"(?:=(?:"+Q0.source+"|"+DZ.source+"))?"),_0=new RegExp(Q0.source+"(?: *; *"+w0.source+")*","g"),RZ=new RegExp("^"+_0.source+"(?: *, *"+_0.source+")*$"),TZ=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,L1=Object.prototype.hasOwnProperty,kZ={parseHeader:function(t){var e=new Gd;if(t===""||t===void 0)return e;if(!RZ.test(t))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+t);var n=t.match(_0);return n.forEach(function(r){var i=r.match(new RegExp(w0.source,"g")),s=i.shift(),o={};i.forEach(function(a){var A=a.match(w0),l=A[1],c;A[2]!==void 0?c=A[2]:A[3]!==void 0?c=A[3].replace(/\\/g,""):c=!0,TZ.test(c)&&(c=parseFloat(c)),L1.call(o,l)?(o[l]=[].concat(o[l]),o[l].push(c)):o[l]=c},this),e.push(s,o)},this),e},serializeParams:function(t,e){var n=[],r=function(s,o){o instanceof Array?o.forEach(function(a){r(s,a)}):o===!0?n.push(s):typeof o=="number"?n.push(s+"="+o):bZ.test(o)?n.push(s+'="'+o.replace(/"/g,'\\"')+'"'):n.push(s+"="+o)};for(var i in e)r(i,e[i]);return[t].concat(n).join("; ")}},Gd=function(){this._byName={},this._inOrder=[]};Gd.prototype.push=function(t,e){L1.call(this._byName,t)||(this._byName[t]=[]),this._byName[t].push(e),this._inOrder.push({name:t,params:e})};Gd.prototype.eachOffer=function(t,e){for(var n=this._inOrder,r=0,i=n.length;r<i;r++)t.call(e,n[r].name,n[r].params)};Gd.prototype.byName=function(t){return this._byName[t]||[]};Gd.prototype.toArray=function(){return this._inOrder.slice()};O1.exports=kZ});var v0=C((yTe,P1)=>{"use strict";var qd=function(t){this._bufferSize=t,this.clear()};qd.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0};qd.prototype.push=function(t){var e=!1,n=!1;this._ringSize<this._bufferSize?e=this._tail===0:this._ringOffset===this._ringSize&&(e=!0,n=this._tail===0),e&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,n&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=t,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize};qd.prototype.peek=function(){if(this.length!==0)return this._buffer[this._head]};qd.prototype.shift=function(){if(this.length!==0){var t=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,this._ringOffset===0&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,t}};P1.exports=qd});var G1=C((BTe,V1)=>{"use strict";var NZ=v0(),Bc=function(t,e){this._session=t,this._method=e,this._queue=new NZ(Bc.QUEUE_SIZE),this._stopped=!1,this.pending=0};Bc.QUEUE_SIZE=8;Bc.prototype.call=function(t,e,n,r){if(!this._stopped){var i={error:t,message:e,callback:n,context:r,done:!1},s=!1,o=this;if(this._queue.push(i),i.error)return i.done=!0,this._stop(),this._flushQueue();var a=function(A,l){s^(s=!0)&&(A?(o._stop(),i.error=A,i.message=null):i.message=l,i.done=!0,o._flushQueue())};try{this._session[this._method](e,a)}catch(A){a(A)}}};Bc.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0};Bc.prototype._flushQueue=function(){for(var t=this._queue,e;t.length>0&&t.peek().done;)e=t.shift(),e.error?(this.pending=0,t.clear()):this.pending-=1,e.callback.call(e.context,e.error,e.message)};V1.exports=Bc});var S0=C((QTe,q1)=>{"use strict";var FZ=v0(),MA=function(){this._complete=!1,this._callbacks=new FZ(MA.QUEUE_SIZE)};MA.QUEUE_SIZE=4;MA.all=function(t){var e=new MA,n=t.length,r=n;for(n===0&&e.done();r--;)t[r].then(function(){n-=1,n===0&&e.done()});return e};MA.prototype.then=function(t){this._complete?t():this._callbacks.push(t)};MA.prototype.done=function(){this._complete=!0;for(var t=this._callbacks,e;e=t.shift();)e()};q1.exports=MA});var J1=C((wTe,Y1)=>{"use strict";var H1=G1(),MZ=S0(),xA=function(t){this._ext=t[0],this._session=t[1],this._functors={incoming:new H1(this._session,"processIncomingMessage"),outgoing:new H1(this._session,"processOutgoingMessage")}};xA.prototype.pending=function(t){var e=this._functors[t];e._stopped||(e.pending+=1)};xA.prototype.incoming=function(t,e,n,r){this._exec("incoming",t,e,n,r)};xA.prototype.outgoing=function(t,e,n,r){this._exec("outgoing",t,e,n,r)};xA.prototype.close=function(){return this._closed=this._closed||new MZ,this._doClose(),this._closed};xA.prototype._exec=function(t,e,n,r,i){this._functors[t].call(e,n,function(s,o){s&&(s.message=this._ext.name+": "+s.message),r.call(i,s,o),this._doClose()},this)};xA.prototype._doClose=function(){var t=this._functors.incoming,e=this._functors.outgoing;!this._closed||t.pending+e.pending!==0||(this._session&&this._session.close(),this._session=null,this._closed.done())};Y1.exports=xA});var z1=C((_Te,W1)=>{"use strict";var xZ=J1(),LZ=S0(),Hd=function(t){this._cells=t.map(function(e){return new xZ(e)}),this._stopped={incoming:!1,outgoing:!1}};Hd.prototype.processIncomingMessage=function(t,e,n){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,t,e,n)};Hd.prototype.processOutgoingMessage=function(t,e,n){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,t,e,n)};Hd.prototype.close=function(t,e){this._stopped={incoming:!0,outgoing:!0};var n=this._cells.map(function(r){return r.close()});t&&LZ.all(n).then(function(){t.call(e)})};Hd.prototype._loop=function(t,e,n,r,i,s,o){for(var a=this._cells,A=a.length,l=this;A--;)a[A].pending(t);var c=function(u,h,d){if(u===n)return s.call(o,h,d);a[u][t](h,d,function(g,f){g&&(l._stopped[t]=!0),c(u+r,g,f)})};c(e,null,i)};W1.exports=Hd});var Z1=C((vTe,X1)=>{"use strict";var Yd=U1(),j1=z1(),om=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};om.MESSAGE_OPCODES=[1,2];var K1={add:function(t){if(typeof t.name!="string")throw new TypeError("extension.name must be a string");if(t.type!=="permessage")throw new TypeError('extension.type must be "permessage"');if(typeof t.rsv1!="boolean")throw new TypeError("extension.rsv1 must be true or false");if(typeof t.rsv2!="boolean")throw new TypeError("extension.rsv2 must be true or false");if(typeof t.rsv3!="boolean")throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(t.name))throw new TypeError('An extension with name "'+t.name+'" is already registered');this._byName[t.name]=t,this._inOrder.push(t)},generateOffer:function(){var t=[],e=[],n={};return this._inOrder.forEach(function(r){var i=r.createClientSession();if(i){var s=[r,i];t.push(s),n[r.name]=s;var o=i.generateOffer();o=o?[].concat(o):[],o.forEach(function(a){e.push(Yd.serializeParams(r.name,a))},this)}},this),this._sessions=t,this._index=n,e.length>0?e.join(", "):null},activate:function(t){var e=Yd.parseHeader(t),n=[];e.eachOffer(function(r,i){var s=this._index[r];if(!s)throw new Error('Server sent an extension response for unknown extension "'+r+'"');var o=s[0],a=s[1],A=this._reserved(o);if(A)throw new Error("Server sent two extension responses that use the RSV"+A[0]+' bit: "'+A[1]+'" and "'+o.name+'"');if(a.activate(i)!==!0)throw new Error("Server sent unacceptable extension parameters: "+Yd.serializeParams(r,i));this._reserve(o),n.push(s)},this),this._sessions=n,this._pipeline=new j1(n)},generateResponse:function(t){var e=[],n=[],r=Yd.parseHeader(t);return this._inOrder.forEach(function(i){var s=r.byName(i.name);if(!(s.length===0||this._reserved(i))){var o=i.createServerSession(s);o&&(this._reserve(i),e.push([i,o]),n.push(Yd.serializeParams(i.name,o.generateResponse())))}},this),this._sessions=e,this._pipeline=new j1(e),n.length>0?n.join(", "):null},validFrameRsv:function(t){var e={rsv1:!1,rsv2:!1,rsv3:!1},n;if(om.MESSAGE_OPCODES.indexOf(t.opcode)>=0)for(var r=0,i=this._sessions.length;r<i;r++)n=this._sessions[r][0],e.rsv1=e.rsv1||n.rsv1,e.rsv2=e.rsv2||n.rsv2,e.rsv3=e.rsv3||n.rsv3;return(e.rsv1||!t.rsv1)&&(e.rsv2||!t.rsv2)&&(e.rsv3||!t.rsv3)},processIncomingMessage:function(t,e,n){this._pipeline.processIncomingMessage(t,e,n)},processOutgoingMessage:function(t,e,n){this._pipeline.processOutgoingMessage(t,e,n)},close:function(t,e){if(!this._pipeline)return t.call(e);this._pipeline.close(t,e)},_reserve:function(t){this._rsv1=this._rsv1||t.rsv1&&t.name,this._rsv2=this._rsv2||t.rsv2&&t.name,this._rsv3=this._rsv3||t.rsv3&&t.name},_reserved:function(t){return this._rsv1&&t.rsv1?[1,this._rsv1]:this._rsv2&&t.rsv2?[2,this._rsv2]:this._rsv3&&t.rsv3?[3,this._rsv3]:!1}};for(b0 in K1)om.prototype[b0]=K1[b0];var b0;X1.exports=om});var nO=C((STe,tO)=>{"use strict";var eO=function(){},$1={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(D0 in $1)eO.prototype[D0]=$1[D0];var D0;tO.exports=eO});var oO=C((bTe,sO)=>{"use strict";var OZ=Cs().Buffer,iO=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},rO={read:function(){return this.data=this.data||OZ.concat(this._chunks,this.length)},pushFrame:function(t){this.rsv1=this.rsv1||t.rsv1,this.rsv2=this.rsv2||t.rsv2,this.rsv3=this.rsv3||t.rsv3,this.opcode===null&&(this.opcode=t.opcode),this._chunks.push(t.payload),this.length+=t.length}};for(R0 in rO)iO.prototype[R0]=rO[R0];var R0;sO.exports=iO});var k0=C((DTe,uO)=>{"use strict";var Jd=Cs().Buffer,cO=B("crypto"),UZ=B("util"),PZ=Z1(),LA=ia(),aO=nO(),AO=oO(),Ur=function(t,e,n){if(LA.apply(this,arguments),this._extensions=new PZ,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},typeof this._protocols=="string"&&(this._protocols=this._protocols.split(/ *, */)),!!this._request){var r=this._request.headers["sec-websocket-protocol"],i=this._protocols;r!==void 0&&(typeof r=="string"&&(r=r.split(/ *, */)),this.protocol=r.filter(function(s){return i.indexOf(s)>=0})[0]),this.version="hybi-"+Ur.VERSION}};UZ.inherits(Ur,LA);Ur.VERSION="13";Ur.mask=function(t,e,n){if(!e||e.length===0)return t;n=n||0;for(var r=0,i=t.length-n;r<i;r++)t[n+r]=t[n+r]^e[r%4];return t};Ur.generateAccept=function(t){var e=cO.createHash("sha1");return e.update(t+Ur.GUID),e.digest("base64")};Ur.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var lO={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(t){return this._extensions.add(t),!0},parse:function(t){this._reader.put(t);for(var e=!0;e;)switch(this._stage){case 0:e=this._reader.read(1),e&&this._parseOpcode(e[0]);break;case 1:e=this._reader.read(1),e&&this._parseLength(e[0]);break;case 2:e=this._reader.read(this._frame.lengthBytes),e&&this._parseExtendedLength(e);break;case 3:e=this._reader.read(4),e&&(this._stage=4,this._frame.maskingKey=e);break;case 4:e=this._reader.read(this._frame.length),e&&(this._stage=0,this._emitFrame(e));break;default:e=null}},text:function(t){return this.readyState>1?!1:this.frame(t,"text")},binary:function(t){return this.readyState>1?!1:this.frame(t,"binary")},ping:function(t,e){return this.readyState>1?!1:(t=t||"",e&&(this._pingCallbacks[t]=e),this.frame(t,"ping"))},pong:function(t){return this.readyState>1?!1:(t=t||"",this.frame(t,"pong"))},close:function(t,e){return t=t||"",e=e||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new LA.CloseEvent(e,t)),!0):this.readyState===1?(this.readyState=2,this._extensions.close(function(){this.frame(t,"close",e)},this),!0):!1},frame:function(t,e,n){if(this.readyState<=0)return this._queue([t,e,n]);if(this.readyState>2)return!1;t instanceof Array&&(t=Jd.from(t)),typeof t=="number"&&(t=t.toString());var r=new AO,i=typeof t=="string",s,o;r.rsv1=r.rsv2=r.rsv3=!1,r.opcode=this.OPCODES[e||(i?"text":"binary")],s=i?Jd.from(t,"utf8"):t,n&&(o=s,s=Jd.allocUnsafe(2+o.length),s.writeUInt16BE(n,0),o.copy(s,2)),r.data=s;var a=function(A){var l=new aO;l.final=!0,l.rsv1=A.rsv1,l.rsv2=A.rsv2,l.rsv3=A.rsv3,l.opcode=A.opcode,l.masked=!!this._masking,l.length=A.data.length,l.payload=A.data,l.masked&&(l.maskingKey=cO.randomBytes(4)),this._sendFrame(l)};return this.MESSAGE_OPCODES.indexOf(r.opcode)>=0?this._extensions.processOutgoingMessage(r,function(A,l){if(A)return this._fail("extension_error",A.message);a.call(this,l)},this):a.call(this,r),!0},_sendFrame:function(t){var e=t.length,n=e<=125?2:e<=65535?4:10,r=n+(t.masked?4:0),i=Jd.allocUnsafe(r+e),s=t.masked?this.MASK:0;i[0]=(t.final?this.FIN:0)|(t.rsv1?this.RSV1:0)|(t.rsv2?this.RSV2:0)|(t.rsv3?this.RSV3:0)|t.opcode,e<=125?i[1]=s|e:e<=65535?(i[1]=s|126,i.writeUInt16BE(e,2)):(i[1]=s|127,i.writeUInt32BE(Math.floor(e/4294967296),2),i.writeUInt32BE(e%4294967296,6)),t.payload.copy(i,r),t.masked&&(t.maskingKey.copy(i,n),Ur.mask(i,t.maskingKey,r)),this._write(i)},_handshakeResponse:function(){var t=this._request.headers["sec-websocket-key"],e=this._request.headers["sec-websocket-version"];if(e!==Ur.VERSION)throw new Error("Unsupported WebSocket version: "+e);if(typeof t!="string")throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",Ur.generateAccept(t)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var n=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);n&&this._headers.set("Sec-WebSocket-Extensions",n);var r="HTTP/1.1 101 Switching Protocols",i=[r,this._headers.toString(),""];return Jd.from(i.join(`\r
`),"utf8")},_shutdown:function(t,e,n){delete this._frame,delete this._message,this._stage=5;var r=this.readyState===1;this.readyState=2,this._extensions.close(function(){r&&this.frame(e,"close",t),this.readyState=3,n&&this.emit("error",new Error(e)),this.emit("close",new LA.CloseEvent(t,e))},this)},_fail:function(t,e){this.readyState>1||this._shutdown(this.ERRORS[t],e,!0)},_parseOpcode:function(t){var e=[this.RSV1,this.RSV2,this.RSV3].map(function(r){return(t&r)===r}),n=this._frame=new aO;if(n.final=(t&this.FIN)===this.FIN,n.rsv1=e[0],n.rsv2=e[1],n.rsv3=e[2],n.opcode=t&this.OPCODE,this._stage=1,!this._extensions.validFrameRsv(n))return this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(n.rsv1?1:0)+", reserved2 = "+(n.rsv2?1:0)+", reserved3 = "+(n.rsv3?1:0));if(this.OPCODE_CODES.indexOf(n.opcode)<0)return this._fail("protocol_error","Unrecognized frame opcode: "+n.opcode);if(this.MESSAGE_OPCODES.indexOf(n.opcode)<0&&!n.final)return this._fail("protocol_error","Received fragmented control frame: opcode = "+n.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(n.opcode)>=0)return this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished")},_parseLength:function(t){var e=this._frame;if(e.masked=(t&this.MASK)===this.MASK,e.length=t&this.LENGTH,e.length>=0&&e.length<=125){if(this._stage=e.masked?3:4,!this._checkFrameLength())return}else this._stage=2,e.lengthBytes=e.length===126?2:8;if(this._requireMasking&&!e.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(t){var e=this._frame;if(e.length=this._readUInt(t),this._stage=e.masked?3:4,this.MESSAGE_OPCODES.indexOf(e.opcode)<0&&e.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+e.length);this._checkFrameLength()},_checkFrameLength:function(){var t=this._message?this._message.length:0;return t+this._frame.length>this._maxLength?(this._fail("too_large","WebSocket frame length too large"),!1):!0},_emitFrame:function(t){var e=this._frame,n=e.payload=Ur.mask(t,e.maskingKey),r=e.opcode,i,s,o,a,A;if(delete this._frame,r===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(e)}if((r===this.OPCODES.text||r===this.OPCODES.binary)&&(this._message=new AO,this._message.pushFrame(e)),e.final&&this.MESSAGE_OPCODES.indexOf(r)>=0)return this._emitMessage(this._message);r===this.OPCODES.close&&(s=n.length>=2?n.readUInt16BE(0):null,o=n.length>2?this._encode(n.slice(2)):null,n.length!==0&&!(s!==null&&s>=this.MIN_RESERVED_ERROR&&s<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(s)<0&&(s=this.ERRORS.protocol_error),(n.length>125||n.length>2&&!o)&&(s=this.ERRORS.protocol_error),this._shutdown(s||this.DEFAULT_ERROR_CODE,o||"")),r===this.OPCODES.ping&&(this.frame(n,"pong"),this.emit("ping",new LA.PingEvent(n.toString()))),r===this.OPCODES.pong&&(a=this._pingCallbacks,i=this._encode(n),A=a[i],delete a[i],A&&A(),this.emit("pong",new LA.PongEvent(n.toString())))},_emitMessage:function(e){var e=this._message;e.read(),delete this._message,this._extensions.processIncomingMessage(e,function(n,r){if(n)return this._fail("extension_error",n.message);var i=r.data;if(r.opcode===this.OPCODES.text&&(i=this._encode(i)),i===null)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new LA.MessageEvent(i))},this)},_encode:function(t){try{var e=t.toString("binary",0,t.length);if(!this.UTF8_MATCH.test(e))return null}catch{}return t.toString("utf8",0,t.length)},_readUInt:function(t){return t.length===2?t.readUInt16BE(0):t.readUInt32BE(0)*4294967296+t.readUInt32BE(4)}};for(T0 in lO)Ur.prototype[T0]=lO[T0];var T0;uO.exports=Ur});var pO=C((RTe,fO)=>{"use strict";var gO=Cs().Buffer,VZ=B("stream").Stream,hO=B("url"),GZ=B("util"),qZ=ia(),HZ=$E(),YZ=sm(),JZ={"ws:":80,"wss:":443},F0=function(t,e,n){this._client=t,this._http=new YZ("response"),this._origin=typeof t.url=="object"?t.url:hO.parse(t.url),this._url=typeof e=="object"?e:hO.parse(e),this._options=n||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new HZ,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var r=this._url.auth&&gO.from(this._url.auth,"utf8").toString("base64");r&&this._headers.set("Proxy-Authorization","Basic "+r)};GZ.inherits(F0,VZ);var dO={setHeader:function(t,e){return this._state!==0?!1:(this._headers.set(t,e),!0)},start:function(){if(this._state!==0)return!1;this._state=1;var t=this._origin,e=t.port||JZ[t.protocol],n="CONNECT "+t.hostname+":"+e+" HTTP/1.1",r=[n,this._headers.toString(),""];return this.emit("data",gO.from(r.join(`\r
`),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(t){if(!this.writable)return!1;if(this._http.parse(t),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this.statusCode===200)this.emit("connect",new qZ.ConnectEvent);else{var e="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(e))}return this.end(),!this._paused},end:function(t){this.writable&&(t!==void 0&&this.write(t),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(N0 in dO)F0.prototype[N0]=dO[N0];var N0;fO.exports=F0});var IO=C((TTe,CO)=>{"use strict";var mO=Cs().Buffer,WZ=B("crypto"),zZ=B("url"),jZ=B("util"),KZ=sm(),XZ=ia(),Qc=k0(),ZZ=pO(),Wd=function(t,e){this.version="hybi-"+Qc.VERSION,Qc.call(this,null,t,e),this.readyState=-1,this._key=Wd.generateKey(),this._accept=Qc.generateAccept(this._key),this._http=new KZ("response");var n=zZ.parse(this.url),r=n.auth&&mO.from(n.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(n.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(n.pathname||"/")+(n.search||""),this._headers.set("Host",n.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",Qc.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),r&&this._headers.set("Authorization","Basic "+r)};jZ.inherits(Wd,Qc);Wd.generateKey=function(){return WZ.randomBytes(16).toString("base64")};var EO={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(t,e){return new ZZ(this,t,e)},start:function(){return this.readyState!==-1?!1:(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(t){if(this.readyState!==3){if(this.readyState>0)return Qc.prototype.parse.call(this,t);this._http.parse(t),this._http.isComplete()&&(this._validateHandshake(),this.readyState!==3&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var t=this._extensions.generateOffer();t&&this._headers.set("Sec-WebSocket-Extensions",t);var e="GET "+this._pathname+" HTTP/1.1",n=[e,this._headers.toString(),""];return mO.from(n.join(`\r
`),"utf8")},_failHandshake:function(t){t="Error during WebSocket handshake: "+t,this.readyState=3,this.emit("error",new Error(t)),this.emit("close",new XZ.CloseEvent(this.ERRORS.protocol_error,t))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var t=this._http.headers,e=t.upgrade||"",n=t.connection||"",r=t["sec-websocket-accept"]||"",i=t["sec-websocket-protocol"]||"";if(e==="")return this._failHandshake("'Upgrade' header is missing");if(e.toLowerCase()!=="websocket")return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(n==="")return this._failHandshake("'Connection' header is missing");if(n.toLowerCase()!=="upgrade")return this._failHandshake("'Connection' header value is not 'Upgrade'");if(r!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,i!==""){if(this._protocols.indexOf(i)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=i}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(s){return this._failHandshake(s.message)}}};for(M0 in EO)Wd.prototype[M0]=EO[M0];var M0;CO.exports=Wd});var O0=C((kTe,BO)=>{"use strict";var am=Cs().Buffer,Am=ia(),$Z=B("util"),L0=function(t,e,n){Am.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};$Z.inherits(L0,Am);var yO={close:function(){return this.readyState===3?!1:(this.readyState=3,this.emit("close",new Am.CloseEvent(null,null)),!0)},parse:function(t){this.readyState>1||(this._reader.put(t),this._reader.eachByte(function(e){var n;switch(this._stage){case-1:this._body.push(e),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(e);break;case 1:if(this._length=(e&127)+128*this._length,this._closing&&this._length===0)return this.close();(e&128)!==128&&(this._length===0?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(e===255)this._stage=0,n=am.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new Am.MessageEvent(n));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(e),this._buffer.length>this._maxLength)return this.close();break}},this))},frame:function(t){if(this.readyState===0)return this._queue([t]);if(this.readyState>1)return!1;typeof t!="string"&&(t=t.toString());var e=am.byteLength(t),n=am.allocUnsafe(e+2);return n[0]=0,n.write(t,1),n[n.length-1]=255,this._write(n),!0},_handshakeResponse:function(){var t="HTTP/1.1 101 Web Socket Protocol Handshake",e=[t,this._headers.toString(),""];return am.from(e.join(`\r
`),"utf8")},_parseLeadingByte:function(t){(t&128)===128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(x0 in yO)L0.prototype[x0]=yO[x0];var x0;BO.exports=L0});var SO=C((NTe,vO)=>{"use strict";var zd=Cs().Buffer,e$=ia(),lm=O0(),t$=B("crypto"),n$=B("util"),QO=function(t){return parseInt((t.match(/[0-9]/g)||[]).join(""),10)},wO=function(t){return(t.match(/ /g)||[]).length},P0=function(t,e,n){lm.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};n$.inherits(P0,lm);var _O={BODY_SIZE:8,start:function(){return lm.prototype.start.call(this)?(this._started=!0,this._sendHandshakeBody(),!0):!1},close:function(){return this.readyState===3?!1:(this.readyState===1&&this._write(zd.from([255,0])),this.readyState=3,this.emit("close",new e$.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var a=this._request.headers,t=a["sec-websocket-key1"],e=a["sec-websocket-key2"];if(!t)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!e)throw new Error("Missing required header: Sec-WebSocket-Key2");var n=QO(t),r=wO(t),i=QO(e),s=wO(e);if(n%r!==0||i%s!==0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[n/r,i/s];var o="HTTP/1.1 101 WebSocket Protocol Handshake",a=[o,this._headers.toString(),""];return zd.from(a.join(`\r
`),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var t=t$.createHash("md5"),e=zd.allocUnsafe(8+this.BODY_SIZE);return e.writeUInt32BE(this._keyValues[0],0),e.writeUInt32BE(this._keyValues[1],4),zd.from(this._body).copy(e,8,0,this.BODY_SIZE),t.update(e),zd.from(t.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var t=this._handshakeSignature();t&&(this._write(t),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(t){if(t!==255)return lm.prototype._parseLeadingByte.call(this,t);this._closing=!0,this._length=0,this._stage=1}};for(U0 in _O)P0.prototype[U0]=_O[U0];var U0;vO.exports=P0});var DO=C((FTe,bO)=>{"use strict";var r$=B("util"),i$=sm(),q0=ia(),s$=O0(),o$=SO(),a$=k0(),OA=function(t){q0.call(this,null,null,t),this._http=new i$("request")};r$.inherits(OA,q0);var G0={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(t){if(this._delegate)return this._delegate.parse(t);if(this._http.parse(t),!!this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var e=this;this._delegate=OA.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(n){this._delegate.on(n,function(r){e.emit(n,r)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new q0.ConnectEvent)}},_open:function(){this.__queue.forEach(function(t){this._delegate[t[0]].apply(this._delegate,t[1])},this),this.__queue=[]}};["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(t){G0[t]=function(){return this._delegate?this._delegate[t].apply(this._delegate,arguments):(this.__queue.push([t,arguments]),!0)}});for(V0 in G0)OA.prototype[V0]=G0[V0];var V0;OA.isSecureRequest=function(t){if(t.connection&&t.connection.authorized!==void 0||t.socket&&t.socket.secure)return!0;var e=t.headers;return e?e.https==="on"||e["x-forwarded-ssl"]==="on"||e["x-forwarded-scheme"]==="https"||e["x-forwarded-proto"]==="https":!1};OA.determineUrl=function(t){var e=this.isSecureRequest(t)?"wss:":"ws:";return e+"//"+t.headers.host+t.url};OA.http=function(t,e){e=e||{},e.requireMasking===void 0&&(e.requireMasking=!0);var n=t.headers,r=n["sec-websocket-version"],i=n["sec-websocket-key"],s=n["sec-websocket-key1"],o=n["sec-websocket-key2"],a=this.determineUrl(t);return r||i?new a$(t,a,e):s||o?new o$(t,a,e):new s$(t,a,e)};bO.exports=OA});var jd=C((MTe,TO)=>{"use strict";var RO=ia(),A$=IO(),cm=DO(),l$={client:function(t,e){return e=e||{},e.masking===void 0&&(e.masking=!0),new A$(t,e)},server:function(t){return t=t||{},t.requireMasking===void 0&&(t.requireMasking=!0),new cm(t)},http:function(){return cm.http.apply(cm,arguments)},isSecureRequest:function(t){return cm.isSecureRequest(t)},isWebSocket:function(t){return RO.isWebSocket(t)},validateOptions:function(t,e){RO.validateOptions(t,e)}};TO.exports=l$});var Kd=C((xTe,kO)=>{"use strict";var UA=function(t,e){this.type=t;for(var n in e)this[n]=e[n]};UA.prototype.initEvent=function(t,e,n){this.type=t,this.bubbles=e,this.cancelable=n};UA.prototype.stopPropagation=function(){};UA.prototype.preventDefault=function(){};UA.CAPTURING_PHASE=1;UA.AT_TARGET=2;UA.BUBBLING_PHASE=3;kO.exports=UA});var H0=C((LTe,NO)=>{"use strict";var c$=Kd(),u$={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(t,e,n){this.on(t,e)},removeEventListener:function(t,e,n){this.removeListener(t,e)},dispatchEvent:function(t){t.target=t.currentTarget=this,t.eventPhase=c$.AT_TARGET,this["on"+t.type]&&this["on"+t.type](t),this.emit(t.type,t)}};NO.exports=u$});var hm=C((OTe,xO)=>{"use strict";var h$=B("stream").Stream,d$=B("util"),g$=jd(),FO=H0(),um=Kd(),Bt=function(t){t=t||{},g$.validateOptions(t,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var e=t.headers;if(e)for(var n in e)this._driver.setHeader(n,e[n]);var r=t.extensions;r&&[].concat(r).forEach(this._driver.addExtension,this._driver),this._ping=t.ping,this._pingId=0,this.readyState=Bt.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var i=this;this._driver.on("open",function(s){i._open()}),this._driver.on("message",function(s){i._receiveMessage(s.data)}),this._driver.on("close",function(s){i._beginClose(s.reason,s.code)}),this._driver.on("error",function(s){i._emitError(s.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){i.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){i._pingId+=1,i.ping(i._pingId.toString())},this._ping*1e3)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};d$.inherits(Bt,h$);Bt.CONNECTING=0;Bt.OPEN=1;Bt.CLOSING=2;Bt.CLOSED=3;Bt.CLOSE_TIMEOUT=3e4;var MO={write:function(t){return this.send(t)},end:function(t){t!==void 0&&this.send(t),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(t){return this.readyState>Bt.OPEN?!1:(t instanceof Buffer||(t=String(t)),this._driver.messages.write(t))},ping:function(t,e){return this.readyState>Bt.OPEN?!1:this._driver.ping(t,e)},close:function(t,e){if(t===void 0&&(t=1e3),e===void 0&&(e=""),t!==1e3&&(t<3e3||t>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+t+" is neither.");if(this.readyState<Bt.CLOSING){var n=this;this._closeTimer=setTimeout(function(){n._beginClose("",1006)},Bt.CLOSE_TIMEOUT)}this.readyState!==Bt.CLOSED&&(this.readyState=Bt.CLOSING),this._driver.close(e,t)},_configureStream:function(){var t=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(e){this._stream.on(e,function(){t._finalizeClose()})},this),this._stream.on("error",function(e){t._emitError("Network error: "+t.url+": "+e.message),t._finalizeClose()})},_open:function(){if(this.readyState===Bt.CONNECTING){this.readyState=Bt.OPEN,this.protocol=this._driver.protocol||"";var t=new um("open");t.initEvent("open",!1,!1),this.dispatchEvent(t)}},_receiveMessage:function(t){if(this.readyState>Bt.OPEN)return!1;this.readable&&this.emit("data",t);var e=new um("message",{data:t});e.initEvent("message",!1,!1),this.dispatchEvent(e)},_emitError:function(t){if(!(this.readyState>=Bt.CLOSING)){var e=new um("error",{message:t});e.initEvent("error",!1,!1),this.dispatchEvent(e)}},_beginClose:function(t,e){this.readyState!==Bt.CLOSED&&(this.readyState=Bt.CLOSING,this._closeParams=[t,e],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==Bt.CLOSED){this.readyState=Bt.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var t=this._closeParams?this._closeParams[0]:"",e=this._closeParams?this._closeParams[1]:1006,n=new um("close",{code:e,reason:t});n.initEvent("close",!1,!1),this.dispatchEvent(n)}}};for(Y0 in MO)Bt.prototype[Y0]=MO[Y0];var Y0;for(J0 in FO)Bt.prototype[J0]=FO[J0];var J0;xO.exports=Bt});var GO=C((PTe,VO)=>{"use strict";var f$=B("util"),p$=B("net"),LO=B("tls"),OO=B("url"),E$=jd(),UO=hm(),UTe=Kd(),m$={"http:":80,"https:":443,"ws:":80,"wss:":443},PO=["https:","wss:"],dm=function(t,e,n){n=n||{},this.url=t,this._driver=E$.client(this.url,{maxLength:n.maxLength,protocols:e}),["open","error"].forEach(function(h){this._driver.on(h,function(){u.headers=u._driver.headers,u.statusCode=u._driver.statusCode})},this);var r=n.proxy||{},i=OO.parse(r.origin||this.url),s=i.port||m$[i.protocol],o=PO.indexOf(i.protocol)>=0,a=function(){u._onConnect()},A=n.net||{},l=n.tls||{},c=r.origin?r.tls||{}:l,u=this;A.host=c.host=i.hostname,A.port=c.port=s,l.ca=l.ca||n.ca,c.servername=c.servername||i.hostname,this._stream=o?LO.connect(c,a):p$.connect(A,a),r.origin&&this._configureProxy(r,l),UO.call(this,n)};f$.inherits(dm,UO);dm.prototype._onConnect=function(){var t=this._proxy||this._driver;t.start()};dm.prototype._configureProxy=function(t,e){var n=OO.parse(this.url),r=PO.indexOf(n.protocol)>=0,i=this,s;if(this._proxy=this._driver.proxy(t.origin),t.headers)for(s in t.headers)this._proxy.setHeader(s,t.headers[s]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(r){var o={socket:i._stream,servername:n.hostname};for(s in e)o[s]=e[s];i._stream=LO.connect(o),i._configureStream()}i._driver.io.pipe(i._stream),i._stream.pipe(i._driver.io),i._driver.start()}),this._proxy.on("error",function(o){i._driver.emit("error",o)})};VO.exports=dm});var WO=C((VTe,JO)=>{"use strict";var C$=B("stream").Stream,I$=B("util"),y$=jd(),B$=$E(),wc=hm(),qO=H0(),HO=Kd(),Xd=function(t,e,n){this.writable=!0,n=n||{},this._stream=e.socket,this._ping=n.ping||this.DEFAULT_PING,this._retry=n.retry||this.DEFAULT_RETRY;var r=y$.isSecureRequest(t)?"https:":"http:";this.url=r+"//"+t.headers.host+t.url,this.lastEventId=t.headers["last-event-id"]||"",this.readyState=wc.CONNECTING;var i=new B$,s=this;if(n.headers)for(var o in n.headers)i.set(o,n.headers[o]);if(!(!this._stream||!this._stream.writable)){process.nextTick(function(){s._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var a=`HTTP/1.1 200 OK\r
Content-Type: text/event-stream\r
Cache-Control: no-cache, no-store\r
Connection: close\r
`+i.toString()+`\r
retry: `+Math.floor(this._retry*1e3)+`\r
\r
`;this._write(a),this._stream.on("drain",function(){s.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){s.ping()},this._ping*1e3)),["error","end"].forEach(function(A){s._stream.on(A,function(){s.close()})})}};I$.inherits(Xd,C$);Xd.isEventSource=function(t){if(t.method!=="GET")return!1;var e=(t.headers.accept||"").split(/\s*,\s*/);return e.indexOf("text/event-stream")>=0};var YO={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(t){if(!this.writable)return!1;try{return this._stream.write(t,"utf8")}catch{return!1}},_open:function(){if(this.readyState===wc.CONNECTING){this.readyState=wc.OPEN;var t=new HO("open");t.initEvent("open",!1,!1),this.dispatchEvent(t)}},write:function(t){return this.send(t)},end:function(t){t!==void 0&&this.write(t),this.close()},send:function(t,e){if(this.readyState>wc.OPEN)return!1;t=String(t).replace(/(\r\n|\r|\n)/g,"$1data: "),e=e||{};var n="";return e.event&&(n+="event: "+e.event+`\r
`),e.id&&(n+="id: "+e.id+`\r
`),n+="data: "+t+`\r
\r
`,this._write(n)},ping:function(){return this._write(`:\r
\r
`)},close:function(){if(this.readyState>wc.OPEN)return!1;this.readyState=wc.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var t=new HO("close");return t.initEvent("close",!1,!1),this.dispatchEvent(t),!0}};for(W0 in YO)Xd.prototype[W0]=YO[W0];var W0;for(z0 in qO)Xd.prototype[z0]=qO[z0];var z0;JO.exports=Xd});var KO=C((GTe,jO)=>{"use strict";var Q$=B("util"),j0=jd(),zO=hm(),sa=function(t,e,n,r,i){i=i||{},this._stream=e,this._driver=j0.http(t,{maxLength:i.maxLength,protocols:r});var s=this;if(!(!this._stream||!this._stream.writable)){if(!this._stream.readable)return this._stream.end();var o=function(){s._stream.removeListener("data",o)};this._stream.on("data",o),zO.call(this,i),process.nextTick(function(){s._driver.start(),s._driver.io.write(n)})}};Q$.inherits(sa,zO);sa.isWebSocket=function(t){return j0.isWebSocket(t)};sa.validateOptions=function(t,e){j0.validateOptions(t,e)};sa.WebSocket=sa;sa.Client=GO();sa.EventSource=WO();jO.exports=sa});var qe=C(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=Ei.DEFAULT_MAX_SEND_MESSAGE_LENGTH=Ei.Propagate=Ei.LogVerbosity=Ei.Status=void 0;var pG=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t}(pG||(Ei.Status=pG={})),EG=function(t){return t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.NONE=3]="NONE",t}(EG||(Ei.LogVerbosity=EG={})),mG=function(t){return t[t.DEADLINE=1]="DEADLINE",t[t.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",t[t.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",t[t.CANCELLATION=8]="CANCELLATION",t[t.DEFAULTS=65535]="DEFAULTS",t}(mG||(Ei.Propagate=mG={}));Ei.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;Ei.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var US=C((oNe,xre)=>{xre.exports={name:"@grpc/grpc-js",version:"1.9.14",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:"^8.13.0 || >=10.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@types/gulp":"^4.0.6","@types/gulp-mocha":"0.0.32","@types/lodash":"^4.14.186","@types/mocha":"^5.2.6","@types/ncp":"^2.0.1","@types/pify":"^3.0.2","@types/semver":"^7.3.9","@typescript-eslint/eslint-plugin":"^5.59.11","@typescript-eslint/parser":"^5.59.11","@typescript-eslint/typescript-estree":"^5.59.11","clang-format":"^1.0.55",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.4",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.3.5","ts-node":"^10.9.1",typescript:"^5.1.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.8","@types/node":">=12.12.47"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var Lt=C(Ar=>{"use strict";var PS,VS,GS,qS;Object.defineProperty(Ar,"__esModule",{value:!0});Ar.isTracerEnabled=Ar.trace=Ar.log=Ar.setLoggerVerbosity=Ar.setLogger=Ar.getLogger=void 0;var Ea=qe(),Lre=B("process"),Ore=US().version,Ure={error:(t,...e)=>{console.error("E "+t,...e)},info:(t,...e)=>{console.error("I "+t,...e)},debug:(t,...e)=>{console.error("D "+t,...e)}},tl=Ure,Zc=Ea.LogVerbosity.ERROR,Pre=(VS=(PS=process.env.GRPC_NODE_VERBOSITY)!==null&&PS!==void 0?PS:process.env.GRPC_VERBOSITY)!==null&&VS!==void 0?VS:"";switch(Pre.toUpperCase()){case"DEBUG":Zc=Ea.LogVerbosity.DEBUG;break;case"INFO":Zc=Ea.LogVerbosity.INFO;break;case"ERROR":Zc=Ea.LogVerbosity.ERROR;break;case"NONE":Zc=Ea.LogVerbosity.NONE;break;default:}var Vre=()=>tl;Ar.getLogger=Vre;var Gre=t=>{tl=t};Ar.setLogger=Gre;var qre=t=>{Zc=t};Ar.setLoggerVerbosity=qre;var Hre=(t,...e)=>{let n;if(t>=Zc){switch(t){case Ea.LogVerbosity.DEBUG:n=tl.debug;break;case Ea.LogVerbosity.INFO:n=tl.info;break;case Ea.LogVerbosity.ERROR:n=tl.error;break}n||(n=tl.error),n&&n.bind(tl)(...e)}};Ar.log=Hre;var Yre=(qS=(GS=process.env.GRPC_NODE_TRACE)!==null&&GS!==void 0?GS:process.env.GRPC_TRACE)!==null&&qS!==void 0?qS:"",HS=new Set,CG=new Set;for(let t of Yre.split(","))t.startsWith("-")?CG.add(t.substring(1)):HS.add(t);var Jre=HS.has("all");function Wre(t,e,n){IG(e)&&(0,Ar.log)(t,new Date().toISOString()+" | v"+Ore+" "+Lre.pid+" | "+e+" | "+n)}Ar.trace=Wre;function IG(t){return!CG.has(t)&&(Jre||HS.has(t))}Ar.isTracerEnabled=IG});var VC=C($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.getErrorCode=$c.getErrorMessage=void 0;function zre(t){return t instanceof Error?t.message:String(t)}$c.getErrorMessage=zre;function jre(t){return typeof t=="object"&&t!==null&&"code"in t&&typeof t.code=="number"?t.code:null}$c.getErrorCode=jre});var lr=C(qC=>{"use strict";Object.defineProperty(qC,"__esModule",{value:!0});qC.Metadata=void 0;var Kre=Lt(),Xre=qe(),Zre=VC(),$re=/^[0-9a-z_.-]+$/,eie=/^[ -~]*$/;function tie(t){return $re.test(t)}function nie(t){return eie.test(t)}function BG(t){return t.endsWith("-bin")}function rie(t){return!t.startsWith("grpc-")}function GC(t){return t.toLowerCase()}function yG(t,e){if(!tie(t))throw new Error('Metadata key "'+t+'" contains illegal characters');if(e!=null)if(BG(t)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!nie(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var YS=class t{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,n){e=GC(e),yG(e,n),this.internalRepr.set(e,[n])}add(e,n){e=GC(e),yG(e,n);let r=this.internalRepr.get(e);r===void 0?this.internalRepr.set(e,[n]):r.push(n)}remove(e){e=GC(e),this.internalRepr.delete(e)}get(e){return e=GC(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[n,r]of this.internalRepr)if(r.length>0){let i=r[0];e[n]=Buffer.isBuffer(i)?Buffer.from(i):i}return e}clone(){let e=new t(this.options),n=e.internalRepr;for(let[r,i]of this.internalRepr){let s=i.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);n.set(r,s)}return e}merge(e){for(let[n,r]of e.internalRepr){let i=(this.internalRepr.get(n)||[]).concat(r);this.internalRepr.set(n,i)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[n,r]of this.internalRepr)e[n]=r.map(iie);return e}toJSON(){let e={};for(let[n,r]of this.internalRepr)e[n]=r;return e}static fromHttp2Headers(e){let n=new t;for(let r of Object.keys(e)){if(r.charAt(0)===":")continue;let i=e[r];try{BG(r)?Array.isArray(i)?i.forEach(s=>{n.add(r,Buffer.from(s,"base64"))}):i!==void 0&&(rie(r)?i.split(",").forEach(s=>{n.add(r,Buffer.from(s.trim(),"base64"))}):n.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach(s=>{n.add(r,s)}):i!==void 0&&n.add(r,i)}catch(s){let o=`Failed to add metadata entry ${r}: ${i}. ${(0,Zre.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,Kre.log)(Xre.LogVerbosity.ERROR,o)}}return n}};qC.Metadata=YS;var iie=t=>Buffer.isBuffer(t)?t.toString("base64"):t});var KS=C(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});HC.CallCredentials=void 0;var jS=lr();function sie(t){return"getRequestHeaders"in t&&typeof t.getRequestHeaders=="function"}var eu=class t{static createFromMetadataGenerator(e){return new WS(e)}static createFromGoogleCredential(e){return t.createFromMetadataGenerator((n,r)=>{let i;sie(e)?i=e.getRequestHeaders(n.service_url):i=new Promise((s,o)=>{e.getRequestMetadata(n.service_url,(a,A)=>{if(a){o(a);return}if(!A){o(new Error("Headers not set by metadata plugin"));return}s(A)})}),i.then(s=>{let o=new jS.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);r(null,o)},s=>{r(s)})})}static createEmpty(){return new zS}};HC.CallCredentials=eu;var JS=class t extends eu{constructor(e){super(),this.creds=e}generateMetadata(e){return E(this,null,function*(){let n=new jS.Metadata,r=yield Promise.all(this.creds.map(i=>i.generateMetadata(e)));for(let i of r)n.merge(i);return n})}compose(e){return new t(this.creds.concat([e]))}_equals(e){return this===e?!0:e instanceof t?this.creds.every((n,r)=>n._equals(e.creds[r])):!1}},WS=class t extends eu{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((n,r)=>{this.metadataGenerator(e,(i,s)=>{s!==void 0?n(s):r(i)})})}compose(e){return new JS([this,e])}_equals(e){return this===e?!0:e instanceof t?this.metadataGenerator===e.metadataGenerator:!1}},zS=class t extends eu{generateMetadata(e){return Promise.resolve(new jS.Metadata)}compose(e){return e}_equals(e){return e instanceof t}}});var ZS=C(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.getDefaultRootsData=tu.CIPHER_SUITES=void 0;var oie=B("fs");tu.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var QG=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,XS=null;function aie(){return QG?(XS===null&&(XS=oie.readFileSync(QG)),XS):null}tu.getDefaultRootsData=aie});var WC=C(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.ChannelCredentials=void 0;var Aie=B("tls"),lie=KS(),wG=ZS();function $S(t,e){if(t&&!(t instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var nu=class{constructor(e){this.callCredentials=e||lie.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,n,r,i){var s;if($S(e,"Root certificate"),$S(n,"Private key"),$S(r,"Certificate chain"),n&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!n&&r)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,Aie.createSecureContext)({ca:(s=e??(0,wG.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:n??void 0,cert:r??void 0,ciphers:wG.CIPHER_SUITES});return new YC(o,i??{})}static createFromSecureContext(e,n){return new YC(e,n??{})}static createInsecure(){return new eb}};JC.ChannelCredentials=nu;var eb=class t extends nu{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof t}},YC=class t extends nu{constructor(e,n){super(),this.secureContext=e,this.verifyOptions=n,this.connectionOptions={secureContext:e},n?.checkServerIdentity&&(this.connectionOptions.checkServerIdentity=n.checkServerIdentity)}compose(e){let n=this.callCredentials.compose(e);return new tb(this,n)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:!1}},tb=class t extends nu{constructor(e,n){super(n),this.channelCredentials=e}compose(e){let n=this.callCredentials.compose(e);return new t(this.channelCredentials,n)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):!1}}});var Ca=C(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.validateLoadBalancingConfig=Hn.getFirstUsableConfig=Hn.isLoadBalancerNameRegistered=Hn.createLoadBalancer=Hn.registerDefaultLoadBalancerType=Hn.registerLoadBalancerType=Hn.createChildChannelControlHelper=void 0;function cie(t,e){var n,r,i,s,o,a,A,l,c,u;return{createSubchannel:(r=(n=e.createSubchannel)===null||n===void 0?void 0:n.bind(e))!==null&&r!==void 0?r:t.createSubchannel.bind(t),updateState:(s=(i=e.updateState)===null||i===void 0?void 0:i.bind(e))!==null&&s!==void 0?s:t.updateState.bind(t),requestReresolution:(a=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&a!==void 0?a:t.requestReresolution.bind(t),addChannelzChild:(l=(A=e.addChannelzChild)===null||A===void 0?void 0:A.bind(e))!==null&&l!==void 0?l:t.addChannelzChild.bind(t),removeChannelzChild:(u=(c=e.removeChannelzChild)===null||c===void 0?void 0:c.bind(e))!==null&&u!==void 0?u:t.removeChannelzChild.bind(t)}}Hn.createChildChannelControlHelper=cie;var ma={},nb=null;function uie(t,e,n){ma[t]={LoadBalancer:e,LoadBalancingConfig:n}}Hn.registerLoadBalancerType=uie;function hie(t){nb=t}Hn.registerDefaultLoadBalancerType=hie;function die(t,e){let n=t.getLoadBalancerName();return n in ma?new ma[n].LoadBalancer(e):null}Hn.createLoadBalancer=die;function gie(t){return t in ma}Hn.isLoadBalancerNameRegistered=gie;function fie(t,e=!1){for(let n of t)if(n.getLoadBalancerName()in ma)return n;return e&&nb?new ma[nb].LoadBalancingConfig:null}Hn.getFirstUsableConfig=fie;function pie(t){if(!(t!==null&&typeof t=="object"))throw new Error("Load balancing config must be an object");let e=Object.keys(t);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let n=e[0];if(n in ma)return ma[n].LoadBalancingConfig.createFromJson(t[n]);throw new Error(`Unrecognized load balancing config name ${n}`)}Hn.validateLoadBalancingConfig=pie});var rb=C(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.extractAndSelectServiceConfig=Ia.validateServiceConfig=Ia.validateRetryThrottling=void 0;var Eie=B("os"),zC=qe(),mie=Ca(),jC=/^\d+(\.\d{1,9})?s$/,Cie="node";function Iie(t){if("service"in t&&t.service!==""){if(typeof t.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof t.service}`);if("method"in t&&t.method!==""){if(typeof t.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof t.service}`);return{service:t.service,method:t.method}}else return{service:t.service}}else{if("method"in t&&t.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function yie(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in t)||typeof t.initialBackoff!="string"||!jC.test(t.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in t)||typeof t.maxBackoff!="string"||!jC.test(t.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in t)||typeof t.backoffMultiplier!="number"||t.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in t&&Array.isArray(t.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(t.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of t.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(zC.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(zC.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:t.maxAttempts,initialBackoff:t.initialBackoff,maxBackoff:t.maxBackoff,backoffMultiplier:t.backoffMultiplier,retryableStatusCodes:t.retryableStatusCodes}}function Bie(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in t&&(typeof t.hedgingDelay!="string"||!jC.test(t.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in t&&Array.isArray(t.nonFatalStatusCodes))for(let n of t.nonFatalStatusCodes)if(typeof n=="number"){if(!Object.values(zC.Status).includes(n))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof n=="string"){if(!Object.values(zC.Status).includes(n.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:t.maxAttempts};return t.hedgingDelay&&(e.hedgingDelay=t.hedgingDelay),t.nonFatalStatusCodes&&(e.nonFatalStatusCodes=t.nonFatalStatusCodes),e}function Qie(t){var e;let n={name:[]};if(!("name"in t)||!Array.isArray(t.name))throw new Error("Invalid method config: invalid name array");for(let r of t.name)n.name.push(Iie(r));if("waitForReady"in t){if(typeof t.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");n.waitForReady=t.waitForReady}if("timeout"in t)if(typeof t.timeout=="object"){if(!("seconds"in t.timeout)||typeof t.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in t.timeout)||typeof t.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");n.timeout=t.timeout}else if(typeof t.timeout=="string"&&jC.test(t.timeout)){let r=t.timeout.substring(0,t.timeout.length-1).split(".");n.timeout={seconds:r[0]|0,nanos:((e=r[1])!==null&&e!==void 0?e:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in t){if(typeof t.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");n.maxRequestBytes=t.maxRequestBytes}if("maxResponseBytes"in t){if(typeof t.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");n.maxResponseBytes=t.maxResponseBytes}if("retryPolicy"in t){if("hedgingPolicy"in t)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");n.retryPolicy=yie(t.retryPolicy)}else"hedgingPolicy"in t&&(n.hedgingPolicy=Bie(t.hedgingPolicy));return n}function _G(t){if(!("maxTokens"in t)||typeof t.maxTokens!="number"||t.maxTokens<=0||t.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in t)||typeof t.tokenRatio!="number"||t.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+t.maxTokens.toFixed(3),tokenRatio:+t.tokenRatio.toFixed(3)}}Ia.validateRetryThrottling=_G;function vG(t){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in t)if(typeof t.loadBalancingPolicy=="string")e.loadBalancingPolicy=t.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in t)if(Array.isArray(t.loadBalancingConfig))for(let r of t.loadBalancingConfig)e.loadBalancingConfig.push((0,mie.validateLoadBalancingConfig)(r));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in t&&Array.isArray(t.methodConfig))for(let r of t.methodConfig)e.methodConfig.push(Qie(r));"retryThrottling"in t&&(e.retryThrottling=_G(t.retryThrottling));let n=[];for(let r of e.methodConfig)for(let i of r.name){for(let s of n)if(i.service===s.service&&i.method===s.method)throw new Error(`Invalid service config: duplicate name ${i.service}/${i.method}`);n.push(i)}return e}Ia.validateServiceConfig=vG;function wie(t){if(!("serviceConfig"in t))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:vG(t.serviceConfig)};if("clientLanguage"in t)if(Array.isArray(t.clientLanguage)){e.clientLanguage=[];for(let r of t.clientLanguage)if(typeof r=="string")e.clientLanguage.push(r);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in t)if(Array.isArray(t.clientHostname)){e.clientHostname=[];for(let r of t.clientHostname)if(typeof r=="string")e.clientHostname.push(r);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in t)if(typeof t.percentage=="number"&&0<=t.percentage&&t.percentage<=100)e.percentage=t.percentage;else throw new Error("Invalid service config choice: invalid percentage");let n=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let r in t)if(!n.includes(r))throw new Error(`Invalid service config choice: unexpected field ${r}`);return e}function _ie(t,e){if(!Array.isArray(t))throw new Error("Invalid service config list");for(let n of t){let r=wie(n);if(!(typeof r.percentage=="number"&&e>r.percentage)){if(Array.isArray(r.clientHostname)){let i=!1;for(let s of r.clientHostname)s===Eie.hostname()&&(i=!0);if(!i)continue}if(Array.isArray(r.clientLanguage)){let i=!1;for(let s of r.clientLanguage)s===Cie&&(i=!0);if(!i)continue}return r.serviceConfig}}throw new Error("No matching service config found")}function vie(t,e){for(let n of t)if(n.length>0&&n[0].startsWith("grpc_config=")){let r=n.join("").substring(12),i=JSON.parse(r);return _ie(i,e)}return null}Ia.extractAndSelectServiceConfig=vie});var mi=C(KC=>{"use strict";Object.defineProperty(KC,"__esModule",{value:!0});KC.ConnectivityState=void 0;var SG=function(t){return t[t.IDLE=0]="IDLE",t[t.CONNECTING=1]="CONNECTING",t[t.READY=2]="READY",t[t.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",t[t.SHUTDOWN=4]="SHUTDOWN",t}(SG||(KC.ConnectivityState=SG={}))});var Yr=C(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.uriToString=ya.splitHostPort=ya.parseUri=void 0;var Sie=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function bie(t){let e=Sie.exec(t);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}ya.parseUri=bie;var bG=/^\d+$/;function Die(t){if(t.startsWith("[")){let e=t.indexOf("]");if(e===-1)return null;let n=t.substring(1,e);if(n.indexOf(":")===-1)return null;if(t.length>e+1)if(t[e+1]===":"){let r=t.substring(e+2);return bG.test(r)?{host:n,port:+r}:null}else return null;else return{host:n}}else{let e=t.split(":");return e.length===2?bG.test(e[1])?{host:e[0],port:+e[1]}:null:{host:t}}}ya.splitHostPort=Die;function Rie(t){let e="";return t.scheme!==void 0&&(e+=t.scheme+":"),t.authority!==void 0&&(e+="//"+t.authority+"/"),e+=t.path,e}ya.uriToString=Rie});var bs=C(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.mapUriDefaultScheme=Ci.getDefaultAuthority=Ci.createResolver=Ci.registerDefaultScheme=Ci.registerResolver=void 0;var sb=Yr(),ru={},ib=null;function Tie(t,e){ru[t]=e}Ci.registerResolver=Tie;function kie(t){ib=t}Ci.registerDefaultScheme=kie;function Nie(t,e,n){if(t.scheme!==void 0&&t.scheme in ru)return new ru[t.scheme](t,e,n);throw new Error(`No resolver could be created for target ${(0,sb.uriToString)(t)}`)}Ci.createResolver=Nie;function Fie(t){if(t.scheme!==void 0&&t.scheme in ru)return ru[t.scheme].getDefaultAuthority(t);throw new Error(`Invalid target ${(0,sb.uriToString)(t)}`)}Ci.getDefaultAuthority=Fie;function Mie(t){return t.scheme===void 0||!(t.scheme in ru)?ib!==null?{scheme:ib,authority:void 0,path:(0,sb.uriToString)(t)}:null:t}Ci.mapUriDefaultScheme=Mie});var Qa=C(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.QueuePicker=Ba.UnavailablePicker=Ba.PickResultType=void 0;var xie=lr(),Lie=qe(),XC=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.QUEUE=1]="QUEUE",t[t.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",t[t.DROP=3]="DROP",t}(XC||(Ba.PickResultType=XC={})),ob=class{constructor(e){this.status=Object.assign({code:Lie.Status.UNAVAILABLE,details:"No connection established",metadata:new xie.Metadata},e)}pick(e){return{pickResultType:XC.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};Ba.UnavailablePicker=ob;var ab=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:XC.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};Ba.QueuePicker=ab});var af=C(ZC=>{"use strict";Object.defineProperty(ZC,"__esModule",{value:!0});ZC.BackoffTimeout=void 0;var Oie=1e3,Uie=1.6,Pie=12e4,Vie=.2;function Gie(t,e){return Math.random()*(e-t)+t}var Ab=class{constructor(e,n){this.callback=e,this.initialDelay=Oie,this.multiplier=Uie,this.maxDelay=Pie,this.jitter=Vie,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,n&&(n.initialDelay&&(this.initialDelay=n.initialDelay),n.multiplier&&(this.multiplier=n.multiplier),n.jitter&&(this.jitter=n.jitter),n.maxDelay&&(this.maxDelay=n.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var n,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||(r=(n=this.timerId).unref)===null||r===void 0||r.call(n)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),n=e*this.jitter;this.nextDelay=e+Gie(-n,n)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,n=this.startTime;n.setMilliseconds(n.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<n?this.runTimer(n.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,n;this.hasRef=!0,(n=(e=this.timerId).ref)===null||n===void 0||n.call(e)}unref(){var e,n;this.hasRef=!1,(n=(e=this.timerId).unref)===null||n===void 0||n.call(e)}getEndTime(){return this.endTime}};ZC.BackoffTimeout=Ab});var eI=C($C=>{"use strict";Object.defineProperty($C,"__esModule",{value:!0});$C.ChildLoadBalancerHandler=void 0;var qie=Ca(),Hie=mi(),Yie="child_load_balancer_helper",lb=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(n){this.parent=n,this.child=null}createSubchannel(n,r){return this.parent.channelControlHelper.createSubchannel(n,r)}updateState(n,r){var i;if(this.calledByPendingChild()){if(n===Hie.ConnectivityState.CONNECTING)return;(i=this.parent.currentChild)===null||i===void 0||i.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(n,r)}requestReresolution(){var n;let r=(n=this.parent.pendingChild)!==null&&n!==void 0?n:this.parent.currentChild;this.child===r&&this.parent.channelControlHelper.requestReresolution()}setChild(n){this.child=n}addChannelzChild(n){this.parent.channelControlHelper.addChannelzChild(n)}removeChannelzChild(n){this.parent.channelControlHelper.removeChannelzChild(n)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,n){return e.getLoadBalancerName()!==n.getLoadBalancerName()}updateAddressList(e,n,r){let i;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,n)){let s=new this.ChildPolicyHelper(this),o=(0,qie.createLoadBalancer)(n,s);s.setChild(o),this.currentChild===null?(this.currentChild=o,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,i=this.pendingChild)}else this.pendingChild===null?i=this.currentChild:i=this.pendingChild;this.latestConfig=n,i.updateAddressList(e,n,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return Yie}};$C.ChildLoadBalancerHandler=lb});var RG=C(tI=>{"use strict";Object.defineProperty(tI,"__esModule",{value:!0});tI.ResolvingLoadBalancer=void 0;var Jie=Ca(),Wie=rb(),wr=mi(),zie=bs(),iu=Qa(),jie=af(),cb=qe(),Kie=lr(),Xie=Lt(),Zie=qe(),$ie=Yr(),ese=eI(),tse="resolving_load_balancer";function DG(t){Xie.trace(Zie.LogVerbosity.DEBUG,tse,t)}var nse=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function rse(t,e,n,r){for(let i of n.name)switch(r){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===t&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===t&&i.method===e)return!0}return!1}function ise(t,e,n,r){for(let i of n)if(rse(t,e,i,r))return i;return null}function sse(t){return function(n,r){var i,s;let o=n.split("/").filter(l=>l.length>0),a=(i=o[0])!==null&&i!==void 0?i:"",A=(s=o[1])!==null&&s!==void 0?s:"";if(t&&t.methodConfig)for(let l of nse){let c=ise(a,A,t.methodConfig,l);if(c)return{methodConfig:c,pickInformation:{},status:cb.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:cb.Status.OK,dynamicFilterFactories:[]}}}var ub=class{constructor(e,n,r,i,s){this.target=e,this.channelControlHelper=n,this.onSuccessfulResolution=i,this.onFailedResolution=s,this.latestChildState=wr.ConnectivityState.IDLE,this.latestChildPicker=new iu.QueuePicker(this),this.currentState=wr.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,Wie.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(wr.ConnectivityState.IDLE,new iu.QueuePicker(this)),this.childLoadBalancer=new ese.ChildLoadBalancerHandler({createSubchannel:n.createSubchannel.bind(n),requestReresolution:()=>{this.backoffTimeout.isRunning()?(DG("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,A)=>{this.latestChildState=a,this.latestChildPicker=A,this.updateState(a,A)},addChannelzChild:n.addChannelzChild.bind(n),removeChannelzChild:n.removeChannelzChild.bind(n)}),this.innerResolver=(0,zie.createResolver)(e,{onSuccessfulResolution:(a,A,l,c,u)=>{var h;this.backoffTimeout.stop(),this.backoffTimeout.reset();let d=null;A===null?l===null?(this.previousServiceConfig=null,d=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(l):d=this.previousServiceConfig:(d=A,this.previousServiceConfig=A);let g=(h=d?.loadBalancingConfig)!==null&&h!==void 0?h:[],f=(0,Jie.getFirstUsableConfig)(g,!0);if(f===null){this.handleResolutionFailure({code:cb.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new Kie.Metadata});return}this.childLoadBalancer.updateAddressList(a,f,u);let m=d??this.defaultServiceConfig;this.onSuccessfulResolution(m,c??sse(m))},onError:a=>{this.handleResolutionFailure(a)}},r);let o={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new jie.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},o),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===wr.ConnectivityState.IDLE&&this.updateState(wr.ConnectivityState.CONNECTING,new iu.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,n){DG((0,$ie.uriToString)(this.target)+" "+wr.ConnectivityState[this.currentState]+" -> "+wr.ConnectivityState[e]),e===wr.ConnectivityState.IDLE&&(n=new iu.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,n)}handleResolutionFailure(e){this.latestChildState===wr.ConnectivityState.IDLE&&(this.updateState(wr.ConnectivityState.TRANSIENT_FAILURE,new iu.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===wr.ConnectivityState.IDLE||this.currentState===wr.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,n){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=wr.ConnectivityState.IDLE,this.latestChildPicker=new iu.QueuePicker(this),this.currentState=wr.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};tI.ResolvingLoadBalancer=ub});var TG=C(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.channelOptionsEqual=su.recognizedOptions=void 0;su.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0};function ose(t,e){let n=Object.keys(t).sort(),r=Object.keys(e).sort();if(n.length!==r.length)return!1;for(let i=0;i<n.length;i+=1)if(n[i]!==r[i]||t[n[i]]!==e[r[i]])return!1;return!0}su.channelOptionsEqual=ose});var Rs=C(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.stringToSubchannelAddress=Ds.subchannelAddressToString=Ds.subchannelAddressEqual=Ds.isTcpSubchannelAddress=void 0;var ase=B("net");function Af(t){return"port"in t}Ds.isTcpSubchannelAddress=Af;function Ase(t,e){return!t&&!e?!0:!t||!e?!1:Af(t)?Af(e)&&t.host===e.host&&t.port===e.port:!Af(e)&&t.path===e.path}Ds.subchannelAddressEqual=Ase;function lse(t){return Af(t)?t.host+":"+t.port:t.path}Ds.subchannelAddressToString=lse;var cse=443;function use(t,e){return(0,ase.isIP)(t)?{host:t,port:e??cse}:{path:t}}Ds.stringToSubchannelAddress=use});var nI=C(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.addAdminServicesToServer=ou.registerAdminService=void 0;var kG=[];function hse(t,e){kG.push({getServiceDefinition:t,getHandlers:e})}ou.registerAdminService=hse;function dse(t){for(let{getServiceDefinition:e,getHandlers:n}of kG)t.addService(e(),n())}ou.addAdminServicesToServer=dse});var NG=C(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ClientDuplexStreamImpl=Ii.ClientWritableStreamImpl=Ii.ClientReadableStreamImpl=Ii.ClientUnaryCallImpl=Ii.callErrorFromStatus=void 0;var gse=B("events"),pb=B("stream"),lf=qe();function fse(t,e){let n=`${t.code} ${lf.Status[t.code]}: ${t.details}`,i=`${new Error(n).stack}
for call at
${e}`;return Object.assign(new Error(n),t,{stack:i})}Ii.callErrorFromStatus=fse;var hb=class extends gse.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(lf.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}};Ii.ClientUnaryCallImpl=hb;var db=class extends pb.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(lf.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_read(e){var n;(n=this.call)===null||n===void 0||n.startRead()}};Ii.ClientReadableStreamImpl=db;var gb=class extends pb.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(lf.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_write(e,n,r){var i;let s={callback:r},o=Number(n);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var n;(n=this.call)===null||n===void 0||n.halfClose(),e()}};Ii.ClientWritableStreamImpl=gb;var fb=class extends pb.Duplex{constructor(e,n){super({objectMode:!0}),this.serialize=e,this.deserialize=n}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(lf.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_read(e){var n;(n=this.call)===null||n===void 0||n.startRead()}_write(e,n,r){var i;let s={callback:r},o=Number(n);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var n;(n=this.call)===null||n===void 0||n.halfClose(),e()}};Ii.ClientDuplexStreamImpl=fb});var FG=C(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.InterceptingListenerImpl=au.isInterceptingListener=void 0;function pse(t){return t.onReceiveMetadata!==void 0&&t.onReceiveMetadata.length===1}au.isInterceptingListener=pse;var Eb=class{constructor(e,n){this.listener=e,this.nextListener=n,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,n=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(n),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,n=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=n,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(n),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,n=>{this.processingMetadata||this.processingMessage?this.pendingStatus=n:this.nextListener.onReceiveStatus(n)})}};au.InterceptingListenerImpl=Eb});var wb=C(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.getInterceptingCall=yi.InterceptingCall=yi.RequesterBuilder=yi.ListenerBuilder=yi.InterceptorConfigurationError=void 0;var Ese=lr(),MG=FG(),xG=qe(),LG=VC(),uf=class t extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,t)}};yi.InterceptorConfigurationError=uf;var Cb=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};yi.ListenerBuilder=Cb;var Ib=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};yi.RequesterBuilder=Ib;var mb={onReceiveMetadata:(t,e)=>{e(t)},onReceiveMessage:(t,e)=>{e(t)},onReceiveStatus:(t,e)=>{e(t)}},cf={start:(t,e,n)=>{n(t,e)},sendMessage:(t,e)=>{e(t)},halfClose:t=>{t()},cancel:t=>{t()}},yb=class{constructor(e,n){var r,i,s,o;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,n?this.requester={start:(r=n.start)!==null&&r!==void 0?r:cf.start,sendMessage:(i=n.sendMessage)!==null&&i!==void 0?i:cf.sendMessage,halfClose:(s=n.halfClose)!==null&&s!==void 0?s:cf.halfClose,cancel:(o=n.cancel)!==null&&o!==void 0?o:cf.cancel}:this.requester=cf}cancelWithStatus(e,n){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,n)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,n){var r,i,s,o,a,A;let l={onReceiveMetadata:(i=(r=n?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(n))!==null&&i!==void 0?i:c=>{},onReceiveMessage:(o=(s=n?.onReceiveMessage)===null||s===void 0?void 0:s.bind(n))!==null&&o!==void 0?o:c=>{},onReceiveStatus:(A=(a=n?.onReceiveStatus)===null||a===void 0?void 0:a.bind(n))!==null&&A!==void 0?A:c=>{}};this.processingMetadata=!0,this.requester.start(e,l,(c,u)=>{var h,d,g;this.processingMetadata=!1;let f;if((0,MG.isInterceptingListener)(u))f=u;else{let m={onReceiveMetadata:(h=u.onReceiveMetadata)!==null&&h!==void 0?h:mb.onReceiveMetadata,onReceiveMessage:(d=u.onReceiveMessage)!==null&&d!==void 0?d:mb.onReceiveMessage,onReceiveStatus:(g=u.onReceiveStatus)!==null&&g!==void 0?g:mb.onReceiveStatus};f=new MG.InterceptingListenerImpl(m,l)}this.nextCall.start(c,f),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,n){this.processingMessage=!0,this.requester.sendMessage(n,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=n):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}};yi.InterceptingCall=yb;function mse(t,e,n){var r,i;let s=(r=n.deadline)!==null&&r!==void 0?r:1/0,o=n.host,a=(i=n.parent)!==null&&i!==void 0?i:null,A=n.propagate_flags,l=n.credentials,c=t.createCall(e,s,o,a,A);return l&&c.setCredentials(l),c}var rI=class{constructor(e,n){this.call=e,this.methodDefinition=n}cancelWithStatus(e,n){this.call.cancelWithStatus(e,n)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,n){let r;try{r=this.methodDefinition.requestSerialize(n)}catch(i){this.call.cancelWithStatus(xG.Status.INTERNAL,`Request message serialization failure: ${(0,LG.getErrorMessage)(i)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,n){let r=null;this.call.start(e,{onReceiveMetadata:i=>{var s;(s=n?.onReceiveMetadata)===null||s===void 0||s.call(n,i)},onReceiveMessage:i=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(i)}catch(a){r={code:xG.Status.INTERNAL,details:`Response message parsing error: ${(0,LG.getErrorMessage)(a)}`,metadata:new Ese.Metadata},this.call.cancelWithStatus(r.code,r.details);return}(s=n?.onReceiveMessage)===null||s===void 0||s.call(n,o)},onReceiveStatus:i=>{var s,o;r?(s=n?.onReceiveStatus)===null||s===void 0||s.call(n,r):(o=n?.onReceiveStatus)===null||o===void 0||o.call(n,i)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}},Bb=class extends rI{constructor(e,n){super(e,n)}start(e,n){var r,i;let s=!1,o={onReceiveMetadata:(i=(r=n?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(n))!==null&&i!==void 0?i:a=>{},onReceiveMessage:a=>{var A;s=!0,(A=n?.onReceiveMessage)===null||A===void 0||A.call(n,a)},onReceiveStatus:a=>{var A,l;s||(A=n?.onReceiveMessage)===null||A===void 0||A.call(n,null),(l=n?.onReceiveStatus)===null||l===void 0||l.call(n,a)}};super.start(e,o),this.call.startRead()}},Qb=class extends rI{};function Cse(t,e,n){let r=mse(t,n.path,e);return n.responseStream?new Qb(r,n):new Bb(r,n)}function Ise(t,e,n,r){if(t.clientInterceptors.length>0&&t.clientInterceptorProviders.length>0)throw new uf("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(t.callInterceptors.length>0&&t.callInterceptorProviders.length>0)throw new uf("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];t.callInterceptors.length>0||t.callInterceptorProviders.length>0?i=[].concat(t.callInterceptors,t.callInterceptorProviders.map(a=>a(e))).filter(a=>a):i=[].concat(t.clientInterceptors,t.clientInterceptorProviders.map(a=>a(e))).filter(a=>a);let s=Object.assign({},n,{method_definition:e});return i.reduceRight((a,A)=>l=>A(l,a),a=>Cse(r,a,e))(s)}yi.getInterceptingCall=Ise});var Sb=C(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0});sI.Client=void 0;var Ts=NG(),yse=bb(),Bse=mi(),wa=qe(),Au=lr(),iI=wb(),Yi=Symbol(),lu=Symbol(),cu=Symbol(),Co=Symbol();function _b(t){return typeof t=="function"}function uu(t){return t.stack.split(`
`).slice(1).join(`
`)}var vb=class{constructor(e,n,r={}){var i,s;if(r=Object.assign({},r),this[lu]=(i=r.interceptors)!==null&&i!==void 0?i:[],delete r.interceptors,this[cu]=(s=r.interceptor_providers)!==null&&s!==void 0?s:[],delete r.interceptor_providers,this[lu].length>0&&this[cu].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[Co]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[Yi]=r.channelOverride;else if(r.channelFactoryOverride){let o=r.channelFactoryOverride;delete r.channelFactoryOverride,this[Yi]=o(e,n,r)}else this[Yi]=new yse.ChannelImplementation(e,n,r)}close(){this[Yi].close()}getChannel(){return this[Yi]}waitForReady(e,n){let r=i=>{if(i){n(new Error("Failed to connect before the deadline"));return}let s;try{s=this[Yi].getConnectivityState(!0)}catch{n(new Error("The channel has been closed"));return}if(s===Bse.ConnectivityState.READY)n();else try{this[Yi].watchConnectivityState(s,e,r)}catch{n(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,n,r){if(_b(e))return{metadata:new Au.Metadata,options:{},callback:e};if(_b(n))return e instanceof Au.Metadata?{metadata:e,options:{},callback:n}:{metadata:new Au.Metadata,options:e,callback:n};if(!(e instanceof Au.Metadata&&n instanceof Object&&_b(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:n,callback:r}}makeUnaryRequest(e,n,r,i,s,o,a){var A,l;let c=this.checkOptionalUnaryResponseArguments(s,o,a),u={path:e,requestStream:!1,responseStream:!1,requestSerialize:n,responseDeserialize:r},h={argument:i,metadata:c.metadata,call:new Ts.ClientUnaryCallImpl,channel:this[Yi],methodDefinition:u,callOptions:c.options,callback:c.callback};this[Co]&&(h=this[Co](h));let d=h.call,g={clientInterceptors:this[lu],clientInterceptorProviders:this[cu],callInterceptors:(A=h.callOptions.interceptors)!==null&&A!==void 0?A:[],callInterceptorProviders:(l=h.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},f=(0,iI.getInterceptingCall)(g,h.methodDefinition,h.callOptions,h.channel);d.call=f;let m=null,y=!1,I=new Error;return f.start(h.metadata,{onReceiveMetadata:w=>{d.emit("metadata",w)},onReceiveMessage(w){m!==null&&f.cancelWithStatus(wa.Status.INTERNAL,"Too many responses received"),m=w},onReceiveStatus(w){if(!y){if(y=!0,w.code===wa.Status.OK)if(m===null){let _=uu(I);h.callback((0,Ts.callErrorFromStatus)({code:wa.Status.INTERNAL,details:"No message received",metadata:w.metadata},_))}else h.callback(null,m);else{let _=uu(I);h.callback((0,Ts.callErrorFromStatus)(w,_))}I=null,d.emit("status",w)}}}),f.sendMessage(i),f.halfClose(),d}makeClientStreamRequest(e,n,r,i,s,o){var a,A;let l=this.checkOptionalUnaryResponseArguments(i,s,o),c={path:e,requestStream:!0,responseStream:!1,requestSerialize:n,responseDeserialize:r},u={metadata:l.metadata,call:new Ts.ClientWritableStreamImpl(n),channel:this[Yi],methodDefinition:c,callOptions:l.options,callback:l.callback};this[Co]&&(u=this[Co](u));let h=u.call,d={clientInterceptors:this[lu],clientInterceptorProviders:this[cu],callInterceptors:(a=u.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(A=u.callOptions.interceptor_providers)!==null&&A!==void 0?A:[]},g=(0,iI.getInterceptingCall)(d,u.methodDefinition,u.callOptions,u.channel);h.call=g;let f=null,m=!1,y=new Error;return g.start(u.metadata,{onReceiveMetadata:I=>{h.emit("metadata",I)},onReceiveMessage(I){f!==null&&g.cancelWithStatus(wa.Status.INTERNAL,"Too many responses received"),f=I},onReceiveStatus(I){if(!m){if(m=!0,I.code===wa.Status.OK)if(f===null){let w=uu(y);u.callback((0,Ts.callErrorFromStatus)({code:wa.Status.INTERNAL,details:"No message received",metadata:I.metadata},w))}else u.callback(null,f);else{let w=uu(y);u.callback((0,Ts.callErrorFromStatus)(I,w))}y=null,h.emit("status",I)}}}),h}checkMetadataAndOptions(e,n){let r,i;return e instanceof Au.Metadata?(r=e,n?i=n:i={}):(e?i=e:i={},r=new Au.Metadata),{metadata:r,options:i}}makeServerStreamRequest(e,n,r,i,s,o){var a,A;let l=this.checkMetadataAndOptions(s,o),c={path:e,requestStream:!1,responseStream:!0,requestSerialize:n,responseDeserialize:r},u={argument:i,metadata:l.metadata,call:new Ts.ClientReadableStreamImpl(r),channel:this[Yi],methodDefinition:c,callOptions:l.options};this[Co]&&(u=this[Co](u));let h=u.call,d={clientInterceptors:this[lu],clientInterceptorProviders:this[cu],callInterceptors:(a=u.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(A=u.callOptions.interceptor_providers)!==null&&A!==void 0?A:[]},g=(0,iI.getInterceptingCall)(d,u.methodDefinition,u.callOptions,u.channel);h.call=g;let f=!1,m=new Error;return g.start(u.metadata,{onReceiveMetadata(y){h.emit("metadata",y)},onReceiveMessage(y){h.push(y)},onReceiveStatus(y){if(!f){if(f=!0,h.push(null),y.code!==wa.Status.OK){let I=uu(m);h.emit("error",(0,Ts.callErrorFromStatus)(y,I))}m=null,h.emit("status",y)}}}),g.sendMessage(i),g.halfClose(),h}makeBidiStreamRequest(e,n,r,i,s){var o,a;let A=this.checkMetadataAndOptions(i,s),l={path:e,requestStream:!0,responseStream:!0,requestSerialize:n,responseDeserialize:r},c={metadata:A.metadata,call:new Ts.ClientDuplexStreamImpl(n,r),channel:this[Yi],methodDefinition:l,callOptions:A.options};this[Co]&&(c=this[Co](c));let u=c.call,h={clientInterceptors:this[lu],clientInterceptorProviders:this[cu],callInterceptors:(o=c.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=c.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},d=(0,iI.getInterceptingCall)(h,c.methodDefinition,c.callOptions,c.channel);u.call=d;let g=!1,f=new Error;return d.start(c.metadata,{onReceiveMetadata(m){u.emit("metadata",m)},onReceiveMessage(m){u.push(m)},onReceiveStatus(m){if(!g){if(g=!0,u.push(null),m.code!==wa.Status.OK){let y=uu(f);u.emit("error",(0,Ts.callErrorFromStatus)(m,y))}f=null,u.emit("status",m)}}}),u}};sI.Client=vb});var Rb=C(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.loadPackageDefinition=hu.makeClientConstructor=void 0;var hf=Sb(),Qse={unary:hf.Client.prototype.makeUnaryRequest,server_stream:hf.Client.prototype.makeServerStreamRequest,client_stream:hf.Client.prototype.makeClientStreamRequest,bidi:hf.Client.prototype.makeBidiStreamRequest};function Db(t){return["__proto__","prototype","constructor"].includes(t)}function OG(t,e,n){n||(n={});class r extends hf.Client{}return Object.keys(t).forEach(i=>{if(Db(i))return;let s=t[i],o;if(typeof i=="string"&&i.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,A=s.responseDeserialize,l=wse(Qse[o],s.path,a,A);r.prototype[i]=l,Object.assign(r.prototype[i],s),s.originalName&&!Db(s.originalName)&&(r.prototype[s.originalName]=r.prototype[i])}),r.service=t,r.serviceName=e,r}hu.makeClientConstructor=OG;function wse(t,e,n,r){return function(...i){return t.call(this,e,n,r,...i)}}function _se(t){return"format"in t}function vse(t){let e={};for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n],i=n.split(".");if(i.some(a=>Db(a)))continue;let s=i[i.length-1],o=e;for(let a of i.slice(0,-1))o[a]||(o[a]={}),o=o[a];_se(r)?o[s]=r:o[s]=OG(r,s,{})}return e}hu.loadPackageDefinition=vse});var lq=C((kNe,Aq)=>{"use strict";var Sse=1/0,bse="[object Symbol]",Dse=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rse=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,aI="\\ud800-\\udfff",JG="\\u0300-\\u036f\\ufe20-\\ufe23",WG="\\u20d0-\\u20f0",zG="\\u2700-\\u27bf",jG="a-z\\xdf-\\xf6\\xf8-\\xff",Tse="\\xac\\xb1\\xd7\\xf7",kse="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nse="\\u2000-\\u206f",Fse=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",KG="A-Z\\xc0-\\xd6\\xd8-\\xde",XG="\\ufe0e\\ufe0f",ZG=Tse+kse+Nse+Fse,kb="['\u2019]",Mse="["+aI+"]",UG="["+ZG+"]",oI="["+JG+WG+"]",$G="\\d+",xse="["+zG+"]",eq="["+jG+"]",tq="[^"+aI+ZG+$G+zG+jG+KG+"]",Tb="\\ud83c[\\udffb-\\udfff]",Lse="(?:"+oI+"|"+Tb+")",nq="[^"+aI+"]",Nb="(?:\\ud83c[\\udde6-\\uddff]){2}",Fb="[\\ud800-\\udbff][\\udc00-\\udfff]",du="["+KG+"]",rq="\\u200d",PG="(?:"+eq+"|"+tq+")",Ose="(?:"+du+"|"+tq+")",VG="(?:"+kb+"(?:d|ll|m|re|s|t|ve))?",GG="(?:"+kb+"(?:D|LL|M|RE|S|T|VE))?",iq=Lse+"?",sq="["+XG+"]?",Use="(?:"+rq+"(?:"+[nq,Nb,Fb].join("|")+")"+sq+iq+")*",oq=sq+iq+Use,Pse="(?:"+[xse,Nb,Fb].join("|")+")"+oq,Vse="(?:"+[nq+oI+"?",oI,Nb,Fb,Mse].join("|")+")",Gse=RegExp(kb,"g"),qse=RegExp(oI,"g"),Hse=RegExp(Tb+"(?="+Tb+")|"+Vse+oq,"g"),Yse=RegExp([du+"?"+eq+"+"+VG+"(?="+[UG,du,"$"].join("|")+")",Ose+"+"+GG+"(?="+[UG,du+PG,"$"].join("|")+")",du+"?"+PG+"+"+VG,du+"+"+GG,$G,Pse].join("|"),"g"),Jse=RegExp("["+rq+aI+JG+WG+XG+"]"),Wse=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zse={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},jse=typeof global=="object"&&global&&global.Object===Object&&global,Kse=typeof self=="object"&&self&&self.Object===Object&&self,Xse=jse||Kse||Function("return this")();function Zse(t,e,n,r){var i=-1,s=t?t.length:0;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function $se(t){return t.split("")}function eoe(t){return t.match(Dse)||[]}function toe(t){return function(e){return t?.[e]}}var noe=toe(zse);function aq(t){return Jse.test(t)}function roe(t){return Wse.test(t)}function ioe(t){return aq(t)?soe(t):$se(t)}function soe(t){return t.match(Hse)||[]}function ooe(t){return t.match(Yse)||[]}var aoe=Object.prototype,Aoe=aoe.toString,qG=Xse.Symbol,HG=qG?qG.prototype:void 0,YG=HG?HG.toString:void 0;function loe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function coe(t){if(typeof t=="string")return t;if(foe(t))return YG?YG.call(t):"";var e=t+"";return e=="0"&&1/t==-Sse?"-0":e}function uoe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:loe(t,e,n)}function hoe(t){return function(e){e=AI(e);var n=aq(e)?ioe(e):void 0,r=n?n[0]:e.charAt(0),i=n?uoe(n,1).join(""):e.slice(1);return r[t]()+i}}function doe(t){return function(e){return Zse(Ioe(moe(e).replace(Gse,"")),t,"")}}function goe(t){return!!t&&typeof t=="object"}function foe(t){return typeof t=="symbol"||goe(t)&&Aoe.call(t)==bse}function AI(t){return t==null?"":coe(t)}var poe=doe(function(t,e,n){return e=e.toLowerCase(),t+(n?Eoe(e):e)});function Eoe(t){return Coe(AI(t).toLowerCase())}function moe(t){return t=AI(t),t&&t.replace(Rse,noe).replace(qse,"")}var Coe=hoe("toUpperCase");function Ioe(t,e,n){return t=AI(t),e=n?void 0:e,e===void 0?roe(t)?ooe(t):eoe(t):t.match(e)||[]}Aq.exports=poe});var Mb=C((NNe,cq)=>{"use strict";cq.exports=yoe;function yoe(t,e){for(var n=new Array(arguments.length-1),r=0,i=2,s=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise(function(a,A){n[r]=function(c){if(s)if(s=!1,c)A(c);else{for(var u=new Array(arguments.length-1),h=0;h<u.length;)u[h++]=arguments[h];a.apply(null,u)}};try{t.apply(e||null,n)}catch(l){s&&(s=!1,A(l))}})}});var gq=C(dq=>{"use strict";var lI=dq;lI.length=function(e){var n=e.length;if(!n)return 0;for(var r=0;--n%4>1&&e.charAt(n)==="=";)++r;return Math.ceil(e.length*3)/4-r};var gu=new Array(64),hq=new Array(123);for(Ji=0;Ji<64;)hq[gu[Ji]=Ji<26?Ji+65:Ji<52?Ji+71:Ji<62?Ji-4:Ji-59|43]=Ji++;var Ji;lI.encode=function(e,n,r){for(var i=null,s=[],o=0,a=0,A;n<r;){var l=e[n++];switch(a){case 0:s[o++]=gu[l>>2],A=(l&3)<<4,a=1;break;case 1:s[o++]=gu[A|l>>4],A=(l&15)<<2,a=2;break;case 2:s[o++]=gu[A|l>>6],s[o++]=gu[l&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=gu[A],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var uq="invalid encoding";lI.decode=function(e,n,r){for(var i=r,s=0,o,a=0;a<e.length;){var A=e.charCodeAt(a++);if(A===61&&s>1)break;if((A=hq[A])===void 0)throw Error(uq);switch(s){case 0:o=A,s=1;break;case 1:n[r++]=o<<2|(A&48)>>4,o=A,s=2;break;case 2:n[r++]=(o&15)<<4|(A&60)>>2,o=A,s=3;break;case 3:n[r++]=(o&3)<<6|A,s=0;break}}if(s===1)throw Error(uq);return r-i};lI.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var pq=C((MNe,fq)=>{"use strict";fq.exports=cI;function cI(){this._listeners={}}cI.prototype.on=function(e,n,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:r||this}),this};cI.prototype.off=function(e,n){if(e===void 0)this._listeners={};else if(n===void 0)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===n?r.splice(i,1):++i;return this};cI.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<n.length;)n[i].fn.apply(n[i++].ctx,r)}return this}});var Qq=C((xNe,Bq)=>{"use strict";Bq.exports=Eq(Eq);function Eq(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=n[3]===128;function i(A,l,c){e[0]=A,l[c]=n[0],l[c+1]=n[1],l[c+2]=n[2],l[c+3]=n[3]}function s(A,l,c){e[0]=A,l[c]=n[3],l[c+1]=n[2],l[c+2]=n[1],l[c+3]=n[0]}t.writeFloatLE=r?i:s,t.writeFloatBE=r?s:i;function o(A,l){return n[0]=A[l],n[1]=A[l+1],n[2]=A[l+2],n[3]=A[l+3],e[0]}function a(A,l){return n[3]=A[l],n[2]=A[l+1],n[1]=A[l+2],n[0]=A[l+3],e[0]}t.readFloatLE=r?o:a,t.readFloatBE=r?a:o}():function(){function e(r,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)r(1/i>0?0:2147483648,s,o);else if(isNaN(i))r(2143289344,s,o);else if(i>34028234663852886e22)r((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)r((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var A=Math.floor(Math.log(i)/Math.LN2),l=Math.round(i*Math.pow(2,-A)*8388608)&8388607;r((a<<31|A+127<<23|l)>>>0,s,o)}}t.writeFloatLE=e.bind(null,mq),t.writeFloatBE=e.bind(null,Cq);function n(r,i,s){var o=r(i,s),a=(o>>31)*2+1,A=o>>>23&255,l=o&8388607;return A===255?l?NaN:a*(1/0):A===0?a*1401298464324817e-60*l:a*Math.pow(2,A-150)*(l+8388608)}t.readFloatLE=n.bind(null,Iq),t.readFloatBE=n.bind(null,yq)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=n[7]===128;function i(A,l,c){e[0]=A,l[c]=n[0],l[c+1]=n[1],l[c+2]=n[2],l[c+3]=n[3],l[c+4]=n[4],l[c+5]=n[5],l[c+6]=n[6],l[c+7]=n[7]}function s(A,l,c){e[0]=A,l[c]=n[7],l[c+1]=n[6],l[c+2]=n[5],l[c+3]=n[4],l[c+4]=n[3],l[c+5]=n[2],l[c+6]=n[1],l[c+7]=n[0]}t.writeDoubleLE=r?i:s,t.writeDoubleBE=r?s:i;function o(A,l){return n[0]=A[l],n[1]=A[l+1],n[2]=A[l+2],n[3]=A[l+3],n[4]=A[l+4],n[5]=A[l+5],n[6]=A[l+6],n[7]=A[l+7],e[0]}function a(A,l){return n[7]=A[l],n[6]=A[l+1],n[5]=A[l+2],n[4]=A[l+3],n[3]=A[l+4],n[2]=A[l+5],n[1]=A[l+6],n[0]=A[l+7],e[0]}t.readDoubleLE=r?o:a,t.readDoubleBE=r?a:o}():function(){function e(r,i,s,o,a,A){var l=o<0?1:0;if(l&&(o=-o),o===0)r(0,a,A+i),r(1/o>0?0:2147483648,a,A+s);else if(isNaN(o))r(0,a,A+i),r(2146959360,a,A+s);else if(o>17976931348623157e292)r(0,a,A+i),r((l<<31|2146435072)>>>0,a,A+s);else{var c;if(o<22250738585072014e-324)c=o/5e-324,r(c>>>0,a,A+i),r((l<<31|c/4294967296)>>>0,a,A+s);else{var u=Math.floor(Math.log(o)/Math.LN2);u===1024&&(u=1023),c=o*Math.pow(2,-u),r(c*4503599627370496>>>0,a,A+i),r((l<<31|u+1023<<20|c*1048576&1048575)>>>0,a,A+s)}}}t.writeDoubleLE=e.bind(null,mq,0,4),t.writeDoubleBE=e.bind(null,Cq,4,0);function n(r,i,s,o,a){var A=r(o,a+i),l=r(o,a+s),c=(l>>31)*2+1,u=l>>>20&2047,h=4294967296*(l&1048575)+A;return u===2047?h?NaN:c*(1/0):u===0?c*5e-324*h:c*Math.pow(2,u-1075)*(h+4503599627370496)}t.readDoubleLE=n.bind(null,Iq,0,4),t.readDoubleBE=n.bind(null,yq,4,0)}(),t}function mq(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function Cq(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=t&255}function Iq(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function yq(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var xb=C((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var _q=C(wq=>{"use strict";var Lb=wq;Lb.length=function(e){for(var n=0,r=0,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?n+=1:r<2048?n+=2:(r&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,n+=4):n+=3;return n};Lb.read=function(e,n,r){var i=r-n;if(i<1)return"";for(var s=null,o=[],a=0,A;n<r;)A=e[n++],A<128?o[a++]=A:A>191&&A<224?o[a++]=(A&31)<<6|e[n++]&63:A>239&&A<365?(A=((A&7)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,o[a++]=55296+(A>>10),o[a++]=56320+(A&1023)):o[a++]=(A&15)<<12|(e[n++]&63)<<6|e[n++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};Lb.write=function(e,n,r){for(var i=r,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=s&63|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=s&63|128);return r-i}});var Sq=C((ONe,vq)=>{"use strict";vq.exports=Boe;function Boe(t,e,n){var r=n||8192,i=r>>>1,s=null,o=r;return function(A){if(A<1||A>i)return t(A);o+A>r&&(s=t(r),o=0);var l=e.call(s,o,o+=A);return o&7&&(o=(o|7)+1),l}}});var Dq=C((UNe,bq)=>{"use strict";bq.exports=mn;var df=ks();function mn(t,e){this.lo=t>>>0,this.hi=e>>>0}var nl=mn.zero=new mn(0,0);nl.toNumber=function(){return 0};nl.zzEncode=nl.zzDecode=function(){return this};nl.length=function(){return 1};var Qoe=mn.zeroHash="\0\0\0\0\0\0\0\0";mn.fromNumber=function(e){if(e===0)return nl;var n=e<0;n&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return n&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new mn(r,i)};mn.from=function(e){if(typeof e=="number")return mn.fromNumber(e);if(df.isString(e))if(df.Long)e=df.Long.fromString(e);else return mn.fromNumber(parseInt(e,10));return e.low||e.high?new mn(e.low>>>0,e.high>>>0):nl};mn.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var n=~this.lo+1>>>0,r=~this.hi>>>0;return n||(r=r+1>>>0),-(n+r*4294967296)}return this.lo+this.hi*4294967296};mn.prototype.toLong=function(e){return df.Long?new df.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var _a=String.prototype.charCodeAt;mn.fromHash=function(e){return e===Qoe?nl:new mn((_a.call(e,0)|_a.call(e,1)<<8|_a.call(e,2)<<16|_a.call(e,3)<<24)>>>0,(_a.call(e,4)|_a.call(e,5)<<8|_a.call(e,6)<<16|_a.call(e,7)<<24)>>>0)};mn.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};mn.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};mn.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};mn.prototype.length=function(){var e=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?n===0?e<16384?e<128?1:2:e<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:r<128?9:10}});var ks=C(Ob=>{"use strict";var $=Ob;$.asPromise=Mb();$.base64=gq();$.EventEmitter=pq();$.float=Qq();$.inquire=xb();$.utf8=_q();$.pool=Sq();$.LongBits=Dq();$.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);$.global=$.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||Ob;$.emptyArray=Object.freeze?Object.freeze([]):[];$.emptyObject=Object.freeze?Object.freeze({}):{};$.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};$.isString=function(e){return typeof e=="string"||e instanceof String};$.isObject=function(e){return e&&typeof e=="object"};$.isset=$.isSet=function(e,n){var r=e[n];return r!=null&&e.hasOwnProperty(n)?typeof r!="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0:!1};$.Buffer=function(){try{var t=$.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();$._Buffer_from=null;$._Buffer_allocUnsafe=null;$.newBuffer=function(e){return typeof e=="number"?$.Buffer?$._Buffer_allocUnsafe(e):new $.Array(e):$.Buffer?$._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};$.Array=typeof Uint8Array<"u"?Uint8Array:Array;$.Long=$.global.dcodeIO&&$.global.dcodeIO.Long||$.global.Long||$.inquire("long");$.key2Re=/^true|false|0|1$/;$.key32Re=/^-?(?:0|[1-9][0-9]*)$/;$.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;$.longToHash=function(e){return e?$.LongBits.from(e).toHash():$.LongBits.zeroHash};$.longFromHash=function(e,n){var r=$.LongBits.fromHash(e);return $.Long?$.Long.fromBits(r.lo,r.hi,n):r.toNumber(!!n)};function Rq(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)(t[r[i]]===void 0||!n)&&(t[r[i]]=e[r[i]]);return t}$.merge=Rq;$.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Tq(t){function e(n,r){if(!(this instanceof e))return new e(n,r);Object.defineProperty(this,"message",{get:function(){return n}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),r&&Rq(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}$.newError=Tq;$.ProtocolError=Tq("ProtocolError");$.oneOfGetter=function(e){for(var n={},r=0;r<e.length;++r)n[e[r]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(n[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};$.oneOfSetter=function(e){return function(n){for(var r=0;r<e.length;++r)e[r]!==n&&delete this[e[r]]}};$.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};$._configure=function(){var t=$.Buffer;if(!t){$._Buffer_from=$._Buffer_allocUnsafe=null;return}$._Buffer_from=t.from!==Uint8Array.from&&t.from||function(n,r){return new t(n,r)},$._Buffer_allocUnsafe=t.allocUnsafe||function(n){return new t(n)}}});var hI=C((VNe,Mq)=>{"use strict";Mq.exports=Oe;var Bi=ks(),Ub,uI=Bi.LongBits,kq=Bi.base64,Nq=Bi.utf8;function gf(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function Vb(){}function woe(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Oe(){this.len=0,this.head=new gf(Vb,0,0),this.tail=this.head,this.states=null}var Fq=function(){return Bi.Buffer?function(){return(Oe.create=function(){return new Ub})()}:function(){return new Oe}};Oe.create=Fq();Oe.alloc=function(e){return new Bi.Array(e)};Bi.Array!==Array&&(Oe.alloc=Bi.pool(Oe.alloc,Bi.Array.prototype.subarray));Oe.prototype._push=function(e,n,r){return this.tail=this.tail.next=new gf(e,n,r),this.len+=n,this};function Gb(t,e,n){e[n]=t&255}function _oe(t,e,n){for(;t>127;)e[n++]=t&127|128,t>>>=7;e[n]=t}function qb(t,e){this.len=t,this.next=void 0,this.val=e}qb.prototype=Object.create(gf.prototype);qb.prototype.fn=_oe;Oe.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new qb((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Oe.prototype.int32=function(e){return e<0?this._push(Hb,10,uI.fromNumber(e)):this.uint32(e)};Oe.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Hb(t,e,n){for(;t.hi;)e[n++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=t.lo&127|128,t.lo=t.lo>>>7;e[n++]=t.lo}Oe.prototype.uint64=function(e){var n=uI.from(e);return this._push(Hb,n.length(),n)};Oe.prototype.int64=Oe.prototype.uint64;Oe.prototype.sint64=function(e){var n=uI.from(e).zzEncode();return this._push(Hb,n.length(),n)};Oe.prototype.bool=function(e){return this._push(Gb,1,e?1:0)};function Pb(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Oe.prototype.fixed32=function(e){return this._push(Pb,4,e>>>0)};Oe.prototype.sfixed32=Oe.prototype.fixed32;Oe.prototype.fixed64=function(e){var n=uI.from(e);return this._push(Pb,4,n.lo)._push(Pb,4,n.hi)};Oe.prototype.sfixed64=Oe.prototype.fixed64;Oe.prototype.float=function(e){return this._push(Bi.float.writeFloatLE,4,e)};Oe.prototype.double=function(e){return this._push(Bi.float.writeDoubleLE,8,e)};var voe=Bi.Array.prototype.set?function(e,n,r){n.set(e,r)}:function(e,n,r){for(var i=0;i<e.length;++i)n[r+i]=e[i]};Oe.prototype.bytes=function(e){var n=e.length>>>0;if(!n)return this._push(Gb,1,0);if(Bi.isString(e)){var r=Oe.alloc(n=kq.length(e));kq.decode(e,r,0),e=r}return this.uint32(n)._push(voe,n,e)};Oe.prototype.string=function(e){var n=Nq.length(e);return n?this.uint32(n)._push(Nq.write,n,e):this._push(Gb,1,0)};Oe.prototype.fork=function(){return this.states=new woe(this),this.head=this.tail=new gf(Vb,0,0),this.len=0,this};Oe.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new gf(Vb,0,0),this.len=0),this};Oe.prototype.ldelim=function(){var e=this.head,n=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=n,this.len+=r),this};Oe.prototype.finish=function(){for(var e=this.head.next,n=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,n,r),r+=e.len,e=e.next;return n};Oe._configure=function(t){Ub=t,Oe.create=Fq(),Ub._configure()}});var Oq=C((GNe,Lq)=>{"use strict";Lq.exports=Ns;var xq=hI();(Ns.prototype=Object.create(xq.prototype)).constructor=Ns;var va=ks();function Ns(){xq.call(this)}Ns._configure=function(){Ns.alloc=va._Buffer_allocUnsafe,Ns.writeBytesBuffer=va.Buffer&&va.Buffer.prototype instanceof Uint8Array&&va.Buffer.prototype.set.name==="set"?function(e,n,r){n.set(e,r)}:function(e,n,r){if(e.copy)e.copy(n,r,0,e.length);else for(var i=0;i<e.length;)n[r++]=e[i++]}};Ns.prototype.bytes=function(e){va.isString(e)&&(e=va._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(Ns.writeBytesBuffer,n,e),this};function Soe(t,e,n){t.length<40?va.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}Ns.prototype.string=function(e){var n=va.Buffer.byteLength(e);return this.uint32(n),n&&this._push(Soe,n,e),this};Ns._configure()});var gI=C((qNe,qq)=>{"use strict";qq.exports=Yt;var Wi=ks(),Jb,Vq=Wi.LongBits,boe=Wi.utf8;function zi(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Yt(t){this.buf=t,this.pos=0,this.len=t.length}var Uq=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Yt(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Yt(e);throw Error("illegal buffer")},Gq=function(){return Wi.Buffer?function(n){return(Yt.create=function(i){return Wi.Buffer.isBuffer(i)?new Jb(i):Uq(i)})(n)}:Uq};Yt.create=Gq();Yt.prototype._slice=Wi.Array.prototype.subarray||Wi.Array.prototype.slice;Yt.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,zi(this,10);return e}}();Yt.prototype.int32=function(){return this.uint32()|0};Yt.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Yb(){var t=new Vq(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw zi(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw zi(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Yt.prototype.bool=function(){return this.uint32()!==0};function dI(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Yt.prototype.fixed32=function(){if(this.pos+4>this.len)throw zi(this,4);return dI(this.buf,this.pos+=4)};Yt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw zi(this,4);return dI(this.buf,this.pos+=4)|0};function Pq(){if(this.pos+8>this.len)throw zi(this,8);return new Vq(dI(this.buf,this.pos+=4),dI(this.buf,this.pos+=4))}Yt.prototype.float=function(){if(this.pos+4>this.len)throw zi(this,4);var e=Wi.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Yt.prototype.double=function(){if(this.pos+8>this.len)throw zi(this,4);var e=Wi.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Yt.prototype.bytes=function(){var e=this.uint32(),n=this.pos,r=this.pos+e;if(r>this.len)throw zi(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(n,r);if(n===r){var i=Wi.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,n,r)};Yt.prototype.string=function(){var e=this.bytes();return boe.read(e,0,e.length)};Yt.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw zi(this,e);this.pos+=e}else do if(this.pos>=this.len)throw zi(this);while(this.buf[this.pos++]&128);return this};Yt.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Yt._configure=function(t){Jb=t,Yt.create=Gq(),Jb._configure();var e=Wi.Long?"toLong":"toNumber";Wi.merge(Yt.prototype,{int64:function(){return Yb.call(this)[e](!1)},uint64:function(){return Yb.call(this)[e](!0)},sint64:function(){return Yb.call(this).zzDecode()[e](!1)},fixed64:function(){return Pq.call(this)[e](!0)},sfixed64:function(){return Pq.call(this)[e](!1)}})}});var Wq=C((HNe,Jq)=>{"use strict";Jq.exports=rl;var Yq=gI();(rl.prototype=Object.create(Yq.prototype)).constructor=rl;var Hq=ks();function rl(t){Yq.call(this,t)}rl._configure=function(){Hq.Buffer&&(rl.prototype._slice=Hq.Buffer.prototype.slice)};rl.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};rl._configure()});var jq=C((YNe,zq)=>{"use strict";zq.exports=ff;var Wb=ks();(ff.prototype=Object.create(Wb.EventEmitter.prototype)).constructor=ff;function ff(t,e,n){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Wb.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!n}ff.prototype.rpcCall=function t(e,n,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return Wb.asPromise(t,o,e,n,r,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,n[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(A,l){if(A)return o.emit("error",A,e),s(A);if(l===null){o.end(!0);return}if(!(l instanceof r))try{l=r[o.responseDelimited?"decodeDelimited":"decode"](l)}catch(c){return o.emit("error",c,e),s(c)}return o.emit("data",l,e),s(null,l)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};ff.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var zb=C(Kq=>{"use strict";var Doe=Kq;Doe.Service=jq()});var jb=C((WNe,Xq)=>{"use strict";Xq.exports={}});var eH=C($q=>{"use strict";var _r=$q;_r.build="minimal";_r.Writer=hI();_r.BufferWriter=Oq();_r.Reader=gI();_r.BufferReader=Wq();_r.util=ks();_r.rpc=zb();_r.roots=jb();_r.configure=Zq;function Zq(){_r.util._configure(),_r.Writer._configure(_r.BufferWriter),_r.Reader._configure(_r.BufferReader)}Zq()});var nH=C((jNe,tH)=>{"use strict";tH.exports=Kb;function Kb(t,e){typeof t=="string"&&(e=t,t=void 0);var n=[];function r(s){if(typeof s!="string"){var o=i();if(Kb.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),A=new Array(a.length+1),l=new Array(a.length),c=0;c<a.length;)A[c]=a[c],l[c]=s[a[c++]];return A[c]=o,Function.apply(null,A).apply(null,l)}return Function(o)()}for(var u=new Array(arguments.length-1),h=0;h<u.length;)u[h]=arguments[++h];if(h=0,s=s.replace(/%([%dfijs])/g,function(g,f){var m=u[h++];switch(f){case"d":case"f":return String(Number(m));case"i":return String(Math.floor(m));case"j":return JSON.stringify(m);case"s":return String(m)}return"%"}),h!==u.length)throw Error("parameter count mismatch");return n.push(s),r}function i(s){return"function "+(s||e||"")+"("+(t&&t.join(",")||"")+`){
  `+n.join(`
  `)+`
}`}return r.toString=i,r}Kb.verbose=!1});var iH=C((KNe,rH)=>{"use strict";rH.exports=pf;var Roe=Mb(),Toe=xb(),Xb=Toe("fs");function pf(t,e,n){return typeof e=="function"?(n=e,e={}):e||(e={}),n?!e.xhr&&Xb&&Xb.readFile?Xb.readFile(t,function(i,s){return i&&typeof XMLHttpRequest<"u"?pf.xhr(t,e,n):i?n(i):n(null,e.binary?s:s.toString("utf8"))}):pf.xhr(t,e,n):Roe(pf,this,t,e)}pf.xhr=function(e,n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){if(i.status!==0&&i.status!==200)return r(Error("status "+i.status));if(n.binary){var o=i.response;if(!o){o=[];for(var a=0;a<i.responseText.length;++a)o.push(i.responseText.charCodeAt(a)&255)}return r(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return r(null,i.responseText)}},n.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}});var aH=C(oH=>{"use strict";var $b=oH,sH=$b.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},Zb=$b.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var n=e.split("/"),r=sH(e),i="";r&&(i=n.shift()+"/");for(var s=0;s<n.length;)n[s]===".."?s>0&&n[s-1]!==".."?n.splice(--s,2):r?n.splice(s,1):++s:n[s]==="."?n.splice(s,1):++s;return i+n.join("/")};$b.resolve=function(e,n,r){return r||(n=Zb(n)),sH(n)?n:(r||(e=Zb(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Zb(e+"/"+n):n)}});var il=C(AH=>{"use strict";var Ef=AH,koe=Cn(),Noe=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function mf(t,e){var n=0,r={};for(e|=0;n<t.length;)r[Noe[n+e]]=t[n++];return r}Ef.basic=mf([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Ef.defaults=mf([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",koe.emptyArray,null]);Ef.long=mf([0,0,0,1,1],7);Ef.mapKey=mf([0,0,0,5,5,0,0,0,1,1,0,2],2);Ef.packed=mf([1,5,0,0,0,5,5,0,0,0,1,1,0])});var Sa=C(($Ne,uH)=>{"use strict";uH.exports=Qi;var fI=sl();((Qi.prototype=Object.create(fI.prototype)).constructor=Qi).className="Field";var lH=ji(),cH=il(),en=Cn(),eD,Foe=/^required|optional|repeated$/;Qi.fromJSON=function(e,n){return new Qi(e,n.id,n.type,n.rule,n.extend,n.options,n.comment)};function Qi(t,e,n,r,i,s,o){if(en.isObject(r)?(o=i,s=r,r=i=void 0):en.isObject(i)&&(o=s,s=i,i=void 0),fI.call(this,t,s),!en.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!en.isString(n))throw TypeError("type must be a string");if(r!==void 0&&!Foe.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!en.isString(i))throw TypeError("extend must be a string");r==="proto3_optional"&&(r="optional"),this.rule=r&&r!=="optional"?r:void 0,this.type=n,this.id=e,this.extend=i||void 0,this.required=r==="required",this.optional=!this.required,this.repeated=r==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=en.Long?cH.long[n]!==void 0:!1,this.bytes=n==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=o}Object.defineProperty(Qi.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Qi.prototype.setOption=function(e,n,r){return e==="packed"&&(this._packed=null),fI.prototype.setOption.call(this,e,n,r)};Qi.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return en.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:void 0])};Qi.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=cH.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof eD?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof lH&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof lH))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=en.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;en.base64.test(this.typeDefault)?en.base64.decode(this.typeDefault,e=en.newBuffer(en.base64.length(this.typeDefault)),0):en.utf8.write(this.typeDefault,e=en.newBuffer(en.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=en.emptyObject:this.repeated?this.defaultValue=en.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof eD&&(this.parent.ctor.prototype[this.name]=this.defaultValue),fI.prototype.resolve.call(this)};Qi.d=function(e,n,r,i){return typeof n=="function"?n=en.decorateType(n).name:n&&typeof n=="object"&&(n=en.decorateEnum(n).name),function(o,a){en.decorateType(o.constructor).add(new Qi(a,e,n,r,{default:i}))}};Qi._configure=function(e){eD=e}});var fu=C((eFe,gH)=>{"use strict";gH.exports=wi;var EI=sl();((wi.prototype=Object.create(EI.prototype)).constructor=wi).className="OneOf";var hH=Sa(),pI=Cn();function wi(t,e,n,r){if(Array.isArray(e)||(n=e,e=void 0),EI.call(this,t,n),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=r}wi.fromJSON=function(e,n){return new wi(e,n.oneof,n.options,n.comment)};wi.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return pI.toObject(["options",this.options,"oneof",this.oneof,"comment",n?this.comment:void 0])};function dH(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}wi.prototype.add=function(e){if(!(e instanceof hH))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,dH(this),this};wi.prototype.remove=function(e){if(!(e instanceof hH))throw TypeError("field must be a Field");var n=this.fieldsArray.indexOf(e);if(n<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(n,1),n=this.oneof.indexOf(e.name),n>-1&&this.oneof.splice(n,1),e.partOf=null,this};wi.prototype.onAdd=function(e){EI.prototype.onAdd.call(this,e);for(var n=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=n,n.fieldsArray.push(i))}dH(this)};wi.prototype.onRemove=function(e){for(var n=0,r;n<this.fieldsArray.length;++n)(r=this.fieldsArray[n]).parent&&r.parent.remove(r);EI.prototype.onRemove.call(this,e)};wi.d=function(){for(var e=new Array(arguments.length),n=0;n<arguments.length;)e[n]=arguments[n++];return function(i,s){pI.decorateType(i.constructor).add(new wi(s,e)),Object.defineProperty(i,s,{get:pI.oneOfGetter(e),set:pI.oneOfSetter(e)})}}});var mu=C((tFe,mH)=>{"use strict";mH.exports=He;var tD=sl();((He.prototype=Object.create(tD.prototype)).constructor=He).className="Namespace";var fH=Sa(),mI=Cn(),Moe=fu(),pu,Cf,Eu;He.fromJSON=function(e,n){return new He(e,n.options).addJSON(n.nested)};function pH(t,e){if(t&&t.length){for(var n={},r=0;r<t.length;++r)n[t[r].name]=t[r].toJSON(e);return n}}He.arrayToJSON=pH;He.isReservedId=function(e,n){if(e){for(var r=0;r<e.length;++r)if(typeof e[r]!="string"&&e[r][0]<=n&&e[r][1]>n)return!0}return!1};He.isReservedName=function(e,n){if(e){for(var r=0;r<e.length;++r)if(e[r]===n)return!0}return!1};function He(t,e){tD.call(this,t,e),this.nested=void 0,this._nestedArray=null}function EH(t){return t._nestedArray=null,t}Object.defineProperty(He.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=mI.toArray(this.nested))}});He.prototype.toJSON=function(e){return mI.toObject(["options",this.options,"nested",pH(this.nestedArray,e)])};He.prototype.addJSON=function(e){var n=this;if(e)for(var r=Object.keys(e),i=0,s;i<r.length;++i)s=e[r[i]],n.add((s.fields!==void 0?pu.fromJSON:s.values!==void 0?Eu.fromJSON:s.methods!==void 0?Cf.fromJSON:s.id!==void 0?fH.fromJSON:He.fromJSON)(r[i],s));return this};He.prototype.get=function(e){return this.nested&&this.nested[e]||null};He.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Eu)return this.nested[e].values;throw Error("no such enum: "+e)};He.prototype.add=function(e){if(!(e instanceof fH&&e.extend!==void 0||e instanceof pu||e instanceof Moe||e instanceof Eu||e instanceof Cf||e instanceof He))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var n=this.get(e.name);if(n)if(n instanceof He&&e instanceof He&&!(n instanceof pu||n instanceof Cf)){for(var r=n.nestedArray,i=0;i<r.length;++i)e.add(r[i]);this.remove(n),this.nested||(this.nested={}),e.setOptions(n.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),EH(this)};He.prototype.remove=function(e){if(!(e instanceof tD))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),EH(this)};He.prototype.define=function(e,n){if(mI.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var r=this;e.length>0;){var i=e.shift();if(r.nested&&r.nested[i]){if(r=r.nested[i],!(r instanceof He))throw Error("path conflicts with non-namespace objects")}else r.add(r=new He(i))}return n&&r.addJSON(n),r};He.prototype.resolveAll=function(){for(var e=this.nestedArray,n=0;n<e.length;)e[n]instanceof He?e[n++].resolveAll():e[n++].resolve();return this.resolve()};He.prototype.lookup=function(e,n,r){if(typeof n=="boolean"?(r=n,n=void 0):n&&!Array.isArray(n)&&(n=[n]),mI.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),n);var i=this.get(e[0]);if(i){if(e.length===1){if(!n||n.indexOf(i.constructor)>-1)return i}else if(i instanceof He&&(i=i.lookup(e.slice(1),n,!0)))return i}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof He&&(i=this._nestedArray[s].lookup(e,n,!0)))return i;return this.parent===null||r?null:this.parent.lookup(e,n)};He.prototype.lookupType=function(e){var n=this.lookup(e,[pu]);if(!n)throw Error("no such type: "+e);return n};He.prototype.lookupEnum=function(e){var n=this.lookup(e,[Eu]);if(!n)throw Error("no such Enum '"+e+"' in "+this);return n};He.prototype.lookupTypeOrEnum=function(e){var n=this.lookup(e,[pu,Eu]);if(!n)throw Error("no such Type or Enum '"+e+"' in "+this);return n};He.prototype.lookupService=function(e){var n=this.lookup(e,[Cf]);if(!n)throw Error("no such Service '"+e+"' in "+this);return n};He._configure=function(t,e,n){pu=t,Cf=e,Eu=n}});var CI=C((nFe,CH)=>{"use strict";CH.exports=Io;var nD=Sa();((Io.prototype=Object.create(nD.prototype)).constructor=Io).className="MapField";var xoe=il(),If=Cn();function Io(t,e,n,r,i,s){if(nD.call(this,t,e,r,void 0,void 0,i,s),!If.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}Io.fromJSON=function(e,n){return new Io(e,n.id,n.keyType,n.type,n.options,n.comment)};Io.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return If.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:void 0])};Io.prototype.resolve=function(){if(this.resolved)return this;if(xoe.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return nD.prototype.resolve.call(this)};Io.d=function(e,n,r){return typeof r=="function"?r=If.decorateType(r).name:r&&typeof r=="object"&&(r=If.decorateEnum(r).name),function(s,o){If.decorateType(s.constructor).add(new Io(o,e,n,r))}}});var II=C((rFe,IH)=>{"use strict";IH.exports=ol;var rD=sl();((ol.prototype=Object.create(rD.prototype)).constructor=ol).className="Method";var Cu=Cn();function ol(t,e,n,r,i,s,o,a,A){if(Cu.isObject(i)?(o=i,i=s=void 0):Cu.isObject(s)&&(o=s,s=void 0),!(e===void 0||Cu.isString(e)))throw TypeError("type must be a string");if(!Cu.isString(n))throw TypeError("requestType must be a string");if(!Cu.isString(r))throw TypeError("responseType must be a string");rD.call(this,t,o),this.type=e||"rpc",this.requestType=n,this.requestStream=i?!0:void 0,this.responseType=r,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=A}ol.fromJSON=function(e,n){return new ol(e,n.type,n.requestType,n.responseType,n.requestStream,n.responseStream,n.options,n.comment,n.parsedOptions)};ol.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return Cu.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",n?this.comment:void 0,"parsedOptions",this.parsedOptions])};ol.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),rD.prototype.resolve.call(this))}});var yI=C((iFe,BH)=>{"use strict";BH.exports=_i;var ba=mu();((_i.prototype=Object.create(ba.prototype)).constructor=_i).className="Service";var iD=II(),yf=Cn(),Loe=zb();function _i(t,e){ba.call(this,t,e),this.methods={},this._methodsArray=null}_i.fromJSON=function(e,n){var r=new _i(e,n.options);if(n.methods)for(var i=Object.keys(n.methods),s=0;s<i.length;++s)r.add(iD.fromJSON(i[s],n.methods[i[s]]));return n.nested&&r.addJSON(n.nested),r.comment=n.comment,r};_i.prototype.toJSON=function(e){var n=ba.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return yf.toObject(["options",n&&n.options||void 0,"methods",ba.arrayToJSON(this.methodsArray,e)||{},"nested",n&&n.nested||void 0,"comment",r?this.comment:void 0])};Object.defineProperty(_i.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=yf.toArray(this.methods))}});function yH(t){return t._methodsArray=null,t}_i.prototype.get=function(e){return this.methods[e]||ba.prototype.get.call(this,e)};_i.prototype.resolveAll=function(){for(var e=this.methodsArray,n=0;n<e.length;++n)e[n].resolve();return ba.prototype.resolve.call(this)};_i.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof iD?(this.methods[e.name]=e,e.parent=this,yH(this)):ba.prototype.add.call(this,e)};_i.prototype.remove=function(e){if(e instanceof iD){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,yH(this)}return ba.prototype.remove.call(this,e)};_i.prototype.create=function(e,n,r){for(var i=new Loe.Service(e,n,r),s=0,o;s<this.methodsArray.length;++s){var a=yf.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[a]=yf.codegen(["r","c"],yf.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var BI=C((sFe,QH)=>{"use strict";QH.exports=Fs;var Ooe=ks();function Fs(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)this[e[n]]=t[e[n]]}Fs.create=function(e){return this.$type.create(e)};Fs.encode=function(e,n){return this.$type.encode(e,n)};Fs.encodeDelimited=function(e,n){return this.$type.encodeDelimited(e,n)};Fs.decode=function(e){return this.$type.decode(e)};Fs.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Fs.verify=function(e){return this.$type.verify(e)};Fs.fromObject=function(e){return this.$type.fromObject(e)};Fs.toObject=function(e,n){return this.$type.toObject(e,n)};Fs.prototype.toJSON=function(){return this.$type.toObject(this,Ooe.toJSONOptions)}});var sD=C((oFe,_H)=>{"use strict";_H.exports=Voe;var Uoe=ji(),yo=il(),wH=Cn();function Poe(t){return"missing required '"+t.name+"'"}function Voe(t){var e=wH.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var n=0;n<t.fieldsArray.length;++n){var r=t._fieldsArray[n].resolve(),i=r.resolvedType instanceof Uoe?"int32":r.type,s="m"+wH.safeProp(r.name);e("case %i: {",r.id),r.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),yo.defaults[r.keyType]!==void 0?e("k=%j",yo.defaults[r.keyType]):e("k=null"),yo.defaults[i]!==void 0?e("value=%j",yo.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),yo.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",n):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),yo.long[r.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):r.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),yo.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),yo.basic[i]===void 0?e(r.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,n):e("%s.push(r.%s())",s,i)):yo.basic[i]===void 0?e(r.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,n):e("%s=r.%s()",s,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<t._fieldsArray.length;++n){var o=t._fieldsArray[n];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",Poe(o))}return e("return m")}});var AD=C((aFe,vH)=>{"use strict";vH.exports=Hoe;var Goe=ji(),oD=Cn();function vi(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function aD(t,e,n,r){if(e.resolvedType)if(e.resolvedType instanceof Goe){t("switch(%s){",r)("default:")("return%j",vi(e,"enum value"));for(var i=Object.keys(e.resolvedType.values),s=0;s<i.length;++s)t("case %i:",e.resolvedType.values[i[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",n,r)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",r)("return%j",vi(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",vi(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',r)("return%j",vi(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',r)("return%j",vi(e,"boolean"));break;case"string":t("if(!util.isString(%s))",r)("return%j",vi(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",vi(e,"buffer"));break}return t}function qoe(t,e,n){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",n)("return%j",vi(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",n)("return%j",vi(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",n)("return%j",vi(e,"boolean key"));break}return t}function Hoe(t){var e=oD.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=t.oneofsArray,r={};n.length&&e("var p={}");for(var i=0;i<t.fieldsArray.length;++i){var s=t._fieldsArray[i].resolve(),o="m"+oD.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",vi(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),qoe(e,s,"k[i]"),aD(e,s,i,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",vi(s,"array"))("for(var i=0;i<%s.length;++i){",o),aD(e,s,i,o+"[i]")("}");else{if(s.partOf){var a=oD.safeProp(s.partOf.name);r[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),r[s.partOf.name]=1,e("p%s=1",a)}aD(e,s,i,o)}s.optional&&e("}")}return e("return null")}});var uD=C(bH=>{"use strict";var SH=bH,Bf=ji(),Ms=Cn();function lD(t,e,n,r){var i=!1;if(e.resolvedType)if(e.resolvedType instanceof Bf){t("switch(d%s){",r);for(var s=e.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===e.typeDefault&&!i&&(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),e.repeated||t("break"),i=!0),t("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",r,s[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var A=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",r,r);break;case"uint64":A=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,A)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,A?"true":"");break;case"bytes":t('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":t("m%s=String(d%s)",r,r);break;case"bool":t("m%s=Boolean(d%s)",r,r);break}}return t}SH.fromObject=function(e){var n=e.fieldsArray,r=Ms.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!n.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<n.length;++i){var s=n[i].resolve(),o=Ms.safeProp(s.name);s.map?(r("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),lD(r,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),lD(r,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof Bf||r("if(d%s!=null){",o),lD(r,s,i,o),s.resolvedType instanceof Bf||r("}"))}return r("return m")};function cD(t,e,n,r){if(e.resolvedType)e.resolvedType instanceof Bf?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,n,r,r,n,r,r):t("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var i=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:t("d%s=m%s",r,r);break}}return t}SH.toObject=function(e){var n=e.fieldsArray.slice().sort(Ms.compareFieldsById);if(!n.length)return Ms.codegen()("return {}");for(var r=Ms.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],a=0;a<n.length;++a)n[a].partOf||(n[a].resolve().repeated?i:n[a].map?s:o).push(n[a]);if(i.length){for(r("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)r("d%s=[]",Ms.safeProp(i[a].name));r("}")}if(s.length){for(r("if(o.objects||o.defaults){"),a=0;a<s.length;++a)r("d%s={}",Ms.safeProp(s[a].name));r("}")}if(o.length){for(r("if(o.defaults){"),a=0;a<o.length;++a){var A=o[a],l=Ms.safeProp(A.name);if(A.resolvedType instanceof Bf)r("d%s=o.enums===String?%j:%j",l,A.resolvedType.valuesById[A.typeDefault],A.typeDefault);else if(A.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",A.typeDefault.low,A.typeDefault.high,A.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,A.typeDefault.toString(),A.typeDefault.toNumber());else if(A.bytes){var c="["+Array.prototype.slice.call(A.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,A.typeDefault))("else{")("d%s=%s",l,c)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else r("d%s=%j",l,A.typeDefault)}r("}")}var u=!1;for(a=0;a<n.length;++a){var A=n[a],h=e._fieldsArray.indexOf(A),l=Ms.safeProp(A.name);A.map?(u||(u=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),cD(r,A,h,l+"[ks2[j]]")("}")):A.repeated?(r("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),cD(r,A,h,l+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",l,A.name),cD(r,A,h,l),A.partOf&&r("if(o.oneofs)")("d%s=%j",Ms.safeProp(A.partOf.name),A.name)),r("}")}return r("return d")}});var hD=C(DH=>{"use strict";var Yoe=DH,Joe=BI();Yoe[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),n=this.lookup(e);if(n){var r=t["@type"].charAt(0)==="."?t["@type"].slice(1):t["@type"];return r.indexOf("/")===-1&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var n="type.googleapis.com/",r="",i="";if(e&&e.json&&t.type_url&&t.value){i=t.type_url.substring(t.type_url.lastIndexOf("/")+1),r=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(t=s.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof Joe){var o=t.$type.toObject(t,e),a=t.$type.fullName[0]==="."?t.$type.fullName.slice(1):t.$type.fullName;return r===""&&(r=n),i=r+a,o["@type"]=i,o}return this.toObject(t,e)}}});var _I=C((cFe,TH)=>{"use strict";TH.exports=At;var Ki=mu();((At.prototype=Object.create(Ki.prototype)).constructor=At).className="Type";var Woe=ji(),fD=fu(),QI=Sa(),zoe=CI(),joe=yI(),dD=BI(),gD=gI(),Koe=hI(),Yn=Cn(),Xoe=pD(),Zoe=sD(),$oe=AD(),RH=uD(),eae=hD();function At(t,e){Ki.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(At.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var n=this.fields[t[e]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Yn.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Yn.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=At.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof dD||((t.prototype=new dD).constructor=t,Yn.merge(t.prototype,e)),t.$type=t.prototype.$type=this,Yn.merge(t,dD,!0),this._ctor=t;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:Yn.oneOfGetter(this._oneofsArray[n].oneof),set:Yn.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(t.prototype,r)}}});At.generateConstructor=function(e){for(var n=Yn.codegen(["p"],e.name),r=0,i;r<e.fieldsArray.length;++r)(i=e._fieldsArray[r]).map?n("this%s={}",Yn.safeProp(i.name)):i.repeated&&n("this%s=[]",Yn.safeProp(i.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function wI(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}At.fromJSON=function(e,n){var r=new At(e,n.options);r.extensions=n.extensions,r.reserved=n.reserved;for(var i=Object.keys(n.fields),s=0;s<i.length;++s)r.add((typeof n.fields[i[s]].keyType<"u"?zoe.fromJSON:QI.fromJSON)(i[s],n.fields[i[s]]));if(n.oneofs)for(i=Object.keys(n.oneofs),s=0;s<i.length;++s)r.add(fD.fromJSON(i[s],n.oneofs[i[s]]));if(n.nested)for(i=Object.keys(n.nested),s=0;s<i.length;++s){var o=n.nested[i[s]];r.add((o.id!==void 0?QI.fromJSON:o.fields!==void 0?At.fromJSON:o.values!==void 0?Woe.fromJSON:o.methods!==void 0?joe.fromJSON:Ki.fromJSON)(i[s],o))}return n.extensions&&n.extensions.length&&(r.extensions=n.extensions),n.reserved&&n.reserved.length&&(r.reserved=n.reserved),n.group&&(r.group=!0),n.comment&&(r.comment=n.comment),r};At.prototype.toJSON=function(e){var n=Ki.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return Yn.toObject(["options",n&&n.options||void 0,"oneofs",Ki.arrayToJSON(this.oneofsArray,e),"fields",Ki.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",n&&n.nested||void 0,"comment",r?this.comment:void 0])};At.prototype.resolveAll=function(){for(var e=this.fieldsArray,n=0;n<e.length;)e[n++].resolve();var r=this.oneofsArray;for(n=0;n<r.length;)r[n++].resolve();return Ki.prototype.resolveAll.call(this)};At.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};At.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof QI&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),wI(this)}return e instanceof fD?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),wI(this)):Ki.prototype.add.call(this,e)};At.prototype.remove=function(e){if(e instanceof QI&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),wI(this)}if(e instanceof fD){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),wI(this)}return Ki.prototype.remove.call(this,e)};At.prototype.isReservedId=function(e){return Ki.isReservedId(this.reserved,e)};At.prototype.isReservedName=function(e){return Ki.isReservedName(this.reserved,e)};At.prototype.create=function(e){return new this.ctor(e)};At.prototype.setup=function(){for(var e=this.fullName,n=[],r=0;r<this.fieldsArray.length;++r)n.push(this._fieldsArray[r].resolve().resolvedType);this.encode=Xoe(this)({Writer:Koe,types:n,util:Yn}),this.decode=Zoe(this)({Reader:gD,types:n,util:Yn}),this.verify=$oe(this)({types:n,util:Yn}),this.fromObject=RH.fromObject(this)({types:n,util:Yn}),this.toObject=RH.toObject(this)({types:n,util:Yn});var i=eae[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};At.prototype.encode=function(e,n){return this.setup().encode(e,n)};At.prototype.encodeDelimited=function(e,n){return this.encode(e,n&&n.len?n.fork():n).ldelim()};At.prototype.decode=function(e,n){return this.setup().decode(e,n)};At.prototype.decodeDelimited=function(e){return e instanceof gD||(e=gD.create(e)),this.decode(e,e.uint32())};At.prototype.verify=function(e){return this.setup().verify(e)};At.prototype.fromObject=function(e){return this.setup().fromObject(e)};At.prototype.toObject=function(e,n){return this.setup().toObject(e,n)};At.d=function(e){return function(r){Yn.decorateType(r,e)}}});var bI=C((uFe,xH)=>{"use strict";xH.exports=Jr;var SI=mu();((Jr.prototype=Object.create(SI.prototype)).constructor=Jr).className="Root";var mD=Sa(),NH=ji(),tae=fu(),Da=Cn(),FH,ED,Qf;function Jr(t){SI.call(this,"",t),this.deferred=[],this.files=[]}Jr.fromJSON=function(e,n){return n||(n=new Jr),e.options&&n.setOptions(e.options),n.addJSON(e.nested)};Jr.prototype.resolvePath=Da.path.resolve;Jr.prototype.fetch=Da.fetch;function MH(){}Jr.prototype.load=function t(e,n,r){typeof n=="function"&&(r=n,n=void 0);var i=this;if(!r)return Da.asPromise(t,i,e,n);var s=r===MH;function o(d,g){if(r){if(s)throw d;var f=r;r=null,f(d,g)}}function a(d){var g=d.lastIndexOf("google/protobuf/");if(g>-1){var f=d.substring(g);if(f in Qf)return f}return null}function A(d,g){try{if(Da.isString(g)&&g.charAt(0)==="{"&&(g=JSON.parse(g)),!Da.isString(g))i.setOptions(g.options).addJSON(g.nested);else{ED.filename=d;var f=ED(g,i,n),m,y=0;if(f.imports)for(;y<f.imports.length;++y)(m=a(f.imports[y])||i.resolvePath(d,f.imports[y]))&&l(m);if(f.weakImports)for(y=0;y<f.weakImports.length;++y)(m=a(f.weakImports[y])||i.resolvePath(d,f.weakImports[y]))&&l(m,!0)}}catch(I){o(I)}!s&&!c&&o(null,i)}function l(d,g){if(d=a(d)||d,!(i.files.indexOf(d)>-1)){if(i.files.push(d),d in Qf){s?A(d,Qf[d]):(++c,setTimeout(function(){--c,A(d,Qf[d])}));return}if(s){var f;try{f=Da.fs.readFileSync(d).toString("utf8")}catch(m){g||o(m);return}A(d,f)}else++c,i.fetch(d,function(m,y){if(--c,!!r){if(m){g?c||o(null,i):o(m);return}A(d,y)}})}}var c=0;Da.isString(e)&&(e=[e]);for(var u=0,h;u<e.length;++u)(h=i.resolvePath("",e[u]))&&l(h);if(s)return i;c||o(null,i)};Jr.prototype.loadSync=function(e,n){if(!Da.isNode)throw Error("not supported");return this.load(e,n,MH)};Jr.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return SI.prototype.resolveAll.call(this)};var vI=/^[A-Z]/;function kH(t,e){var n=e.parent.lookup(e.extend);if(n){var r=new mD(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.get(r.name)||(r.declaringField=e,e.extensionField=r,n.add(r)),!0}return!1}Jr.prototype._handleAdd=function(e){if(e instanceof mD)e.extend!==void 0&&!e.extensionField&&(kH(this,e)||this.deferred.push(e));else if(e instanceof NH)vI.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof tae)){if(e instanceof FH)for(var n=0;n<this.deferred.length;)kH(this,this.deferred[n])?this.deferred.splice(n,1):++n;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);vI.test(e.name)&&(e.parent[e.name]=e)}};Jr.prototype._handleRemove=function(e){if(e instanceof mD){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var n=this.deferred.indexOf(e);n>-1&&this.deferred.splice(n,1)}}else if(e instanceof NH)vI.test(e.name)&&delete e.parent[e.name];else if(e instanceof SI){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);vI.test(e.name)&&delete e.parent[e.name]}};Jr._configure=function(t,e,n){FH=t,ED=e,Qf=n}});var Cn=C((hFe,OH)=>{"use strict";var Jt=OH.exports=ks(),LH=jb(),CD,ID;Jt.codegen=nH();Jt.fetch=iH();Jt.path=aH();Jt.fs=Jt.inquire("fs");Jt.toArray=function(e){if(e){for(var n=Object.keys(e),r=new Array(n.length),i=0;i<n.length;)r[i]=e[n[i++]];return r}return[]};Jt.toObject=function(e){for(var n={},r=0;r<e.length;){var i=e[r++],s=e[r++];s!==void 0&&(n[i]=s)}return n};var nae=/\\/g,rae=/"/g;Jt.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};Jt.safeProp=function(e){return!/^[$\w_]+$/.test(e)||Jt.isReserved(e)?'["'+e.replace(nae,"\\\\").replace(rae,'\\"')+'"]':"."+e};Jt.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var iae=/_([a-z])/g;Jt.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(iae,function(n,r){return r.toUpperCase()})};Jt.compareFieldsById=function(e,n){return e.id-n.id};Jt.decorateType=function(e,n){if(e.$type)return n&&e.$type.name!==n&&(Jt.decorateRoot.remove(e.$type),e.$type.name=n,Jt.decorateRoot.add(e.$type)),e.$type;CD||(CD=_I());var r=new CD(n||e.name);return Jt.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var sae=0;Jt.decorateEnum=function(e){if(e.$type)return e.$type;ID||(ID=ji());var n=new ID("Enum"+sae++,e);return Jt.decorateRoot.add(n),Object.defineProperty(e,"$type",{value:n,enumerable:!1}),n};Jt.setProperty=function(e,n,r){function i(s,o,a){var A=o.shift();if(A==="__proto__"||A==="prototype")return s;if(o.length>0)s[A]=i(s[A]||{},o,a);else{var l=s[A];l&&(a=[].concat(l).concat(a)),s[A]=a}return s}if(typeof e!="object")throw TypeError("dst must be an object");if(!n)throw TypeError("path must be specified");return n=n.split("."),i(e,n,r)};Object.defineProperty(Jt,"decorateRoot",{get:function(){return LH.decorated||(LH.decorated=new(bI()))}})});var sl=C((dFe,UH)=>{"use strict";UH.exports=Wr;Wr.className="ReflectionObject";var DI=Cn(),RI;function Wr(t,e){if(!DI.isString(t))throw TypeError("name must be a string");if(e&&!DI.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(Wr.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});Wr.prototype.toJSON=function(){throw Error()};Wr.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var n=e.root;n instanceof RI&&n._handleAdd(this)};Wr.prototype.onRemove=function(e){var n=e.root;n instanceof RI&&n._handleRemove(this),this.parent=null,this.resolved=!1};Wr.prototype.resolve=function(){return this.resolved?this:(this.root instanceof RI&&(this.resolved=!0),this)};Wr.prototype.getOption=function(e){if(this.options)return this.options[e]};Wr.prototype.setOption=function(e,n,r){return(!r||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=n),this};Wr.prototype.setParsedOption=function(e,n,r){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(r){var s=i.find(function(A){return Object.prototype.hasOwnProperty.call(A,e)});if(s){var o=s[e];DI.setProperty(o,r,n)}else s={},s[e]=DI.setProperty({},r,n),i.push(s)}else{var a={};a[e]=n,i.push(a)}return this};Wr.prototype.setOptions=function(e,n){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)this.setOption(r[i],e[r[i]],n);return this};Wr.prototype.toString=function(){var e=this.constructor.className,n=this.fullName;return n.length?e+" "+n:e};Wr._configure=function(t){RI=t}});var ji=C((gFe,GH)=>{"use strict";GH.exports=xs;var PH=sl();((xs.prototype=Object.create(PH.prototype)).constructor=xs).className="Enum";var VH=mu(),TI=Cn();function xs(t,e,n,r,i,s){if(PH.call(this,t,n),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=i||{},this.valuesOptions=s,this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)typeof e[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}xs.fromJSON=function(e,n){var r=new xs(e,n.values,n.options,n.comment,n.comments);return r.reserved=n.reserved,r};xs.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return TI.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",n?this.comment:void 0,"comments",n?this.comments:void 0])};xs.prototype.add=function(e,n,r,i){if(!TI.isString(e))throw TypeError("name must be a string");if(!TI.isInteger(n))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(n))throw Error("id "+n+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[n]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+n+" in "+this);this.values[e]=n}else this.valuesById[this.values[e]=n]=e;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=r||null,this};xs.prototype.remove=function(e){if(!TI.isString(e))throw TypeError("name must be a string");var n=this.values[e];if(n==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[n],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};xs.prototype.isReservedId=function(e){return VH.isReservedId(this.reserved,e)};xs.prototype.isReservedName=function(e){return VH.isReservedName(this.reserved,e)}});var pD=C((fFe,HH)=>{"use strict";HH.exports=aae;var oae=ji(),yD=il(),BD=Cn();function qH(t,e,n,r){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(e.id<<3|2)>>>0)}function aae(t){for(var e=BD.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),n,r,i=t.fieldsArray.slice().sort(BD.compareFieldsById),n=0;n<i.length;++n){var s=i[n].resolve(),o=t._fieldsArray.indexOf(s),a=s.resolvedType instanceof oae?"int32":s.type,A=yD.basic[a];r="m"+BD.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|yD.mapKey[s.keyType],s.keyType),A===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,r):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|A,a,r),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",r,r),s.packed&&yD.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",a,r)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",r),A===void 0?qH(e,s,o,r+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|A)>>>0,a,r)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,s.name),A===void 0?qH(e,s,o,r):e("w.uint32(%i).%s(%s)",(s.id<<3|A)>>>0,a,r))}return e("return w")}});var JH=C((pFe,YH)=>{"use strict";var Me=YH.exports=eH();Me.build="light";function Aae(t,e,n){return typeof e=="function"?(n=e,e=new Me.Root):e||(e=new Me.Root),e.load(t,n)}Me.load=Aae;function lae(t,e){return e||(e=new Me.Root),e.loadSync(t)}Me.loadSync=lae;Me.encoder=pD();Me.decoder=sD();Me.verifier=AD();Me.converter=uD();Me.ReflectionObject=sl();Me.Namespace=mu();Me.Root=bI();Me.Enum=ji();Me.Type=_I();Me.Field=Sa();Me.OneOf=fu();Me.MapField=CI();Me.Service=yI();Me.Method=II();Me.Message=BI();Me.wrappers=hD();Me.types=il();Me.util=Cn();Me.ReflectionObject._configure(Me.Root);Me.Namespace._configure(Me.Type,Me.Service,Me.Enum);Me.Root._configure(Me.Type);Me.Field._configure(Me.Type)});var wD=C((EFe,jH)=>{"use strict";jH.exports=zH;var QD=/[\s{}=;:[\],'"()<>]/g,cae=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,uae=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,hae=/^ *[*/]+ */,dae=/^\s*\*?\/*/,gae=/\n/g,fae=/\s/,pae=/\\(.?)/g,Eae={0:"\0",r:"\r",n:`
`,t:"	"};function WH(t){return t.replace(pae,function(e,n){switch(n){case"\\":case"":return n;default:return Eae[n]||""}})}zH.unescape=WH;function zH(t,e){t=t.toString();var n=0,r=t.length,i=1,s=0,o={},a=[],A=null;function l(_){return Error("illegal "+_+" (line "+i+")")}function c(){var _=A==="'"?uae:cae;_.lastIndex=n-1;var S=_.exec(t);if(!S)throw l("string");return n=_.lastIndex,m(A),A=null,WH(S[1])}function u(_){return t.charAt(_)}function h(_,S,T){var oe={type:t.charAt(_++),lineEmpty:!1,leading:T},Qe;e?Qe=2:Qe=3;var Pe=_-Qe,Re;do if(--Pe<0||(Re=t.charAt(Pe))===`
`){oe.lineEmpty=!0;break}while(Re===" "||Re==="	");for(var b=t.substring(_,S).split(gae),Fe=0;Fe<b.length;++Fe)b[Fe]=b[Fe].replace(e?dae:hae,"").trim();oe.text=b.join(`
`).trim(),o[i]=oe,s=i}function d(_){var S=g(_),T=t.substring(_,S),oe=/^\s*\/\//.test(T);return oe}function g(_){for(var S=_;S<r&&u(S)!==`
`;)S++;return S}function f(){if(a.length>0)return a.shift();if(A)return c();var _,S,T,oe,Qe,Pe=n===0;do{if(n===r)return null;for(_=!1;fae.test(T=u(n));)if(T===`
`&&(Pe=!0,++i),++n===r)return null;if(u(n)==="/"){if(++n===r)throw l("comment");if(u(n)==="/")if(e){if(oe=n,Qe=!1,d(n-1)){Qe=!0;do if(n=g(n),n===r||(n++,!Pe))break;while(d(n))}else n=Math.min(r,g(n)+1);Qe&&(h(oe,n,Pe),Pe=!0),i++,_=!0}else{for(Qe=u(oe=n+1)==="/";u(++n)!==`
`;)if(n===r)return null;++n,Qe&&(h(oe,n-1,Pe),Pe=!0),++i,_=!0}else if((T=u(n))==="*"){oe=n+1,Qe=e||u(oe)==="*";do{if(T===`
`&&++i,++n===r)throw l("comment");S=T,T=u(n)}while(S!=="*"||T!=="/");++n,Qe&&(h(oe,n-2,Pe),Pe=!0),_=!0}else return"/"}}while(_);var Re=n;QD.lastIndex=0;var b=QD.test(u(Re++));if(!b)for(;Re<r&&!QD.test(u(Re));)++Re;var Fe=t.substring(n,n=Re);return(Fe==='"'||Fe==="'")&&(A=Fe),Fe}function m(_){a.push(_)}function y(){if(!a.length){var _=f();if(_===null)return null;m(_)}return a[0]}function I(_,S){var T=y(),oe=T===_;if(oe)return f(),!0;if(!S)throw l("token '"+T+"', '"+_+"' expected");return!1}function w(_){var S=null,T;return _===void 0?(T=o[i-1],delete o[i-1],T&&(e||T.type==="*"||T.lineEmpty)&&(S=T.leading?T.text:null)):(s<_&&y(),T=o[_],delete o[_],T&&!T.lineEmpty&&(e||T.type==="/")&&(S=T.leading?null:T.text)),S}return Object.defineProperty({next:f,peek:y,push:m,skip:I,cmnt:w},"line",{get:function(){return i}})}});var tY=C((mFe,eY)=>{"use strict";eY.exports=Bo;Bo.filename=null;Bo.defaults={keepCase:!1};var mae=wD(),KH=bI(),XH=_I(),ZH=Sa(),Cae=CI(),$H=fu(),Iae=ji(),yae=yI(),Bae=II(),_D=il(),vD=Cn(),Qae=/^[1-9][0-9]*$/,wae=/^-?[1-9][0-9]*$/,_ae=/^0[x][0-9a-fA-F]+$/,vae=/^-?0[x][0-9a-fA-F]+$/,Sae=/^0[0-7]+$/,bae=/^-?0[0-7]+$/,Dae=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,Ls=/^[a-zA-Z_][a-zA-Z_0-9]*$/,Os=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,Rae=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function Bo(t,e,n){e instanceof KH||(n=e,e=new KH),n||(n=Bo.defaults);var r=n.preferTrailingComment||!1,i=mae(t,n.alternateCommentMode||!1),s=i.next,o=i.push,a=i.peek,A=i.skip,l=i.cmnt,c=!0,u,h,d,g,f=!1,m=e,y=n.keepCase?function(k){return k}:vD.camelCase;function I(k,N,V){var re=Bo.filename;return V||(Bo.filename=null),Error("illegal "+(N||"token")+" '"+k+"' ("+(re?re+", ":"")+"line "+i.line+")")}function w(){var k=[],N;do{if((N=s())!=='"'&&N!=="'")throw I(N);k.push(s()),A(N),N=a()}while(N==='"'||N==="'");return k.join("")}function _(k){var N=s();switch(N){case"'":case'"':return o(N),w();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return T(N,!0)}catch{if(k&&Os.test(N))return N;throw I(N,"value")}}function S(k,N){var V,re;do N&&((V=a())==='"'||V==="'")?k.push(w()):k.push([re=oe(s()),A("to",!0)?oe(s()):re]);while(A(",",!0));A(";")}function T(k,N){var V=1;switch(k.charAt(0)==="-"&&(V=-1,k=k.substring(1)),k){case"inf":case"INF":case"Inf":return V*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(Qae.test(k))return V*parseInt(k,10);if(_ae.test(k))return V*parseInt(k,16);if(Sae.test(k))return V*parseInt(k,8);if(Dae.test(k))return V*parseFloat(k);throw I(k,"number",N)}function oe(k,N){switch(k){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!N&&k.charAt(0)==="-")throw I(k,"id");if(wae.test(k))return parseInt(k,10);if(vae.test(k))return parseInt(k,16);if(bae.test(k))return parseInt(k,8);throw I(k,"id")}function Qe(){if(u!==void 0)throw I("package");if(u=s(),!Os.test(u))throw I(u,"name");m=m.define(u),A(";")}function Pe(){var k=a(),N;switch(k){case"weak":N=d||(d=[]),s();break;case"public":s();default:N=h||(h=[]);break}k=w(),A(";"),N.push(k)}function Re(){if(A("="),g=w(),f=g==="proto3",!f&&g!=="proto2")throw I(g,"syntax");A(";")}function b(k,N){switch(N){case"option":return dt(k,N),A(";"),!0;case"message":return R(k,N),!0;case"enum":return et(k,N),!0;case"service":return Zt(k,N),!0;case"extend":return lc(k,N),!0}return!1}function Fe(k,N,V){var re=i.line;if(k&&(typeof k.comment!="string"&&(k.comment=l()),k.filename=Bo.filename),A("{",!0)){for(var te;(te=s())!=="}";)N(te);A(";",!0)}else V&&V(),A(";"),k&&(typeof k.comment!="string"||r)&&(k.comment=l(re)||k.comment)}function R(k,N){if(!Ls.test(N=s()))throw I(N,"type name");var V=new XH(N);Fe(V,function(te){if(!b(V,te))switch(te){case"map":Ie(V,te);break;case"required":case"repeated":p(V,te);break;case"optional":f?p(V,"proto3_optional"):p(V,"optional");break;case"oneof":$e(V,te);break;case"extensions":S(V.extensions||(V.extensions=[]));break;case"reserved":S(V.reserved||(V.reserved=[]),!0);break;default:if(!f||!Os.test(te))throw I(te);o(te),p(V,"optional");break}}),k.add(V)}function p(k,N,V){var re=s();if(re==="group"){U(k,N);return}for(;re.endsWith(".")||a().startsWith(".");)re+=s();if(!Os.test(re))throw I(re,"type");var te=s();if(!Ls.test(te))throw I(te,"name");te=y(te),A("=");var Te=new ZH(te,oe(s()),re,N,V);if(Fe(Te,function(Fr){if(Fr==="option")dt(Te,Fr),A(";");else throw I(Fr)},function(){On(Te)}),N==="proto3_optional"){var vn=new $H("_"+te);Te.setOption("proto3_optional",!0),vn.add(Te),k.add(vn)}else k.add(Te);!f&&Te.repeated&&(_D.packed[re]!==void 0||_D.basic[re]===void 0)&&Te.setOption("packed",!1,!0)}function U(k,N){var V=s();if(!Ls.test(V))throw I(V,"name");var re=vD.lcFirst(V);V===re&&(V=vD.ucFirst(V)),A("=");var te=oe(s()),Te=new XH(V);Te.group=!0;var vn=new ZH(re,te,V,N);vn.filename=Bo.filename,Fe(Te,function(Fr){switch(Fr){case"option":dt(Te,Fr),A(";");break;case"required":case"repeated":p(Te,Fr);break;case"optional":f?p(Te,"proto3_optional"):p(Te,"optional");break;case"message":R(Te,Fr);break;case"enum":et(Te,Fr);break;default:throw I(Fr)}}),k.add(Te).add(vn)}function Ie(k){A("<");var N=s();if(_D.mapKey[N]===void 0)throw I(N,"type");A(",");var V=s();if(!Os.test(V))throw I(V,"type");A(">");var re=s();if(!Ls.test(re))throw I(re,"name");A("=");var te=new Cae(y(re),oe(s()),N,V);Fe(te,function(vn){if(vn==="option")dt(te,vn),A(";");else throw I(vn)},function(){On(te)}),k.add(te)}function $e(k,N){if(!Ls.test(N=s()))throw I(N,"name");var V=new $H(y(N));Fe(V,function(te){te==="option"?(dt(V,te),A(";")):(o(te),p(V,"optional"))}),k.add(V)}function et(k,N){if(!Ls.test(N=s()))throw I(N,"name");var V=new Iae(N);Fe(V,function(te){switch(te){case"option":dt(V,te),A(";");break;case"reserved":S(V.reserved||(V.reserved=[]),!0);break;default:qt(V,te)}}),k.add(V)}function qt(k,N){if(!Ls.test(N))throw I(N,"name");A("=");var V=oe(s(),!0),re={options:void 0};re.setOption=function(te,Te){this.options===void 0&&(this.options={}),this.options[te]=Te},Fe(re,function(Te){if(Te==="option")dt(re,Te),A(";");else throw I(Te)},function(){On(re)}),k.add(N,V,re.comment,re.options)}function dt(k,N){var V=A("(",!0);if(!Os.test(N=s()))throw I(N,"name");var re=N,te=re,Te;V&&(A(")"),re="("+re+")",te=re,N=a(),Rae.test(N)&&(Te=N.slice(1),re+=N,s())),A("=");var vn=$n(k,re);Ft(k,te,vn,Te)}function $n(k,N){if(A("{",!0)){for(var V={};!A("}",!0);){if(!Ls.test(Un=s()))throw I(Un,"name");if(Un===null)throw I(Un,"end of input");var re,te=Un;if(A(":",!0),a()==="{")re=$n(k,N+"."+Un);else if(a()==="["){re=[];var Te;if(A("[",!0)){do Te=_(!0),re.push(Te);while(A(",",!0));A("]"),typeof Te<"u"&&Xt(k,N+"."+Un,Te)}}else re=_(!0),Xt(k,N+"."+Un,re);var vn=V[te];vn&&(re=[].concat(vn).concat(re)),V[te]=re,A(",",!0),A(";",!0)}return V}var zo=_(!0);return Xt(k,N,zo),zo}function Xt(k,N,V){k.setOption&&k.setOption(N,V)}function Ft(k,N,V,re){k.setParsedOption&&k.setParsedOption(N,V,re)}function On(k){if(A("[",!0)){do dt(k,"option");while(A(",",!0));A("]")}return k}function Zt(k,N){if(!Ls.test(N=s()))throw I(N,"service name");var V=new yae(N);Fe(V,function(te){if(!b(V,te))if(te==="rpc")er(V,te);else throw I(te)}),k.add(V)}function er(k,N){var V=l(),re=N;if(!Ls.test(N=s()))throw I(N,"name");var te=N,Te,vn,zo,Fr;if(A("("),A("stream",!0)&&(vn=!0),!Os.test(N=s())||(Te=N,A(")"),A("returns"),A("("),A("stream",!0)&&(Fr=!0),!Os.test(N=s())))throw I(N);zo=N,A(")");var bE=new Bae(te,re,Te,zo,vn,Fr);bE.comment=V,Fe(bE,function(Yw){if(Yw==="option")dt(bE,Yw),A(";");else throw I(Yw)}),k.add(bE)}function lc(k,N){if(!Os.test(N=s()))throw I(N,"reference");var V=N;Fe(null,function(te){switch(te){case"required":case"repeated":p(k,te,V);break;case"optional":f?p(k,"proto3_optional",V):p(k,"optional",V);break;default:if(!f||!Os.test(te))throw I(te);o(te),p(k,"optional",V);break}})}for(var Un;(Un=s())!==null;)switch(Un){case"package":if(!c)throw I(Un);Qe();break;case"import":if(!c)throw I(Un);Pe();break;case"syntax":if(!c)throw I(Un);Re();break;case"option":dt(m,Un),A(";");break;default:if(b(m,Un)){c=!1;continue}throw I(Un)}return Bo.filename=null,{package:u,imports:h,weakImports:d,syntax:g,root:e}}});var iY=C((CFe,rY)=>{"use strict";rY.exports=Xi;var Tae=/\/|\./;function Xi(t,e){Tae.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),Xi[t]=e}Xi("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var nY;Xi("duration",{Duration:nY={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});Xi("timestamp",{Timestamp:nY});Xi("empty",{Empty:{fields:{}}});Xi("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});Xi("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});Xi("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});Xi.get=function(e){return Xi[e]||null}});var oY=C((IFe,sY)=>{"use strict";var Ra=sY.exports=JH();Ra.build="full";Ra.tokenize=wD();Ra.parse=tY();Ra.common=iY();Ra.Root._configure(Ra.Type,Ra.parse,Ra.common)});var kI=C((yFe,aY)=>{"use strict";aY.exports=oY()});var SD=C((BFe,kae)=>{kae.exports={nested:{google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}}});var hY=C((De,uY)=>{"use strict";var cr=kI();uY.exports=De=cr.descriptor=cr.Root.fromJSON(SD()).lookup(".google.protobuf");var AY=cr.Namespace,wf=cr.Root,Qo=cr.Enum,Ta=cr.Type,ka=cr.Field,Nae=cr.MapField,NI=cr.OneOf,_f=cr.Service,FI=cr.Method;wf.fromDescriptor=function(e){typeof e.length=="number"&&(e=De.FileDescriptorSet.decode(e));var n=new wf;if(e.file)for(var r,i,s=0,o;s<e.file.length;++s){if(i=n,(r=e.file[s]).package&&r.package.length&&(i=n.define(r.package)),r.name&&r.name.length&&n.files.push(i.filename=r.name),r.messageType)for(o=0;o<r.messageType.length;++o)i.add(Ta.fromDescriptor(r.messageType[o],r.syntax));if(r.enumType)for(o=0;o<r.enumType.length;++o)i.add(Qo.fromDescriptor(r.enumType[o]));if(r.extension)for(o=0;o<r.extension.length;++o)i.add(ka.fromDescriptor(r.extension[o]));if(r.service)for(o=0;o<r.service.length;++o)i.add(_f.fromDescriptor(r.service[o]));var a=Iu(r.options,De.FileOptions);if(a){var A=Object.keys(a);for(o=0;o<A.length;++o)i.setOption(A[o],a[A[o]])}}return n};wf.prototype.toDescriptor=function(e){var n=De.FileDescriptorSet.create();return lY(this,n.file,e),n};function lY(t,e,n){var r=De.FileDescriptorProto.create({name:t.filename||(t.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(r.syntax=n),t instanceof wf||(r.package=t.fullName.substring(1));for(var i=0,s;i<t.nestedArray.length;++i)(s=t._nestedArray[i])instanceof Ta?r.messageType.push(s.toDescriptor(n)):s instanceof Qo?r.enumType.push(s.toDescriptor()):s instanceof ka?r.extension.push(s.toDescriptor(n)):s instanceof _f?r.service.push(s.toDescriptor()):s instanceof AY&&lY(s,e,n);r.options=yu(t.options,De.FileOptions),r.messageType.length+r.enumType.length+r.extension.length+r.service.length&&e.push(r)}var Fae=0;Ta.fromDescriptor=function(e,n){typeof e.length=="number"&&(e=De.DescriptorProto.decode(e));var r=new Ta(e.name.length?e.name:"Type"+Fae++,Iu(e.options,De.MessageOptions)),i;if(e.oneofDecl)for(i=0;i<e.oneofDecl.length;++i)r.add(NI.fromDescriptor(e.oneofDecl[i]));if(e.field)for(i=0;i<e.field.length;++i){var s=ka.fromDescriptor(e.field[i],n);r.add(s),e.field[i].hasOwnProperty("oneofIndex")&&r.oneofsArray[e.field[i].oneofIndex].add(s)}if(e.extension)for(i=0;i<e.extension.length;++i)r.add(ka.fromDescriptor(e.extension[i],n));if(e.nestedType)for(i=0;i<e.nestedType.length;++i)r.add(Ta.fromDescriptor(e.nestedType[i],n)),e.nestedType[i].options&&e.nestedType[i].options.mapEntry&&r.setOption("map_entry",!0);if(e.enumType)for(i=0;i<e.enumType.length;++i)r.add(Qo.fromDescriptor(e.enumType[i]));if(e.extensionRange&&e.extensionRange.length)for(r.extensions=[],i=0;i<e.extensionRange.length;++i)r.extensions.push([e.extensionRange[i].start,e.extensionRange[i].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(r.reserved=[],e.reservedRange)for(i=0;i<e.reservedRange.length;++i)r.reserved.push([e.reservedRange[i].start,e.reservedRange[i].end]);if(e.reservedName)for(i=0;i<e.reservedName.length;++i)r.reserved.push(e.reservedName[i])}return r};Ta.prototype.toDescriptor=function(e){var n=De.DescriptorProto.create({name:this.name}),r;for(r=0;r<this.fieldsArray.length;++r){var i;if(n.field.push(i=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof Nae){var s=bD(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType),o=bD(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType),a=o===11||o===14?this._fieldsArray[r].resolvedType&&cY(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;n.nestedType.push(De.DescriptorProto.create({name:i.typeName,field:[De.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),De.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:De.MessageOptions.create({mapEntry:!0})}))}}for(r=0;r<this.oneofsArray.length;++r)n.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof ka?n.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Ta?n.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Qo&&n.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)n.extensionRange.push(De.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)typeof this.reserved[r]=="string"?n.reservedName.push(this.reserved[r]):n.reservedRange.push(De.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return n.options=yu(this.options,De.MessageOptions),n};var Mae=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;ka.fromDescriptor=function(e,n){if(typeof e.length=="number"&&(e=De.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var r;e.typeName&&e.typeName.length?r=e.typeName:r=Pae(e.type);var i;switch(e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;e.extendee!==void 0&&(s=s.length?s:void 0);var o=new ka(e.name.length?e.name:"field"+e.number,e.number,r,i,s);if(o.options=Iu(e.options,De.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:var A=Mae.exec(a);A&&(a=parseInt(a));break}o.setOption("default",a)}return Vae(e.type)&&(n==="proto3"?e.options&&!e.options.packed&&o.setOption("packed",!1):e.options&&e.options.packed||o.setOption("packed",!1)),o};ka.prototype.toDescriptor=function(e){var n=De.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)n.type=11,n.typeName=cr.util.ucFirst(this.name),n.label=3;else{switch(n.type=bD(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:n.typeName=this.resolvedType?cY(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":n.label=3;break;case"required":n.label=2;break;default:n.label=1;break}}if(n.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(n.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(n.options=yu(this.options,De.FieldOptions),this.options.default!=null&&(n.defaultValue=String(this.options.default))),e==="proto3"?this.packed||((n.options||(n.options=De.FieldOptions.create())).packed=!1):this.packed&&((n.options||(n.options=De.FieldOptions.create())).packed=!0),n};var xae=0;Qo.fromDescriptor=function(e){typeof e.length=="number"&&(e=De.EnumDescriptorProto.decode(e));var n={};if(e.value)for(var r=0;r<e.value.length;++r){var i=e.value[r].name,s=e.value[r].number||0;n[i&&i.length?i:"NAME"+s]=s}return new Qo(e.name&&e.name.length?e.name:"Enum"+xae++,n,Iu(e.options,De.EnumOptions))};Qo.prototype.toDescriptor=function(){for(var e=[],n=0,r=Object.keys(this.values);n<r.length;++n)e.push(De.EnumValueDescriptorProto.create({name:r[n],number:this.values[r[n]]}));return De.EnumDescriptorProto.create({name:this.name,value:e,options:yu(this.options,De.EnumOptions)})};var Lae=0;NI.fromDescriptor=function(e){return typeof e.length=="number"&&(e=De.OneofDescriptorProto.decode(e)),new NI(e.name&&e.name.length?e.name:"oneof"+Lae++)};NI.prototype.toDescriptor=function(){return De.OneofDescriptorProto.create({name:this.name})};var Oae=0;_f.fromDescriptor=function(e){typeof e.length=="number"&&(e=De.ServiceDescriptorProto.decode(e));var n=new _f(e.name&&e.name.length?e.name:"Service"+Oae++,Iu(e.options,De.ServiceOptions));if(e.method)for(var r=0;r<e.method.length;++r)n.add(FI.fromDescriptor(e.method[r]));return n};_f.prototype.toDescriptor=function(){for(var e=[],n=0;n<this.methodsArray.length;++n)e.push(this._methodsArray[n].toDescriptor());return De.ServiceDescriptorProto.create({name:this.name,method:e,options:yu(this.options,De.ServiceOptions)})};var Uae=0;FI.fromDescriptor=function(e){return typeof e.length=="number"&&(e=De.MethodDescriptorProto.decode(e)),new FI(e.name&&e.name.length?e.name:"Method"+Uae++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,Iu(e.options,De.MethodOptions))};FI.prototype.toDescriptor=function(){return De.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:yu(this.options,De.MethodOptions)})};function Pae(t){switch(t){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+t)}function Vae(t){switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function bD(t,e){switch(t){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(e instanceof Qo)return 14;if(e instanceof Ta)return e.group?10:11;throw Error("illegal type: "+t)}function Iu(t,e){if(t){for(var n=[],r=0,i,s,o;r<e.fieldsArray.length;++r)(s=(i=e._fieldsArray[r]).name)!=="uninterpretedOption"&&t.hasOwnProperty(s)&&(o=t[s],i.resolvedType instanceof Qo&&typeof o=="number"&&i.resolvedType.valuesById[o]!==void 0&&(o=i.resolvedType.valuesById[o]),n.push(Gae(s),o));return n.length?cr.util.toObject(n):void 0}}function yu(t,e){if(t){for(var n=[],r=0,i=Object.keys(t),s,o;r<i.length;++r)if(o=t[s=i[r]],s!=="default"){var a=e.fields[s];!a&&!(a=e.fields[s=cr.util.camelCase(s)])||n.push(s,o)}return n.length?e.fromObject(cr.util.toObject(n)):void 0}}function cY(t,e){var n=t.fullName.split("."),r=e.fullName.split("."),i=0,s=0,o=r.length-1;if(!(t instanceof wf)&&e instanceof AY)for(;i<n.length&&s<o&&n[i]===r[s];){var a=e.lookup(n[i++],!0);if(a!==null&&a!==e)break;++s}else for(;i<n.length&&s<o&&n[i]===r[s];++i,++s);return r.slice(s).join(".")}function Gae(t){return t.substring(0,1)+t.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,n){return"_"+n.toLowerCase()})}});var dY=C((QFe,qae)=>{qae.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var gY=C((wFe,Hae)=>{Hae.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var fY=C((_Fe,Yae)=>{Yae.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var CY=C(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.addCommonProtos=Na.loadProtosWithOptionsSync=Na.loadProtosWithOptions=void 0;var pY=B("fs"),EY=B("path"),Bu=kI();function mY(t,e){let n=t.resolvePath;t.resolvePath=(r,i)=>{if(EY.isAbsolute(i))return i;for(let s of e){let o=EY.join(s,i);try{return pY.accessSync(o,pY.constants.R_OK),o}catch{continue}}return process.emitWarning(`${i} not found in any of the include paths ${e}`),n(r,i)}}function Jae(t,e){return E(this,null,function*(){let n=new Bu.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));mY(n,e.includeDirs)}let r=yield n.load(t,e);return r.resolveAll(),r})}Na.loadProtosWithOptions=Jae;function Wae(t,e){let n=new Bu.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");mY(n,e.includeDirs)}let r=n.loadSync(t,e);return r.resolveAll(),r}Na.loadProtosWithOptionsSync=Wae;function zae(){let t=dY(),e=SD(),n=gY(),r=fY();Bu.common("api",t.nested.google.nested.protobuf.nested),Bu.common("descriptor",e.nested.google.nested.protobuf.nested),Bu.common("source_context",n.nested.google.nested.protobuf.nested),Bu.common("type",r.nested.google.nested.protobuf.nested)}Na.addCommonProtos=zae});var BY=C((yY,DD)=>{"use strict";var IY=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function n(R,p,U){this.low=R|0,this.high=p|0,this.unsigned=!!U}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0});function r(R){return(R&&R.__isLong__)===!0}function i(R){var p=Math.clz32(R&-R);return R?31-p:p}n.isLong=r;var s={},o={};function a(R,p){var U,Ie,$e;return p?(R>>>=0,($e=0<=R&&R<256)&&(Ie=o[R],Ie)?Ie:(U=l(R,0,!0),$e&&(o[R]=U),U)):(R|=0,($e=-128<=R&&R<128)&&(Ie=s[R],Ie)?Ie:(U=l(R,R<0?-1:0,!1),$e&&(s[R]=U),U))}n.fromInt=a;function A(R,p){if(isNaN(R))return p?_:w;if(p){if(R<0)return _;if(R>=m)return Pe}else{if(R<=-y)return Re;if(R+1>=y)return Qe}return R<0?A(-R,p).neg():l(R%f|0,R/f|0,p)}n.fromNumber=A;function l(R,p,U){return new n(R,p,U)}n.fromBits=l;var c=Math.pow;function u(R,p,U){if(R.length===0)throw Error("empty string");if(typeof p=="number"?(U=p,p=!1):p=!!p,R==="NaN"||R==="Infinity"||R==="+Infinity"||R==="-Infinity")return p?_:w;if(U=U||10,U<2||36<U)throw RangeError("radix");var Ie;if((Ie=R.indexOf("-"))>0)throw Error("interior hyphen");if(Ie===0)return u(R.substring(1),p,U).neg();for(var $e=A(c(U,8)),et=w,qt=0;qt<R.length;qt+=8){var dt=Math.min(8,R.length-qt),$n=parseInt(R.substring(qt,qt+dt),U);if(dt<8){var Xt=A(c(U,dt));et=et.mul(Xt).add(A($n))}else et=et.mul($e),et=et.add(A($n))}return et.unsigned=p,et}n.fromString=u;function h(R,p){return typeof R=="number"?A(R,p):typeof R=="string"?u(R,p):l(R.low,R.high,typeof p=="boolean"?p:R.unsigned)}n.fromValue=h;var d=65536,g=1<<24,f=d*d,m=f*f,y=m/2,I=a(g),w=a(0);n.ZERO=w;var _=a(0,!0);n.UZERO=_;var S=a(1);n.ONE=S;var T=a(1,!0);n.UONE=T;var oe=a(-1);n.NEG_ONE=oe;var Qe=l(-1,2147483647,!1);n.MAX_VALUE=Qe;var Pe=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=Pe;var Re=l(0,-2147483648,!1);n.MIN_VALUE=Re;var b=n.prototype;b.toInt=function(){return this.unsigned?this.low>>>0:this.low},b.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},b.toString=function(p){if(p=p||10,p<2||36<p)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Re)){var U=A(p),Ie=this.div(U),$e=Ie.mul(U).sub(this);return Ie.toString(p)+$e.toInt().toString(p)}else return"-"+this.neg().toString(p);for(var et=A(c(p,6),this.unsigned),qt=this,dt="";;){var $n=qt.div(et),Xt=qt.sub($n.mul(et)).toInt()>>>0,Ft=Xt.toString(p);if(qt=$n,qt.isZero())return Ft+dt;for(;Ft.length<6;)Ft="0"+Ft;dt=""+Ft+dt}},b.getHighBits=function(){return this.high},b.getHighBitsUnsigned=function(){return this.high>>>0},b.getLowBits=function(){return this.low},b.getLowBitsUnsigned=function(){return this.low>>>0},b.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Re)?64:this.neg().getNumBitsAbs();for(var p=this.high!=0?this.high:this.low,U=31;U>0&&!(p&1<<U);U--);return this.high!=0?U+33:U+1},b.isZero=function(){return this.high===0&&this.low===0},b.eqz=b.isZero,b.isNegative=function(){return!this.unsigned&&this.high<0},b.isPositive=function(){return this.unsigned||this.high>=0},b.isOdd=function(){return(this.low&1)===1},b.isEven=function(){return(this.low&1)===0},b.equals=function(p){return r(p)||(p=h(p)),this.unsigned!==p.unsigned&&this.high>>>31===1&&p.high>>>31===1?!1:this.high===p.high&&this.low===p.low},b.eq=b.equals,b.notEquals=function(p){return!this.eq(p)},b.neq=b.notEquals,b.ne=b.notEquals,b.lessThan=function(p){return this.comp(p)<0},b.lt=b.lessThan,b.lessThanOrEqual=function(p){return this.comp(p)<=0},b.lte=b.lessThanOrEqual,b.le=b.lessThanOrEqual,b.greaterThan=function(p){return this.comp(p)>0},b.gt=b.greaterThan,b.greaterThanOrEqual=function(p){return this.comp(p)>=0},b.gte=b.greaterThanOrEqual,b.ge=b.greaterThanOrEqual,b.compare=function(p){if(r(p)||(p=h(p)),this.eq(p))return 0;var U=this.isNegative(),Ie=p.isNegative();return U&&!Ie?-1:!U&&Ie?1:this.unsigned?p.high>>>0>this.high>>>0||p.high===this.high&&p.low>>>0>this.low>>>0?-1:1:this.sub(p).isNegative()?-1:1},b.comp=b.compare,b.negate=function(){return!this.unsigned&&this.eq(Re)?Re:this.not().add(S)},b.neg=b.negate,b.add=function(p){r(p)||(p=h(p));var U=this.high>>>16,Ie=this.high&65535,$e=this.low>>>16,et=this.low&65535,qt=p.high>>>16,dt=p.high&65535,$n=p.low>>>16,Xt=p.low&65535,Ft=0,On=0,Zt=0,er=0;return er+=et+Xt,Zt+=er>>>16,er&=65535,Zt+=$e+$n,On+=Zt>>>16,Zt&=65535,On+=Ie+dt,Ft+=On>>>16,On&=65535,Ft+=U+qt,Ft&=65535,l(Zt<<16|er,Ft<<16|On,this.unsigned)},b.subtract=function(p){return r(p)||(p=h(p)),this.add(p.neg())},b.sub=b.subtract,b.multiply=function(p){if(this.isZero())return this;if(r(p)||(p=h(p)),e){var U=e.mul(this.low,this.high,p.low,p.high);return l(U,e.get_high(),this.unsigned)}if(p.isZero())return this.unsigned?_:w;if(this.eq(Re))return p.isOdd()?Re:w;if(p.eq(Re))return this.isOdd()?Re:w;if(this.isNegative())return p.isNegative()?this.neg().mul(p.neg()):this.neg().mul(p).neg();if(p.isNegative())return this.mul(p.neg()).neg();if(this.lt(I)&&p.lt(I))return A(this.toNumber()*p.toNumber(),this.unsigned);var Ie=this.high>>>16,$e=this.high&65535,et=this.low>>>16,qt=this.low&65535,dt=p.high>>>16,$n=p.high&65535,Xt=p.low>>>16,Ft=p.low&65535,On=0,Zt=0,er=0,lc=0;return lc+=qt*Ft,er+=lc>>>16,lc&=65535,er+=et*Ft,Zt+=er>>>16,er&=65535,er+=qt*Xt,Zt+=er>>>16,er&=65535,Zt+=$e*Ft,On+=Zt>>>16,Zt&=65535,Zt+=et*Xt,On+=Zt>>>16,Zt&=65535,Zt+=qt*$n,On+=Zt>>>16,Zt&=65535,On+=Ie*Ft+$e*Xt+et*$n+qt*dt,On&=65535,l(er<<16|lc,On<<16|Zt,this.unsigned)},b.mul=b.multiply,b.divide=function(p){if(r(p)||(p=h(p)),p.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&p.low===-1&&p.high===-1)return this;var U=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,p.low,p.high);return l(U,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?_:w;var Ie,$e,et;if(this.unsigned){if(p.unsigned||(p=p.toUnsigned()),p.gt(this))return _;if(p.gt(this.shru(1)))return T;et=_}else{if(this.eq(Re)){if(p.eq(S)||p.eq(oe))return Re;if(p.eq(Re))return S;var qt=this.shr(1);return Ie=qt.div(p).shl(1),Ie.eq(w)?p.isNegative()?S:oe:($e=this.sub(p.mul(Ie)),et=Ie.add($e.div(p)),et)}else if(p.eq(Re))return this.unsigned?_:w;if(this.isNegative())return p.isNegative()?this.neg().div(p.neg()):this.neg().div(p).neg();if(p.isNegative())return this.div(p.neg()).neg();et=w}for($e=this;$e.gte(p);){Ie=Math.max(1,Math.floor($e.toNumber()/p.toNumber()));for(var dt=Math.ceil(Math.log(Ie)/Math.LN2),$n=dt<=48?1:c(2,dt-48),Xt=A(Ie),Ft=Xt.mul(p);Ft.isNegative()||Ft.gt($e);)Ie-=$n,Xt=A(Ie,this.unsigned),Ft=Xt.mul(p);Xt.isZero()&&(Xt=S),et=et.add(Xt),$e=$e.sub(Ft)}return et},b.div=b.divide,b.modulo=function(p){if(r(p)||(p=h(p)),e){var U=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,p.low,p.high);return l(U,e.get_high(),this.unsigned)}return this.sub(this.div(p).mul(p))},b.mod=b.modulo,b.rem=b.modulo,b.not=function(){return l(~this.low,~this.high,this.unsigned)},b.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},b.clz=b.countLeadingZeros,b.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},b.ctz=b.countTrailingZeros,b.and=function(p){return r(p)||(p=h(p)),l(this.low&p.low,this.high&p.high,this.unsigned)},b.or=function(p){return r(p)||(p=h(p)),l(this.low|p.low,this.high|p.high,this.unsigned)},b.xor=function(p){return r(p)||(p=h(p)),l(this.low^p.low,this.high^p.high,this.unsigned)},b.shiftLeft=function(p){return r(p)&&(p=p.toInt()),(p&=63)===0?this:p<32?l(this.low<<p,this.high<<p|this.low>>>32-p,this.unsigned):l(0,this.low<<p-32,this.unsigned)},b.shl=b.shiftLeft,b.shiftRight=function(p){return r(p)&&(p=p.toInt()),(p&=63)===0?this:p<32?l(this.low>>>p|this.high<<32-p,this.high>>p,this.unsigned):l(this.high>>p-32,this.high>=0?0:-1,this.unsigned)},b.shr=b.shiftRight,b.shiftRightUnsigned=function(p){return r(p)&&(p=p.toInt()),(p&=63)===0?this:p<32?l(this.low>>>p|this.high<<32-p,this.high>>>p,this.unsigned):p===32?l(this.high,0,this.unsigned):l(this.high>>>p-32,0,this.unsigned)},b.shru=b.shiftRightUnsigned,b.shr_u=b.shiftRightUnsigned,b.rotateLeft=function(p){var U;return r(p)&&(p=p.toInt()),(p&=63)===0?this:p===32?l(this.high,this.low,this.unsigned):p<32?(U=32-p,l(this.low<<p|this.high>>>U,this.high<<p|this.low>>>U,this.unsigned)):(p-=32,U=32-p,l(this.high<<p|this.low>>>U,this.low<<p|this.high>>>U,this.unsigned))},b.rotl=b.rotateLeft,b.rotateRight=function(p){var U;return r(p)&&(p=p.toInt()),(p&=63)===0?this:p===32?l(this.high,this.low,this.unsigned):p<32?(U=32-p,l(this.high<<U|this.low>>>p,this.low<<U|this.high>>>p,this.unsigned)):(p-=32,U=32-p,l(this.low<<U|this.high>>>p,this.high<<U|this.low>>>p,this.unsigned))},b.rotr=b.rotateRight,b.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},b.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},b.toBytes=function(p){return p?this.toBytesLE():this.toBytesBE()},b.toBytesLE=function(){var p=this.high,U=this.low;return[U&255,U>>>8&255,U>>>16&255,U>>>24,p&255,p>>>8&255,p>>>16&255,p>>>24]},b.toBytesBE=function(){var p=this.high,U=this.low;return[p>>>24,p>>>16&255,p>>>8&255,p&255,U>>>24,U>>>16&255,U>>>8&255,U&255]},n.fromBytes=function(p,U,Ie){return Ie?n.fromBytesLE(p,U):n.fromBytesBE(p,U)},n.fromBytesLE=function(p,U){return new n(p[0]|p[1]<<8|p[2]<<16|p[3]<<24,p[4]|p[5]<<8|p[6]<<16|p[7]<<24,U)},n.fromBytesBE=function(p,U){return new n(p[4]<<24|p[5]<<16|p[6]<<8|p[7],p[0]<<24|p[1]<<16|p[2]<<8|p[3],U)};var Fe=n;return t.default=Fe,"default"in t?t.default:t}({});typeof define=="function"&&define.amd?define([],function(){return IY}):typeof DD=="object"&&typeof yY=="object"&&(DD.exports=IY)});var ND=C(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.loadFileDescriptorSetFromObject=Jn.loadFileDescriptorSetFromBuffer=Jn.fromJSON=Jn.loadSync=Jn.load=Jn.isAnyExtension=Jn.Long=void 0;var jae=lq(),Us=kI(),TD=hY(),kD=CY(),Kae=BY();Jn.Long=Kae;function Xae(t){return"@type"in t&&typeof t["@type"]=="string"}Jn.isAnyExtension=Xae;var _Y={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function Zae(t,e){return t===""?e:t+"."+e}function $ae(t){return t instanceof Us.Service||t instanceof Us.Type||t instanceof Us.Enum}function eAe(t){return t instanceof Us.Namespace||t instanceof Us.Root}function vY(t,e){let n=Zae(e,t.name);return $ae(t)?[[n,t]]:eAe(t)&&typeof t.nested<"u"?Object.keys(t.nested).map(r=>vY(t.nested[r],n)).reduce((r,i)=>r.concat(i),[]):[]}function QY(t,e){return function(r){return t.toObject(t.decode(r),e)}}function wY(t){return function(n){if(Array.isArray(n))throw new Error(`Failed to serialize message: expected object with ${t.name} structure, got array instead`);let r=t.fromObject(n);return t.encode(r).finish()}}function tAe(t,e,n,r){let i=t.resolvedRequestType,s=t.resolvedResponseType;return{path:"/"+e+"/"+t.name,requestStream:!!t.requestStream,responseStream:!!t.responseStream,requestSerialize:wY(i),requestDeserialize:QY(i,n),responseSerialize:wY(s),responseDeserialize:QY(s,n),originalName:jae(t.name),requestType:RD(i,r),responseType:RD(s,r)}}function nAe(t,e,n,r){let i={};for(let s of t.methodsArray)i[s.name]=tAe(s,e,n,r);return i}function RD(t,e){let n=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:n.$type.toObject(n,_Y),fileDescriptorProtos:e}}function rAe(t,e){let n=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:n.$type.toObject(n,_Y),fileDescriptorProtos:e}}function iAe(t,e,n,r){if(t instanceof Us.Service)return nAe(t,e,n,r);if(t instanceof Us.Type)return RD(t,r);if(t instanceof Us.Enum)return rAe(t,r);throw new Error("Type mismatch in reflection object handling")}function MI(t,e){let n={};t.resolveAll();let i=t.toDescriptor("proto3").file.map(s=>Buffer.from(TD.FileDescriptorProto.encode(s).finish()));for(let[s,o]of vY(t,""))n[s]=iAe(o,s,e,i);return n}function SY(t,e){e=e||{};let n=Us.Root.fromDescriptor(t);return n.resolveAll(),MI(n,e)}function sAe(t,e){return(0,kD.loadProtosWithOptions)(t,e).then(n=>MI(n,e))}Jn.load=sAe;function oAe(t,e){let n=(0,kD.loadProtosWithOptionsSync)(t,e);return MI(n,e)}Jn.loadSync=oAe;function aAe(t,e){e=e||{};let n=Us.Root.fromJSON(t);return n.resolveAll(),MI(n,e)}Jn.fromJSON=aAe;function AAe(t,e){let n=TD.FileDescriptorSet.decode(t);return SY(n,e)}Jn.loadFileDescriptorSetFromBuffer=AAe;function lAe(t,e){let n=TD.FileDescriptorSet.fromObject(t);return SY(n,e)}Jn.loadFileDescriptorSetFromObject=lAe;(0,kD.addCommonProtos)()});var al=C(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.setup=wt.getChannelzServiceDefinition=wt.getChannelzHandlers=wt.unregisterChannelzRef=wt.registerChannelzSocket=wt.registerChannelzServer=wt.registerChannelzSubchannel=wt.registerChannelzChannel=wt.ChannelzCallTracker=wt.ChannelzChildrenTracker=wt.ChannelzTrace=void 0;var bY=B("net"),vf=mi(),bf=qe(),cAe=Rs(),uAe=nI(),hAe=Rb();function FD(t){return{channel_id:t.id,name:t.name}}function OD(t){return{subchannel_id:t.id,name:t.name}}function dAe(t){return{server_id:t.id}}function LI(t){return{socket_id:t.id,name:t.name}}var DY=32,MD=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,n,r){let i=new Date;this.events.push({description:n,severity:e,timestamp:i,childChannel:r?.kind==="channel"?r:void 0,childSubchannel:r?.kind==="subchannel"?r:void 0}),this.events.length>=DY*2&&(this.events=this.events.slice(DY)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:wo(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:wo(e.timestamp),channel_ref:e.childChannel?FD(e.childChannel):null,subchannel_ref:e.childSubchannel?OD(e.childSubchannel):null}))}}};wt.ChannelzTrace=MD;var xD=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var n,r,i;switch(e.kind){case"channel":{let s=(n=this.channelChildren.get(e.id))!==null&&n!==void 0?n:{ref:e,count:0};s.count+=1,this.channelChildren.set(e.id,s);break}case"subchannel":{let s=(r=this.subchannelChildren.get(e.id))!==null&&r!==void 0?r:{ref:e,count:0};s.count+=1,this.subchannelChildren.set(e.id,s);break}case"socket":{let s=(i=this.socketChildren.get(e.id))!==null&&i!==void 0?i:{ref:e,count:0};s.count+=1,this.socketChildren.set(e.id,s);break}}}unrefChild(e){switch(e.kind){case"channel":{let n=this.channelChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,n));break}case"subchannel":{let n=this.subchannelChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,n));break}case"socket":{let n=this.socketChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,n));break}}}getChildLists(){let e=[];for(let{ref:i}of this.channelChildren.values())e.push(i);let n=[];for(let{ref:i}of this.subchannelChildren.values())n.push(i);let r=[];for(let{ref:i}of this.socketChildren.values())r.push(i);return{channels:e,subchannels:n,sockets:r}}};wt.ChannelzChildrenTracker=xD;var LD=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};wt.ChannelzCallTracker=LD;var gAe=1;function OI(){return gAe++}var Sf=[],UD=[],Fa=[],PD=[];function fAe(t,e,n){let r=OI(),i={id:r,name:t,kind:"channel"};return n&&(Sf[r]={ref:i,getInfo:e}),i}wt.registerChannelzChannel=fAe;function pAe(t,e,n){let r=OI(),i={id:r,name:t,kind:"subchannel"};return n&&(UD[r]={ref:i,getInfo:e}),i}wt.registerChannelzSubchannel=pAe;function EAe(t,e){let n=OI(),r={id:n,kind:"server"};return e&&(Fa[n]={ref:r,getInfo:t}),r}wt.registerChannelzServer=EAe;function mAe(t,e,n){let r=OI(),i={id:r,name:t,kind:"socket"};return n&&(PD[r]={ref:i,getInfo:e}),i}wt.registerChannelzSocket=mAe;function CAe(t){switch(t.kind){case"channel":delete Sf[t.id];return;case"subchannel":delete UD[t.id];return;case"server":delete Fa[t.id];return;case"socket":delete PD[t.id];return}}wt.unregisterChannelzRef=CAe;function IAe(t){let e=Number.parseInt(t,16);return[e/256|0,e%256]}function RY(t){if(t==="")return[];let e=t.split(":").map(r=>IAe(r));return[].concat(...e)}function yAe(t){if((0,bY.isIPv4)(t))return Buffer.from(Uint8Array.from(t.split(".").map(e=>Number.parseInt(e))));if((0,bY.isIPv6)(t)){let e,n,r=t.indexOf("::");r===-1?(e=t,n=""):(e=t.substring(0,r),n=t.substring(r+2));let i=Buffer.from(RY(e)),s=Buffer.from(RY(n)),o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else return null}function kY(t){switch(t){case vf.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case vf.ConnectivityState.IDLE:return{state:"IDLE"};case vf.ConnectivityState.READY:return{state:"READY"};case vf.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case vf.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function wo(t){if(!t)return null;let e=t.getTime();return{seconds:e/1e3|0,nanos:e%1e3*1e6}}function NY(t){let e=t.getInfo();return{ref:FD(t.ref),data:{target:e.target,state:kY(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:wo(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:e.children.channels.map(n=>FD(n)),subchannel_ref:e.children.subchannels.map(n=>OD(n))}}function BAe(t,e){let n=Number.parseInt(t.request.channel_id),r=Sf[n];if(r===void 0){e({code:bf.Status.NOT_FOUND,details:"No channel data found for id "+n});return}e(null,{channel:NY(r)})}function QAe(t,e){let n=Number.parseInt(t.request.max_results),r=[],i=Number.parseInt(t.request.start_channel_id);for(;i<Sf.length;i++){let s=Sf[i];if(s!==void 0&&(r.push(NY(s)),r.length>=n))break}e(null,{channel:r,end:i>=Fa.length})}function FY(t){let e=t.getInfo();return{ref:dAe(t.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:wo(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:e.listenerChildren.sockets.map(n=>LI(n))}}function wAe(t,e){let n=Number.parseInt(t.request.server_id),r=Fa[n];if(r===void 0){e({code:bf.Status.NOT_FOUND,details:"No server data found for id "+n});return}e(null,{server:FY(r)})}function _Ae(t,e){let n=Number.parseInt(t.request.max_results),r=[],i=Number.parseInt(t.request.start_server_id);for(;i<Fa.length;i++){let s=Fa[i];if(s!==void 0&&(r.push(FY(s)),r.length>=n))break}e(null,{server:r,end:i>=Fa.length})}function vAe(t,e){let n=Number.parseInt(t.request.subchannel_id),r=UD[n];if(r===void 0){e({code:bf.Status.NOT_FOUND,details:"No subchannel data found for id "+n});return}let i=r.getInfo(),s={ref:OD(r.ref),data:{target:i.target,state:kY(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:wo(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(o=>LI(o))};e(null,{subchannel:s})}function TY(t){var e;return(0,cAe.isTcpSubchannelAddress)(t)?{address:"tcpip_address",tcpip_address:{ip_address:(e=yAe(t.host))!==null&&e!==void 0?e:void 0,port:t.port}}:{address:"uds_address",uds_address:{filename:t.path}}}function SAe(t,e){var n,r,i,s,o;let a=Number.parseInt(t.request.socket_id),A=PD[a];if(A===void 0){e({code:bf.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let l=A.getInfo(),c=l.security?{model:"tls",tls:{cipher_suite:l.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(n=l.security.cipherSuiteStandardName)!==null&&n!==void 0?n:void 0,other_name:(r=l.security.cipherSuiteOtherName)!==null&&r!==void 0?r:void 0,local_certificate:(i=l.security.localCertificate)!==null&&i!==void 0?i:void 0,remote_certificate:(s=l.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,u={ref:LI(A.ref),local:l.localAddress?TY(l.localAddress):null,remote:l.remoteAddress?TY(l.remoteAddress):null,remote_name:(o=l.remoteName)!==null&&o!==void 0?o:void 0,security:c,data:{keep_alives_sent:l.keepAlivesSent,streams_started:l.streamsStarted,streams_succeeded:l.streamsSucceeded,streams_failed:l.streamsFailed,last_local_stream_created_timestamp:wo(l.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:wo(l.lastRemoteStreamCreatedTimestamp),messages_received:l.messagesReceived,messages_sent:l.messagesSent,last_message_received_timestamp:wo(l.lastMessageReceivedTimestamp),last_message_sent_timestamp:wo(l.lastMessageSentTimestamp),local_flow_control_window:l.localFlowControlWindow?{value:l.localFlowControlWindow}:null,remote_flow_control_window:l.remoteFlowControlWindow?{value:l.remoteFlowControlWindow}:null}};e(null,{socket:u})}function bAe(t,e){let n=Number.parseInt(t.request.server_id),r=Fa[n];if(r===void 0){e({code:bf.Status.NOT_FOUND,details:"No server data found for id "+n});return}let i=Number.parseInt(t.request.start_socket_id),s=Number.parseInt(t.request.max_results),a=r.getInfo().sessionChildren.sockets.sort((c,u)=>c.id-u.id),A=[],l=0;for(;l<a.length&&!(a[l].id>=i&&(A.push(LI(a[l])),A.length>=s));l++);e(null,{socket_ref:A,end:l>=a.length})}function MY(){return{GetChannel:BAe,GetTopChannels:QAe,GetServer:wAe,GetServers:_Ae,GetSubchannel:vAe,GetSocket:SAe,GetServerSockets:bAe}}wt.getChannelzHandlers=MY;var xI=null;function xY(){if(xI)return xI;let t=ND().loadSync,e=t("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return xI=(0,hAe.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,xI}wt.getChannelzServiceDefinition=xY;function DAe(){(0,uAe.registerAdminService)(xY,MY)}wt.setup=DAe});var LY=C(PI=>{"use strict";Object.defineProperty(PI,"__esModule",{value:!0});PI.Subchannel=void 0;var lt=mi(),RAe=af(),VD=Lt(),UI=qe(),TAe=Yr(),kAe=Rs(),Qu=al(),NAe="subchannel",FAe=~(1<<31),GD=class{constructor(e,n,r,i,s){var o;this.channelTarget=e,this.subchannelAddress=n,this.options=r,this.credentials=i,this.connector=s,this.connectivityState=lt.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new Qu.ChannelzCallTracker,this.childrenTracker=new Qu.ChannelzChildrenTracker,this.streamTracker=new Qu.ChannelzCallTracker;let a={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new RAe.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,kAe.subchannelAddressToString)(n),this.keepaliveTime=(o=r["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new Qu.ChannelzTrace,this.channelzRef=(0,Qu.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){VD.trace(UI.LogVerbosity.DEBUG,NAe,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){VD.trace(UI.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([lt.ConnectivityState.TRANSIENT_FAILURE],lt.ConnectivityState.CONNECTING):this.transitionToState([lt.ConnectivityState.TRANSIENT_FAILURE],lt.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let n=Math.min(this.keepaliveTime,FAe);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":n})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(n=>{this.transitionToState([lt.ConnectivityState.CONNECTING],lt.ConnectivityState.READY)?(this.transport=n,this.channelzEnabled&&this.childrenTracker.refChild(n.getChannelzRef()),n.addDisconnectListener(r=>{this.transitionToState([lt.ConnectivityState.READY],lt.ConnectivityState.IDLE),r&&this.keepaliveTime>0&&(this.keepaliveTime*=2,VD.log(UI.LogVerbosity.ERROR,`Connection to ${(0,TAe.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):n.shutdown()},n=>{this.transitionToState([lt.ConnectivityState.CONNECTING],lt.ConnectivityState.TRANSIENT_FAILURE,`${n}`)})}transitionToState(e,n,r){var i,s;if(e.indexOf(this.connectivityState)===-1)return!1;this.trace(lt.ConnectivityState[this.connectivityState]+" -> "+lt.ConnectivityState[n]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+lt.ConnectivityState[n]);let o=this.connectivityState;switch(this.connectivityState=n,n){case lt.ConnectivityState.READY:this.stopBackoff();break;case lt.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case lt.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(i=this.transport)===null||i===void 0||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case lt.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${n}`)}for(let a of this.stateListeners)a(this,o,n,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,Qu.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([lt.ConnectivityState.CONNECTING,lt.ConnectivityState.READY],lt.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(e,n,r,i){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===UI.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,n,r,i,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([lt.ConnectivityState.IDLE],lt.ConnectivityState.CONNECTING)||this.connectivityState===lt.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([lt.ConnectivityState.TRANSIENT_FAILURE],lt.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}};PI.Subchannel=GD});var JD=C(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.setup=La.DEFAULT_PORT=void 0;var OY=bs(),PY=B("dns"),VY=B("util"),MAe=rb(),qD=qe(),HD=lr(),xAe=Lt(),LAe=qe(),Ma=Yr(),UY=B("net"),OAe=af(),UAe="dns_resolver";function xa(t){xAe.trace(LAe.LogVerbosity.DEBUG,UAe,t)}La.DEFAULT_PORT=443;var PAe=3e4,VAe=VY.promisify(PY.resolveTxt),GAe=VY.promisify(PY.lookup);function qAe(...t){let e=[];for(let n=0;n<Math.max.apply(null,t.map(r=>r.length));n++)for(let r of t)n<r.length&&e.push(r[n]);return e}var YD=class{constructor(e,n,r){var i,s,o;this.target=e,this.listener=n,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,xa("Resolver constructed for target "+(0,Ma.uriToString)(e));let a=(0,Ma.splitHostPort)(e.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,UY.isIPv4)(a.host)||(0,UY.isIPv6)(a.host)?(this.ipResult=[{host:a.host,port:(i=a.port)!==null&&i!==void 0?i:La.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:La.DEFAULT_PORT),this.percentage=Math.random()*100,r["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:qD.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,Ma.uriToString)(this.target)}`,metadata:new HD.Metadata};let A={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new OAe.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},A),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=r["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:PAe,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(xa("Returning IP address for target "+(0,Ma.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)xa("Failed to parse DNS address "+(0,Ma.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:qD.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,Ma.uriToString)(this.target)}`,metadata:new HD.Metadata})}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;xa("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=GAe(e,{all:!0}),this.pendingLookupPromise.then(n=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let r=n.filter(o=>o.family===4),i=n.filter(o=>o.family===6);this.latestLookupResult=qAe(i,r).map(o=>({host:o.address,port:+this.port}));let s="["+this.latestLookupResult.map(o=>o.host+":"+o.port).join(",")+"]";if(xa("Resolved addresses for target "+(0,Ma.uriToString)(this.target)+": "+s),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},n=>{this.pendingLookupPromise!==null&&(xa("Resolution error for target "+(0,Ma.uriToString)(this.target)+": "+n.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=VAe(e),this.pendingTxtPromise.then(n=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,MAe.extractAndSelectServiceConfig)(n,this.percentage)}catch(r){this.latestServiceConfigError={code:qD.Status.UNAVAILABLE,details:`Parsing service config failed with error ${r.message}`,metadata:new HD.Metadata}}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},n=>{}))}}startNextResolutionTimer(){var e,n;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=(n=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)===null||n===void 0?void 0:n.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?xa('resolution update delayed by "min time between resolutions" rate limit'):xa("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}};function HAe(){(0,OY.registerResolver)("dns",YD),(0,OY.registerDefaultScheme)("dns")}La.setup=HAe});var WD=C(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.getProxiedConnection=vu.mapProxyName=void 0;var Df=Lt(),wu=qe(),YAe=bs(),JAe=B("http"),WAe=B("tls"),zAe=Lt(),GY=Rs(),_u=Yr(),jAe=B("url"),KAe=JD(),XAe="proxy";function Oa(t){zAe.trace(wu.LogVerbosity.DEBUG,XAe,t)}function ZAe(){let t="",e="";if(process.env.grpc_proxy)e="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",t=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",t=process.env.http_proxy;else return{};let n;try{n=new jAe.URL(t)}catch{return(0,Df.log)(wu.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(n.protocol!=="http:")return(0,Df.log)(wu.LogVerbosity.ERROR,`"${n.protocol}" scheme not supported in proxy URI`),{};let r=null;n.username&&(n.password?((0,Df.log)(wu.LogVerbosity.INFO,"userinfo found in proxy URI"),r=`${n.username}:${n.password}`):r=n.username);let i=n.hostname,s=n.port;s===""&&(s="80");let o={address:`${i}:${s}`};return r&&(o.creds=r),Oa("Proxy server "+o.address+" set by environment variable "+e),o}function $Ae(){let t=process.env.no_grpc_proxy,e="no_grpc_proxy";return t||(t=process.env.no_proxy,e="no_proxy"),t?(Oa("No proxy server list set by environment variable "+e),t.split(",")):[]}function ele(t,e){var n;let r={target:t,extraOptions:{}};if(((n=e["grpc.enable_http_proxy"])!==null&&n!==void 0?n:1)===0||t.scheme==="unix")return r;let i=ZAe();if(!i.address)return r;let s=(0,_u.splitHostPort)(t.path);if(!s)return r;let o=s.host;for(let A of $Ae())if(A===o)return Oa("Not using proxy for target in no_proxy list: "+(0,_u.uriToString)(t)),r;let a={"grpc.http_connect_target":(0,_u.uriToString)(t)};return i.creds&&(a["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:a}}vu.mapProxyName=ele;function tle(t,e,n){var r;if(!("grpc.http_connect_target"in e))return Promise.resolve({});let i=e["grpc.http_connect_target"],s=(0,_u.parseUri)(i);if(s===null)return Promise.resolve({});let o=(0,_u.splitHostPort)(s.path);if(o===null)return Promise.resolve({});let a=`${o.host}:${(r=o.port)!==null&&r!==void 0?r:KAe.DEFAULT_PORT}`,A={method:"CONNECT",path:a},l={Host:a};(0,GY.isTcpSubchannelAddress)(t)?(A.host=t.host,A.port=t.port):A.socketPath=t.path,"grpc.http_connect_creds"in e&&(l["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),A.headers=l;let c=(0,GY.subchannelAddressToString)(t);return Oa("Using proxy "+c+" to connect to "+A.path),new Promise((u,h)=>{let d=JAe.request(A);d.once("connect",(g,f,m)=>{var y;if(d.removeAllListeners(),f.removeAllListeners(),g.statusCode===200)if(Oa("Successfully connected to "+A.path+" through proxy "+c),"secureContext"in n){let I=(0,YAe.getDefaultAuthority)(s),w=(0,_u.splitHostPort)(I),_=(y=w?.host)!==null&&y!==void 0?y:I,S=WAe.connect(Object.assign({host:_,servername:_,socket:f},n),()=>{Oa("Successfully established a TLS connection to "+A.path+" through proxy "+c),u({socket:S,realTarget:s})});S.on("error",T=>{Oa("Failed to establish a TLS connection to "+A.path+" through proxy "+c+" with error "+T.message),h()})}else Oa("Successfully established a plaintext connection to "+A.path+" through proxy "+c),u({socket:f,realTarget:s});else(0,Df.log)(wu.LogVerbosity.ERROR,"Failed to connect to "+A.path+" through proxy "+c+" with status "+g.statusCode),h()}),d.once("error",g=>{d.removeAllListeners(),(0,Df.log)(wu.LogVerbosity.ERROR,"Failed to connect to proxy "+c+" with error "+g.message),h()}),d.end()})}vu.getProxiedConnection=tle});var jD=C(VI=>{"use strict";Object.defineProperty(VI,"__esModule",{value:!0});VI.StreamDecoder=void 0;var _o=function(t){return t[t.NO_DATA=0]="NO_DATA",t[t.READING_SIZE=1]="READING_SIZE",t[t.READING_MESSAGE=2]="READING_MESSAGE",t}(_o||{}),zD=class{constructor(){this.readState=_o.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let n=0,r,i=[];for(;n<e.length;)switch(this.readState){case _o.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=_o.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case _o.READING_SIZE:if(r=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+r),this.readSizeRemaining-=r,n+=r,this.readSizeRemaining===0)if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=_o.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=_o.NO_DATA,i.push(s)}break;case _o.READING_MESSAGE:if(r=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+r)),this.readMessageRemaining-=r,n+=r,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=_o.NO_DATA,i.push(o)}break;default:throw new Error("Unexpected read state")}return i}};VI.StreamDecoder=zD});var qY=C(GI=>{"use strict";Object.defineProperty(GI,"__esModule",{value:!0});GI.Http2SubchannelCall=void 0;var vo=B("http2"),nle=B("os"),rt=qe(),Ua=lr(),rle=jD(),ile=Lt(),sle=qe(),ole="subchannel_call";function ale(t){for(let[e,n]of Object.entries(nle.constants.errno))if(n===t)return e;return"Unknown system error "+t}var KD=class{constructor(e,n,r,i,s){this.http2Stream=e,this.callEventTracker=n,this.listener=r,this.transport=i,this.callId=s,this.decoder=new rle.StreamDecoder,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=rt.Status.UNKNOWN,this.finalStatus=null,this.internalError=null,e.on("response",(o,a)=>{let A="";for(let l of Object.keys(o))A+="		"+l+": "+o[l]+`
`;switch(this.trace(`Received server headers:
`+A),o[":status"]){case 400:this.mappedStatusCode=rt.Status.INTERNAL;break;case 401:this.mappedStatusCode=rt.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=rt.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=rt.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=rt.Status.UNAVAILABLE;break;default:this.mappedStatusCode=rt.Status.UNKNOWN}if(a&vo.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(o);else{let l;try{l=Ua.Metadata.fromHttp2Headers(o)}catch(c){this.endCall({code:rt.Status.UNKNOWN,details:c.message,metadata:new Ua.Metadata});return}this.listener.onReceiveMetadata(l)}}),e.on("trailers",o=>{this.handleTrailers(o)}),e.on("data",o=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+o.length);let a=this.decoder.write(o);for(let A of a)this.trace("parsed message of length "+A.length),this.callEventTracker.addMessageReceived(),this.tryPush(A)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var o;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((o=this.finalStatus)===null||o===void 0?void 0:o.code)===rt.Status.OK)return;let a,A="";switch(e.rstCode){case vo.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;a=rt.Status.INTERNAL,A=`Received RST_STREAM with code ${e.rstCode}`;break;case vo.constants.NGHTTP2_REFUSED_STREAM:a=rt.Status.UNAVAILABLE,A="Stream refused by server";break;case vo.constants.NGHTTP2_CANCEL:a=rt.Status.CANCELLED,A="Call cancelled";break;case vo.constants.NGHTTP2_ENHANCE_YOUR_CALM:a=rt.Status.RESOURCE_EXHAUSTED,A="Bandwidth exhausted or memory limit exceeded";break;case vo.constants.NGHTTP2_INADEQUATE_SECURITY:a=rt.Status.PERMISSION_DENIED,A="Protocol not secure enough";break;case vo.constants.NGHTTP2_INTERNAL_ERROR:a=rt.Status.INTERNAL,this.internalError===null?A=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(a=rt.Status.UNAVAILABLE,A=this.internalError.message):A=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:a=rt.Status.INTERNAL,A=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:a,details:A,metadata:new Ua.Metadata,rstCode:e.rstCode})})}),e.on("error",o=>{o.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+o.message+" code="+o.code+" errno="+ale(o.errno)+" syscall="+o.syscall),this.internalError=o),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:rt.Status.UNAVAILABLE,details:"Connection dropped",metadata:new Ua.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){ile.trace(sle.LogVerbosity.DEBUG,ole,"["+this.callId+"] "+e)}endCall(e){(this.finalStatus===null||this.finalStatus.code===rt.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==rt.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let n="";for(let A of Object.keys(e))n+="		"+A+": "+e[A]+`
`;this.trace(`Received server trailers:
`+n);let r;try{r=Ua.Metadata.fromHttp2Headers(e)}catch{r=new Ua.Metadata}let i=r.getMap(),s=this.mappedStatusCode;if(s===rt.Status.UNKNOWN&&typeof i["grpc-status"]=="string"){let A=Number(i["grpc-status"]);A in rt.Status&&(s=A,this.trace("received status code "+A+" from server")),r.remove("grpc-status")}let o="";if(typeof i["grpc-message"]=="string"){try{o=decodeURI(i["grpc-message"])}catch{o=i["grpc-message"]}r.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let a={code:s,details:o,metadata:r};this.endCall(a)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let n;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===rt.Status.OK?n=vo.constants.NGHTTP2_NO_ERROR:n=vo.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+n),this.http2Stream.close(n)}}cancelWithStatus(e,n){this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),this.endCall({code:e,details:n,metadata:new Ua.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==rt.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length);let r=i=>{process.nextTick(()=>{var s;let o=rt.Status.UNAVAILABLE;i?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=rt.Status.INTERNAL),i&&this.cancelWithStatus(o,`Write error: ${i.message}`),(s=e.callback)===null||s===void 0||s.call(e)})};this.trace("sending data chunk of length "+n.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(n,r)}catch(i){this.endCall({code:rt.Status.UNAVAILABLE,details:`Write failed with error ${i.message}`,metadata:new Ua.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};GI.Http2SubchannelCall=KD});var XD=C(qI=>{"use strict";Object.defineProperty(qI,"__esModule",{value:!0});qI.getNextCallNumber=void 0;var Ale=0;function lle(){return Ale++}qI.getNextCallNumber=lle});var JY=C(YI=>{"use strict";Object.defineProperty(YI,"__esModule",{value:!0});YI.Http2SubchannelConnector=void 0;var nR=B("http2"),HY=B("tls"),ZD=al(),Rf=qe(),cle=WD(),bu=Lt(),YY=bs(),HI=Rs(),Su=Yr(),ule=B("net"),hle=qY(),dle=XD(),$D="transport",gle="transport_flowctrl",fle=US().version,{HTTP2_HEADER_AUTHORITY:ple,HTTP2_HEADER_CONTENT_TYPE:Ele,HTTP2_HEADER_METHOD:mle,HTTP2_HEADER_PATH:Cle,HTTP2_HEADER_TE:Ile,HTTP2_HEADER_USER_AGENT:yle}=nR.constants,Ble=2e4,Qle=Buffer.from("too_many_pings","ascii"),eR=class{constructor(e,n,r,i){this.session=e,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=Ble,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new ZD.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,HI.subchannelAddressToString)(n),r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,ZD.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${fle}`,r["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=r["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(s,o,a)=>{let A=!1;s===nR.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(Qle)&&(A=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(A)}),e.once("error",s=>{this.trace("connection closed with error "+s.message)}),bu.isTracerEnabled($D)&&(e.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))}),e.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,n,r;let i=this.session.socket,s=i.remoteAddress?(0,HI.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,o=i.localAddress?(0,HI.stringToSubchannelAddress)(i.localAddress,i.localPort):null,a;if(this.session.encrypted){let l=i,c=l.getCipher(),u=l.getCertificate(),h=l.getPeerCertificate();a={cipherSuiteStandardName:(e=c.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:c.standardName?null:c.name,localCertificate:u&&"raw"in u?u.raw:null,remoteCertificate:h&&"raw"in h?h.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(n=this.session.state.localWindowSize)!==null&&n!==void 0?n:null,remoteFlowControlWindow:(r=this.session.state.remoteWindowSize)!==null&&r!==void 0?r:null}}trace(e){bu.trace(Rf.LogVerbosity.DEBUG,$D,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){bu.trace(Rf.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){bu.trace(Rf.LogVerbosity.DEBUG,gle,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){bu.trace(Rf.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(n=>n(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,n;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(n=(e=this.keepaliveTimeoutId).unref)===null||n===void 0||n.call(e));try{this.session.ping((r,i,s)=>{r&&(this.keepaliveTrace("Ping failed with error "+r.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch{this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,n;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):!this.keepaliveTimerId&&!this.keepaliveTimeoutId&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=(n=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)===null||n===void 0?void 0:n.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,n,r,i,s){let o=e.toHttp2Headers();o[ple]=n,o[yle]=this.userAgent,o[Ele]="application/grpc",o[mle]="POST",o[Cle]=r,o[Ile]="trailers";let a;try{a=this.session.request(o)}catch(c){throw this.handleDisconnect(),c}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let A,l;return this.channelzEnabled?(this.streamTracker.addCallStarted(),A={addMessageSent:()=>{var c;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(c=s.addMessageSent)===null||c===void 0||c.call(s)},addMessageReceived:()=>{var c;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(c=s.addMessageReceived)===null||c===void 0||c.call(s)},onCallEnd:c=>{var u;(u=s.onCallEnd)===null||u===void 0||u.call(s,c),this.removeActiveCall(l)},onStreamEnd:c=>{var u;c?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(u=s.onStreamEnd)===null||u===void 0||u.call(s,c)}}):A={addMessageSent:()=>{var c;(c=s.addMessageSent)===null||c===void 0||c.call(s)},addMessageReceived:()=>{var c;(c=s.addMessageReceived)===null||c===void 0||c.call(s)},onCallEnd:c=>{var u;(u=s.onCallEnd)===null||u===void 0||u.call(s,c),this.removeActiveCall(l)},onStreamEnd:c=>{var u;(u=s.onStreamEnd)===null||u===void 0||u.call(s,c)}},l=new hle.Http2SubchannelCall(a,A,i,this,(0,dle.getNextCallNumber)()),this.addActiveCall(l),l}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}shutdown(){this.session.close(),(0,ZD.unregisterChannelzRef)(this.channelzRef)}},tR=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){bu.trace(Rf.LogVerbosity.DEBUG,$D,(0,Su.uriToString)(this.channelTarget)+" "+e)}createSession(e,n,r,i){return this.isShutdown?Promise.reject():new Promise((s,o)=>{var a,A,l;let c;i.realTarget?(c=(0,Su.uriToString)(i.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,Su.uriToString)(i.realTarget))):(c=null,this.trace("creating HTTP/2 session to "+(0,HI.subchannelAddressToString)(e)));let u=(0,YY.getDefaultAuthority)((a=i.realTarget)!==null&&a!==void 0?a:this.channelTarget),h=n._getConnectionOptions()||{};h.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?h.maxSessionMemory=r["grpc-node.max_session_memory"]:h.maxSessionMemory=Number.MAX_SAFE_INTEGER;let d="http://";if("secureContext"in h){if(d="https://",r["grpc.ssl_target_name_override"]){let m=r["grpc.ssl_target_name_override"];h.checkServerIdentity=(y,I)=>(0,HY.checkServerIdentity)(m,I),h.servername=m}else{let m=(l=(A=(0,Su.splitHostPort)(u))===null||A===void 0?void 0:A.host)!==null&&l!==void 0?l:"localhost";h.servername=m}i.socket&&(h.createConnection=(m,y)=>i.socket)}else h.createConnection=(m,y)=>i.socket?i.socket:ule.connect(e);h=Object.assign(Object.assign(Object.assign({},h),e),{enableTrace:r["grpc-node.tls_enable_trace"]===1});let g=nR.connect(d+u,h);this.session=g;let f="Failed to connect";g.unref(),g.once("connect",()=>{g.removeAllListeners(),s(new eR(g,e,r,c)),this.session=null}),g.once("close",()=>{this.session=null,setImmediate(()=>{o(`${f} (${new Date().toISOString()})`)})}),g.once("error",m=>{f=m.message,this.trace("connection failed with error "+f)})})}connect(e,n,r){var i,s;if(this.isShutdown)return Promise.reject();let o=n._getConnectionOptions()||{};if("secureContext"in o){if(o.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let a=r["grpc.ssl_target_name_override"];o.checkServerIdentity=(A,l)=>(0,HY.checkServerIdentity)(a,l),o.servername=a}else if("grpc.http_connect_target"in r){let a=(0,YY.getDefaultAuthority)((i=(0,Su.parseUri)(r["grpc.http_connect_target"]))!==null&&i!==void 0?i:{path:"localhost"}),A=(0,Su.splitHostPort)(a);o.servername=(s=A?.host)!==null&&s!==void 0?s:a}r["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0)}return(0,cle.getProxiedConnection)(e,r,o).then(a=>this.createSession(e,n,r,a))}shutdown(){var e;this.isShutdown=!0,(e=this.session)===null||e===void 0||e.close(),this.session=null}};YI.Http2SubchannelConnector=tR});var WY=C(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.getSubchannelPool=Du.SubchannelPool=void 0;var wle=TG(),_le=LY(),vle=Rs(),Sle=Yr(),ble=JY(),Dle=1e4,Tf=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let n in this.pool){let i=this.pool[n].filter(s=>!s.subchannel.unrefIfOneRef());i.length>0&&(e=!1),this.pool[n]=i}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,n;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},Dle),(n=(e=this.cleanupTimer).unref)===null||n===void 0||n.call(e))}getOrCreateSubchannel(e,n,r,i){this.ensureCleanupTask();let s=(0,Sle.uriToString)(e);if(s in this.pool){let a=this.pool[s];for(let A of a)if((0,vle.subchannelAddressEqual)(n,A.subchannelAddress)&&(0,wle.channelOptionsEqual)(r,A.channelArguments)&&i._equals(A.channelCredentials))return A.subchannel}let o=new _le.Subchannel(e,n,r,i,new ble.Http2SubchannelConnector(e));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:n,channelArguments:r,channelCredentials:i,subchannel:o}),o.ref(),o}};Du.SubchannelPool=Tf;var Rle=new Tf;function Tle(t){return t?Rle:new Tf}Du.getSubchannelPool=Tle});var iR=C(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.FilterStackFactory=Ru.FilterStack=void 0;var JI=class{constructor(e){this.filters=e}sendMetadata(e){let n=e;for(let r=0;r<this.filters.length;r++)n=this.filters[r].sendMetadata(n);return n}receiveMetadata(e){let n=e;for(let r=this.filters.length-1;r>=0;r--)n=this.filters[r].receiveMetadata(n);return n}sendMessage(e){let n=e;for(let r=0;r<this.filters.length;r++)n=this.filters[r].sendMessage(n);return n}receiveMessage(e){let n=e;for(let r=this.filters.length-1;r>=0;r--)n=this.filters[r].receiveMessage(n);return n}receiveTrailers(e){let n=e;for(let r=this.filters.length-1;r>=0;r--)n=this.filters[r].receiveTrailers(n);return n}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}};Ru.FilterStack=JI;var rR=class t{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new t([...this.factories])}createFilter(){return new JI(this.factories.map(e=>e.createFilter()))}};Ru.FilterStackFactory=rR});var sR=C(WI=>{"use strict";Object.defineProperty(WI,"__esModule",{value:!0});WI.CompressionAlgorithms=void 0;var zY=function(t){return t[t.identity=0]="identity",t[t.deflate=1]="deflate",t[t.gzip=2]="gzip",t}(zY||(WI.CompressionAlgorithms=zY={}))});var jI=C(zI=>{"use strict";Object.defineProperty(zI,"__esModule",{value:!0});zI.BaseFilter=void 0;var oR=class{sendMetadata(e){return E(this,null,function*(){return e})}receiveMetadata(e){return e}sendMessage(e){return E(this,null,function*(){return e})}receiveMessage(e){return E(this,null,function*(){return e})}receiveTrailers(e){return e}};zI.BaseFilter=oR});var XY=C(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.CompressionFilterFactory=ku.CompressionFilter=void 0;var KI=B("zlib"),KY=sR(),kle=qe(),Nle=jI(),Fle=Lt(),Mle=t=>typeof t=="number"&&typeof KY.CompressionAlgorithms[t]=="string",Tu=class{writeMessage(e,n){return E(this,null,function*(){let r=e;n&&(r=yield this.compressMessage(r));let i=Buffer.allocUnsafe(r.length+5);return i.writeUInt8(n?1:0,0),i.writeUInt32BE(r.length,1),r.copy(i,5),i})}readMessage(e){return E(this,null,function*(){let n=e.readUInt8(0)===1,r=e.slice(5);return n&&(r=yield this.decompressMessage(r)),r})}},Al=class extends Tu{compressMessage(e){return E(this,null,function*(){return e})}writeMessage(e,n){return E(this,null,function*(){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r})}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},aR=class extends Tu{compressMessage(e){return new Promise((n,r)=>{KI.deflate(e,(i,s)=>{i?r(i):n(s)})})}decompressMessage(e){return new Promise((n,r)=>{KI.inflate(e,(i,s)=>{i?r(i):n(s)})})}},AR=class extends Tu{compressMessage(e){return new Promise((n,r)=>{KI.gzip(e,(i,s)=>{i?r(i):n(s)})})}decompressMessage(e){return new Promise((n,r)=>{KI.unzip(e,(i,s)=>{i?r(i):n(s)})})}},lR=class extends Tu{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function jY(t){switch(t){case"identity":return new Al;case"deflate":return new aR;case"gzip":return new AR;default:return new lR(t)}}var XI=class extends Nle.BaseFilter{constructor(e,n){var r;super(),this.sharedFilterConfig=n,this.sendCompression=new Al,this.receiveCompression=new Al,this.currentCompressionAlgorithm="identity";let i=e["grpc.default_compression_algorithm"];if(i!==void 0)if(Mle(i)){let s=KY.CompressionAlgorithms[i],o=(r=n.serverSupportedEncodingHeader)===null||r===void 0?void 0:r.split(",");(!o||o.includes(s))&&(this.currentCompressionAlgorithm=s,this.sendCompression=jY(this.currentCompressionAlgorithm))}else Fle.log(kle.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${i}`)}sendMetadata(e){return E(this,null,function*(){let n=yield e;return n.set("grpc-accept-encoding","identity,deflate,gzip"),n.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?n.remove("grpc-encoding"):n.set("grpc-encoding",this.currentCompressionAlgorithm),n})}receiveMetadata(e){let n=e.get("grpc-encoding");if(n.length>0){let i=n[0];typeof i=="string"&&(this.receiveCompression=jY(i))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new Al,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}sendMessage(e){return E(this,null,function*(){var n;let r=yield e,i;return this.sendCompression instanceof Al?i=!1:i=(((n=r.flags)!==null&&n!==void 0?n:0)&2)===0,{message:yield this.sendCompression.writeMessage(r.message,i),flags:r.flags}})}receiveMessage(e){return E(this,null,function*(){return this.receiveCompression.readMessage(yield e)})}};ku.CompressionFilter=XI;var cR=class{constructor(e,n){this.options=n,this.sharedFilterConfig={}}createFilter(){return new XI(this.options,this.sharedFilterConfig)}};ku.CompressionFilterFactory=cR});var $Y=C(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.MaxMessageSizeFilterFactory=Nu.MaxMessageSizeFilter=void 0;var xle=jI(),ZI=qe(),ZY=lr(),$I=class extends xle.BaseFilter{constructor(e){super(),this.maxSendMessageSize=ZI.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=ZI.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in e&&(this.maxSendMessageSize=e["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in e&&(this.maxReceiveMessageSize=e["grpc.max_receive_message_length"])}sendMessage(e){return E(this,null,function*(){if(this.maxSendMessageSize===-1)return e;{let n=yield e;if(n.message.length>this.maxSendMessageSize)throw{code:ZI.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${n.message.length} vs. ${this.maxSendMessageSize})`,metadata:new ZY.Metadata};return n}})}receiveMessage(e){return E(this,null,function*(){if(this.maxReceiveMessageSize===-1)return e;{let n=yield e;if(n.length>this.maxReceiveMessageSize)throw{code:ZI.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${n.length} vs. ${this.maxReceiveMessageSize})`,metadata:new ZY.Metadata};return n}})}};Nu.MaxMessageSizeFilter=$I;var uR=class{constructor(e){this.options=e}createFilter(){return new $I(this.options)}};Nu.MaxMessageSizeFilterFactory=uR});var ey=C(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.deadlineToString=Ps.getRelativeTimeout=Ps.getDeadlineTimeoutString=Ps.minDeadline=void 0;function Lle(...t){let e=1/0;for(let n of t){let r=n instanceof Date?n.getTime():n;r<e&&(e=r)}return e}Ps.minDeadline=Lle;var Ole=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function Ule(t){let e=new Date().getTime();t instanceof Date&&(t=t.getTime());let n=Math.max(t-e,0);for(let[r,i]of Ole){let s=n/i;if(s<1e8)return String(Math.ceil(s))+r}throw new Error("Deadline is too far in the future")}Ps.getDeadlineTimeoutString=Ule;var Ple=2147483647;function Vle(t){let e=t instanceof Date?t.getTime():t,n=new Date().getTime(),r=e-n;return r<0?0:r>Ple?1/0:r}Ps.getRelativeTimeout=Vle;function Gle(t){if(t instanceof Date)return t.toISOString();{let e=new Date(t);return Number.isNaN(e.getTime())?""+t:e.toISOString()}}Ps.deadlineToString=Gle});var ny=C(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.restrictControlPlaneStatusCode=void 0;var Vs=qe(),qle=[Vs.Status.OK,Vs.Status.INVALID_ARGUMENT,Vs.Status.NOT_FOUND,Vs.Status.ALREADY_EXISTS,Vs.Status.FAILED_PRECONDITION,Vs.Status.ABORTED,Vs.Status.OUT_OF_RANGE,Vs.Status.DATA_LOSS];function Hle(t,e){return qle.includes(t)?{code:Vs.Status.INTERNAL,details:`Invalid status from control plane: ${t} ${Vs.Status[t]} ${e}`}:{code:t,details:e}}ty.restrictControlPlaneStatusCode=Hle});var tJ=C(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});sy.LoadBalancingCall=void 0;var eJ=mi(),ry=qe(),Yle=ey(),iy=lr(),kf=Qa(),Jle=Yr(),Wle=Lt(),hR=ny(),zle=B("http2"),jle="load_balancing_call",dR=class{constructor(e,n,r,i,s,o,a){var A,l;this.channel=e,this.callConfig=n,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let c=this.methodName.split("/"),u="";c.length>=2&&(u=c[1]);let h=(l=(A=(0,Jle.splitHostPort)(this.host))===null||A===void 0?void 0:A.host)!==null&&l!==void 0?l:"localhost";this.serviceUrl=`https://${h}/${u}`}trace(e){Wle.trace(ry.LogVerbosity.DEBUG,jle,"["+this.callNumber+"] "+e)}outputStatus(e,n){var r,i;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let s=Object.assign(Object.assign({},e),{progress:n});(r=this.listener)===null||r===void 0||r.onReceiveStatus(s),(i=this.onCallEnded)===null||i===void 0||i.call(this,s.code)}}doPick(){var e,n;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),i=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+kf.PickResultType[r.pickResultType]+" subchannel: "+i+" status: "+((e=r.status)===null||e===void 0?void 0:e.code)+" "+((n=r.status)===null||n===void 0?void 0:n.details)),r.pickResultType){case kf.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(a=>{var A,l,c;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let u=this.metadata.clone();if(u.merge(a),u.get("authorization").length>1&&this.outputStatus({code:ry.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new iy.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==eJ.ConnectivityState.READY){this.trace("Picked subchannel "+i+" has state "+eJ.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&u.set("grpc-timeout",(0,Yle.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(u,this.host,this.methodName,{onReceiveMetadata:h=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(h)},onReceiveMessage:h=>{this.trace("Received message"),this.listener.onReceiveMessage(h)},onReceiveStatus:h=>{this.trace("Received status"),h.rstCode===zle.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(h,"REFUSED"):this.outputStatus(h,"PROCESSED")}})}catch(h){this.trace("Failed to start call on picked subchannel "+i+" with error "+h.message),this.outputStatus({code:ry.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+h.message,metadata:new iy.Metadata},"NOT_STARTED");return}(l=(A=this.callConfig).onCommitted)===null||l===void 0||l.call(A),(c=r.onCallStarted)===null||c===void 0||c.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},a=>{let{code:A,details:l}=(0,hR.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:ry.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);this.outputStatus({code:A,details:l,metadata:new iy.Metadata},"PROCESSED")});break;case kf.PickResultType.DROP:let{code:s,details:o}=(0,hR.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:s,details:o,metadata:r.status.metadata},"DROP")});break;case kf.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:a,details:A}=(0,hR.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:a,details:A,metadata:r.status.metadata},"PROCESSED")})}break;case kf.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,n){var r;this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,n),this.outputStatus({code:e,details:n,metadata:new iy.Metadata},"PROCESSED")}getPeer(){var e,n;return(n=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:this.channel.getTarget()}start(e,n){this.trace("start called"),this.listener=n,this.metadata=e,this.doPick()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length),this.child?this.child.sendMessageWithContext(e,n):this.pendingMessage={context:e,message:n}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};sy.LoadBalancingCall=dR});var rJ=C(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.ResolvingCall=void 0;var Fu=qe(),oy=ey(),nJ=lr(),Kle=Lt(),Xle=ny(),Zle="resolving_call",gR=class{constructor(e,n,r,i,s,o){this.channel=e,this.method=n,this.filterStackFactory=i,this.credentials=s,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&Fu.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(Fu.Status.CANCELLED,"Cancelled by parent call")}),r.flags&Fu.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,oy.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){Kle.trace(Fu.LogVerbosity.DEBUG,Zle,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,oy.deadlineToString)(this.deadline));let e=(0,oy.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let n=()=>{this.cancelWithStatus(Fu.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(n):this.deadlineTimer=setTimeout(n,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let n=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+n.code+' details="'+n.details+'"'),this.statusWatchers.forEach(r=>r(n)),process.nextTick(()=>{var r;(r=this.listener)===null||r===void 0||r.onReceiveStatus(n)})}}sendMessageOnChild(e,n){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:n,flags:e.flags})).then(i=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,i.message),this.pendingHalfClose&&r.halfClose()},i=>{this.cancelWithStatus(i.code,i.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let n=e.config;if(n.status!==Fu.Status.OK){let{code:r,details:i}=(0,Xle.restrictControlPlaneStatusCode)(n.status,"Failed to route call to method "+this.method);this.outputStatus({code:r,details:i,metadata:new nJ.Metadata});return}if(n.methodConfig.timeout){let r=new Date;r.setSeconds(r.getSeconds()+n.methodConfig.timeout.seconds),r.setMilliseconds(r.getMilliseconds()+n.methodConfig.timeout.nanos/1e6),this.deadline=(0,oy.minDeadline)(this.deadline,r),this.runDeadlineTimer()}this.filterStackFactory.push(n.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(r=>{this.child=this.channel.createInnerCall(n,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(r,{onReceiveMetadata:i=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(i))},onReceiveMessage:i=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(i).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:i=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=i:this.outputStatus(i)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},r=>{this.outputStatus(r)})}reportResolverError(e){var n;!((n=this.metadata)===null||n===void 0)&&n.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,n){var r;this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,n),this.outputStatus({code:e,details:n,metadata:new nJ.Metadata})}getPeer(){var e,n;return(n=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:this.channel.getTarget()}start(e,n){this.trace("start called"),this.metadata=e.clone(),this.listener=n,this.getConfig()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length),this.child?this.sendMessageOnChild(e,n):this.pendingMessage={context:e,message:n}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}};ay.ResolvingCall=gR});var iJ=C(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.RetryingCall=Pa.MessageBufferTracker=Pa.RetryThrottler=void 0;var Ay=qe(),$le=lr(),ece=Lt(),tce="retrying_call",pR=class{constructor(e,n,r){this.maxTokens=e,this.tokenRatio=n,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};Pa.RetryThrottler=pR;var ER=class{constructor(e,n){this.totalLimit=e,this.limitPerCall=n,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,n){var r;let i=(r=this.allocatedPerCall.get(n))!==null&&r!==void 0?r:0;return this.limitPerCall-i<e||this.totalLimit-this.totalAllocated<e?!1:(this.allocatedPerCall.set(n,i+e),this.totalAllocated+=e,!0)}free(e,n){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${n} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let i=(r=this.allocatedPerCall.get(n))!==null&&r!==void 0?r:0;if(i<e)throw new Error(`Invalid buffer allocation state: call ${n} freed ${e} > allocated for call ${i}`);this.allocatedPerCall.set(n,i-e)}freeAll(e){var n;let r=(n=this.allocatedPerCall.get(e))!==null&&n!==void 0?n:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};Pa.MessageBufferTracker=ER;var fR="grpc-previous-rpc-attempts",mR=class{constructor(e,n,r,i,s,o,a,A,l){if(this.channel=e,this.callConfig=n,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=A,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,n.methodConfig.retryPolicy){this.state="RETRY";let c=n.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(c.initialBackoff.substring(0,c.initialBackoff.length-1))}else n.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){ece.trace(Ay.LogVerbosity.DEBUG,tce,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var n;(n=this.listener)===null||n===void 0||n.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,n){this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),this.reportStatus({code:e,details:n,metadata:new $le.Metadata});for(let{call:r}of this.underlyingCalls)r.cancelWithStatus(e,n)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var n;return(n=this.writeBuffer[e-this.writeBufferOffset])!==null&&n!==void 0?n:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let n=this.writeBufferOffset;n<e;n++){let r=this.getBufferEntry(n);r.allocated&&this.bufferTracker.free(r.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if(this.state!=="COMMITTED"&&this.underlyingCalls[e].state!=="COMPLETED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let n=0;n<this.underlyingCalls.length;n++)n!==e&&this.underlyingCalls[n].state!=="COMPLETED"&&(this.underlyingCalls[n].state="COMPLETED",this.underlyingCalls[n].call.cancelWithStatus(Ay.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,n=-1;for(let[r,i]of this.underlyingCalls.entries())i.state==="ACTIVE"&&i.nextMessageToSend>e&&(e=i.nextMessageToSend,n=r);n===-1?this.state="TRANSPARENT_ONLY":this.commitCall(n)}isStatusCodeInList(e,n){return e.some(r=>r===n||r.toString().toLowerCase()===Ay.Status[n].toLowerCase())}getNextRetryBackoffMs(){var e;let n=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!n)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,i=Number(n.maxBackoff.substring(0,n.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*n.backoffMultiplier,i),r}maybeRetryCall(e,n){if(this.state!=="RETRY"){n(!1);return}let r=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(r.maxAttempts,5)){n(!1);return}let i;if(e===null)i=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",n(!1);return}else i=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,o;if(this.state!=="RETRY"){n(!1);return}(!((o=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&o!==void 0)||o)&&(n(!0),this.attempts+=1,this.startNewAttempt())},i)}countActiveCalls(){let e=0;for(let n of this.underlyingCalls)n?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,n,r){var i,s,o;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(n),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((i=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&i!==void 0?i:[],e.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(r===null)a=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(n),this.reportStatus(e);return}else a=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(n),this.reportStatus(e))},a)}else this.commitCall(n),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(r,a=>{a||(this.commitCall(n),this.reportStatus(e))})):(this.commitCall(n),this.reportStatus(e));break}}getPushback(e){let n=e.get("grpc-retry-pushback-ms");if(n.length===0)return null;try{return parseInt(n[0])}catch{return-1}}handleChildStatus(e,n){var r;if(this.underlyingCalls[n].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[n].call.getCallNumber()+"] in state "+this.underlyingCalls[n].state),this.underlyingCalls[n].state="COMPLETED",e.code===Ay.Status.OK){(r=this.retryThrottler)===null||r===void 0||r.addCallSucceeded(),this.commitCall(n),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,n,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(n),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,n,i);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,n,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let i=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(i.maxAttempts,5))return;let s=(e=i.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(r=(n=this.hedgingTimer).unref)===null||r===void 0||r.call(n)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let n=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,i=this.initialMetadata.clone();r>0&&i.set(fR,`${r}`);let s=!1;e.start(i,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(n),s=!0,r>0&&o.set(fR,`${r}`),this.underlyingCalls[n].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(n),this.underlyingCalls[n].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&r>0&&o.metadata.set(fR,`${r}`),this.handleChildStatus(o,n)}}),this.sendNextChildMessage(n),this.readStarted&&e.startRead()}start(e,n){this.trace("start called"),this.listener=n,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var n,r;let i=this.underlyingCalls[e],s=i.nextMessageToSend;(r=(n=this.getBufferEntry(s)).callback)===null||r===void 0||r.call(n),this.clearSentMessages(),i.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let n=this.underlyingCalls[e];if(n.state!=="COMPLETED"&&this.getBufferEntry(n.nextMessageToSend)){let r=this.getBufferEntry(n.nextMessageToSend);switch(r.entryType){case"MESSAGE":n.call.sendMessageWithContext({callback:i=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":n.nextMessageToSend+=1,n.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,n){var r;this.trace("write() called with message of length "+n.length);let i={message:n,flags:e.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(n.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(r=e.callback)===null||r===void 0||r.call(e);for(let[a,A]of this.underlyingCalls.entries())A.state==="ACTIVE"&&A.nextMessageToSend===s&&A.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(a)}},n)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:A=>{this.handleChildWriteCompleted(this.committedCallIndex)}},n)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let n of this.underlyingCalls)n?.state==="ACTIVE"&&n.nextMessageToSend===e&&(n.nextMessageToSend+=1,n.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};Pa.RetryingCall=mR});var cy=C(ly=>{"use strict";Object.defineProperty(ly,"__esModule",{value:!0});ly.BaseSubchannelWrapper=void 0;var CR=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}};ly.BaseSubchannelWrapper=CR});var aJ=C(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});dy.InternalChannel=void 0;var nce=WC(),rce=RG(),ice=WY(),sJ=Qa(),Nf=qe(),sce=iR(),oce=XY(),oJ=bs(),IR=Lt(),ace=$Y(),Ace=WD(),uy=Yr(),Gs=mi(),Ff=al(),lce=tJ(),cce=ey(),uce=rJ(),yR=XD(),hce=ny(),BR=iJ(),dce=cy(),gce=2147483647,fce=1e3,pce=30*60*1e3,hy=new Map,Ece=1<<24,mce=1<<20,QR=class extends dce.BaseSubchannelWrapper{constructor(e,n){super(e),this.channel=n,this.refCount=0,this.subchannelStateListener=(r,i,s,o)=>{n.throttleKeepalive(o)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},wR=class{constructor(e,n,r){var i,s,o,a,A,l,c,u;if(this.credentials=n,this.options=r,this.connectivityState=Gs.ConnectivityState.IDLE,this.currentPicker=new sJ.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new Ff.ChannelzCallTracker,this.childrenTracker=new Ff.ChannelzChildrenTracker,typeof e!="string")throw new TypeError("Channel target must be a string");if(!(n instanceof nce.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.originalTarget=e;let h=(0,uy.parseUri)(e);if(h===null)throw new Error(`Could not parse target name "${e}"`);let d=(0,oJ.mapUriDefaultScheme)(h);if(d===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},gce),(s=(i=this.callRefTimer).unref)===null||s===void 0||s.call(i),this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new Ff.ChannelzTrace,this.channelzRef=(0,Ff.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,oJ.getDefaultAuthority)(d);let g=(0,Ace.mapProxyName)(d,r);this.target=g.target,this.options=Object.assign({},this.options,g.extraOptions),this.subchannelPool=(0,ice.getSubchannelPool)(((o=r["grpc.use_local_subchannel_pool"])!==null&&o!==void 0?o:0)===0),this.retryBufferTracker=new BR.MessageBufferTracker((a=r["grpc.retry_buffer_size"])!==null&&a!==void 0?a:Ece,(A=r["grpc.per_rpc_retry_buffer_size"])!==null&&A!==void 0?A:mce),this.keepaliveTime=(l=r["grpc.keepalive_time_ms"])!==null&&l!==void 0?l:-1,this.idleTimeoutMs=Math.max((c=r["grpc.client_idle_timeout_ms"])!==null&&c!==void 0?c:pce,fce);let f={createSubchannel:(y,I)=>{let w=this.subchannelPool.getOrCreateSubchannel(this.target,y,Object.assign({},this.options,I),this.credentials);w.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",w.getChannelzRef());let _=new QR(w,this);return this.wrappedSubchannels.add(_),_},updateState:(y,I)=>{this.currentPicker=I;let w=this.pickQueue.slice();this.pickQueue=[],w.length>0&&this.callRefTimerUnref();for(let _ of w)_.doPick();this.updateState(y)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:y=>{this.channelzEnabled&&this.childrenTracker.refChild(y)},removeChannelzChild:y=>{this.channelzEnabled&&this.childrenTracker.unrefChild(y)}};this.resolvingLoadBalancer=new rce.ResolvingLoadBalancer(this.target,f,r,(y,I)=>{y.retryThrottling?hy.set(this.getTarget(),new BR.RetryThrottler(y.retryThrottling.maxTokens,y.retryThrottling.tokenRatio,hy.get(this.getTarget()))):hy.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=I,this.currentResolutionError=null,process.nextTick(()=>{let w=this.configSelectionQueue;this.configSelectionQueue=[],w.length>0&&this.callRefTimerUnref();for(let _ of w)_.getConfig()})},y=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+y.code+' and details "'+y.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,hce.restrictControlPlaneStatusCode)(y.code,y.details)),{metadata:y.metadata}));let I=this.configSelectionQueue;this.configSelectionQueue=[],I.length>0&&this.callRefTimerUnref();for(let w of I)w.reportResolverError(y)}),this.filterStackFactory=new sce.FilterStackFactory([new ace.MaxMessageSizeFilterFactory(this.options),new oce.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let m=new Error;(0,IR.trace)(Nf.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((u=m.stack)===null||u===void 0?void 0:u.substring(m.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,n){(0,IR.trace)(n??Nf.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,uy.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,n,r,i;!((n=(e=this.callRefTimer).hasRef)===null||n===void 0)&&n.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(i=(r=this.callRefTimer).ref)===null||i===void 0||i.call(r))}callRefTimerUnref(){var e,n;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(n=(e=this.callRefTimer).unref)===null||n===void 0||n.call(e))}removeConnectivityStateWatcher(e){let n=this.connectivityStateWatchers.findIndex(r=>r===e);n>=0&&this.connectivityStateWatchers.splice(n,1)}updateState(e){(0,IR.trace)(Nf.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,uy.uriToString)(this.target)+" "+Gs.ConnectivityState[this.connectivityState]+" -> "+Gs.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+Gs.ConnectivityState[e]),this.connectivityState=e;let n=this.connectivityStateWatchers.slice();for(let r of n)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==Gs.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let n of this.wrappedSubchannels)n.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,n){return this.currentPicker.pick({metadata:e,extraPickInfo:n})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,n){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,n)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(Gs.ConnectivityState.IDLE),this.currentPicker=new sJ.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var n,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},e),(r=(n=this.idleTimer).unref)===null||r===void 0||r.call(n)}maybeStartIdleTimer(){this.connectivityState!==Gs.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===Nf.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,n,r,i,s){let o=(0,yR.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+n+'"'),new lce.LoadBalancingCall(this,e,n,r,i,s,o)}createRetryingCall(e,n,r,i,s){let o=(0,yR.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+n+'"'),new BR.RetryingCall(this,e,n,r,i,s,o,this.retryBufferTracker,hy.get(this.getTarget()))}createInnerCall(e,n,r,i,s){return this.options["grpc.enable_retries"]===0?this.createLoadBalancingCall(e,n,r,i,s):this.createRetryingCall(e,n,r,i,s)}createResolvingCall(e,n,r,i,s){let o=(0,yR.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0,cce.deadlineToString)(n));let a={deadline:n,flags:s??Nf.Propagate.DEFAULTS,host:r??this.defaultAuthority,parentCall:i},A=new uce.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),o);return this.onCallStart(),A.addStatusWatcher(l=>{this.onCallEnd(l)}),A}close(){this.resolvingLoadBalancer.destroy(),this.updateState(Gs.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,Ff.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,uy.uriToString)(this.target)}getConnectivityState(e){let n=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),n}watchConnectivityState(e,n,r){if(this.connectivityState===Gs.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let i=null;if(n!==1/0){let o=n instanceof Date?n:new Date(n),a=new Date;if(n===-1/0||o<=a){process.nextTick(r,new Error("Deadline passed without connectivity state change"));return}i=setTimeout(()=>{this.removeConnectivityStateWatcher(s),r(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:e,callback:r,timer:i};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,n,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof n=="number"||n instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===Gs.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,n,r,i,s)}};dy.InternalChannel=wR});var bb=C(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.ChannelImplementation=void 0;var Cce=WC(),Ice=aJ(),_R=class{constructor(e,n,r){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(n instanceof Cce.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new Ice.InternalChannel(e,n,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,n,r){this.internalChannel.watchConnectivityState(e,n,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,n,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof n=="number"||n instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,n,r,i,s)}};gy.ChannelImplementation=_R});var EJ=C(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.Http2ServerCallStream=Si.ServerDuplexStreamImpl=Si.ServerWritableStreamImpl=Si.ServerReadableStreamImpl=Si.ServerUnaryCallImpl=void 0;var hJ=B("events"),Mu=B("http2"),bR=B("stream"),dJ=B("zlib"),gJ=B("util"),_t=qe(),DR=lr(),yce=jD(),fJ=Lt(),xf=VC(),pJ="server_call",Bce=(0,gJ.promisify)(dJ.unzip),Qce=(0,gJ.promisify)(dJ.inflate);function Mf(t){fJ.trace(_t.LogVerbosity.DEBUG,pJ,t)}var wce="grpc-accept-encoding",_ce="grpc-encoding",AJ="grpc-message",lJ="grpc-status",cJ="grpc-timeout",vce=/(\d{1,8})\s*([HMSmun])/,Sce={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},bce={[wce]:"identity,deflate,gzip",[_ce]:"identity"},uJ={[Mu.constants.HTTP2_HEADER_STATUS]:Mu.constants.HTTP_STATUS_OK,[Mu.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},Dce={waitForTrailers:!0},vR=class extends hJ.EventEmitter{constructor(e,n,r){super(),this.call=e,this.metadata=n,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};Si.ServerUnaryCallImpl=vR;var fy=class extends bR.Readable{constructor(e,n,r,i){super({objectMode:!0}),this.call=e,this.metadata=n,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};Si.ServerReadableStreamImpl=fy;var Lf=class extends bR.Writable{constructor(e,n,r,i){super({objectMode:!0}),this.call=e,this.metadata=n,this.serialize=r,this.request=i,this.cancelled=!1,this.trailingMetadata=new DR.Metadata,this.call.setupSurfaceCall(this),this.on("error",s=>{this.call.sendError(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,n,r){try{let i=this.call.serializeMessage(e);if(!this.call.write(i)){this.call.once("drain",r);return}}catch(i){this.emit("error",{details:(0,xf.getErrorMessage)(i),code:_t.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:_t.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}};Si.ServerWritableStreamImpl=Lf;var xu=class extends bR.Duplex{constructor(e,n,r,i,s){super({objectMode:!0}),this.call=e,this.metadata=n,this.serialize=r,this.deserialize=i,this.cancelled=!1,this.trailingMetadata=new DR.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,s),this.on("error",o=>{this.call.sendError(o),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}};Si.ServerDuplexStreamImpl=xu;xu.prototype._read=fy.prototype._read;xu.prototype._write=Lf.prototype._write;xu.prototype._final=Lf.prototype._final;var SR=class extends hJ.EventEmitter{constructor(e,n,r){super(),this.stream=e,this.handler=n,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=_t.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=_t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",i=>{}),this.stream.once("close",()=>{var i;Mf("Request to method "+((i=this.handler)===null||i===void 0?void 0:i.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:_t.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,n){return n==="deflate"?Qce(e.subarray(5)):n==="gzip"?Bce(e.subarray(5)):n==="identity"?e.subarray(5):Promise.reject({code:_t.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${n}"`})}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let n=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},uJ),bce),n);this.stream.respond(r,Dce)}receiveMetadata(e){let n=DR.Metadata.fromHttp2Headers(e);fJ.isTracerEnabled(pJ)&&Mf("Request to "+this.handler.path+" received headers "+JSON.stringify(n.toJSON()));let r=n.get(cJ);if(r.length>0){let i=r[0].toString().match(vce);if(i===null){let a=new Error("Invalid deadline");return a.code=_t.Status.OUT_OF_RANGE,this.sendError(a),n}let s=+i[1]*Sce[i[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+s),this.deadlineTimer=setTimeout(Rce,s,this),n.remove(cJ)}return n.remove(Mu.constants.HTTP2_HEADER_ACCEPT_ENCODING),n.remove(Mu.constants.HTTP2_HEADER_TE),n.remove(Mu.constants.HTTP2_HEADER_CONTENT_TYPE),n.remove("grpc-accept-encoding"),n}receiveUnaryMessage(e){return new Promise((n,r)=>{let{stream:i}=this,s=0,o=this,a=[],A=this.maxReceiveMessageSize;this.stream.on("data",l),this.stream.on("end",c),this.stream.on("error",c);function l(u){if(s+=u.byteLength,A!==-1&&s>A){i.removeListener("data",l),i.removeListener("end",c),i.removeListener("error",c),r({code:_t.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${s} vs. ${A})`});return}a.push(u)}function c(u){if(i.removeListener("data",l),i.removeListener("end",c),i.removeListener("error",c),u!==void 0){r({code:_t.Status.INTERNAL,details:u.message});return}if(s===0){r({code:_t.Status.INTERNAL,details:"received empty unary message"});return}o.emit("receiveMessage");let h=Buffer.concat(a,s),g=h.readUInt8(0)===1?e:"identity",f=o.getDecompressedMessage(h,g);if(Buffer.isBuffer(f)){n(o.deserializeMessageWithInternalError(f));return}f.then(m=>n(o.deserializeMessageWithInternalError(m)),m=>r(m.code?m:{code:_t.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}})}deserializeMessageWithInternalError(e){return E(this,null,function*(){try{return this.deserializeMessage(e)}catch(n){throw{details:(0,xf.getErrorMessage)(n),code:_t.Status.INTERNAL}}})}serializeMessage(e){let n=this.handler.serialize(e),r=n.byteLength,i=Buffer.allocUnsafe(r+5);return i.writeUInt8(0,0),i.writeUInt32BE(r,1),n.copy(i,5),i}deserializeMessage(e){return this.handler.deserialize(e)}sendUnaryMessage(e,n,r,i){return E(this,null,function*(){if(!this.checkCancelled()){if(r===void 0&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let s=this.serializeMessage(n);this.write(s),this.sendStatus({code:_t.Status.OK,details:"OK",metadata:r})}catch(s){this.sendError({details:(0,xf.getErrorMessage)(s),code:_t.Status.INTERNAL})}}})}sendStatus(e){var n,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===_t.Status.OK),!this.checkCancelled())if(Mf("Request to method "+((n=this.handler)===null||n===void 0?void 0:n.path)+" ended with status code: "+_t.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var i;let s=Object.assign({[lJ]:e.code,[AJ]:encodeURI(e.details)},(i=e.metadata)===null||i===void 0?void 0:i.toHttp2Headers());this.stream.sendTrailers(s),this.statusSent=!0}),this.stream.end());else{let i=Object.assign(Object.assign({[lJ]:e.code,[AJ]:encodeURI(e.details)},uJ),(r=e.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.respond(i,{endStream:!0}),this.statusSent=!0}}sendError(e){let n={code:_t.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&e.metadata!==void 0?e.metadata:null};"code"in e&&typeof e.code=="number"&&Number.isInteger(e.code)&&(n.code=e.code,"details"in e&&typeof e.details=="string"&&(n.details=e.details)),this.sendStatus(n)}write(e){if(!this.checkCancelled()){if(this.maxSendMessageSize!==-1&&e.length>this.maxSendMessageSize){this.sendError({code:_t.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",n=>{e.cancelled=!0,e.emit("cancelled",n)}),this.once("callEnd",n=>e.emit("callEnd",n))}setupReadable(e,n){let r=new yce.StreamDecoder,i=!1,s=!1,o=!1,a=()=>E(this,null,function*(){!o&&i&&!s&&(o=!0,yield this.pushOrBufferMessage(e,null))});this.stream.on("data",A=>E(this,null,function*(){let l=r.write(A);s=!0,this.stream.pause();for(let c of l){if(this.maxReceiveMessageSize!==-1&&c.length>this.maxReceiveMessageSize){this.sendError({code:_t.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${c.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");let h=c.readUInt8(0)===1?n:"identity",d=yield this.getDecompressedMessage(c,h);if(!d)return;yield this.pushOrBufferMessage(e,d)}s=!1,this.stream.resume(),yield a()})),this.stream.once("end",()=>E(this,null,function*(){i=!0,yield a()}))}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let n=this.messagesToPush.shift(),r=e.push(n);if(n===null||r===!1){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,n){return E(this,null,function*(){this.isPushPending?this.bufferedMessages.push(n):yield this.pushMessage(e,n)})}pushMessage(e,n){return E(this,null,function*(){if(n===null){Mf("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}Mf("Received message of length "+n.length),this.isPushPending=!0;try{let r=yield this.deserializeMessage(n);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let i=(0,xf.getErrorCode)(r);(i===null||i<_t.Status.OK||i>_t.Status.UNAUTHENTICATED)&&(i=_t.Status.INTERNAL),e.emit("error",{details:(0,xf.getErrorMessage)(r),code:i})}this.isPushPending=!1,this.bufferedMessages.length>0&&(yield this.pushMessage(e,this.bufferedMessages.shift()))})}getPeer(){var e;let n=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return n?.remoteAddress?n.remotePort?`${n.remoteAddress}:${n.remotePort}`:n.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}};Si.Http2ServerCallStream=SR;function Rce(t){let e=new Error("Deadline exceeded");e.code=_t.Status.DEADLINE_EXCEEDED,t.sendError(e),t.cancelled=!0,t.emit("cancelled","deadline")}});var kR=C(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});py.ServerCredentials=void 0;var mJ=ZS(),Of=class{static createInsecure(){return new RR}static createSsl(e,n,r=!1){if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(n))throw new TypeError("keyCertPairs must be an array");if(typeof r!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let o=0;o<n.length;o++){let a=n[o];if(a===null||typeof a!="object")throw new TypeError(`keyCertPair[${o}] must be an object`);if(!Buffer.isBuffer(a.private_key))throw new TypeError(`keyCertPair[${o}].private_key must be a Buffer`);if(!Buffer.isBuffer(a.cert_chain))throw new TypeError(`keyCertPair[${o}].cert_chain must be a Buffer`);i.push(a.cert_chain),s.push(a.private_key)}return new TR({ca:e||(0,mJ.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:mJ.CIPHER_SUITES})}};py.ServerCredentials=Of;var RR=class extends Of{_isSecure(){return!1}_getSettings(){return null}},TR=class extends Of{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}});var yJ=C(Cy=>{"use strict";Object.defineProperty(Cy,"__esModule",{value:!0});Cy.Server=void 0;var Va=B("http2"),So=qe(),ll=EJ(),Tce=kR(),CJ=bs(),Ey=Lt(),Zi=Rs(),kce=Yr(),vr=al(),my=~(1<<31),Nce=~(1<<31),Fce=2e4,{HTTP2_HEADER_PATH:IJ}=Va.constants,Mce="server";function xce(){}function NR(t){return{code:So.Status.UNIMPLEMENTED,details:`The server does not implement the method ${t}`}}function Lce(t,e){let n=NR(e);switch(t){case"unary":return(r,i)=>{i(n,null)};case"clientStream":return(r,i)=>{i(n,null)};case"serverStream":return r=>{r.emit("error",n)};case"bidi":return r=>{r.emit("error",n)};default:throw new Error(`Invalid handlerType ${t}`)}}var FR=class{constructor(e){var n,r,i,s;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new vr.ChannelzTrace,this.callTracker=new vr.ChannelzCallTracker,this.listenerChildrenTracker=new vr.ChannelzChildrenTracker,this.sessionChildrenTracker=new vr.ChannelzChildrenTracker,this.options=e??{},this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,vr.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(n=this.options["grpc.max_connection_age_ms"])!==null&&n!==void 0?n:my,this.maxConnectionAgeGraceMs=(r=this.options["grpc.max_connection_age_grace_ms"])!==null&&r!==void 0?r:my,this.keepaliveTimeMs=(i=this.options["grpc.keepalive_time_ms"])!==null&&i!==void 0?i:Nce,this.keepaliveTimeoutMs=(s=this.options["grpc.keepalive_timeout_ms"])!==null&&s!==void 0?s:Fce,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var n,r,i;let s=this.sessions.get(e),o=e.socket,a=o.remoteAddress?(0,Zi.stringToSubchannelAddress)(o.remoteAddress,o.remotePort):null,A=o.localAddress?(0,Zi.stringToSubchannelAddress)(o.localAddress,o.localPort):null,l;if(e.encrypted){let u=o,h=u.getCipher(),d=u.getCertificate(),g=u.getPeerCertificate();l={cipherSuiteStandardName:(n=h.standardName)!==null&&n!==void 0?n:null,cipherSuiteOtherName:h.standardName?null:h.name,localCertificate:d&&"raw"in d?d.raw:null,remoteCertificate:g&&"raw"in g?g.raw:null}}else l=null;return{remoteAddress:a,localAddress:A,security:l,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:(r=e.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(i=e.state.remoteWindowSize)!==null&&i!==void 0?i:null}}}trace(e){Ey.trace(So.LogVerbosity.DEBUG,Mce,"("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,n){if(e===null||typeof e!="object"||n===null||typeof n!="object")throw new Error("addService() requires two objects as arguments");let r=Object.keys(e);if(r.length===0)throw new Error("Cannot add an empty service to a server");r.forEach(i=>{let s=e[i],o;s.requestStream?s.responseStream?o="bidi":o="clientStream":s.responseStream?o="serverStream":o="unary";let a=n[i],A;if(a===void 0&&typeof s.originalName=="string"&&(a=n[s.originalName]),a!==void 0?A=a.bind(n):A=Lce(o,i),this.register(s.path,A,s.responseSerialize,s.requestDeserialize,o)===!1)throw new Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(e===null||typeof e!="object")throw new Error("removeService() requires object as argument");Object.keys(e).forEach(r=>{let i=e[r];this.unregister(i.path)})}bind(e,n){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,n,r){if(this.started===!0)throw new Error("server is already started");if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof e!="string")throw new TypeError("port must be a string");if(n===null||!(n instanceof Tce.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof r!="function")throw new TypeError("callback must be a function");let i=(0,kce.parseUri)(e);if(i===null)throw new Error(`Could not parse port "${e}"`);let s=(0,CJ.mapUriDefaultScheme)(i);if(s===null)throw new Error(`Could not get a default scheme for port "${e}"`);let o={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?o.maxSessionMemory=this.options["grpc-node.max_session_memory"]:o.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(o.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let a=(d,g)=>{process.nextTick(()=>r(d,g))},A=()=>{let d;if(n._isSecure()){let g=Object.assign(o,n._getSettings());g.enableTrace=this.options["grpc-node.tls_enable_trace"]===1,d=Va.createSecureServer(g),d.on("secureConnection",f=>{f.on("error",m=>{this.trace("An incoming TLS connection closed with error: "+m.message)})})}else d=Va.createServer(o);return d.setTimeout(0,xce),this._setupHandlers(d),d},l=(d,g,f)=>d.length===0?Promise.resolve({port:g,count:f}):Promise.all(d.map(m=>{this.trace("Attempting to bind "+(0,Zi.subchannelAddressToString)(m));let y;(0,Zi.isTcpSubchannelAddress)(m)?y={host:m.host,port:g}:y=m;let I=A();return new Promise((w,_)=>{let S=T=>{this.trace("Failed to bind "+(0,Zi.subchannelAddressToString)(m)+" with error "+T.message),w(T)};I.once("error",S),I.listen(y,()=>{if(this.shutdown){I.close(),w(new Error("bindAsync failed because server is shutdown"));return}let T=I.address(),oe;typeof T=="string"?oe={path:T}:oe={host:T.address,port:T.port};let Qe=(0,vr.registerChannelzSocket)((0,Zi.subchannelAddressToString)(oe),()=>({localAddress:oe,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(Qe),this.http2ServerList.push({server:I,channelzRef:Qe}),this.trace("Successfully bound "+(0,Zi.subchannelAddressToString)(oe)),w("port"in oe?oe.port:g),I.removeListener("error",S)})})})).then(m=>{let y=0;for(let I of m)if(typeof I=="number"&&(y+=1,I!==g))throw new Error("Invalid state: multiple port numbers added from single address");return{port:g,count:y+f}}),c=d=>{if(d.length===0)return Promise.resolve({port:0,count:0});let g=d[0],f=A();return new Promise((m,y)=>{let I=w=>{this.trace("Failed to bind "+(0,Zi.subchannelAddressToString)(g)+" with error "+w.message),m(c(d.slice(1)))};f.once("error",I),f.listen(g,()=>{if(this.shutdown){f.close(),m({port:0,count:0});return}let w=f.address(),_={host:w.address,port:w.port},S=(0,vr.registerChannelzSocket)((0,Zi.subchannelAddressToString)(_),()=>({localAddress:_,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(S),this.http2ServerList.push({server:f,channelzRef:S}),this.trace("Successfully bound "+(0,Zi.subchannelAddressToString)(_)),m(l(d.slice(1),w.port,1)),f.removeListener("error",I)})})},u={onSuccessfulResolution:(d,g,f)=>{if(u.onSuccessfulResolution=()=>{},this.shutdown&&a(new Error("bindAsync failed because server is shutdown"),0),d.length===0){a(new Error(`No addresses resolved for port ${e}`),0);return}let m;(0,Zi.isTcpSubchannelAddress)(d[0])?d[0].port===0?m=c(d):m=l(d,d[0].port,0):m=l(d,1,0),m.then(y=>{if(y.count===0){let I=`No address added out of total ${d.length} resolved`;Ey.log(So.LogVerbosity.ERROR,I),a(new Error(I),0)}else y.count<d.length&&Ey.log(So.LogVerbosity.INFO,`WARNING Only ${y.count} addresses added out of total ${d.length} resolved`),a(null,y.port)},y=>{let I=`No address added out of total ${d.length} resolved`;Ey.log(So.LogVerbosity.ERROR,I),a(new Error(I),0)})},onError:d=>{a(new Error(d.details),0)}};(0,CJ.createResolver)(s,u,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:n}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(n),(0,vr.unregisterChannelzRef)(n))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,n)=>{n.destroy(Va.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,vr.unregisterChannelzRef)(this.channelzRef)}register(e,n,r,i,s){return this.handlers.has(e)?!1:(this.handlers.set(e,{func:n,serialize:r,deserialize:i,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every(({server:e})=>e.listening!==!0))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let n=s=>{this.channelzEnabled&&(0,vr.unregisterChannelzRef)(this.channelzRef),e(s)},r=0;function i(){r--,r===0&&n()}this.started=!1,this.shutdown=!0;for(let{server:s,channelzRef:o}of this.http2ServerList)s.listening&&(r++,s.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(o),(0,vr.unregisterChannelzRef)(o)),i()}));this.sessions.forEach((s,o)=>{o.closed||(r+=1,o.close(i))}),r===0&&n()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,n){let r=n[Va.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof r!="string"||!r.startsWith("application/grpc")?(e.respond({[Va.constants.HTTP2_HEADER_STATUS]:Va.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let n=this.handlers.get(e);return n===void 0?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):n}_respondWithError(e,n,r=null){let i=new ll.Http2ServerCallStream(n,null,this.options);e.code===void 0&&(e.code=So.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed()),i.sendError(e)}_channelzHandler(e,n){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),r?.streamTracker.addCallStarted(),!this._verifyContentType(e,n)){this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed();return}let i=n[IJ],s=this._retrieveHandler(i);if(!s){this._respondWithError(NR(i),e,r);return}let o=new ll.Http2ServerCallStream(e,s,this.options);o.once("callEnd",a=>{a===So.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",a=>{a?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,s,n)||(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed(),o.sendError({code:So.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(e,n){if(this._verifyContentType(e,n)!==!0)return;let r=n[IJ],i=this._retrieveHandler(r);if(!i){this._respondWithError(NR(r),e,null);return}let s=new ll.Http2ServerCallStream(e,i,this.options);this._runHandlerForCall(s,i,n)||s.sendError({code:So.Status.INTERNAL,details:`Unknown handler type: ${i.type}`})}_runHandlerForCall(e,n,r){var i;let s=e.receiveMetadata(r),o=(i=s.get("grpc-encoding")[0])!==null&&i!==void 0?i:"identity";s.remove("grpc-encoding");let{type:a}=n;if(a==="unary")Oce(e,n,s,o);else if(a==="clientStream")Uce(e,n,s,o);else if(a==="serverStream")Pce(e,n,s,o);else if(a==="bidi")Vce(e,n,s,o);else return!1;return!0}_setupHandlers(e){if(e===null)return;let n=e.address(),r="null";n&&(typeof n=="string"?r=n:r=n.address+":"+n.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",s=>{var o,a,A,l,c;if(!this.started){s.destroy();return}let u=(0,vr.registerChannelzSocket)((o=s.socket.remoteAddress)!==null&&o!==void 0?o:"unknown",this.getChannelzSessionInfoGetter(s),this.channelzEnabled),h={ref:u,streamTracker:new vr.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(s,h);let d=s.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+d),this.sessionChildrenTracker.refChild(u));let g=null,f=null,m=!1;if(this.maxConnectionAgeMs!==my){let I=this.maxConnectionAgeMs/10,w=Math.random()*I*2-I;g=(A=(a=setTimeout(()=>{var _,S;m=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+d);try{s.goaway(Va.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==my&&(f=(S=(_=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs)).unref)===null||S===void 0?void 0:S.call(_))},this.maxConnectionAgeMs+w)).unref)===null||A===void 0?void 0:A.call(a)}let y=(c=(l=setInterval(()=>{var I,w;let _=(w=(I=setTimeout(()=>{m=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+d),s.close()},this.keepaliveTimeoutMs)).unref)===null||w===void 0?void 0:w.call(I);try{s.ping((S,T,oe)=>{clearTimeout(_)})}catch{s.destroy()}},this.keepaliveTimeMs)).unref)===null||c===void 0?void 0:c.call(l);s.on("close",()=>{this.channelzEnabled&&(m||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+d),this.sessionChildrenTracker.unrefChild(u),(0,vr.unregisterChannelzRef)(u)),g&&clearTimeout(g),f&&clearTimeout(f),y&&clearTimeout(y),this.sessions.delete(s)})})}};Cy.Server=FR;function Oce(t,e,n,r){return E(this,null,function*(){try{let i=yield t.receiveUnaryMessage(r);if(i===void 0||t.cancelled)return;let s=new ll.ServerUnaryCallImpl(t,n,i);e.func(s,(o,a,A,l)=>{t.sendUnaryMessage(o,a,A,l)})}catch(i){t.sendError(i)}})}function Uce(t,e,n,r){let i=new ll.ServerReadableStreamImpl(t,n,e.deserialize,r);function s(o,a,A,l){i.destroy(),t.sendUnaryMessage(o,a,A,l)}t.cancelled||(i.on("error",s),e.func(i,s))}function Pce(t,e,n,r){return E(this,null,function*(){try{let i=yield t.receiveUnaryMessage(r);if(i===void 0||t.cancelled)return;let s=new ll.ServerWritableStreamImpl(t,n,e.serialize,i);e.func(s)}catch(i){t.sendError(i)}})}function Vce(t,e,n,r){let i=new ll.ServerDuplexStreamImpl(t,n,e.serialize,e.deserialize,r);t.cancelled||e.func(i)}});var BJ=C(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0});Iy.StatusBuilder=void 0;var MR=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};Iy.StatusBuilder=MR});var xR=C(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.isDuration=Ga.durationToMs=Ga.msToDuration=void 0;function Gce(t){return{seconds:t/1e3|0,nanos:t%1e3*1e6|0}}Ga.msToDuration=Gce;function qce(t){return t.seconds*1e3+t.nanos/1e6|0}Ga.durationToMs=qce;function Hce(t){return typeof t.seconds=="number"&&typeof t.nanos=="number"}Ga.isDuration=Hce});var HR=C(qa=>{"use strict";var LR;Object.defineProperty(qa,"__esModule",{value:!0});qa.setup=qa.OutlierDetectionLoadBalancer=qa.OutlierDetectionLoadBalancingConfig=void 0;var By=mi(),wJ=qe(),cl=xR(),_J=YR(),vJ=Ca(),Yce=eI(),Jce=Qa(),QJ=Rs(),Wce=cy(),zce=Lt(),jce="outlier_detection";function In(t){zce.trace(wJ.LogVerbosity.DEBUG,jce,t)}var qR="outlier_detection",Kce=((LR=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&LR!==void 0?LR:"true")==="true",Xce={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},Zce={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function Lu(t,e,n,r){if(e in t&&typeof t[e]!==n){let i=r?`${r}.${e}`:e;throw new Error(`outlier detection config ${i} parse error: expected ${n}, got ${typeof t[e]}`)}}function OR(t,e,n){let r=n?`${n}.${e}`:e;if(e in t){if(!(0,cl.isDuration)(t[e]))throw new Error(`outlier detection config ${r} parse error: expected Duration, got ${typeof t[e]}`);if(!(t[e].seconds>=0&&t[e].seconds<=315576e6&&t[e].nanos>=0&&t[e].nanos<=999999999))throw new Error(`outlier detection config ${r} parse error: values out of range for non-negative Duaration`)}}function yy(t,e,n){let r=n?`${n}.${e}`:e;if(Lu(t,e,"number",n),e in t&&!(t[e]>=0&&t[e]<=100))throw new Error(`outlier detection config ${r} parse error: value out of range for percentage (0-100)`)}var Uf=class t{constructor(e,n,r,i,s,o,a){if(this.childPolicy=a,a.length>0&&a[0].getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=n??3e4,this.maxEjectionTimeMs=r??3e5,this.maxEjectionPercent=i??10,this.successRateEjection=s?Object.assign(Object.assign({},Xce),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},Zce),o):null}getLoadBalancerName(){return qR}toJsonObject(){return{interval:(0,cl.msToDuration)(this.intervalMs),base_ejection_time:(0,cl.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,cl.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new t(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var n;if(OR(e,"interval"),OR(e,"base_ejection_time"),OR(e,"max_ejection_time"),yy(e,"max_ejection_percent"),"success_rate_ejection"in e){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");Lu(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),yy(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),Lu(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),Lu(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");yy(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),yy(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),Lu(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),Lu(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new t(e.interval?(0,cl.durationToMs)(e.interval):null,e.base_ejection_time?(0,cl.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,cl.durationToMs)(e.max_ejection_time):null,(n=e.max_ejection_percent)!==null&&n!==void 0?n:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(vJ.validateLoadBalancingConfig))}};qa.OutlierDetectionLoadBalancingConfig=Uf;var PR=class extends Wce.BaseSubchannelWrapper{constructor(e,n){super(e),this.mapEntry=n,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((r,i,s,o)=>{if(this.childSubchannelState=s,!this.ejected)for(let a of this.stateListeners)a(this,i,s,o)})}getConnectivityState(){return this.ejected?By.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let n=this.stateListeners.indexOf(e);n>-1&&this.stateListeners.splice(n,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(let e of this.stateListeners)e(this,this.childSubchannelState,By.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(let e of this.stateListeners)e(this,By.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function UR(){return{success:0,failure:0}}var VR=class{constructor(){this.activeBucket=UR(),this.inactiveBucket=UR()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=UR()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},GR=class{constructor(e,n){this.wrappedPicker=e,this.countCalls=n}pick(e){let n=this.wrappedPicker.pick(e);if(n.pickResultType===Jce.PickResultType.COMPLETE){let r=n.subchannel,i=r.getMapEntry();if(i){let s=n.onCallEnded;return this.countCalls&&(s=o=>{var a;o===wJ.Status.OK?i.counter.addSuccess():i.counter.addFailure(),(a=n.onCallEnded)===null||a===void 0||a.call(n,o)}),Object.assign(Object.assign({},n),{subchannel:r.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},n),{subchannel:r.getWrappedSubchannel()})}else return n}},Qy=class{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new Yce.ChildLoadBalancerHandler((0,_J.createChildChannelControlHelper)(e,{createSubchannel:(n,r)=>{let i=e.createSubchannel(n,r),s=this.addressMap.get((0,QJ.subchannelAddressToString)(n)),o=new PR(i,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(n,r)=>{n===By.ConnectivityState.READY?e.updateState(n,new GR(r,this.isCountingEnabled())):e.updateState(n,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let n of this.addressMap.values())n.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let n=this.latestConfig.getSuccessRateEjectionConfig();if(!n)return;In("Running success rate check");let r=n.request_volume,i=0,s=[];for(let[u,h]of this.addressMap){let d=h.counter.getLastSuccesses(),g=h.counter.getLastFailures();In("Stats for "+u+": successes="+d+" failures="+g+" targetRequestVolume="+r),d+g>=r&&(i+=1,s.push(d/(d+g)))}if(In("Found "+i+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),i<n.minimum_hosts)return;let o=s.reduce((u,h)=>u+h)/s.length,a=0;for(let u of s){let h=u-o;a+=h*h}let A=a/s.length,l=Math.sqrt(A),c=o-l*(n.stdev_factor/1e3);In("stdev="+l+" ejectionThreshold="+c);for(let[u,h]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let d=h.counter.getLastSuccesses(),g=h.counter.getLastFailures();if(d+g<r)continue;let f=d/(d+g);if(In("Checking candidate "+u+" successRate="+f),f<c){let m=Math.random()*100;In("Candidate "+u+" randomNumber="+m+" enforcement_percentage="+n.enforcement_percentage),m<n.enforcement_percentage&&(In("Ejecting candidate "+u),this.eject(h,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let n=this.latestConfig.getFailurePercentageEjectionConfig();if(!n)return;In("Running failure percentage check. threshold="+n.threshold+" request volume threshold="+n.request_volume);let r=0;for(let i of this.addressMap.values()){let s=i.counter.getLastSuccesses(),o=i.counter.getLastFailures();s+o>=n.request_volume&&(r+=1)}if(!(r<n.minimum_hosts))for(let[i,s]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(In("Candidate successes="+o+" failures="+a),o+a<n.request_volume)continue;if(a*100/(a+o)>n.threshold){let l=Math.random()*100;In("Candidate "+i+" randomNumber="+l+" enforcement_percentage="+n.enforcement_percentage),l<n.enforcement_percentage&&(In("Ejecting candidate "+i),this.eject(s,e))}}}eject(e,n){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let r of e.subchannelWrappers)r.eject()}uneject(e){e.currentEjectionTimestamp=null;for(let n of e.subchannelWrappers)n.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var n,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(r=(n=this.ejectionTimer).unref)===null||r===void 0||r.call(n)}runChecks(){let e=new Date;if(In("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[n,r]of this.addressMap.entries())if(r.currentEjectionTimestamp===null)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let i=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(r.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(i*r.ejectionTimeMultiplier,Math.max(i,s))),o<new Date&&(In("Unejecting "+n),this.uneject(r))}}}updateAddressList(e,n,r){if(!(n instanceof Uf))return;let i=new Set;for(let o of e)i.add((0,QJ.subchannelAddressToString)(o));for(let o of i)this.addressMap.has(o)||(In("Adding map entry for "+o),this.addressMap.set(o,{counter:new VR,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let o of this.addressMap.keys())i.has(o)||(In("Removing map entry for "+o),this.addressMap.delete(o));let s=(0,vJ.getFirstUsableConfig)(n.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,s,r),n.getSuccessRateEjectionConfig()||n.getFailurePercentageEjectionConfig())if(this.timerStartTime){In("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=n.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else In("Starting new timer"),this.timerStartTime=new Date,this.startTimer(n.getIntervalMs()),this.switchAllBuckets();else{In("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.addressMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}this.latestConfig=n}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return qR}};qa.OutlierDetectionLoadBalancer=Qy;function $ce(){Kce&&(0,_J.registerLoadBalancerType)(qR,Qy,Uf)}qa.setup=$ce});var YR=C(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.OutlierDetectionLoadBalancingConfig=pe.BaseSubchannelWrapper=pe.registerAdminService=pe.FilterStackFactory=pe.BaseFilter=pe.PickResultType=pe.QueuePicker=pe.UnavailablePicker=pe.ChildLoadBalancerHandler=pe.subchannelAddressToString=pe.validateLoadBalancingConfig=pe.getFirstUsableConfig=pe.registerLoadBalancerType=pe.createChildChannelControlHelper=pe.BackoffTimeout=pe.durationToMs=pe.uriToString=pe.createResolver=pe.registerResolver=pe.log=pe.trace=void 0;var SJ=Lt();Object.defineProperty(pe,"trace",{enumerable:!0,get:function(){return SJ.trace}});Object.defineProperty(pe,"log",{enumerable:!0,get:function(){return SJ.log}});var bJ=bs();Object.defineProperty(pe,"registerResolver",{enumerable:!0,get:function(){return bJ.registerResolver}});Object.defineProperty(pe,"createResolver",{enumerable:!0,get:function(){return bJ.createResolver}});var eue=Yr();Object.defineProperty(pe,"uriToString",{enumerable:!0,get:function(){return eue.uriToString}});var tue=xR();Object.defineProperty(pe,"durationToMs",{enumerable:!0,get:function(){return tue.durationToMs}});var nue=af();Object.defineProperty(pe,"BackoffTimeout",{enumerable:!0,get:function(){return nue.BackoffTimeout}});var wy=Ca();Object.defineProperty(pe,"createChildChannelControlHelper",{enumerable:!0,get:function(){return wy.createChildChannelControlHelper}});Object.defineProperty(pe,"registerLoadBalancerType",{enumerable:!0,get:function(){return wy.registerLoadBalancerType}});Object.defineProperty(pe,"getFirstUsableConfig",{enumerable:!0,get:function(){return wy.getFirstUsableConfig}});Object.defineProperty(pe,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return wy.validateLoadBalancingConfig}});var rue=Rs();Object.defineProperty(pe,"subchannelAddressToString",{enumerable:!0,get:function(){return rue.subchannelAddressToString}});var iue=eI();Object.defineProperty(pe,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return iue.ChildLoadBalancerHandler}});var JR=Qa();Object.defineProperty(pe,"UnavailablePicker",{enumerable:!0,get:function(){return JR.UnavailablePicker}});Object.defineProperty(pe,"QueuePicker",{enumerable:!0,get:function(){return JR.QueuePicker}});Object.defineProperty(pe,"PickResultType",{enumerable:!0,get:function(){return JR.PickResultType}});var sue=jI();Object.defineProperty(pe,"BaseFilter",{enumerable:!0,get:function(){return sue.BaseFilter}});var oue=iR();Object.defineProperty(pe,"FilterStackFactory",{enumerable:!0,get:function(){return oue.FilterStackFactory}});var aue=nI();Object.defineProperty(pe,"registerAdminService",{enumerable:!0,get:function(){return aue.registerAdminService}});var Aue=cy();Object.defineProperty(pe,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return Aue.BaseSubchannelWrapper}});var lue=HR();Object.defineProperty(pe,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return lue.OutlierDetectionLoadBalancingConfig}})});var DJ=C(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});_y.setup=void 0;var cue=bs(),WR=class{constructor(e,n,r){this.listener=n,this.addresses=[],this.hasReturnedResult=!1;let i;e.authority===""?i="/"+e.path:i=e.path,this.addresses=[{path:i}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}};function uue(){(0,cue.registerResolver)("unix",WR)}_y.setup=uue});var FJ=C(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});by.setup=void 0;var RJ=B("net"),vy=qe(),zR=lr(),TJ=bs(),kJ=Yr(),hue=Lt(),due="ip_resolver";function NJ(t){hue.trace(vy.LogVerbosity.DEBUG,due,t)}var jR="ipv4",KR="ipv6",gue=443,Sy=class{constructor(e,n,r){var i;this.listener=n,this.addresses=[],this.error=null,this.hasReturnedResult=!1,NJ("Resolver constructed for target "+(0,kJ.uriToString)(e));let s=[];if(!(e.scheme===jR||e.scheme===KR)){this.error={code:vy.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new zR.Metadata};return}let o=e.path.split(",");for(let a of o){let A=(0,kJ.splitHostPort)(a);if(A===null){this.error={code:vy.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new zR.Metadata};return}if(e.scheme===jR&&!(0,RJ.isIPv4)(A.host)||e.scheme===KR&&!(0,RJ.isIPv6)(A.host)){this.error={code:vy.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new zR.Metadata};return}s.push({host:A.host,port:(i=A.port)!==null&&i!==void 0?i:gue})}this.addresses=s,NJ("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}};function fue(){(0,TJ.registerResolver)(jR,Sy),(0,TJ.registerResolver)(KR,Sy)}by.setup=fue});var LJ=C(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.setup=qs.PickFirstLoadBalancer=qs.shuffled=qs.PickFirstLoadBalancingConfig=void 0;var MJ=Ca(),Wn=mi(),Dy=Qa(),pue=Lt(),Eue=qe(),mue="pick_first";function XR(t){pue.trace(Eue.LogVerbosity.DEBUG,mue,t)}var Pf="pick_first",Cue=250,Vf=class t{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return Pf}toJsonObject(){return{[Pf]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new t(e.shuffleAddressList===!0)}};qs.PickFirstLoadBalancingConfig=Vf;var ZR=class{constructor(e){this.subchannel=e}pick(e){return{pickResultType:Dy.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function xJ(t){let e=t.slice();for(let n=e.length-1;n>1;n--){let r=Math.floor(Math.random()*(n+1)),i=e[n];e[n]=e[r],e[r]=i}return e}qs.shuffled=xJ;var Ry=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=Wn.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(n,r,i,s,o)=>{this.onSubchannelStateUpdate(n,r,i,o)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(Wn.ConnectivityState.READY,new ZR(this.currentPick)):this.children.length===0?this.updateState(Wn.ConnectivityState.IDLE,new Dy.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(Wn.ConnectivityState.TRANSIENT_FAILURE,new Dy.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Wn.ConnectivityState.CONNECTING,new Dy.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(this.currentPick!==null){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,n,r,i){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(e)){r!==Wn.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[o,a]of this.children.entries())if(e.realSubchannelEquals(a.subchannel)){r===Wn.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),r===Wn.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,i&&(this.lastError=i),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[n,r]of this.children.entries())if(n>=e){let i=r.subchannel.getConnectivityState();if(i===Wn.ConnectivityState.IDLE||i===Wn.ConnectivityState.CONNECTING){this.startConnecting(n);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var n,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===Wn.ConnectivityState.IDLE&&(XR("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var i;(i=this.children[e])===null||i===void 0||i.subchannel.startConnecting()})),this.connectionDelayTimeout=(r=(n=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},Cue)).unref)===null||r===void 0?void 0:r.call(n)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(XR("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,this.currentPick!==null&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,n){XR(Wn.ConnectivityState[this.currentState]+" -> "+Wn.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,n)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let n=e.map(r=>({subchannel:this.channelControlHelper.createSubchannel(r,{}),hasReportedTransientFailure:!1}));for(let{subchannel:r}of n)r.ref(),this.channelControlHelper.addChannelzChild(r.getChannelzRef());this.resetSubchannelList(),this.children=n;for(let{subchannel:r}of this.children)if(r.addConnectivityStateListener(this.subchannelStateListener),r.getConnectivityState()===Wn.ConnectivityState.READY){this.pickSubchannel(r);return}for(let r of this.children)r.subchannel.getConnectivityState()===Wn.ConnectivityState.TRANSIENT_FAILURE&&(r.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,n){n instanceof Vf&&(n.getShuffleAddressList()&&(e=xJ(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===Wn.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return Pf}};qs.PickFirstLoadBalancer=Ry;function Iue(){(0,MJ.registerLoadBalancerType)(Pf,Ry,Vf),(0,MJ.registerDefaultLoadBalancerType)(Pf)}qs.setup=Iue});var UJ=C(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.setup=Ou.RoundRobinLoadBalancer=void 0;var yue=Ca(),zn=mi(),Ty=Qa(),Bue=Rs(),Que=Lt(),wue=qe(),_ue="round_robin";function OJ(t){Que.trace(wue.LogVerbosity.DEBUG,_ue,t)}var ky="round_robin",$R=class t{getLoadBalancerName(){return ky}constructor(){}toJsonObject(){return{[ky]:{}}}static createFromJson(e){return new t}},eT=class{constructor(e,n=0){this.subchannelList=e,this.nextIndex=n}pick(e){let n=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:Ty.PickResultType.COMPLETE,subchannel:n,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}},Ny=class{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=zn.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(n,r,i,s,o)=>{this.calculateAndUpdateState(),(i===zn.ConnectivityState.TRANSIENT_FAILURE||i===zn.ConnectivityState.IDLE)&&(o&&(this.lastError=o),this.channelControlHelper.requestReresolution(),n.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(n=>n.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(zn.ConnectivityState.READY)>0){let e=this.subchannels.filter(r=>r.getConnectivityState()===zn.ConnectivityState.READY),n=0;this.currentReadyPicker!==null&&(n=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),n<0&&(n=0)),this.updateState(zn.ConnectivityState.READY,new eT(e,n))}else this.countSubchannelsWithState(zn.ConnectivityState.CONNECTING)>0?this.updateState(zn.ConnectivityState.CONNECTING,new Ty.QueuePicker(this)):this.countSubchannelsWithState(zn.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(zn.ConnectivityState.TRANSIENT_FAILURE,new Ty.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(zn.ConnectivityState.IDLE,new Ty.QueuePicker(this))}updateState(e,n){OJ(zn.ConnectivityState[this.currentState]+" -> "+zn.ConnectivityState[e]),e===zn.ConnectivityState.READY?this.currentReadyPicker=n:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,n)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,n){this.resetSubchannelList(),OJ("Connect to address list "+e.map(r=>(0,Bue.subchannelAddressToString)(r))),this.subchannels=e.map(r=>this.channelControlHelper.createSubchannel(r,{}));for(let r of this.subchannels){r.ref(),r.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(r.getChannelzRef());let i=r.getConnectivityState();(i===zn.ConnectivityState.IDLE||i===zn.ConnectivityState.TRANSIENT_FAILURE)&&r.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return ky}};Ou.RoundRobinLoadBalancer=Ny;function vue(){(0,yue.registerLoadBalancerType)(ky,Ny,$R)}Ou.setup=vue});var qJ=C(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.experimental=z.addAdminServicesToServer=z.getChannelzHandlers=z.getChannelzServiceDefinition=z.InterceptorConfigurationError=z.InterceptingCall=z.RequesterBuilder=z.ListenerBuilder=z.StatusBuilder=z.getClientChannel=z.ServerCredentials=z.Server=z.setLogVerbosity=z.setLogger=z.load=z.loadObject=z.CallCredentials=z.ChannelCredentials=z.waitForClientReady=z.closeClient=z.Channel=z.makeGenericClientConstructor=z.makeClientConstructor=z.loadPackageDefinition=z.Client=z.compressionAlgorithms=z.propagate=z.connectivityState=z.status=z.logVerbosity=z.Metadata=z.credentials=void 0;var Fy=KS();Object.defineProperty(z,"CallCredentials",{enumerable:!0,get:function(){return Fy.CallCredentials}});var Sue=bb();Object.defineProperty(z,"Channel",{enumerable:!0,get:function(){return Sue.ChannelImplementation}});var bue=sR();Object.defineProperty(z,"compressionAlgorithms",{enumerable:!0,get:function(){return bue.CompressionAlgorithms}});var Due=mi();Object.defineProperty(z,"connectivityState",{enumerable:!0,get:function(){return Due.ConnectivityState}});var My=WC();Object.defineProperty(z,"ChannelCredentials",{enumerable:!0,get:function(){return My.ChannelCredentials}});var PJ=Sb();Object.defineProperty(z,"Client",{enumerable:!0,get:function(){return PJ.Client}});var tT=qe();Object.defineProperty(z,"logVerbosity",{enumerable:!0,get:function(){return tT.LogVerbosity}});Object.defineProperty(z,"status",{enumerable:!0,get:function(){return tT.Status}});Object.defineProperty(z,"propagate",{enumerable:!0,get:function(){return tT.Propagate}});var VJ=Lt(),nT=Rb();Object.defineProperty(z,"loadPackageDefinition",{enumerable:!0,get:function(){return nT.loadPackageDefinition}});Object.defineProperty(z,"makeClientConstructor",{enumerable:!0,get:function(){return nT.makeClientConstructor}});Object.defineProperty(z,"makeGenericClientConstructor",{enumerable:!0,get:function(){return nT.makeClientConstructor}});var Rue=lr();Object.defineProperty(z,"Metadata",{enumerable:!0,get:function(){return Rue.Metadata}});var Tue=yJ();Object.defineProperty(z,"Server",{enumerable:!0,get:function(){return Tue.Server}});var kue=kR();Object.defineProperty(z,"ServerCredentials",{enumerable:!0,get:function(){return kue.ServerCredentials}});var Nue=BJ();Object.defineProperty(z,"StatusBuilder",{enumerable:!0,get:function(){return Nue.StatusBuilder}});z.credentials={combineChannelCredentials:(t,...e)=>e.reduce((n,r)=>n.compose(r),t),combineCallCredentials:(t,...e)=>e.reduce((n,r)=>n.compose(r),t),createInsecure:My.ChannelCredentials.createInsecure,createSsl:My.ChannelCredentials.createSsl,createFromSecureContext:My.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:Fy.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:Fy.CallCredentials.createFromGoogleCredential,createEmpty:Fy.CallCredentials.createEmpty};var Fue=t=>t.close();z.closeClient=Fue;var Mue=(t,e,n)=>t.waitForReady(e,n);z.waitForClientReady=Mue;var xue=(t,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};z.loadObject=xue;var Lue=(t,e,n)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};z.load=Lue;var Oue=t=>{VJ.setLogger(t)};z.setLogger=Oue;var Uue=t=>{VJ.setLoggerVerbosity(t)};z.setLogVerbosity=Uue;var Pue=t=>PJ.Client.prototype.getChannel.call(t);z.getClientChannel=Pue;var xy=wb();Object.defineProperty(z,"ListenerBuilder",{enumerable:!0,get:function(){return xy.ListenerBuilder}});Object.defineProperty(z,"RequesterBuilder",{enumerable:!0,get:function(){return xy.RequesterBuilder}});Object.defineProperty(z,"InterceptingCall",{enumerable:!0,get:function(){return xy.InterceptingCall}});Object.defineProperty(z,"InterceptorConfigurationError",{enumerable:!0,get:function(){return xy.InterceptorConfigurationError}});var GJ=al();Object.defineProperty(z,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return GJ.getChannelzServiceDefinition}});Object.defineProperty(z,"getChannelzHandlers",{enumerable:!0,get:function(){return GJ.getChannelzHandlers}});var Vue=nI();Object.defineProperty(z,"addAdminServicesToServer",{enumerable:!0,get:function(){return Vue.addAdminServicesToServer}});var Gue=YR();z.experimental=Gue;var que=JD(),Hue=DJ(),Yue=FJ(),Jue=LJ(),Wue=UJ(),zue=HR(),jue=al();que.setup(),Hue.setup(),Yue.setup(),Jue.setup(),Wue.setup(),zue.setup(),jue.setup()});var St=C((JMe,sz)=>{"use strict";sz.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kHeadersList:Symbol("headers list"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kHTTP2BuildRequest:Symbol("http2 build request"),kHTTP1BuildRequest:Symbol("http1 build request"),kHTTP2CopyHeaders:Symbol("http2 copy headers"),kHTTPConnVersion:Symbol("http connection version")}});var ut=C((WMe,oz)=>{"use strict";var sn=class extends Error{constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},EF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},mF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},CF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},IF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},yF=class t extends sn{constructor(e,n,r,i){super(e),Error.captureStackTrace(this,t),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=n,this.statusCode=n,this.headers=r}},BF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},QF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},wF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},_F=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},vF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},SF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},bF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},DF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},RF=class t extends sn{constructor(e,n){super(e),Error.captureStackTrace(this,t),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=n}},oQ=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},TF=class extends sn{constructor(e){super(e),Error.captureStackTrace(this,oQ),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},kF=class t extends Error{constructor(e,n,r){super(e),Error.captureStackTrace(this,t),this.name="HTTPParserError",this.code=n?`HPE_${n}`:void 0,this.data=r?r.toString():void 0}},NF=class t extends sn{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}};oz.exports={HTTPParserError:kF,UndiciError:sn,HeadersTimeoutError:mF,HeadersOverflowError:CF,BodyTimeoutError:IF,RequestContentLengthMismatchError:vF,ConnectTimeoutError:EF,ResponseStatusCodeError:yF,InvalidArgumentError:BF,InvalidReturnValueError:QF,RequestAbortedError:wF,ClientDestroyedError:bF,ClientClosedError:DF,InformationalError:_F,SocketError:RF,NotSupportedError:oQ,ResponseContentLengthMismatchError:SF,BalancedPoolMissingUpstreamError:TF,ResponseExceededMaxSizeError:NF}});var Ue=C((zMe,Ez)=>{"use strict";var cz=B("assert"),{kDestroyed:uz,kBodyUsed:az}=St(),{IncomingMessage:VCe}=B("http"),Th=B("stream"),GCe=B("net"),{InvalidArgumentError:Nn}=ut(),{Blob:Az}=B("buffer"),AQ=B("util"),{stringify:qCe}=B("querystring"),[FF,lz]=process.versions.node.split(".").map(t=>Number(t));function HCe(){}function MF(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}function hz(t){return Az&&t instanceof Az||t&&typeof t=="object"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function YCe(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let n=qCe(e);return n&&(t+="?"+n),t}function dz(t){if(typeof t=="string"){if(t=new URL(t),!/^https?:/.test(t.origin||t.protocol))throw new Nn("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Nn("Invalid URL: The URL argument must be a non-null object.");if(!/^https?:/.test(t.origin||t.protocol))throw new Nn("Invalid URL protocol: the URL must start with `http:` or `https:`.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&!Number.isFinite(parseInt(t.port)))throw new Nn("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Nn("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Nn("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Nn("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Nn("Invalid URL origin: the origin must be a string or null/undefined.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,n=t.origin!=null?t.origin:`${t.protocol}//${t.hostname}:${e}`,r=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;n.endsWith("/")&&(n=n.substring(0,n.length-1)),r&&!r.startsWith("/")&&(r=`/${r}`),t=new URL(n+r)}return t}function JCe(t){if(t=dz(t),t.pathname!=="/"||t.search||t.hash)throw new Nn("invalid url");return t}function WCe(t){if(t[0]==="["){let n=t.indexOf("]");return cz(n!==-1),t.substr(1,n-1)}let e=t.indexOf(":");return e===-1?t:t.substr(0,e)}function zCe(t){if(!t)return null;cz.strictEqual(typeof t,"string");let e=WCe(t);return GCe.isIP(e)?"":e}function jCe(t){return JSON.parse(JSON.stringify(t))}function KCe(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}function XCe(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}function ZCe(t){if(t==null)return 0;if(MF(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(hz(t))return t.size!=null?t.size:null;if(fz(t))return t.byteLength}return null}function xF(t){return!t||!!(t.destroyed||t[uz])}function gz(t){let e=t&&t._readableState;return xF(t)&&e&&!e.endEmitted}function $Ce(t,e){!MF(t)||xF(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===VCe&&(t.socket=null),t.destroy(e)):e&&process.nextTick((n,r)=>{n.emit("error",r)},t,e),t.destroyed!==!0&&(t[uz]=!0))}var eIe=/timeout=(\d+)/;function tIe(t){let e=t.toString().match(eIe);return e?parseInt(e[1],10)*1e3:null}function nIe(t,e={}){if(!Array.isArray(t))return t;for(let n=0;n<t.length;n+=2){let r=t[n].toString().toLowerCase(),i=e[r];i?(Array.isArray(i)||(i=[i],e[r]=i),i.push(t[n+1].toString("utf8"))):Array.isArray(t[n+1])?e[r]=t[n+1]:e[r]=t[n+1].toString("utf8")}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}function rIe(t){let e=[],n=!1,r=-1;for(let i=0;i<t.length;i+=2){let s=t[i+0].toString(),o=t[i+1].toString("utf8");s.length===14&&(s==="content-length"||s.toLowerCase()==="content-length")?(e.push(s,o),n=!0):s.length===19&&(s==="content-disposition"||s.toLowerCase()==="content-disposition")?r=e.push(s,o)-1:e.push(s,o)}return n&&r!==-1&&(e[r]=Buffer.from(e[r]).toString("latin1")),e}function fz(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}function iIe(t,e,n){if(!t||typeof t!="object")throw new Nn("handler must be an object");if(typeof t.onConnect!="function")throw new Nn("invalid onConnect method");if(typeof t.onError!="function")throw new Nn("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Nn("invalid onBodySent method");if(n||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Nn("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Nn("invalid onHeaders method");if(typeof t.onData!="function")throw new Nn("invalid onData method");if(typeof t.onComplete!="function")throw new Nn("invalid onComplete method")}}function sIe(t){return!!(t&&(Th.isDisturbed?Th.isDisturbed(t)||t[az]:t[az]||t.readableDidRead||t._readableState&&t._readableState.dataEmitted||gz(t)))}function oIe(t){return!!(t&&(Th.isErrored?Th.isErrored(t):/state: 'errored'/.test(AQ.inspect(t))))}function aIe(t){return!!(t&&(Th.isReadable?Th.isReadable(t):/state: 'readable'/.test(AQ.inspect(t))))}function AIe(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}function lIe(t){return us(this,null,function*(){try{for(var e=Pn(t),n,r,i;n=!(r=yield new cc(e.next())).done;n=!1){let s=r.value;yield Buffer.isBuffer(s)?s:Buffer.from(s)}}catch{i=[r]}finally{try{n&&(r=e.return)&&(yield new cc(r.call(e)))}finally{if(i)throw i[0]}}})}var Up;function cIe(t){if(Up||(Up=B("stream/web").ReadableStream),Up.from)return Up.from(lIe(t));let e;return new Up({start(){return E(this,null,function*(){e=t[Symbol.asyncIterator]()})},pull(r){return E(this,null,function*(){let{done:i,value:s}=yield e.next();if(i)queueMicrotask(()=>{r.close()});else{let o=Buffer.isBuffer(s)?s:Buffer.from(s);r.enqueue(new Uint8Array(o))}return r.desiredSize>0})},cancel(r){return E(this,null,function*(){yield e.return()})}},0)}function uIe(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}function hIe(t){if(t){if(typeof t.throwIfAborted=="function")t.throwIfAborted();else if(t.aborted){let e=new Error("The operation was aborted");throw e.name="AbortError",e}}}var aQ;function dIe(t,e){return typeof Symbol.dispose=="symbol"&&(aQ||(aQ=B("events")),typeof aQ.addAbortListener=="function"&&"aborted"in t)?aQ.addAbortListener(t,e):"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}var gIe=!!String.prototype.toWellFormed;function fIe(t){return gIe?`${t}`.toWellFormed():AQ.toUSVString?AQ.toUSVString(t):`${t}`}var pz=Object.create(null);pz.enumerable=!0;Ez.exports={kEnumerableProperty:pz,nop:HCe,isDisturbed:sIe,isErrored:oIe,isReadable:aIe,toUSVString:fIe,isReadableAborted:gz,isBlobLike:hz,parseOrigin:JCe,parseURL:dz,getServerName:zCe,isStream:MF,isIterable:XCe,isAsyncIterable:KCe,isDestroyed:xF,parseRawHeaders:rIe,parseHeaders:nIe,parseKeepAliveTimeout:tIe,destroy:$Ce,bodyLength:ZCe,deepClone:jCe,ReadableStreamFrom:cIe,isBuffer:fz,validateHandler:iIe,getSocketInfo:AIe,isFormDataLike:uIe,buildURL:YCe,throwIfAborted:hIe,addAbortListener:dIe,nodeMajor:FF,nodeMinor:lz,nodeHasAutoSelectFamily:FF>18||FF===18&&lz>=13}});var Iz=C((KMe,Cz)=>{"use strict";var LF=Date.now(),dA,gA=[];function pIe(){LF=Date.now();let t=gA.length,e=0;for(;e<t;){let n=gA[e];n.state===0?n.state=LF+n.delay:n.state>0&&LF>=n.state&&(n.state=-1,n.callback(n.opaque)),n.state===-1?(n.state=-2,e!==t-1?gA[e]=gA.pop():gA.pop(),t-=1):e+=1}gA.length>0&&mz()}function mz(){dA&&dA.refresh?dA.refresh():(clearTimeout(dA),dA=setTimeout(pIe,1e3),dA.unref&&dA.unref())}var lQ=class{constructor(e,n,r){this.callback=e,this.delay=n,this.opaque=r,this.state=-2,this.refresh()}refresh(){this.state===-2&&(gA.push(this),(!dA||gA.length===1)&&mz()),this.state=0}clear(){this.state=-1}};Cz.exports={setTimeout(t,e,n){return e<1e3?setTimeout(t,e,n):new lQ(t,e,n)},clearTimeout(t){t instanceof lQ?t.clear():clearTimeout(t)}}});var fA=C((XMe,yz)=>{"use strict";var{MessageChannel:EIe,receiveMessageOnPort:mIe}=B("worker_threads"),CIe=["GET","HEAD","POST"],IIe=[101,204,205,304],yIe=[301,302,303,307,308],BIe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","5060","5061","6000","6566","6665","6666","6667","6668","6669","6697","10080"],QIe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],wIe=["follow","manual","error"],_Ie=["GET","HEAD","OPTIONS","TRACE"],vIe=["navigate","same-origin","no-cors","cors"],SIe=["omit","same-origin","include"],bIe=["default","no-store","reload","no-cache","force-cache","only-if-cached"],DIe=["content-encoding","content-language","content-location","content-type","content-length"],RIe=["half"],TIe=["CONNECT","TRACE","TRACK"],kIe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],NIe=globalThis.DOMException??(()=>{try{atob("~")}catch(t){return Object.getPrototypeOf(t).constructor}})(),kh,FIe=globalThis.structuredClone??function(e,n=void 0){if(arguments.length===0)throw new TypeError("missing argument");return kh||(kh=new EIe),kh.port1.unref(),kh.port2.unref(),kh.port1.postMessage(e,n?.transfer),mIe(kh.port2).message};yz.exports={DOMException:NIe,structuredClone:FIe,subresource:kIe,forbiddenMethods:TIe,requestBodyHeader:DIe,referrerPolicy:QIe,requestRedirect:wIe,requestMode:vIe,requestCredentials:SIe,requestCache:bIe,redirectStatus:yIe,corsSafeListedMethods:CIe,nullBodyStatus:IIe,safeMethods:_Ie,badPorts:BIe,requestDuplex:RIe}});var Nh=C((ZMe,Bz)=>{"use strict";var OF=Symbol.for("undici.globalOrigin.1");function MIe(){return globalThis[OF]}function xIe(t){if(t===void 0){Object.defineProperty(globalThis,OF,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,OF,{value:e,writable:!0,enumerable:!1,configurable:!1})}Bz.exports={getGlobalOrigin:MIe,setGlobalOrigin:xIe}});var ki=C(($Me,bz)=>{"use strict";var{redirectStatus:LIe,badPorts:OIe,referrerPolicy:UIe}=fA(),{getGlobalOrigin:PIe}=Nh(),{performance:VIe}=B("perf_hooks"),{isBlobLike:GIe,toUSVString:qIe,ReadableStreamFrom:HIe}=Ue(),Fh=B("assert"),{isUint8Array:YIe}=B("util/types"),Vp;try{Vp=B("crypto")}catch{}function Qz(t){let e=t.urlList,n=e.length;return n===0?null:e[n-1].toString()}function JIe(t,e){if(!LIe.includes(t.status))return null;let n=t.headersList.get("location");return n!==null&&_z(n)&&(n=new URL(n,Qz(t))),n&&!n.hash&&(n.hash=e),n}function Gp(t){return t.urlList[t.urlList.length-1]}function WIe(t){let e=Gp(t);return Sz(e)&&OIe.includes(e.port)?"blocked":"allowed"}function zIe(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}function jIe(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(!(n===9||n>=32&&n<=126||n>=128&&n<=255))return!1}return!0}function KIe(t){return!(t>=127||t<=32||t==="("||t===")"||t==="<"||t===">"||t==="@"||t===","||t===";"||t===":"||t==="\\"||t==='"'||t==="/"||t==="["||t==="]"||t==="?"||t==="="||t==="{"||t==="}")}function wz(t){if(!t||typeof t!="string")return!1;for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>127||!KIe(n))return!1}return!0}function XIe(t){return t.length===0?!1:wz(t)}function _z(t){return!(t.startsWith("	")||t.startsWith(" ")||t.endsWith("	")||t.endsWith(" ")||t.includes("\0")||t.includes("\r")||t.includes(`
`))}function ZIe(t,e){let{headersList:n}=e,r=(n.get("referrer-policy")??"").split(","),i="";if(r.length>0)for(let s=r.length;s!==0;s--){let o=r[s-1].trim();if(UIe.includes(o)){i=o;break}}i!==""&&(t.referrerPolicy=i)}function $Ie(){return"allowed"}function eye(){return"success"}function tye(){return"success"}function nye(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e)}function rye(t){let e=t.origin;if(t.responseTainting==="cors"||t.mode==="websocket")e&&t.headersList.append("origin",e);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&VF(t.origin)&&!VF(Gp(t))&&(e=null);break;case"same-origin":cQ(t,Gp(t))||(e=null);break;default:}e&&t.headersList.append("origin",e)}}function iye(t){return VIe.now()}function sye(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}function oye(){return{referrerPolicy:"strict-origin-when-cross-origin"}}function aye(t){return{referrerPolicy:t.referrerPolicy}}function Aye(t){let e=t.referrerPolicy;Fh(e);let n=null;if(t.referrer==="client"){let a=PIe();if(!a||a.origin==="null")return"no-referrer";n=new URL(a)}else t.referrer instanceof URL&&(n=t.referrer);let r=UF(n),i=UF(n,!0);r.toString().length>4096&&(r=i);let s=cQ(t,r),o=Pp(r)&&!Pp(t.url);switch(e){case"origin":return i??UF(n,!0);case"unsafe-url":return r;case"same-origin":return s?i:"no-referrer";case"origin-when-cross-origin":return s?r:i;case"strict-origin-when-cross-origin":{let a=Gp(t);return cQ(r,a)?r:Pp(r)&&!Pp(a)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return o?"no-referrer":i}}function UF(t,e){return Fh(t instanceof URL),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}function Pp(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(n){if(n==null||n==="null")return!1;let r=new URL(n);return!!(r.protocol==="https:"||r.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(r.hostname)||r.hostname==="localhost"||r.hostname.includes("localhost.")||r.hostname.endsWith(".localhost"))}}function lye(t,e){if(Vp===void 0)return!0;let n=uye(e);if(n==="no metadata"||n.length===0)return!0;let r=n.sort((o,a)=>a.algo.localeCompare(o.algo)),i=r[0].algo,s=r.filter(o=>o.algo===i);for(let o of s){let a=o.algo,A=o.hash;A.endsWith("==")&&(A=A.slice(0,-2));let l=Vp.createHash(a).update(t).digest("base64");if(l.endsWith("==")&&(l=l.slice(0,-2)),l===A)return!0;let c=Vp.createHash(a).update(t).digest("base64url");if(c.endsWith("==")&&(c=c.slice(0,-2)),c===A)return!0}return!1}var cye=/((?<algo>sha256|sha384|sha512)-(?<hash>[A-z0-9+/]{1}.*={0,2}))( +[\x21-\x7e]?)?/i;function uye(t){let e=[],n=!0,r=Vp.getHashes();for(let i of t.split(" ")){n=!1;let s=cye.exec(i);if(s===null||s.groups===void 0)continue;let o=s.groups.algo;r.includes(o.toLowerCase())&&e.push(s.groups)}return n===!0?"no metadata":e}function hye(t){}function cQ(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}function dye(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function gye(t){return t.controller.state==="aborted"}function fye(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}function pye(t){return/^(DELETE|GET|HEAD|OPTIONS|POST|PUT)$/i.test(t)?t.toUpperCase():t}function Eye(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return Fh(typeof e=="string"),e}var mye=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function Cye(t,e,n){let r={index:0,kind:n,target:t},i={next(){if(Object.getPrototypeOf(this)!==i)throw new TypeError(`'next' called on an object that does not implement interface ${e} Iterator.`);let{index:s,kind:o,target:a}=r,A=a(),l=A.length;if(s>=l)return{value:void 0,done:!0};let c=A[s];return r.index=s+1,Iye(c,o)},[Symbol.toStringTag]:`${e} Iterator`};return Object.setPrototypeOf(i,mye),Object.setPrototypeOf({},i)}function Iye(t,e){let n;switch(e){case"key":{n=t[0];break}case"value":{n=t[1];break}case"key+value":{n=t;break}}return{value:n,done:!1}}function yye(t,e,n){return E(this,null,function*(){let r=e,i=n,s;try{s=t.stream.getReader()}catch(o){i(o);return}try{let o=yield vz(s);r(o)}catch(o){i(o)}})}var PF=globalThis.ReadableStream;function Bye(t){return PF||(PF=B("stream/web").ReadableStream),t instanceof PF||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}var Qye=65535;function wye(t){return t.length<Qye?String.fromCharCode(...t):t.reduce((e,n)=>e+String.fromCharCode(n),"")}function _ye(t){try{t.close()}catch(e){if(!e.message.includes("Controller is already closed"))throw e}}function vye(t){for(let e=0;e<t.length;e++)Fh(t.charCodeAt(e)<=255);return t}function vz(t){return E(this,null,function*(){let e=[],n=0;for(;;){let{done:r,value:i}=yield t.read();if(r)return Buffer.concat(e,n);if(!YIe(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),n+=i.length}})}function Sye(t){Fh("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}function VF(t){return typeof t=="string"?t.startsWith("https:"):t.protocol==="https:"}function Sz(t){Fh("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}var bye=Object.hasOwn||((t,e)=>Object.prototype.hasOwnProperty.call(t,e));bz.exports={isAborted:gye,isCancelled:fye,createDeferredPromise:dye,ReadableStreamFrom:HIe,toUSVString:qIe,tryUpgradeRequestToAPotentiallyTrustworthyURL:hye,coarsenedSharedCurrentTime:iye,determineRequestsReferrer:Aye,makePolicyContainer:oye,clonePolicyContainer:aye,appendFetchMetadata:nye,appendRequestOriginHeader:rye,TAOCheck:tye,corsCheck:eye,crossOriginResourcePolicyCheck:$Ie,createOpaqueTimingInfo:sye,setRequestReferrerPolicyOnRedirect:ZIe,isValidHTTPToken:wz,requestBadPort:WIe,requestCurrentURL:Gp,responseURL:Qz,responseLocationURL:JIe,isBlobLike:GIe,isURLPotentiallyTrustworthy:Pp,isValidReasonPhrase:jIe,sameOrigin:cQ,normalizeMethod:pye,serializeJavascriptValueToJSONString:Eye,makeIterator:Cye,isValidHeaderName:XIe,isValidHeaderValue:_z,hasOwn:bye,isErrorLike:zIe,fullyReadBody:yye,bytesMatch:lye,isReadableStreamLike:Bye,readableStreamClose:_ye,isomorphicEncode:vye,isomorphicDecode:wye,urlIsLocal:Sye,urlHasHttpsScheme:VF,urlIsHttpHttpsScheme:Sz,readAllBytes:vz}});var Lo=C((txe,Dz)=>{"use strict";Dz.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kGuard:Symbol("guard"),kRealm:Symbol("realm")}});var fr=C((nxe,Tz)=>{"use strict";var{types:$s}=B("util"),{hasOwn:Rz,toUSVString:Dye}=ki(),G={};G.converters={};G.util={};G.errors={};G.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};G.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",n=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return G.errors.exception({header:t.prefix,message:n})};G.errors.invalidArgument=function(t){return G.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};G.brandCheck=function(t,e,n=void 0){if(n?.strict!==!1&&!(t instanceof e))throw new TypeError("Illegal invocation");return t?.[Symbol.toStringTag]===e.prototype[Symbol.toStringTag]};G.argumentLengthCheck=function({length:t},e,n){if(t<e)throw G.errors.exception(M({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`},n))};G.illegalConstructor=function(){throw G.errors.exception({header:"TypeError",message:"Illegal constructor"})};G.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};G.util.ConvertToInt=function(t,e,n,r={}){let i,s;e===64?(i=Math.pow(2,53)-1,n==="unsigned"?s=0:s=Math.pow(-2,53)+1):n==="unsigned"?(s=0,i=Math.pow(2,e)-1):(s=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let o=Number(t);if(o===0&&(o=0),r.enforceRange===!0){if(Number.isNaN(o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)throw G.errors.exception({header:"Integer conversion",message:`Could not convert ${t} to an integer.`});if(o=G.util.IntegerPart(o),o<s||o>i)throw G.errors.exception({header:"Integer conversion",message:`Value must be between ${s}-${i}, got ${o}.`});return o}return!Number.isNaN(o)&&r.clamp===!0?(o=Math.min(Math.max(o,s),i),Math.floor(o)%2===0?o=Math.floor(o):o=Math.ceil(o),o):Number.isNaN(o)||o===0&&Object.is(0,o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY?0:(o=G.util.IntegerPart(o),o=o%Math.pow(2,e),n==="signed"&&o>=Math.pow(2,e)-1?o-Math.pow(2,e):o)};G.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};G.sequenceConverter=function(t){return e=>{if(G.util.Type(e)!=="Object")throw G.errors.exception({header:"Sequence",message:`Value of type ${G.util.Type(e)} is not an Object.`});let n=e?.[Symbol.iterator]?.(),r=[];if(n===void 0||typeof n.next!="function")throw G.errors.exception({header:"Sequence",message:"Object is not an iterator."});for(;;){let{done:i,value:s}=n.next();if(i)break;r.push(t(s))}return r}};G.recordConverter=function(t,e){return n=>{if(G.util.Type(n)!=="Object")throw G.errors.exception({header:"Record",message:`Value of type ${G.util.Type(n)} is not an Object.`});let r={};if(!$s.isProxy(n)){let s=Object.keys(n);for(let o of s){let a=t(o),A=e(n[o]);r[a]=A}return r}let i=Reflect.ownKeys(n);for(let s of i)if(Reflect.getOwnPropertyDescriptor(n,s)?.enumerable){let a=t(s),A=e(n[s]);r[a]=A}return r}};G.interfaceConverter=function(t){return(e,n={})=>{if(n.strict!==!1&&!(e instanceof t))throw G.errors.exception({header:t.name,message:`Expected ${e} to be an instance of ${t.name}.`});return e}};G.dictionaryConverter=function(t){return e=>{let n=G.util.Type(e),r={};if(n==="Null"||n==="Undefined")return r;if(n!=="Object")throw G.errors.exception({header:"Dictionary",message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let i of t){let{key:s,defaultValue:o,required:a,converter:A}=i;if(a===!0&&!Rz(e,s))throw G.errors.exception({header:"Dictionary",message:`Missing required key "${s}".`});let l=e[s],c=Rz(i,"defaultValue");if(c&&l!==null&&(l=l??o),a||c||l!==void 0){if(l=A(l),i.allowedValues&&!i.allowedValues.includes(l))throw G.errors.exception({header:"Dictionary",message:`${l} is not an accepted type. Expected one of ${i.allowedValues.join(", ")}.`});r[s]=l}}return r}};G.nullableConverter=function(t){return e=>e===null?e:t(e)};G.converters.DOMString=function(t,e={}){if(t===null&&e.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw new TypeError("Could not convert argument of type symbol to string.");return String(t)};G.converters.ByteString=function(t){let e=G.converters.DOMString(t);for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${n} has a value of ${r} which is greater than 255.`)}return e};G.converters.USVString=Dye;G.converters.boolean=function(t){return!!t};G.converters.any=function(t){return t};G.converters["long long"]=function(t){return G.util.ConvertToInt(t,64,"signed")};G.converters["unsigned long long"]=function(t){return G.util.ConvertToInt(t,64,"unsigned")};G.converters["unsigned long"]=function(t){return G.util.ConvertToInt(t,32,"unsigned")};G.converters["unsigned short"]=function(t,e){return G.util.ConvertToInt(t,16,"unsigned",e)};G.converters.ArrayBuffer=function(t,e={}){if(G.util.Type(t)!=="Object"||!$s.isAnyArrayBuffer(t))throw G.errors.conversionFailed({prefix:`${t}`,argument:`${t}`,types:["ArrayBuffer"]});if(e.allowShared===!1&&$s.isSharedArrayBuffer(t))throw G.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});return t};G.converters.TypedArray=function(t,e,n={}){if(G.util.Type(t)!=="Object"||!$s.isTypedArray(t)||t.constructor.name!==e.name)throw G.errors.conversionFailed({prefix:`${e.name}`,argument:`${t}`,types:[e.name]});if(n.allowShared===!1&&$s.isSharedArrayBuffer(t.buffer))throw G.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});return t};G.converters.DataView=function(t,e={}){if(G.util.Type(t)!=="Object"||!$s.isDataView(t))throw G.errors.exception({header:"DataView",message:"Object is not a DataView."});if(e.allowShared===!1&&$s.isSharedArrayBuffer(t.buffer))throw G.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});return t};G.converters.BufferSource=function(t,e={}){if($s.isAnyArrayBuffer(t))return G.converters.ArrayBuffer(t,e);if($s.isTypedArray(t))return G.converters.TypedArray(t,t.constructor);if($s.isDataView(t))return G.converters.DataView(t,e);throw new TypeError(`Could not convert ${t} to a BufferSource.`)};G.converters["sequence<ByteString>"]=G.sequenceConverter(G.converters.ByteString);G.converters["sequence<sequence<ByteString>>"]=G.sequenceConverter(G.converters["sequence<ByteString>"]);G.converters["record<ByteString, ByteString>"]=G.recordConverter(G.converters.ByteString,G.converters.ByteString);Tz.exports={webidl:G}});var ss=C((ixe,Lz)=>{"use strict";var hQ=B("assert"),{atob:Rye}=B("buffer"),{isomorphicDecode:Tye}=ki(),kye=new TextEncoder,uQ=/^[!#$%&'*+-.^_|~A-Za-z0-9]+$/,Nye=/(\u000A|\u000D|\u0009|\u0020)/,Fye=/[\u0009|\u0020-\u007E|\u0080-\u00FF]/;function Mye(t){hQ(t.protocol==="data:");let e=Fz(t,!0);e=e.slice(5);let n={position:0},r=Mh(",",e,n),i=r.length;if(r=Uye(r,!0,!0),n.position>=e.length)return"failure";n.position++;let s=e.slice(i+1),o=Mz(s);if(/;(\u0020){0,}base64$/i.test(r)){let A=Tye(o);if(o=Lye(A),o==="failure")return"failure";r=r.slice(0,-6),r=r.replace(/(\u0020)+$/,""),r=r.slice(0,-1)}r.startsWith(";")&&(r="text/plain"+r);let a=qF(r);return a==="failure"&&(a=qF("text/plain;charset=US-ASCII")),{mimeType:a,body:o}}function Fz(t,e=!1){let n=t.href;if(!e)return n;let r=n.lastIndexOf("#");return r===-1?n:n.slice(0,r)}function dQ(t,e,n){let r="";for(;n.position<e.length&&t(e[n.position]);)r+=e[n.position],n.position++;return r}function Mh(t,e,n){let r=e.indexOf(t,n.position),i=n.position;return r===-1?(n.position=e.length,e.slice(i)):(n.position=r,e.slice(i,n.position))}function Mz(t){let e=kye.encode(t);return xye(e)}function xye(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];if(r!==37)e.push(r);else if(r===37&&!/^[0-9A-Fa-f]{2}$/i.test(String.fromCharCode(t[n+1],t[n+2])))e.push(37);else{let i=String.fromCharCode(t[n+1],t[n+2]),s=Number.parseInt(i,16);e.push(s),n+=2}}return Uint8Array.from(e)}function qF(t){t=GF(t,!0,!0);let e={position:0},n=Mh("/",t,e);if(n.length===0||!uQ.test(n)||e.position>t.length)return"failure";e.position++;let r=Mh(";",t,e);if(r=GF(r,!1,!0),r.length===0||!uQ.test(r))return"failure";let i=n.toLowerCase(),s=r.toLowerCase(),o={type:i,subtype:s,parameters:new Map,essence:`${i}/${s}`};for(;e.position<t.length;){e.position++,dQ(l=>Nye.test(l),t,e);let a=dQ(l=>l!==";"&&l!=="=",t,e);if(a=a.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let A=null;if(t[e.position]==='"')A=xz(t,e,!0),Mh(";",t,e);else if(A=Mh(";",t,e),A=GF(A,!1,!0),A.length===0)continue;a.length!==0&&uQ.test(a)&&(A.length===0||Fye.test(A))&&!o.parameters.has(a)&&o.parameters.set(a,A)}return o}function Lye(t){if(t=t.replace(/[\u0009\u000A\u000C\u000D\u0020]/g,""),t.length%4===0&&(t=t.replace(/=?=$/,"")),t.length%4===1||/[^+/0-9A-Za-z]/.test(t))return"failure";let e=Rye(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}function xz(t,e,n){let r=e.position,i="";for(hQ(t[e.position]==='"'),e.position++;i+=dQ(o=>o!=='"'&&o!=="\\",t,e),!(e.position>=t.length);){let s=t[e.position];if(e.position++,s==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{hQ(s==='"');break}}return n?i:t.slice(r,e.position)}function Oye(t){hQ(t!=="failure");let{parameters:e,essence:n}=t,r=n;for(let[i,s]of e.entries())r+=";",r+=i,r+="=",uQ.test(s)||(s=s.replace(/(\\|")/g,"\\$1"),s='"'+s,s+='"'),r+=s;return r}function kz(t){return t==="\r"||t===`
`||t==="	"||t===" "}function GF(t,e=!0,n=!0){let r=0,i=t.length-1;if(e)for(;r<t.length&&kz(t[r]);r++);if(n)for(;i>0&&kz(t[i]);i--);return t.slice(r,i+1)}function Nz(t){return t==="\r"||t===`
`||t==="	"||t==="\f"||t===" "}function Uye(t,e=!0,n=!0){let r=0,i=t.length-1;if(e)for(;r<t.length&&Nz(t[r]);r++);if(n)for(;i>0&&Nz(t[i]);i--);return t.slice(r,i+1)}Lz.exports={dataURLProcessor:Mye,URLSerializer:Fz,collectASequenceOfCodePoints:dQ,collectASequenceOfCodePointsFast:Mh,stringPercentDecode:Mz,parseMIMEType:qF,collectAnHTTPQuotedString:xz,serializeAMimeType:Oye}});var gQ=C((sxe,Gz)=>{"use strict";var{Blob:Pz,File:Oz}=B("buffer"),{types:HF}=B("util"),{kState:Xr}=Lo(),{isBlobLike:Vz}=ki(),{webidl:ze}=fr(),{parseMIMEType:Pye,serializeAMimeType:Vye}=ss(),{kEnumerableProperty:Uz}=Ue(),qp=class t extends Pz{constructor(e,n,r={}){ze.argumentLengthCheck(arguments,2,{header:"File constructor"}),e=ze.converters["sequence<BlobPart>"](e),n=ze.converters.USVString(n),r=ze.converters.FilePropertyBag(r);let i=n,s=r.type,o;e:{if(s){if(s=Pye(s),s==="failure"){s="";break e}s=Vye(s).toLowerCase()}o=r.lastModified}super(Gye(e,r),{type:s}),this[Xr]={name:i,lastModified:o,type:s}}get name(){return ze.brandCheck(this,t),this[Xr].name}get lastModified(){return ze.brandCheck(this,t),this[Xr].lastModified}get type(){return ze.brandCheck(this,t),this[Xr].type}},YF=class t{constructor(e,n,r={}){let i=n,s=r.type,o=r.lastModified??Date.now();this[Xr]={blobLike:e,name:i,type:s,lastModified:o}}stream(...e){return ze.brandCheck(this,t),this[Xr].blobLike.stream(...e)}arrayBuffer(...e){return ze.brandCheck(this,t),this[Xr].blobLike.arrayBuffer(...e)}slice(...e){return ze.brandCheck(this,t),this[Xr].blobLike.slice(...e)}text(...e){return ze.brandCheck(this,t),this[Xr].blobLike.text(...e)}get size(){return ze.brandCheck(this,t),this[Xr].blobLike.size}get type(){return ze.brandCheck(this,t),this[Xr].blobLike.type}get name(){return ze.brandCheck(this,t),this[Xr].name}get lastModified(){return ze.brandCheck(this,t),this[Xr].lastModified}get[Symbol.toStringTag](){return"File"}};Object.defineProperties(qp.prototype,{[Symbol.toStringTag]:{value:"File",configurable:!0},name:Uz,lastModified:Uz});ze.converters.Blob=ze.interfaceConverter(Pz);ze.converters.BlobPart=function(t,e){if(ze.util.Type(t)==="Object"){if(Vz(t))return ze.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||HF.isAnyArrayBuffer(t))return ze.converters.BufferSource(t,e)}return ze.converters.USVString(t,e)};ze.converters["sequence<BlobPart>"]=ze.sequenceConverter(ze.converters.BlobPart);ze.converters.FilePropertyBag=ze.dictionaryConverter([{key:"lastModified",converter:ze.converters["long long"],get defaultValue(){return Date.now()}},{key:"type",converter:ze.converters.DOMString,defaultValue:""},{key:"endings",converter:t=>(t=ze.converters.DOMString(t),t=t.toLowerCase(),t!=="native"&&(t="transparent"),t),defaultValue:"transparent"}]);function Gye(t,e){let n=[];for(let r of t)if(typeof r=="string"){let i=r;e.endings==="native"&&(i=qye(i)),n.push(new TextEncoder().encode(i))}else HF.isAnyArrayBuffer(r)||HF.isTypedArray(r)?r.buffer?n.push(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)):n.push(new Uint8Array(r)):Vz(r)&&n.push(r);return n}function qye(t){let e=`
`;return process.platform==="win32"&&(e=`\r
`),t.replace(/\r?\n/g,e)}function Hye(t){return Oz&&t instanceof Oz||t instanceof qp||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}Gz.exports={File:qp,FileLike:YF,isFileLike:Hye}});var pQ=C((oxe,Wz)=>{"use strict";var{isBlobLike:fQ,toUSVString:Yye,makeIterator:JF}=ki(),{kState:Kn}=Lo(),{File:Jz,FileLike:qz,isFileLike:Jye}=gQ(),{webidl:Ze}=fr(),{Blob:Wye,File:WF}=B("buffer"),Hz=WF??Jz,xh=class t{constructor(e){if(e!==void 0)throw Ze.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Kn]=[]}append(e,n,r=void 0){if(Ze.brandCheck(this,t),Ze.argumentLengthCheck(arguments,2,{header:"FormData.append"}),arguments.length===3&&!fQ(n))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Ze.converters.USVString(e),n=fQ(n)?Ze.converters.Blob(n,{strict:!1}):Ze.converters.USVString(n),r=arguments.length===3?Ze.converters.USVString(r):void 0;let i=Yz(e,n,r);this[Kn].push(i)}delete(e){Ze.brandCheck(this,t),Ze.argumentLengthCheck(arguments,1,{header:"FormData.delete"}),e=Ze.converters.USVString(e),this[Kn]=this[Kn].filter(n=>n.name!==e)}get(e){Ze.brandCheck(this,t),Ze.argumentLengthCheck(arguments,1,{header:"FormData.get"}),e=Ze.converters.USVString(e);let n=this[Kn].findIndex(r=>r.name===e);return n===-1?null:this[Kn][n].value}getAll(e){return Ze.brandCheck(this,t),Ze.argumentLengthCheck(arguments,1,{header:"FormData.getAll"}),e=Ze.converters.USVString(e),this[Kn].filter(n=>n.name===e).map(n=>n.value)}has(e){return Ze.brandCheck(this,t),Ze.argumentLengthCheck(arguments,1,{header:"FormData.has"}),e=Ze.converters.USVString(e),this[Kn].findIndex(n=>n.name===e)!==-1}set(e,n,r=void 0){if(Ze.brandCheck(this,t),Ze.argumentLengthCheck(arguments,2,{header:"FormData.set"}),arguments.length===3&&!fQ(n))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Ze.converters.USVString(e),n=fQ(n)?Ze.converters.Blob(n,{strict:!1}):Ze.converters.USVString(n),r=arguments.length===3?Yye(r):void 0;let i=Yz(e,n,r),s=this[Kn].findIndex(o=>o.name===e);s!==-1?this[Kn]=[...this[Kn].slice(0,s),i,...this[Kn].slice(s+1).filter(o=>o.name!==e)]:this[Kn].push(i)}entries(){return Ze.brandCheck(this,t),JF(()=>this[Kn].map(e=>[e.name,e.value]),"FormData","key+value")}keys(){return Ze.brandCheck(this,t),JF(()=>this[Kn].map(e=>[e.name,e.value]),"FormData","key")}values(){return Ze.brandCheck(this,t),JF(()=>this[Kn].map(e=>[e.name,e.value]),"FormData","value")}forEach(e,n=globalThis){if(Ze.brandCheck(this,t),Ze.argumentLengthCheck(arguments,1,{header:"FormData.forEach"}),typeof e!="function")throw new TypeError("Failed to execute 'forEach' on 'FormData': parameter 1 is not of type 'Function'.");for(let[r,i]of this)e.apply(n,[i,r,this])}};xh.prototype[Symbol.iterator]=xh.prototype.entries;Object.defineProperties(xh.prototype,{[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Yz(t,e,n){if(t=Buffer.from(t).toString("utf8"),typeof e=="string")e=Buffer.from(e).toString("utf8");else if(Jye(e)||(e=e instanceof Wye?new Hz([e],"blob",{type:e.type}):new qz(e,"blob",{type:e.type})),n!==void 0){let r={type:e.type,lastModified:e.lastModified};e=WF&&e instanceof WF||e instanceof Jz?new Hz([e],n,r):new qz(e,n,r)}return{name:t,value:e}}Wz.exports={FormData:xh}});var Hp=C((axe,nj)=>{"use strict";var zye=NX(),Lh=Ue(),{ReadableStreamFrom:jye,isBlobLike:zz,isReadableStreamLike:Kye,readableStreamClose:Xye,createDeferredPromise:Zye,fullyReadBody:$ye}=ki(),{FormData:jz}=pQ(),{kState:Uo}=Lo(),{webidl:zF}=fr(),{DOMException:Zz,structuredClone:eBe}=fA(),{Blob:tBe,File:nBe}=B("buffer"),{kBodyUsed:rBe}=St(),jF=B("assert"),{isErrored:iBe}=Ue(),{isUint8Array:$z,isArrayBuffer:sBe}=B("util/types"),{File:oBe}=gQ(),{parseMIMEType:aBe,serializeAMimeType:ABe}=ss(),Oo=globalThis.ReadableStream,Kz=nBe??oBe;function ej(t,e=!1){Oo||(Oo=B("stream/web").ReadableStream);let n=null;if(t instanceof Oo)n=t;else if(zz(t))n=t.stream();else{let A;n=new Oo({pull(l){return E(this,null,function*(){l.enqueue(typeof i=="string"?new TextEncoder().encode(i):i),queueMicrotask(()=>Xye(l))})},start(){},type:void 0})}jF(Kye(n));let r=null,i=null,s=null,o=null;if(typeof t=="string")i=t,o="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),o="application/x-www-form-urlencoded;charset=UTF-8";else if(sBe(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(Lh.isFormDataLike(t)){let A=`----formdata-undici-0${`${Math.floor(Math.random()*1e11)}`.padStart(11,"0")}`,l=`--${A}\r
Content-Disposition: form-data`;let c=y=>y.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),u=y=>y.replace(/\r?\n|\r/g,`\r
`),h=new TextEncoder,d=[],g=new Uint8Array([13,10]);s=0;let f=!1;for(let[y,I]of t)if(typeof I=="string"){let w=h.encode(l+`; name="${c(u(y))}"\r
\r
${u(I)}\r
`);d.push(w),s+=w.byteLength}else{let w=h.encode(`${l}; name="${c(u(y))}"`+(I.name?`; filename="${c(I.name)}"`:"")+`\r
Content-Type: ${I.type||"application/octet-stream"}\r
\r
`);d.push(w,I,g),typeof I.size=="number"?s+=w.byteLength+I.size+g.byteLength:f=!0}let m=h.encode(`--${A}--`);d.push(m),s+=m.byteLength,f&&(s=null),i=t,r=function(){return us(this,null,function*(){for(let y of d)y.stream?yield*SA(y.stream()):yield y})},o="multipart/form-data; boundary="+A}else if(zz(t))i=t,s=t.size,t.type&&(o=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(Lh.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");n=t instanceof Oo?t:jye(t)}if((typeof i=="string"||Lh.isBuffer(i))&&(s=Buffer.byteLength(i)),r!=null){let l,A;n=new Oo({start(){return E(this,null,function*(){A=r(t)[Symbol.asyncIterator]()})},pull(c){return E(this,null,function*(){let{value:u,done:h}=yield A.next();return h?queueMicrotask(()=>{c.close()}):iBe(n)||c.enqueue(new Uint8Array(u)),c.desiredSize>0})},cancel(c){return E(this,null,function*(){yield A.return()})},type:void 0})}return[{stream:n,source:i,length:s},o]}function lBe(t,e=!1){return Oo||(Oo=B("stream/web").ReadableStream),t instanceof Oo&&(jF(!Lh.isDisturbed(t),"The body has already been consumed."),jF(!t.locked,"The stream is locked.")),ej(t,e)}function cBe(t){let[e,n]=t.stream.tee(),r=eBe(n,{transfer:[n]}),[,i]=r.tee();return t.stream=e,{stream:i,length:t.length,source:t.source}}function Xz(t){return us(this,null,function*(){if(t)if($z(t))yield t;else{let e=t.stream;if(Lh.isDisturbed(e))throw new TypeError("The body has already been consumed.");if(e.locked)throw new TypeError("The stream is locked.");e[rBe]=!0,yield*SA(e)}})}function KF(t){if(t.aborted)throw new Zz("The operation was aborted.","AbortError")}function uBe(t){return{blob(){return EQ(this,r=>{let i=fBe(this);return i==="failure"?i="":i&&(i=ABe(i)),new tBe([r],{type:i})},t)},arrayBuffer(){return EQ(this,r=>new Uint8Array(r).buffer,t)},text(){return EQ(this,tj,t)},json(){return EQ(this,gBe,t)},formData(){return E(this,null,function*(){zF.brandCheck(this,t),KF(this[Uo]);let r=this.headers.get("Content-Type");if(/multipart\/form-data/.test(r)){let h={};for(let[m,y]of this.headers)h[m.toLowerCase()]=y;let d=new jz,g;try{g=new zye({headers:h,preservePath:!0})}catch(m){throw new Zz(`${m}`,"AbortError")}g.on("field",(m,y)=>{d.append(m,y)}),g.on("file",(m,y,I,w,_)=>{let S=[];if(w==="base64"||w.toLowerCase()==="base64"){let T="";y.on("data",oe=>{T+=oe.toString().replace(/[\r\n]/gm,"");let Qe=T.length-T.length%4;S.push(Buffer.from(T.slice(0,Qe),"base64")),T=T.slice(Qe)}),y.on("end",()=>{S.push(Buffer.from(T,"base64")),d.append(m,new Kz(S,I,{type:_}))})}else y.on("data",T=>{S.push(T)}),y.on("end",()=>{d.append(m,new Kz(S,I,{type:_}))})});let f=new Promise((m,y)=>{g.on("finish",m),g.on("error",I=>y(new TypeError(I)))});if(this.body!==null)try{for(var i=Pn(Xz(this[Uo].body)),s,o,a;s=!(o=yield i.next()).done;s=!1){let m=o.value;g.write(m)}}catch{a=[o]}finally{try{s&&(o=i.return)&&(yield o.call(i))}finally{if(a)throw a[0]}}return g.end(),yield f,d}else if(/application\/x-www-form-urlencoded/.test(r)){let h;try{let g="",f=new TextDecoder("utf-8",{ignoreBOM:!0});try{for(var A=Pn(Xz(this[Uo].body)),l,c,u;l=!(c=yield A.next()).done;l=!1){let m=c.value;if(!$z(m))throw new TypeError("Expected Uint8Array chunk");g+=f.decode(m,{stream:!0})}}catch{u=[c]}finally{try{l&&(c=A.return)&&(yield c.call(A))}finally{if(u)throw u[0]}}g+=f.decode(),h=new URLSearchParams(g)}catch(g){throw Object.assign(new TypeError,{cause:g})}let d=new jz;for(let[g,f]of h)d.append(g,f);return d}else throw yield Promise.resolve(),KF(this[Uo]),zF.errors.exception({header:`${t.name}.formData`,message:"Could not parse content as FormData."})})}}}function hBe(t){Object.assign(t.prototype,uBe(t))}function EQ(t,e,n){return E(this,null,function*(){if(zF.brandCheck(t,n),KF(t[Uo]),dBe(t[Uo].body))throw new TypeError("Body is unusable");let r=Zye(),i=o=>r.reject(o),s=o=>{try{r.resolve(e(o))}catch(a){i(a)}};return t[Uo].body==null?(s(new Uint8Array),r.promise):(yield $ye(t[Uo].body,s,i),r.promise)})}function dBe(t){return t!=null&&(t.stream.locked||Lh.isDisturbed(t.stream))}function tj(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),new TextDecoder().decode(t))}function gBe(t){return JSON.parse(tj(t))}function fBe(t){let{headersList:e}=t[Uo],n=e.get("content-type");return n===null?"failure":aBe(n)}nj.exports={extractBody:ej,safelyExtractBody:lBe,cloneBody:cBe,mixinBody:hBe}});var oj=C((lxe,sj)=>{"use strict";var{InvalidArgumentError:ht,NotSupportedError:pBe}=ut(),Po=B("assert"),{kHTTP2BuildRequest:EBe,kHTTP2CopyHeaders:mBe,kHTTP1BuildRequest:CBe}=St(),Zr=Ue(),rj=/^[\^_`a-zA-Z\-0-9!#$%&'*+.|~]+$/,ij=/[^\t\x20-\x7e\x80-\xff]/,IBe=/[^\u0021-\u00ff]/,Vo=Symbol("handler"),on={},XF;try{let t=B("diagnostics_channel");on.create=t.channel("undici:request:create"),on.bodySent=t.channel("undici:request:bodySent"),on.headers=t.channel("undici:request:headers"),on.trailers=t.channel("undici:request:trailers"),on.error=t.channel("undici:request:error")}catch{on.create={hasSubscribers:!1},on.bodySent={hasSubscribers:!1},on.headers={hasSubscribers:!1},on.trailers={hasSubscribers:!1},on.error={hasSubscribers:!1}}var ZF=class t{constructor(e,{path:n,method:r,body:i,headers:s,query:o,idempotent:a,blocking:A,upgrade:l,headersTimeout:c,bodyTimeout:u,reset:h,throwOnError:d,expectContinue:g},f){if(typeof n!="string")throw new ht("path must be a string");if(n[0]!=="/"&&!(n.startsWith("http://")||n.startsWith("https://"))&&r!=="CONNECT")throw new ht("path must be an absolute URL or start with a slash");if(IBe.exec(n)!==null)throw new ht("invalid request path");if(typeof r!="string")throw new ht("method must be a string");if(rj.exec(r)===null)throw new ht("invalid request method");if(l&&typeof l!="string")throw new ht("upgrade must be a string");if(c!=null&&(!Number.isFinite(c)||c<0))throw new ht("invalid headersTimeout");if(u!=null&&(!Number.isFinite(u)||u<0))throw new ht("invalid bodyTimeout");if(h!=null&&typeof h!="boolean")throw new ht("invalid reset");if(g!=null&&typeof g!="boolean")throw new ht("invalid expectContinue");if(this.headersTimeout=c,this.bodyTimeout=u,this.throwOnError=d===!0,this.method=r,i==null)this.body=null;else if(Zr.isStream(i))this.body=i;else if(Zr.isBuffer(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(Zr.isFormDataLike(i)||Zr.isIterable(i)||Zr.isBlobLike(i))this.body=i;else throw new ht("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=l||null,this.path=o?Zr.buildURL(n,o):n,this.origin=e,this.idempotent=a??(r==="HEAD"||r==="GET"),this.blocking=A??!1,this.reset=h??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers="",this.expectContinue=g??!1,Array.isArray(s)){if(s.length%2!==0)throw new ht("headers array must be even");for(let m=0;m<s.length;m+=2)Yp(this,s[m],s[m+1])}else if(s&&typeof s=="object"){let m=Object.keys(s);for(let y=0;y<m.length;y++){let I=m[y];Yp(this,I,s[I])}}else if(s!=null)throw new ht("headers must be an object or an array");if(Zr.isFormDataLike(this.body)){if(Zr.nodeMajor<16||Zr.nodeMajor===16&&Zr.nodeMinor<8)throw new ht("Form-Data bodies are only supported in node v16.8 and newer.");XF||(XF=Hp().extractBody);let[m,y]=XF(i);this.contentType==null&&(this.contentType=y,this.headers+=`content-type: ${y}\r
`),this.body=m.stream,this.contentLength=m.length}else Zr.isBlobLike(i)&&this.contentType==null&&i.type&&(this.contentType=i.type,this.headers+=`content-type: ${i.type}\r
`);Zr.validateHandler(f,r,l),this.servername=Zr.getServerName(this.host),this[Vo]=f,on.create.hasSubscribers&&on.create.publish({request:this})}onBodySent(e){if(this[Vo].onBodySent)try{this[Vo].onBodySent(e)}catch(n){this.onError(n)}}onRequestSent(){on.bodySent.hasSubscribers&&on.bodySent.publish({request:this})}onConnect(e){return Po(!this.aborted),Po(!this.completed),this[Vo].onConnect(e)}onHeaders(e,n,r,i){return Po(!this.aborted),Po(!this.completed),on.headers.hasSubscribers&&on.headers.publish({request:this,response:{statusCode:e,headers:n,statusText:i}}),this[Vo].onHeaders(e,n,r,i)}onData(e){return Po(!this.aborted),Po(!this.completed),this[Vo].onData(e)}onUpgrade(e,n,r){return Po(!this.aborted),Po(!this.completed),this[Vo].onUpgrade(e,n,r)}onComplete(e){return Po(!this.aborted),this.completed=!0,on.trailers.hasSubscribers&&on.trailers.publish({request:this,trailers:e}),this[Vo].onComplete(e)}onError(e){if(on.error.hasSubscribers&&on.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Vo].onError(e)}addHeader(e,n){return Yp(this,e,n),this}static[CBe](e,n,r){return new t(e,n,r)}static[EBe](e,n,r){let i=n.headers;n=se(M({},n),{headers:null});let s=new t(e,n,r);if(s.headers={},Array.isArray(i)){if(i.length%2!==0)throw new ht("headers array must be even");for(let o=0;o<i.length;o+=2)Yp(s,i[o],i[o+1],!0)}else if(i&&typeof i=="object"){let o=Object.keys(i);for(let a=0;a<o.length;a++){let A=o[a];Yp(s,A,i[A],!0)}}else if(i!=null)throw new ht("headers must be an object or an array");return s}static[mBe](e){let n=e.split(`\r
`),r={};for(let i of n){let[s,o]=i.split(": ");o==null||o.length===0||(r[s]?r[s]+=`,${o}`:r[s]=o)}return r}};function ql(t,e,n){if(e&&typeof e=="object")throw new ht(`invalid ${t} header`);if(e=e!=null?`${e}`:"",ij.exec(e)!==null)throw new ht(`invalid ${t} header`);return n?e:`${t}: ${e}\r
`}function Yp(t,e,n,r=!1){if(n&&typeof n=="object"&&!Array.isArray(n))throw new ht(`invalid ${e} header`);if(n===void 0)return;if(t.host===null&&e.length===4&&e.toLowerCase()==="host"){if(ij.exec(n)!==null)throw new ht(`invalid ${e} header`);t.host=n}else if(t.contentLength===null&&e.length===14&&e.toLowerCase()==="content-length"){if(t.contentLength=parseInt(n,10),!Number.isFinite(t.contentLength))throw new ht("invalid content-length header")}else if(t.contentType===null&&e.length===12&&e.toLowerCase()==="content-type")t.contentType=n,r?t.headers[e]=ql(e,n,r):t.headers+=ql(e,n);else{if(e.length===17&&e.toLowerCase()==="transfer-encoding")throw new ht("invalid transfer-encoding header");if(e.length===10&&e.toLowerCase()==="connection"){let i=typeof n=="string"?n.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new ht("invalid connection header");i==="close"&&(t.reset=!0)}else{if(e.length===10&&e.toLowerCase()==="keep-alive")throw new ht("invalid keep-alive header");if(e.length===7&&e.toLowerCase()==="upgrade")throw new ht("invalid upgrade header");if(e.length===6&&e.toLowerCase()==="expect")throw new pBe("expect header not supported");if(rj.exec(e)===null)throw new ht("invalid header key");if(Array.isArray(n))for(let i=0;i<n.length;i++)r?t.headers[e]?t.headers[e]+=`,${ql(e,n[i],r)}`:t.headers[e]=ql(e,n[i],r):t.headers+=ql(e,n[i]);else r?t.headers[e]=ql(e,n,r):t.headers+=ql(e,n)}}}sj.exports=ZF});var mQ=C((uxe,aj)=>{"use strict";var yBe=B("events"),$F=class extends yBe{dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}};aj.exports=$F});var Wp=C((hxe,Aj)=>{"use strict";var BBe=mQ(),{ClientDestroyedError:eM,ClientClosedError:QBe,InvalidArgumentError:Oh}=ut(),{kDestroy:wBe,kClose:_Be,kDispatch:tM,kInterceptors:Hl}=St(),Uh=Symbol("destroyed"),Jp=Symbol("closed"),Go=Symbol("onDestroyed"),Ph=Symbol("onClosed"),CQ=Symbol("Intercepted Dispatch"),nM=class extends BBe{constructor(){super(),this[Uh]=!1,this[Go]=null,this[Jp]=!1,this[Ph]=[]}get destroyed(){return this[Uh]}get closed(){return this[Jp]}get interceptors(){return this[Hl]}set interceptors(e){if(e){for(let n=e.length-1;n>=0;n--)if(typeof this[Hl][n]!="function")throw new Oh("interceptor must be an function")}this[Hl]=e}close(e){if(e===void 0)return new Promise((r,i)=>{this.close((s,o)=>s?i(s):r(o))});if(typeof e!="function")throw new Oh("invalid callback");if(this[Uh]){queueMicrotask(()=>e(new eM,null));return}if(this[Jp]){this[Ph]?this[Ph].push(e):queueMicrotask(()=>e(null,null));return}this[Jp]=!0,this[Ph].push(e);let n=()=>{let r=this[Ph];this[Ph]=null;for(let i=0;i<r.length;i++)r[i](null,null)};this[_Be]().then(()=>this.destroy()).then(()=>{queueMicrotask(n)})}destroy(e,n){if(typeof e=="function"&&(n=e,e=null),n===void 0)return new Promise((i,s)=>{this.destroy(e,(o,a)=>o?s(o):i(a))});if(typeof n!="function")throw new Oh("invalid callback");if(this[Uh]){this[Go]?this[Go].push(n):queueMicrotask(()=>n(null,null));return}e||(e=new eM),this[Uh]=!0,this[Go]=this[Go]||[],this[Go].push(n);let r=()=>{let i=this[Go];this[Go]=null;for(let s=0;s<i.length;s++)i[s](null,null)};this[wBe](e).then(()=>{queueMicrotask(r)})}[CQ](e,n){if(!this[Hl]||this[Hl].length===0)return this[CQ]=this[tM],this[tM](e,n);let r=this[tM].bind(this);for(let i=this[Hl].length-1;i>=0;i--)r=this[Hl][i](r);return this[CQ]=r,r(e,n)}dispatch(e,n){if(!n||typeof n!="object")throw new Oh("handler must be an object");try{if(!e||typeof e!="object")throw new Oh("opts must be an object.");if(this[Uh]||this[Go])throw new eM;if(this[Jp])throw new QBe;return this[CQ](e,n)}catch(r){if(typeof n.onError!="function")throw new Oh("invalid onError method");return n.onError(r),!1}}};Aj.exports=nM});var zp=C((fxe,uj)=>{"use strict";var vBe=B("net"),lj=B("assert"),cj=Ue(),{InvalidArgumentError:SBe,ConnectTimeoutError:bBe}=ut(),rM,iM;global.FinalizationRegistry&&!process.env.NODE_V8_COVERAGE?iM=class{constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(n=>{if(this._sessionCache.size<this._maxCachedSessions)return;let r=this._sessionCache.get(n);r!==void 0&&r.deref()===void 0&&this._sessionCache.delete(n)})}get(e){let n=this._sessionCache.get(e);return n?n.deref():null}set(e,n){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(n)),this._sessionRegistry.register(n,e))}}:iM=class{constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,n){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:r}=this._sessionCache.keys().next();this._sessionCache.delete(r)}this._sessionCache.set(e,n)}}};function DBe(s){var o=s,{allowH2:t,maxCachedSessions:e,socketPath:n,timeout:r}=o,i=cs(o,["allowH2","maxCachedSessions","socketPath","timeout"]);if(e!=null&&(!Number.isInteger(e)||e<0))throw new SBe("maxCachedSessions must be a positive integer or zero");let a=M({path:n},i),A=new iM(e??100);return r=r??1e4,t=t??!1,function({hostname:c,host:u,protocol:h,port:d,servername:g,localAddress:f,httpSocket:m},y){let I;if(h==="https:"){rM||(rM=B("tls")),g=g||a.servername||cj.getServerName(u)||null;let _=g||c,S=A.get(_)||null;lj(_),I=rM.connect(se(M({highWaterMark:16384},a),{servername:g,session:S,localAddress:f,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:m,port:d||443,host:c})),I.on("session",function(T){A.set(_,T)})}else lj(!m,"httpSocket can only be sent on TLS update"),I=vBe.connect(se(M({highWaterMark:64*1024},a),{localAddress:f,port:d||80,host:c}));if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;I.setKeepAlive(!0,_)}let w=RBe(()=>TBe(I),r);return I.setNoDelay(!0).once(h==="https:"?"secureConnect":"connect",function(){if(w(),y){let _=y;y=null,_(null,this)}}).on("error",function(_){if(w(),y){let S=y;y=null,S(_)}}),I}}function RBe(t,e){if(!e)return()=>{};let n=null,r=null,i=setTimeout(()=>{n=setImmediate(()=>{process.platform==="win32"?r=setImmediate(()=>t()):t()})},e);return()=>{clearTimeout(i),clearImmediate(n),clearImmediate(r)}}function TBe(t){cj.destroy(t,new bBe)}uj.exports=DBe});var hj=C(IQ=>{"use strict";Object.defineProperty(IQ,"__esModule",{value:!0});IQ.enumToMap=void 0;function kBe(t){let e={};return Object.keys(t).forEach(n=>{let r=t[n];typeof r=="number"&&(e[n]=r)}),e}IQ.enumToMap=kBe});var dj=C(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.SPECIAL_HEADERS=O.HEADER_STATE=O.MINOR=O.MAJOR=O.CONNECTION_TOKEN_CHARS=O.HEADER_CHARS=O.TOKEN=O.STRICT_TOKEN=O.HEX=O.URL_CHAR=O.STRICT_URL_CHAR=O.USERINFO_CHARS=O.MARK=O.ALPHANUM=O.NUM=O.HEX_MAP=O.NUM_MAP=O.ALPHA=O.FINISH=O.H_METHOD_MAP=O.METHOD_MAP=O.METHODS_RTSP=O.METHODS_ICE=O.METHODS_HTTP=O.METHODS=O.LENIENT_FLAGS=O.FLAGS=O.TYPE=O.ERROR=void 0;var NBe=hj(),FBe;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(FBe=O.ERROR||(O.ERROR={}));var MBe;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(MBe=O.TYPE||(O.TYPE={}));var xBe;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(xBe=O.FLAGS||(O.FLAGS={}));var LBe;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(LBe=O.LENIENT_FLAGS||(O.LENIENT_FLAGS={}));var ae;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(ae=O.METHODS||(O.METHODS={}));O.METHODS_HTTP=[ae.DELETE,ae.GET,ae.HEAD,ae.POST,ae.PUT,ae.CONNECT,ae.OPTIONS,ae.TRACE,ae.COPY,ae.LOCK,ae.MKCOL,ae.MOVE,ae.PROPFIND,ae.PROPPATCH,ae.SEARCH,ae.UNLOCK,ae.BIND,ae.REBIND,ae.UNBIND,ae.ACL,ae.REPORT,ae.MKACTIVITY,ae.CHECKOUT,ae.MERGE,ae["M-SEARCH"],ae.NOTIFY,ae.SUBSCRIBE,ae.UNSUBSCRIBE,ae.PATCH,ae.PURGE,ae.MKCALENDAR,ae.LINK,ae.UNLINK,ae.PRI,ae.SOURCE];O.METHODS_ICE=[ae.SOURCE];O.METHODS_RTSP=[ae.OPTIONS,ae.DESCRIBE,ae.ANNOUNCE,ae.SETUP,ae.PLAY,ae.PAUSE,ae.TEARDOWN,ae.GET_PARAMETER,ae.SET_PARAMETER,ae.REDIRECT,ae.RECORD,ae.FLUSH,ae.GET,ae.POST];O.METHOD_MAP=NBe.enumToMap(ae);O.H_METHOD_MAP={};Object.keys(O.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(O.H_METHOD_MAP[t]=O.METHOD_MAP[t])});var OBe;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(OBe=O.FINISH||(O.FINISH={}));O.ALPHA=[];for(let t=65;t<=90;t++)O.ALPHA.push(String.fromCharCode(t)),O.ALPHA.push(String.fromCharCode(t+32));O.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};O.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};O.NUM=["0","1","2","3","4","5","6","7","8","9"];O.ALPHANUM=O.ALPHA.concat(O.NUM);O.MARK=["-","_",".","!","~","*","'","(",")"];O.USERINFO_CHARS=O.ALPHANUM.concat(O.MARK).concat(["%",";",":","&","=","+","$",","]);O.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(O.ALPHANUM);O.URL_CHAR=O.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)O.URL_CHAR.push(t);O.HEX=O.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);O.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(O.ALPHANUM);O.TOKEN=O.STRICT_TOKEN.concat([" "]);O.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&O.HEADER_CHARS.push(t);O.CONNECTION_TOKEN_CHARS=O.HEADER_CHARS.filter(t=>t!==44);O.MAJOR=O.NUM_MAP;O.MINOR=O.MAJOR;var Vh;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(Vh=O.HEADER_STATE||(O.HEADER_STATE={}));O.SPECIAL_HEADERS={connection:Vh.CONNECTION,"content-length":Vh.CONTENT_LENGTH,"proxy-connection":Vh.CONNECTION,"transfer-encoding":Vh.TRANSFER_ENCODING,upgrade:Vh.UPGRADE}});var aM=C((Cxe,pj)=>{"use strict";var Gh=Ue(),{kBodyUsed:jp}=St(),oM=B("assert"),{InvalidArgumentError:UBe}=ut(),PBe=B("events"),VBe=[300,301,302,303,307,308],gj=Symbol("body"),yQ=class{constructor(e){this[gj]=e,this[jp]=!1}[Symbol.asyncIterator](){return us(this,null,function*(){oM(!this[jp],"disturbed"),this[jp]=!0,yield*SA(this[gj])})}},sM=class{constructor(e,n,r,i){if(n!=null&&(!Number.isInteger(n)||n<0))throw new UBe("maxRedirections must be a positive number");Gh.validateHandler(i,r.method,r.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts=se(M({},r),{maxRedirections:0}),this.maxRedirections=n,this.handler=i,this.history=[],Gh.isStream(this.opts.body)?(Gh.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){oM(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[jp]=!1,PBe.prototype.on.call(this.opts.body,"data",function(){this[jp]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new yQ(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Gh.isIterable(this.opts.body)&&(this.opts.body=new yQ(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,n,r){this.handler.onUpgrade(e,n,r)}onError(e){this.handler.onError(e)}onHeaders(e,n,r,i){if(this.location=this.history.length>=this.maxRedirections||Gh.isDisturbed(this.opts.body)?null:GBe(e,n),this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,n,r,i);let{origin:s,pathname:o,search:a}=Gh.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),A=a?`${o}${a}`:o;this.opts.headers=qBe(this.opts.headers,e===303,this.opts.origin!==s),this.opts.path=A,this.opts.origin=s,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function GBe(t,e){if(VBe.indexOf(t)===-1)return null;for(let n=0;n<e.length;n+=2)if(e[n].toString().toLowerCase()==="location")return e[n+1]}function fj(t,e,n){return t.length===4&&t.toString().toLowerCase()==="host"||e&&t.toString().toLowerCase().indexOf("content-")===0||n&&t.length===13&&t.toString().toLowerCase()==="authorization"||n&&t.length===6&&t.toString().toLowerCase()==="cookie"}function qBe(t,e,n){let r=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)fj(t[i],e,n)||r.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))fj(i,e,n)||r.push(i,t[i]);else oM(t==null,"headers must be an object or an array");return r}pj.exports=sM});var BQ=C((yxe,Ej)=>{"use strict";var HBe=aM();function YBe({maxRedirections:t}){return e=>function(r,i){let{maxRedirections:s=t}=r;if(!s)return e(r,i);let o=new HBe(e,s,r,i);return r=se(M({},r),{maxRedirections:0}),e(r,o)}}Ej.exports=YBe});var AM=C((Qxe,mj)=>{"use strict";mj.exports="AGFzbQEAAAABMAhgAX8Bf2ADf39/AX9gBH9/f38Bf2AAAGADf39/AGABfwBgAn9/AGAGf39/f39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQACA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAA0ZFAwMEAAAFAAAAAAAABQEFAAUFBQAABgAAAAAGBgYGAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAAABAQcAAAUFAwABBAUBcAESEgUDAQACBggBfwFBgNQECwfRBSIGbWVtb3J5AgALX2luaXRpYWxpemUACRlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQALbGxodHRwX2luaXQAChhsbGh0dHBfc2hvdWxkX2tlZXBfYWxpdmUAQQxsbGh0dHBfYWxsb2MADAZtYWxsb2MARgtsbGh0dHBfZnJlZQANBGZyZWUASA9sbGh0dHBfZ2V0X3R5cGUADhVsbGh0dHBfZ2V0X2h0dHBfbWFqb3IADxVsbGh0dHBfZ2V0X2h0dHBfbWlub3IAEBFsbGh0dHBfZ2V0X21ldGhvZAARFmxsaHR0cF9nZXRfc3RhdHVzX2NvZGUAEhJsbGh0dHBfZ2V0X3VwZ3JhZGUAEwxsbGh0dHBfcmVzZXQAFA5sbGh0dHBfZXhlY3V0ZQAVFGxsaHR0cF9zZXR0aW5nc19pbml0ABYNbGxodHRwX2ZpbmlzaAAXDGxsaHR0cF9wYXVzZQAYDWxsaHR0cF9yZXN1bWUAGRtsbGh0dHBfcmVzdW1lX2FmdGVyX3VwZ3JhZGUAGhBsbGh0dHBfZ2V0X2Vycm5vABsXbGxodHRwX2dldF9lcnJvcl9yZWFzb24AHBdsbGh0dHBfc2V0X2Vycm9yX3JlYXNvbgAdFGxsaHR0cF9nZXRfZXJyb3JfcG9zAB4RbGxodHRwX2Vycm5vX25hbWUAHxJsbGh0dHBfbWV0aG9kX25hbWUAIBJs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ADcDACAAQShqQgA3AwAgAEEgakIANwMAIABBEGpCADcDACAAQQhqQgA3AwAgAEHdATYCHEEAC3sBAX8CQCAAKAIMIgMNAAJAIAAoAgRFDQAgACABNgIECwJAIAAgASACEMSAgIAAIgMNACAAKAIMDwsgACADNgIcQQAhAyAAKAIEIgFFDQAgACABIAIgACgCCBGBgICAAAAiAUUNACAAIAI2AhQgACABNgIMIAEhAwsgAwvk8wEDDn8DfgR/I4CAgIAAQRBrIgMkgICAgAAgASEEIAEhBSABIQYgASEHIAEhCCABIQkgASEKIAEhCyABIQwgASENIAEhDiABIQ8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgACgCHCIQQX9qDt0B2gEB2QECAwQFBgcICQoLDA0O2AEPENcBERLWARMUFRYXGBkaG+AB3wEcHR7VAR8gISIjJCXUASYnKCkqKyzTAdIBLS7RAdABLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVG2wFHSElKzwHOAUvNAUzMAU1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4ABgQGCAYMBhAGFAYYBhwGIAYkB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QAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAC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FCAAIBA2AgxBACEQDLIBCyAAKAIEIRAgAEEANgIEAkAgACAQIAEQp4CAgAAiEA0AIAEhAQxNCyAAQdMANgIcIAAgATYCFCAAIBA2AgxBACEQDLEBCyAAKAIEIRAgAEEANgIEAkAgACAQIAEQp4CAgAAiEA0AIAEhAQxRCyAAQeUANgIcIAAgATYCFCAAIBA2AgxBACEQDLABCyAAQQA2AhwgACABNgIUIABBxoqAgAA2AhAgAEEHNgIMQQAhEAyvAQsgACgCBCEQIABBADYCBAJAIAAgECABEKeAgIAAIhANACABIQEMSQsgAEHSADYCHCAAIAE2AhQgACAQNgIMQQAhEAyuAQsgACgCBCEQIABBADYCBAJAIAAgECABEKeAgIAAIhANACABIQEMSQsgAEHTADYCHCAAIAE2AhQgACAQNgIMQQAhEAytAQsgACgCBCEQIABBADYCBAJAIAAgECABEKeAgIAAIhANACABIQEMTQsgAEHlADYCHCAAIAE2AhQgACAQNgIMQQAhEAysAQsgAEEANgIcIAAgATYCFCAAQdyIgIAANgIQIABBBzYCDEEAIRAMqwELIBBBP0cNASABQQFqIQELQQUhEAyQAQtBACEQIABBADYCHCAAIAE2AhQgAEH9koCAADYCECAAQQc2AgwMqAELIAAoAgQhECAAQQA2AgQCQCAAIBAgARCngICAACIQDQAgASEBDEILIABB0gA2AhwgACABNgIUIAAgEDYCDEEAIRAMpwELIAAoAgQhECAAQQA2AgQCQCAAIBAgARCngICAACIQDQAgASEBDEILIABB0wA2AhwgACABNgIUIAAgEDYCDEEAIRAMpgELIAAoAgQhECAAQQA2AgQCQCAAIBAgARCngICAACIQDQAgASEBDEYLIABB5QA2AhwgACABNgIUIAAgEDYCDEEAIRAMpQELIAAoAgQhASAAQQA2AgQCQCAAIAEgFBCngICAACIBDQAgFCEBDD8LIABB0gA2AhwgACAUNgIUIAAgATYCDEEAIRAMpAELIAAoAgQhASAAQQA2AgQCQCAAIAEgFBCngICAACIBDQAgFCEBDD8LIABB0wA2AhwgACAUNgIUIAAgATYCDEEAIRAMowELIAAoAgQhASAAQQA2AgQCQCAAIAEgFBCngICAACIBDQAgFCEBDEMLIABB5QA2AhwgACAU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YWdlX2JlZ2luYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlYCBjYWxsYmFjayBlcnJvcgBgb25fc3RhdHVzX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdmVyc2lvbl9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3VybF9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX3ZhbHVlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21ldGhvZF9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl9maWVsZF9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lYCBjYWxsYmFjayBlcnJvcgBVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNlcnZlcgBJbnZhbGlkIGhlYWRlciB2YWx1ZSBjaGFyAEludmFsaWQgaGVhZGVyIGZpZWxkIGNoYXIAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl92ZXJzaW9uAEludmFsaWQgbWlub3IgdmVyc2lvbgBJbnZhbGlkIG1ham9yIHZlcnNpb24ARXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgdmVyc2lvbgBFeHBlY3RlZCBDUkxGIGFmdGVyIHZlcnNpb24ASW52YWxpZCBIVFRQIHZlcnNpb24ASW52YWxpZCBoZWFkZXIgdG9rZW4AU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl91cmwASW52YWxpZCBjaGFyYWN0ZXJzIGluIHVybABVbmV4cGVjdGVkIHN0YXJ0IGNoYXIgaW4gdXJsAERvdWJsZSBAIGluIHVybABFbXB0eSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXJhY3RlciBpbiBDb250ZW50LUxlbmd0aABEdXBsaWNhdGUgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyIGluIHVybCBwYXRoAENvbnRlbnQtTGVuZ3RoIGNhbid0IGJlIHByZXNlbnQgd2l0aCBUcmFuc2Zlci1FbmNvZGluZwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBzaXplAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25faGVhZGVyX3ZhbHVlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgdmFsdWUATWlzc2luZyBleHBlY3RlZCBMRiBhZnRlciBoZWFkZXIgdmFsdWUASW52YWxpZCBgVHJhbnNmZXItRW5jb2RpbmdgIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGVkIHZhbHVlAFBhdXNlZCBieSBvbl9oZWFkZXJzX2NvbXBsZXRlAEludmFsaWQgRU9GIHN0YXRlAG9uX3Jlc2V0IHBhdXNlAG9uX2NodW5rX2hlYWRlciBwYXVzZQBvbl9tZXNzYWdlX2JlZ2luIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZSBwYXVzZQBvbl9zdGF0dXNfY29tcGxldGUgcGF1c2UAb25fdmVyc2lvbl9jb21wbGV0ZSBwYXVzZQBvbl91cmxfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX3ZhbHVlX2NvbXBsZXRlIHBhdXNlAG9uX21lc3NhZ2VfY29tcGxldGUgcGF1c2UAb25fbWV0aG9kX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl9maWVsZF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fbmFtZSBwYXVzZQBVbmV4cGVjdGVkIHNwYWNlIGFmdGVyIHN0YXJ0IGxpbmUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fbmFtZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIG5hbWUAUGF1c2Ugb24gQ09OTkVDVC9VcGdyYWRlAFBhdXNlIG9uIFBSSS9VcGdyYWRlAEV4cGVjdGVkIEhUVFAvMiBDb25uZWN0aW9uIFByZWZhY2UAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9tZXRob2QARXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgbWV0aG9kAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25faGVhZGVyX2ZpZWxkAFBhdXNlZABJbnZhbGlkIHdvcmQgZW5jb3VudGVyZWQASW52YWxpZCBtZXRob2QgZW5jb3VudGVyZWQAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzY2hlbWEAUmVxdWVzdCBoYXMgaW52YWxpZCBgVHJhbnNmZXItRW5jb2RpbmdgAFNXSVRDSF9QUk9YWQBVU0VfUFJPWFkATUtBQ1RJVklUWQBVTlBST0NFU1NBQkxFX0VOVElUWQBDT1BZAE1PVkVEX1BFUk1BTkVOVExZAFRPT19FQVJMWQBOT1RJRlkARkFJTEVEX0RFUEVOREVOQ1kAQkFEX0dBVEVXQVkAUExBWQBQVVQAQ0hFQ0tPVVQAR0FURVdBWV9USU1FT1VUAFJFUVVFU1RfVElNRU9VVABORVRXT1JLX0NPTk5FQ1RfVElNRU9VVABDT05ORUNUSU9OX1RJTUVPVVQATE9HSU5fVElNRU9VVABORVRXT1JLX1JFQURfVElNRU9VVABQT1NUAE1JU0RJUkVDVEVEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfTE9BRF9CQUxBTkNFRF9SRVFVRVNUAEJBRF9SRVFVRVNUAEhUVFBfUkVRVUVTVF9TRU5UX1RPX0hUVFBTX1BPUlQAUkVQT1JUAElNX0FfVEVBUE9UAFJFU0VUX0NPTlRFTlQATk9fQ09OVEVOVABQQVJUSUFMX0NPTlRFTlQASFBFX0lOVkFMSURfQ09OU1RBTlQASFBFX0NCX1JFU0VUAEdFVABIUEVfU1RSSUNUAENPTkZMSUNUAFRFTVBPUkFSWV9SRURJUkVDVABQRVJNQU5FTlRfUkVESVJFQ1QAQ09OTkVDVABNVUxUSV9TVEFUVVMASFBFX0lOVkFMSURfU1RBVFVTAFRPT19NQU5ZX1JFUVVFU1RTAEVBUkxZX0hJTlRTAFVOQVZBSUxBQkxFX0ZPUl9MRUdBTF9SRUFTT05TAE9QVElPTlMAU1dJVENISU5HX1BST1RPQ09MUwBWQVJJQU5UX0FMU09fTkVHT1RJQVRFUwBNVUxUSVBMRV9DSE9JQ0VTAElOVEVSTkFMX1NFUlZFUl9FUlJPUgBXRUJfU0VSVkVSX1VOS05PV05fRVJST1IAUkFJTEdVTl9FUlJPUgBJREVOVElUWV9QUk9WSURFUl9BVVRIRU5USUNBVElPTl9FUlJPUgBTU0xfQ0VSVElGSUNBVEVfRVJST1IASU5WQUxJRF9YX0ZPUldBUkRFRF9GT1IAU0VUX1BBUkFNRVRFUgBHRVRfUEFSQU1FVEVSAEhQRV9VU0VSAFNFRV9PVEhFUgBIUEVfQ0JfQ0hVTktfSEVBREVSAE1LQ0FMRU5EQVIAU0VUVVAAV0VCX1NFUlZFUl9JU19ET1dOAFRFQVJET1dOAEhQRV9DTE9TRURfQ09OTkVDVElPTgBIRVVSSVNUSUNfRVhQSVJBVElPTgBESVNDT05ORUNURURfT1BFUkFUSU9OAE5PTl9BVVRIT1JJVEFUSVZFX0lORk9STUFUSU9OAEhQRV9JTlZBTElEX1ZFUlNJT04ASFBFX0NCX01FU1NBR0VfQkVHSU4AU0lURV9JU19GUk9aRU4ASFBFX0lOVkFMSURfSEVBREVSX1RPS0VOAElOVkFMSURfVE9LRU4ARk9SQklEREVOAEVOSEFOQ0VfWU9VUl9DQUxNAEhQRV9JTlZBTElEX1VSTABCTE9DS0VEX0JZX1BBUkVOVEFMX0NPTlRST0wATUtDT0wAQUNMAEhQRV9JTlRFUk5BTABSRVFVRVNUX0hFQURFUl9GSUVMRFNfVE9PX0xBUkdFX1VOT0ZGSUNJQUwASFBFX09LAFVOTElOSwBVTkxPQ0sAUFJJAFJFVFJZX1dJVEgASFBFX0lOVkFMSURfQ09OVEVOVF9MRU5HVEgASFBFX1VORVhQRUNURURfQ09OVEVOVF9MRU5HVEgARkxVU0gAUFJPUFBBVENIAE0tU0VBUkNIAFVSSV9UT09fTE9ORwBQUk9DRVNTSU5HAE1JU0NFTExBTkVPVVNfUEVSU0lTVEVOVF9XQVJOSU5HAE1JU0NFTExBTkVPVVNfV0FSTklORwBIUEVfSU5WQUxJRF9UUkFOU0ZFUl9FTkNPRElORwBFeHBlY3RlZCBDUkxGAEhQRV9JTlZBTElEX0NIVU5LX1NJWkUATU9WRQBDT05USU5VRQBIUEVfQ0JfU1RBVFVTX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJTX0NPTVBMRVRFAEhQRV9DQl9WRVJTSU9OX0NPTVBMRVRFAEhQRV9DQl9VUkxfQ09NUExFVEUASFBFX0NCX0NIVU5LX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX05BTUVfQ09NUExFVEUASFBFX0NCX01FU1NBR0VfQ09NUExFVEUASFBFX0NCX01FVEhPRF9DT01QTEVURQBIUEVfQ0JfSEVBREVSX0ZJRUxEX0NPTVBMRVRFAERFTEVURQBIUEVfSU5WQUxJRF9FT0ZfU1RBVEUASU5WQUxJRF9TU0xfQ0VSVElGSUNBVEUAUEFVU0UATk9fUkVTUE9OU0UAVU5TVVBQT1JURURfTUVESUFfVFlQRQBHT05FAE5PVF9BQ0NFUFRBQkxFAFNFUlZJQ0VfVU5BVkFJTEFCTEUAUkFOR0VfTk9UX1NBVElTRklBQkxFAE9SSUdJTl9JU19VTlJFQUNIQUJMRQBSRVNQT05TRV9JU19TVEFMRQBQVVJHRQBNRVJHRQBSRVFVRVNUX0hFQURFUl9GSUVMRFNfVE9PX0xBUkdFAFJFUVVFU1RfSEVBREVSX1RPT19MQVJHRQBQQVlMT0FEX1RPT19MQVJHRQBJTlNVRkZJQ0lFTlRfU1RPUkFHRQBIUEVfUEFVU0VEX1VQR1JBREUASFBFX1BBVVNFRF9IMl9VUEdSQURFAFNPVVJDRQBBTk5PVU5DRQBUUkFDRQBIUEVfVU5FWFBFQ1RFRF9TUEFDRQBERVNDUklCRQBVTlNVQlNDUklCRQBSRUNPUkQASFBFX0lOVkFMSURfTUVUSE9EAE5PVF9GT1VORABQUk9QRklORABVTkJJTkQAUkVCSU5EAFVOQVVUSE9SSVpFRABNRVRIT0RfTk9UX0FMTE9XRUQASFRUUF9WRVJTSU9OX05PVF9TVVBQT1JURUQAQUxSRUFEWV9SRVBPUlRFRABBQ0NFUFRFRABOT1RfSU1QTEVNRU5URUQATE9PUF9ERVRFQ1RFRABIUEVfQ1JfRVhQRUNURUQASFBFX0xGX0VYUEVDVEVEAENSRUFURUQASU1fVVNFRABIUEVfUEFVU0VEAFRJTUVPVVRfT0NDVVJFRABQQVlNRU5UX1JFUVVJUkVEAFBSRUNPTkRJVElPTl9SRVFVSVJFRABQUk9YWV9BVVRIRU5USUNBVElPTl9SRVFVSVJFRABORVRXT1JLX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAExFTkdUSF9SRVFVSVJFRABTU0xfQ0VSVElGSUNBVEVfUkVRVUlSRUQAVVBHUkFERV9SRVFVSVJFRABQQUdFX0VYUElSRUQAUFJFQ09ORElUSU9OX0ZBSUxFRABFWFBFQ1RBVElPTl9GQUlMRUQAUkVWQUxJREFUSU9OX0ZBSUxFRABTU0xfSEFORFNIQUtFX0ZBSUxFRABMT0NLRUQAVFJBTlNGT1JNQVRJT05fQVBQTElFRABOT1RfTU9ESUZJRUQATk9UX0VYVEVOREVEAEJBTkRXSURUSF9MSU1JVF9FWENFRURFRABTSVRFX0lTX09WRVJMT0FERUQASEVBRABFeHBlY3RlZCBIVFRQLwAAXhMAACYTAAAwEAAA8BcAAJ0TAAAVEgAAORcAAPASAAAKEAAAdRIAAK0SAACCEwAATxQAAH8QAACgFQAAIxQAAIkSAACLFAAATRUAANQRAADPFAAAEBgAAMkWAADcFgAAwREAAOAXAAC7FAAAdBQAAHwVAADlFAAACBcAAB8QAABlFQAAoxQAACgVAAACFQAAmRUAACwQAACLGQAATw8AANQOAABqEAAAzhAAAAIXAACJDgAAbhMAABwTAABmFAAAVhcAAMETAADNEwAAbBMAAGgXAABmFwAAXxcAACITAADODwAAaQ4AANgOAABjFgAAyxMAAKoOAAAoFwAAJhcAAMUTAABdFgAA6BEAAGcTAABlEwAA8hYAAHMTAAAdFwAA+RYAAPMRAADPDgAAzhUAAAwSAACzEQAApREAAGEQAAAyFwAAuxMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAIDAgICAgIAAAICAAICAAICAgICAgICAgIABAAAAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAACAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbG9zZWVlcC1hbGl2ZQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAQEBAQEAAAEBAAEBAAEBAQEBAQEBAQEAAAAAAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AAAAAAAAAAAAAAAAAAAByYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AAAAAAAAAAAAAAAABAgABAwAAAAAAAAAAAAAAAAAAAAAAAAQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAAAAAAAAAQIAAQMAAAAAAAAAAAAAAAAAAAAAAAAEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAAAAAAAAAEAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAAAAAAAAAAAAAQAAAgAAAAAAAAAAAAAAAAAAAAAAAAMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAABAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAIAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABOT1VOQ0VFQ0tPVVRORUNURVRFQ1JJQkVMVVNIRVRFQURTRUFSQ0hSR0VDVElWSVRZTEVOREFSVkVPVElGWVBUSU9OU0NIU0VBWVNUQVRDSEdFT1JESVJFQ1RPUlRSQ0hQQVJBTUVURVJVUkNFQlNDUklCRUFSRE9XTkFDRUlORE5LQ0tVQlNDUklCRUhUVFAvQURUUC8="});var Ij=C((wxe,Cj)=>{"use strict";Cj.exports="AGFzbQEAAAABMAhgAX8Bf2ADf39/AX9gBH9/f38Bf2AAAGADf39/AGABfwBgAn9/AGAGf39/f39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQACA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAA0ZFAwMEAAAFAAAAAAAABQEFAAUFBQAABgAAAAAGBgYGAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAAABAQcAAAUFAwABBAUBcAESEgUDAQACBggBfwFBgNQECwfRBSIGbWVtb3J5AgALX2luaXRpYWxpemUACRlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQALbGxodHRwX2luaXQAChhsbGh0dHBfc2hvdWxkX2tlZXBfYWxpdmUAQQxsbGh0dHBfYWxsb2MADAZtYWxsb2MARgtsbGh0dHBfZnJlZQANBGZyZWUASA9sbGh0dHBfZ2V0X3R5cGUADhVsbGh0dHBfZ2V0X2h0dHBfbWFqb3IADxVsbGh0dHBfZ2V0X2h0dHBfbWlub3IAEBFsbGh0dHBfZ2V0X21ldGhvZAARFmxsaHR0cF9nZXRfc3RhdHVzX2NvZGUAEhJsbGh0dHBfZ2V0X3VwZ3JhZGUAEwxsbGh0dHBfcmVzZXQAFA5sbGh0dHBfZXhlY3V0ZQAVFGxsaHR0cF9zZXR0aW5nc19pbml0ABYNbGxodHRwX2ZpbmlzaAAXDGxsaHR0cF9wYXVzZQAYDWxsaHR0cF9yZXN1bWUAGRtsbGh0dHBfcmVzdW1lX2FmdGVyX3VwZ3JhZGUAGhBsbGh0dHBfZ2V0X2Vycm5vABsXbGxodHRwX2dldF9lcnJvcl9yZWFzb24AHBdsbGh0dHBfc2V0X2Vycm9yX3JlYXNvbgAdFGxsaHR0cF9nZXRfZXJyb3JfcG9zAB4RbGxodHRwX2Vycm5vX25hbWUAHxJsbGh0dHBfbWV0aG9kX25hbWUAIBJs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IAH9CwMAIABBMGogAf0LAwAgAEEgaiAB/QsDACAAQd0BNgIcQQALewEBfwJAIAAoAgwiAw0AAkAgACgCBEUNACAAIAE2AgQLAkAgACABIAIQxICAgAAiAw0AIAAoAgwPCyAAIAM2AhxBACEDIAAoAgQiAUUNACAAIAEgAiAAKAIIEYGAgIAAACIBRQ0AIAAgAjYCFCAAIAE2AgwgASEDCyADC+TzAQMOfwN+BH8jgICAgABBEGsiAySAgICAACABIQQgASEFIAEhBiABIQcgASEIIAEhCSABIQogASELIAEhDCABIQ0gASEOIAEhDwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAKAIcIhBBf2oO3QHaAQHZAQIDBAUGBwgJCgsMDQ7YAQ8Q1wEREtYBExQVFhcYGRob4AHfARwdHtUBHyAhIiMkJdQBJicoKSorLNMB0gEtLtEB0AEvMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUbbAUdISUrPAc4BS80BTMwBTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEB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QAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIBAOxwEAAQID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YWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsb3NlZWVwLWFsaXZlAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgAAAAAAAAAAAAAAAAAAAHJhbnNmZXItZW5jb2RpbmdwZ3JhZGUNCg0KDQpTTQ0KDQpUVFAvQ0UvVFNQLwAAAAAAAAAAAAAAAAECAAEDAAAAAAAAAAAAAAAAAAAAAAAABAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAAAAAAAAAAABAgABAwAAAAAAAAAAAAAAAAAAAAAAAAQBAQUBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAAAAAAAAAQAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAAAAAAAAAABAAACAAAAAAAAAAAAAAAAAAAAAAAAAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAQAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAgAAAAACAAAAAAAAAAAAAAAAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw=="});var nE=C((_xe,Oj)=>{"use strict";var W=B("assert"),Qj=B("net"),JBe=B("http"),{pipeline:WBe}=B("stream"),ee=Ue(),lM=Iz(),uM=oj(),zBe=Wp(),{RequestContentLengthMismatchError:qo,ResponseContentLengthMismatchError:jBe,InvalidArgumentError:Kt,RequestAbortedError:CM,HeadersTimeoutError:KBe,HeadersOverflowError:XBe,SocketError:Hh,InformationalError:ro,BodyTimeoutError:ZBe,HTTPParserError:$Be,ResponseExceededMaxSizeError:eQe,ClientDestroyedError:tQe}=ut(),nQe=zp(),{kUrl:Fn,kReset:pr,kServerName:pA,kClient:io,kBusy:hM,kParser:Pt,kConnect:rQe,kBlocking:Yh,kResuming:Yl,kRunning:kt,kPending:Wl,kSize:Jl,kWriting:Ho,kQueue:pt,kConnected:iQe,kConnecting:qh,kNeedDrain:mA,kNoRef:Kp,kKeepAliveDefaultTimeout:dM,kHostHeader:wj,kPendingIdx:$r,kRunningIdx:Et,kError:Mn,kPipelining:CA,kSocket:Vt,kKeepAliveTimeoutValue:$p,kMaxHeadersSize:_Q,kKeepAliveMaxTimeout:_j,kKeepAliveTimeoutThreshold:vj,kHeadersTimeout:Sj,kBodyTimeout:bj,kStrictContentLength:eE,kConnector:Xp,kMaxRedirections:sQe,kMaxRequests:tE,kCounter:Dj,kClose:oQe,kDestroy:aQe,kDispatch:AQe,kInterceptors:lQe,kLocalAddress:Zp,kMaxResponseSize:Rj,kHTTPConnVersion:so,kHost:Tj,kHTTP2Session:ei,kHTTP2SessionState:SQ,kHTTP2BuildRequest:cQe,kHTTP2CopyHeaders:uQe,kHTTP1BuildRequest:hQe}=St(),bQ;try{bQ=B("http2")}catch{bQ={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:dQe,HTTP2_HEADER_METHOD:gQe,HTTP2_HEADER_PATH:fQe,HTTP2_HEADER_SCHEME:pQe,HTTP2_HEADER_CONTENT_LENGTH:EQe,HTTP2_HEADER_EXPECT:mQe,HTTP2_HEADER_STATUS:CQe}}=bQ,yj=!1,QQ=Buffer[Symbol.species],EA=Symbol("kClosedResolve"),Xn={};try{let t=B("diagnostics_channel");Xn.sendHeaders=t.channel("undici:client:sendHeaders"),Xn.beforeConnect=t.channel("undici:client:beforeConnect"),Xn.connectError=t.channel("undici:client:connectError"),Xn.connected=t.channel("undici:client:connected")}catch{Xn.sendHeaders={hasSubscribers:!1},Xn.beforeConnect={hasSubscribers:!1},Xn.connectError={hasSubscribers:!1},Xn.connected={hasSubscribers:!1}}var gM=class extends zBe{constructor(e,{interceptors:n,maxHeaderSize:r,headersTimeout:i,socketTimeout:s,requestTimeout:o,connectTimeout:a,bodyTimeout:A,idleTimeout:l,keepAlive:c,keepAliveTimeout:u,maxKeepAliveTimeout:h,keepAliveMaxTimeout:d,keepAliveTimeoutThreshold:g,socketPath:f,pipelining:m,tls:y,strictContentLength:I,maxCachedSessions:w,maxRedirections:_,connect:S,maxRequestsPerClient:T,localAddress:oe,maxResponseSize:Qe,autoSelectFamily:Pe,autoSelectFamilyAttemptTimeout:Re,allowH2:b,maxConcurrentStreams:Fe}={}){if(super(),c!==void 0)throw new Kt("unsupported keepAlive, use pipelining=0 instead");if(s!==void 0)throw new Kt("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(o!==void 0)throw new Kt("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(l!==void 0)throw new Kt("unsupported idleTimeout, use keepAliveTimeout instead");if(h!==void 0)throw new Kt("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(r!=null&&!Number.isFinite(r))throw new Kt("invalid maxHeaderSize");if(f!=null&&typeof f!="string")throw new Kt("invalid socketPath");if(a!=null&&(!Number.isFinite(a)||a<0))throw new Kt("invalid connectTimeout");if(u!=null&&(!Number.isFinite(u)||u<=0))throw new Kt("invalid keepAliveTimeout");if(d!=null&&(!Number.isFinite(d)||d<=0))throw new Kt("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Kt("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Kt("headersTimeout must be a positive integer or zero");if(A!=null&&(!Number.isInteger(A)||A<0))throw new Kt("bodyTimeout must be a positive integer or zero");if(S!=null&&typeof S!="function"&&typeof S!="object")throw new Kt("connect must be a function or an object");if(_!=null&&(!Number.isInteger(_)||_<0))throw new Kt("maxRedirections must be a positive number");if(T!=null&&(!Number.isInteger(T)||T<0))throw new Kt("maxRequestsPerClient must be a positive number");if(oe!=null&&(typeof oe!="string"||Qj.isIP(oe)===0))throw new Kt("localAddress must be valid string IP address");if(Qe!=null&&(!Number.isInteger(Qe)||Qe<-1))throw new Kt("maxResponseSize must be a positive number");if(Re!=null&&(!Number.isInteger(Re)||Re<-1))throw new Kt("autoSelectFamilyAttemptTimeout must be a positive number");if(b!=null&&typeof b!="boolean")throw new Kt("allowH2 must be a valid boolean value");if(Fe!=null&&(typeof Fe!="number"||Fe<1))throw new Kt("maxConcurrentStreams must be a possitive integer, greater than 0");typeof S!="function"&&(S=nQe(M(M(se(M({},y),{maxCachedSessions:w,allowH2:b,socketPath:f,timeout:a}),ee.nodeHasAutoSelectFamily&&Pe?{autoSelectFamily:Pe,autoSelectFamilyAttemptTimeout:Re}:void 0),S))),this[lQe]=n&&n.Client&&Array.isArray(n.Client)?n.Client:[wQe({maxRedirections:_})],this[Fn]=ee.parseOrigin(e),this[Xp]=S,this[Vt]=null,this[CA]=m??1,this[_Q]=r||JBe.maxHeaderSize,this[dM]=u??4e3,this[_j]=d??6e5,this[vj]=g??1e3,this[$p]=this[dM],this[pA]=null,this[Zp]=oe??null,this[Yl]=0,this[mA]=0,this[wj]=`host: ${this[Fn].hostname}${this[Fn].port?`:${this[Fn].port}`:""}\r
`,this[bj]=A??3e5,this[Sj]=i??3e5,this[eE]=I??!0,this[sQe]=_,this[tE]=T,this[EA]=null,this[Rj]=Qe>-1?Qe:-1,this[so]="h1",this[ei]=null,this[SQ]=b?{openStreams:0,maxConcurrentStreams:Fe??100}:null,this[Tj]=`${this[Fn].hostname}${this[Fn].port?`:${this[Fn].port}`:""}`,this[pt]=[],this[Et]=0,this[$r]=0}get pipelining(){return this[CA]}set pipelining(e){this[CA]=e,ti(this,!0)}get[Wl](){return this[pt].length-this[$r]}get[kt](){return this[$r]-this[Et]}get[Jl](){return this[pt].length-this[Et]}get[iQe](){return!!this[Vt]&&!this[qh]&&!this[Vt].destroyed}get[hM](){let e=this[Vt];return e&&(e[pr]||e[Ho]||e[Yh])||this[Jl]>=(this[CA]||1)||this[Wl]>0}[rQe](e){Mj(this),this.once("connect",e)}[AQe](e,n){let r=e.origin||this[Fn].origin,i=this[so]==="h2"?uM[cQe](r,e,n):uM[hQe](r,e,n);return this[pt].push(i),this[Yl]||(ee.bodyLength(i.body)==null&&ee.isIterable(i.body)?(this[Yl]=1,process.nextTick(ti,this)):ti(this,!0)),this[Yl]&&this[mA]!==2&&this[hM]&&(this[mA]=2),this[mA]<2}[oQe](){return E(this,null,function*(){return new Promise(e=>{this[Jl]?this[EA]=e:e(null)})})}[aQe](e){return E(this,null,function*(){return new Promise(n=>{let r=this[pt].splice(this[$r]);for(let s=0;s<r.length;s++){let o=r[s];xn(this,o,e)}let i=()=>{this[EA]&&(this[EA](),this[EA]=null),n()};this[ei]!=null&&(ee.destroy(this[ei],e),this[ei]=null,this[SQ]=null),this[Vt]?ee.destroy(this[Vt].on("close",i),e):queueMicrotask(i),ti(this)})})}};function IQe(t){W(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Vt][Mn]=t,TQ(this[io],t)}function yQe(t,e,n){let r=new ro(`HTTP/2: "frameError" received - type ${t}, code ${e}`);n===0&&(this[Vt][Mn]=r,TQ(this[io],r))}function BQe(){ee.destroy(this,new Hh("other side closed")),ee.destroy(this[Vt],new Hh("other side closed"))}function QQe(t){let e=this[io],n=new ro(`HTTP/2: "GOAWAY" frame received with code ${t}`);if(e[Vt]=null,e[ei]=null,e.destroyed){W(this[Wl]===0);let r=e[pt].splice(e[Et]);for(let i=0;i<r.length;i++){let s=r[i];xn(this,s,n)}}else if(e[kt]>0){let r=e[pt][e[Et]];e[pt][e[Et]++]=null,xn(e,r,n)}e[$r]=e[Et],W(e[kt]===0),e.emit("disconnect",e[Fn],[e],n),ti(e)}var eo=dj(),wQe=BQ(),_Qe=Buffer.alloc(0);function vQe(){return E(this,null,function*(){let t=process.env.JEST_WORKER_ID?AM():void 0,e;try{e=yield WebAssembly.compile(Buffer.from(Ij(),"base64"))}catch{e=yield WebAssembly.compile(Buffer.from(t||AM(),"base64"))}return yield WebAssembly.instantiate(e,{env:{wasm_on_url:(n,r,i)=>0,wasm_on_status:(n,r,i)=>{W.strictEqual(hn.ptr,n);let s=r-no+to.byteOffset;return hn.onStatus(new QQ(to.buffer,s,i))||0},wasm_on_message_begin:n=>(W.strictEqual(hn.ptr,n),hn.onMessageBegin()||0),wasm_on_header_field:(n,r,i)=>{W.strictEqual(hn.ptr,n);let s=r-no+to.byteOffset;return hn.onHeaderField(new QQ(to.buffer,s,i))||0},wasm_on_header_value:(n,r,i)=>{W.strictEqual(hn.ptr,n);let s=r-no+to.byteOffset;return hn.onHeaderValue(new QQ(to.buffer,s,i))||0},wasm_on_headers_complete:(n,r,i,s)=>(W.strictEqual(hn.ptr,n),hn.onHeadersComplete(r,!!i,!!s)||0),wasm_on_body:(n,r,i)=>{W.strictEqual(hn.ptr,n);let s=r-no+to.byteOffset;return hn.onBody(new QQ(to.buffer,s,i))||0},wasm_on_message_complete:n=>(W.strictEqual(hn.ptr,n),hn.onMessageComplete()||0)}})})}var cM=null,fM=vQe();fM.catch();var hn=null,to=null,wQ=0,no=null,Jh=1,vQ=2,pM=3,EM=class{constructor(e,n,{exports:r}){W(Number.isFinite(e[_Q])&&e[_Q]>0),this.llhttp=r,this.ptr=this.llhttp.llhttp_alloc(eo.TYPE.RESPONSE),this.client=e,this.socket=n,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[_Q],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[Rj]}setTimeout(e,n){this.timeoutType=n,e!==this.timeoutValue?(lM.clearTimeout(this.timeout),e?(this.timeout=lM.setTimeout(SQe,e,this),this.timeout.unref&&this.timeout.unref()):this.timeout=null,this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh()}resume(){this.socket.destroyed||!this.paused||(W(this.ptr!=null),W(hn==null),this.llhttp.llhttp_resume(this.ptr),W(this.timeoutType===vQ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||_Qe),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){W(this.ptr!=null),W(hn==null),W(!this.paused);let{socket:n,llhttp:r}=this;e.length>wQ&&(no&&r.free(no),wQ=Math.ceil(e.length/4096)*4096,no=r.malloc(wQ)),new Uint8Array(r.memory.buffer,no,wQ).set(e);try{let i;try{to=e,hn=this,i=r.llhttp_execute(this.ptr,no,e.length)}catch(o){throw o}finally{hn=null,to=null}let s=r.llhttp_get_error_pos(this.ptr)-no;if(i===eo.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(s));else if(i===eo.ERROR.PAUSED)this.paused=!0,n.unshift(e.slice(s));else if(i!==eo.ERROR.OK){let o=r.llhttp_get_error_reason(this.ptr),a="";if(o){let A=new Uint8Array(r.memory.buffer,o).indexOf(0);a="Response does not match the HTTP/1.1 protocol ("+Buffer.from(r.memory.buffer,o,A).toString()+")"}throw new $Be(a,eo.ERROR[i],e.slice(s))}}catch(i){ee.destroy(n,i)}}destroy(){W(this.ptr!=null),W(hn==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,lM.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:n}=this;if(e.destroyed||!n[pt][n[Et]])return-1}onHeaderField(e){let n=this.headers.length;n&1?this.headers[n-1]=Buffer.concat([this.headers[n-1],e]):this.headers.push(e),this.trackHeader(e.length)}onHeaderValue(e){let n=this.headers.length;(n&1)===1?(this.headers.push(e),n+=1):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]);let r=this.headers[n-2];r.length===10&&r.toString().toLowerCase()==="keep-alive"?this.keepAlive+=e.toString():r.length===10&&r.toString().toLowerCase()==="connection"?this.connection+=e.toString():r.length===14&&r.toString().toLowerCase()==="content-length"&&(this.contentLength+=e.toString()),this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&ee.destroy(this.socket,new XBe)}onUpgrade(e){let{upgrade:n,client:r,socket:i,headers:s,statusCode:o}=this;W(n);let a=r[pt][r[Et]];W(a),W(!i.destroyed),W(i===r[Vt]),W(!this.paused),W(a.upgrade||a.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,W(this.headers.length%2===0),this.headers=[],this.headersSize=0,i.unshift(e),i[Pt].destroy(),i[Pt]=null,i[io]=null,i[Mn]=null,i.removeListener("error",Nj).removeListener("readable",kj).removeListener("end",Fj).removeListener("close",mM),r[Vt]=null,r[pt][r[Et]++]=null,r.emit("disconnect",r[Fn],[r],new ro("upgrade"));try{a.onUpgrade(o,s,i)}catch(A){ee.destroy(i,A)}ti(r)}onHeadersComplete(e,n,r){let{client:i,socket:s,headers:o,statusText:a}=this;if(s.destroyed)return-1;let A=i[pt][i[Et]];if(!A)return-1;if(W(!this.upgrade),W(this.statusCode<200),e===100)return ee.destroy(s,new Hh("bad response",ee.getSocketInfo(s))),-1;if(n&&!A.upgrade)return ee.destroy(s,new Hh("bad upgrade",ee.getSocketInfo(s))),-1;if(W.strictEqual(this.timeoutType,Jh),this.statusCode=e,this.shouldKeepAlive=r||A.method==="HEAD"&&!s[pr]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let c=A.bodyTimeout!=null?A.bodyTimeout:i[bj];this.setTimeout(c,vQ)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(A.method==="CONNECT")return W(i[kt]===1),this.upgrade=!0,2;if(n)return W(i[kt]===1),this.upgrade=!0,2;if(W(this.headers.length%2===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[CA]){let c=this.keepAlive?ee.parseKeepAliveTimeout(this.keepAlive):null;if(c!=null){let u=Math.min(c-i[vj],i[_j]);u<=0?s[pr]=!0:i[$p]=u}else i[$p]=i[dM]}else s[pr]=!0;let l;try{l=A.onHeaders(e,o,this.resume,a)===!1}catch(c){return ee.destroy(s,c),-1}return A.method==="HEAD"||e<200?1:(s[Yh]&&(s[Yh]=!1,ti(i)),l?eo.ERROR.PAUSED:0)}onBody(e){let{client:n,socket:r,statusCode:i,maxResponseSize:s}=this;if(r.destroyed)return-1;let o=n[pt][n[Et]];if(W(o),W.strictEqual(this.timeoutType,vQ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),W(i>=200),s>-1&&this.bytesRead+e.length>s)return ee.destroy(r,new eQe),-1;this.bytesRead+=e.length;try{if(o.onData(e)===!1)return eo.ERROR.PAUSED}catch(a){return ee.destroy(r,a),-1}}onMessageComplete(){let{client:e,socket:n,statusCode:r,upgrade:i,headers:s,contentLength:o,bytesRead:a,shouldKeepAlive:A}=this;if(n.destroyed&&(!r||A))return-1;if(i)return;let l=e[pt][e[Et]];if(W(l),W(r>=100),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",W(this.headers.length%2===0),this.headers=[],this.headersSize=0,!(r<200)){if(l.method!=="HEAD"&&o&&a!==parseInt(o,10))return ee.destroy(n,new jBe),-1;try{l.onComplete(s)}catch(c){xn(e,l,c)}if(e[pt][e[Et]++]=null,n[Ho])return W.strictEqual(e[kt],0),ee.destroy(n,new ro("reset")),eo.ERROR.PAUSED;if(A){if(n[pr]&&e[kt]===0)return ee.destroy(n,new ro("reset")),eo.ERROR.PAUSED;e[CA]===1?setImmediate(ti,e):ti(e)}else return ee.destroy(n,new ro("reset")),eo.ERROR.PAUSED}}};function SQe(t){let{socket:e,timeoutType:n,client:r}=t;n===Jh?(!e[Ho]||e.writableNeedDrain||r[kt]>1)&&(W(!t.paused,"cannot be paused while waiting for headers"),ee.destroy(e,new KBe)):n===vQ?t.paused||ee.destroy(e,new ZBe):n===pM&&(W(r[kt]===0&&r[$p]),ee.destroy(e,new ro("socket idle timeout")))}function kj(){let{[Pt]:t}=this;t&&t.readMore()}function Nj(t){let{[io]:e,[Pt]:n}=this;if(W(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),e[so]!=="h2"&&t.code==="ECONNRESET"&&n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}this[Mn]=t,TQ(this[io],t)}function TQ(t,e){if(t[kt]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){W(t[$r]===t[Et]);let n=t[pt].splice(t[Et]);for(let r=0;r<n.length;r++){let i=n[r];xn(t,i,e)}W(t[Jl]===0)}}function Fj(){let{[Pt]:t,[io]:e}=this;if(e[so]!=="h2"&&t.statusCode&&!t.shouldKeepAlive){t.onMessageComplete();return}ee.destroy(this,new Hh("other side closed",ee.getSocketInfo(this)))}function mM(){let{[io]:t,[Pt]:e}=this;t[so]==="h1"&&e&&(!this[Mn]&&e.statusCode&&!e.shouldKeepAlive&&e.onMessageComplete(),this[Pt].destroy(),this[Pt]=null);let n=this[Mn]||new Hh("closed",ee.getSocketInfo(this));if(t[Vt]=null,t.destroyed){W(t[Wl]===0);let r=t[pt].splice(t[Et]);for(let i=0;i<r.length;i++){let s=r[i];xn(t,s,n)}}else if(t[kt]>0&&n.code!=="UND_ERR_INFO"){let r=t[pt][t[Et]];t[pt][t[Et]++]=null,xn(t,r,n)}t[$r]=t[Et],W(t[kt]===0),t.emit("disconnect",t[Fn],[t],n),ti(t)}function Mj(t){return E(this,null,function*(){W(!t[qh]),W(!t[Vt]);let{host:e,hostname:n,protocol:r,port:i}=t[Fn];if(n[0]==="["){let s=n.indexOf("]");W(s!==-1);let o=n.substr(1,s-1);W(Qj.isIP(o)),n=o}t[qh]=!0,Xn.beforeConnect.hasSubscribers&&Xn.beforeConnect.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,servername:t[pA],localAddress:t[Zp]},connector:t[Xp]});try{let s=yield new Promise((a,A)=>{t[Xp]({host:e,hostname:n,protocol:r,port:i,servername:t[pA],localAddress:t[Zp]},(l,c)=>{l?A(l):a(c)})});if(t.destroyed){ee.destroy(s.on("error",()=>{}),new tQe);return}if(t[qh]=!1,W(s),s.alpnProtocol==="h2"){yj||(yj=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let a=bQ.connect(t[Fn],{createConnection:()=>s,peerMaxConcurrentStreams:t[SQ].maxConcurrentStreams});t[so]="h2",a[io]=t,a[Vt]=s,a.on("error",IQe),a.on("frameError",yQe),a.on("end",BQe),a.on("goaway",QQe),a.on("close",mM),a.unref(),t[ei]=a,s[ei]=a}else cM||(cM=yield fM,fM=null),s[Kp]=!1,s[Ho]=!1,s[pr]=!1,s[Yh]=!1,s[Pt]=new EM(t,s,cM);s[Dj]=0,s[tE]=t[tE],s[io]=t,s[Mn]=null,s.on("error",Nj).on("readable",kj).on("end",Fj).on("close",mM),t[Vt]=s,Xn.connected.hasSubscribers&&Xn.connected.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,servername:t[pA],localAddress:t[Zp]},connector:t[Xp],socket:s}),t.emit("connect",t[Fn],[t])}catch(s){if(t.destroyed)return;if(t[qh]=!1,Xn.connectError.hasSubscribers&&Xn.connectError.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,servername:t[pA],localAddress:t[Zp]},connector:t[Xp],error:s}),s.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(W(t[kt]===0);t[Wl]>0&&t[pt][t[$r]].servername===t[pA];){let o=t[pt][t[$r]++];xn(t,o,s)}else TQ(t,s);t.emit("connectionError",t[Fn],[t],s)}ti(t)})}function Bj(t){t[mA]=0,t.emit("drain",t[Fn],[t])}function ti(t,e){t[Yl]!==2&&(t[Yl]=2,bQe(t,e),t[Yl]=0,t[Et]>256&&(t[pt].splice(0,t[Et]),t[$r]-=t[Et],t[Et]=0))}function bQe(t,e){for(;;){if(t.destroyed){W(t[Wl]===0);return}if(t[EA]&&!t[Jl]){t[EA](),t[EA]=null;return}let n=t[Vt];if(n&&!n.destroyed&&n.alpnProtocol!=="h2"){if(t[Jl]===0?!n[Kp]&&n.unref&&(n.unref(),n[Kp]=!0):n[Kp]&&n.ref&&(n.ref(),n[Kp]=!1),t[Jl]===0)n[Pt].timeoutType!==pM&&n[Pt].setTimeout(t[$p],pM);else if(t[kt]>0&&n[Pt].statusCode<200&&n[Pt].timeoutType!==Jh){let i=t[pt][t[Et]],s=i.headersTimeout!=null?i.headersTimeout:t[Sj];n[Pt].setTimeout(s,Jh)}}if(t[hM])t[mA]=2;else if(t[mA]===2){e?(t[mA]=1,process.nextTick(Bj,t)):Bj(t);continue}if(t[Wl]===0||t[kt]>=(t[CA]||1))return;let r=t[pt][t[$r]];if(t[Fn].protocol==="https:"&&t[pA]!==r.servername){if(t[kt]>0)return;if(t[pA]=r.servername,n&&n.servername!==r.servername){ee.destroy(n,new ro("servername changed"));return}}if(t[qh])return;if(!n&&!t[ei]){Mj(t);return}if(n.destroyed||n[Ho]||n[pr]||n[Yh]||t[kt]>0&&!r.idempotent||t[kt]>0&&(r.upgrade||r.method==="CONNECT")||(ee.isStream(r.body)&&ee.bodyLength(r.body)===0&&(r.body.on("data",function(){W(!1)}).on("error",function(i){xn(t,r,i)}).on("end",function(){ee.destroy(this)}),r.body=null),t[kt]>0&&(ee.isStream(r.body)||ee.isAsyncIterable(r.body))))return;!r.aborted&&DQe(t,r)?t[$r]++:t[pt].splice(t[$r],1)}}function DQe(t,e){if(t[so]==="h2"){RQe(t,t[ei],e);return}let{body:n,method:r,path:i,host:s,upgrade:o,headers:a,blocking:A,reset:l}=e,c=r==="PUT"||r==="POST"||r==="PATCH";n&&typeof n.read=="function"&&n.read(0);let u=ee.bodyLength(n);if(u===null&&(u=e.contentLength),u===0&&!c&&(u=null),e.contentLength!==null&&e.contentLength!==u){if(t[eE])return xn(t,e,new qo),!1;process.emitWarning(new qo)}let h=t[Vt];try{e.onConnect(g=>{e.aborted||e.completed||(xn(t,e,g||new CM),ee.destroy(h,new ro("aborted")))})}catch(g){xn(t,e,g)}if(e.aborted)return!1;r==="HEAD"&&(h[pr]=!0),(o||r==="CONNECT")&&(h[pr]=!0),l!=null&&(h[pr]=l),t[tE]&&h[Dj]++>=t[tE]&&(h[pr]=!0),A&&(h[Yh]=!0);let d=`${r} ${i} HTTP/1.1\r
`;return typeof s=="string"?d+=`host: ${s}\r
`:d+=t[wj],o?d+=`connection: upgrade\r
upgrade: ${o}\r
`:t[CA]&&!h[pr]?d+=`connection: keep-alive\r
`:d+=`connection: close\r
`,a&&(d+=a),Xn.sendHeaders.hasSubscribers&&Xn.sendHeaders.publish({request:e,headers:d,socket:h}),n?ee.isBuffer(n)?(W(u===n.byteLength,"buffer body must have content length"),h.cork(),h.write(`${d}content-length: ${u}\r
\r
`,"latin1"),h.write(n),h.uncork(),e.onBodySent(n),e.onRequestSent(),c||(h[pr]=!0)):ee.isBlobLike(n)?typeof n.stream=="function"?DQ({body:n.stream(),client:t,request:e,socket:h,contentLength:u,header:d,expectsPayload:c}):Lj({body:n,client:t,request:e,socket:h,contentLength:u,header:d,expectsPayload:c}):ee.isStream(n)?xj({body:n,client:t,request:e,socket:h,contentLength:u,header:d,expectsPayload:c}):ee.isIterable(n)?DQ({body:n,client:t,request:e,socket:h,contentLength:u,header:d,expectsPayload:c}):W(!1):(u===0?h.write(`${d}content-length: 0\r
\r
`,"latin1"):(W(u===null,"no body must not have content length"),h.write(`${d}\r
`,"latin1")),e.onRequestSent()),!0}function RQe(t,e,n){let{body:r,method:i,path:s,host:o,upgrade:a,expectContinue:A,signal:l,headers:c}=n,u;if(typeof c=="string"?u=uM[uQe](c.trim()):u=c,a)return xn(t,n,new Error("Upgrade not supported for H2")),!1;try{n.onConnect(I=>{n.aborted||n.completed||xn(t,n,I||new CM)})}catch(I){xn(t,n,I)}if(n.aborted)return!1;let h,d=t[SQ];if(u[dQe]=o||t[Tj],u[gQe]=i,i==="CONNECT")return e.ref(),h=e.request(u,{endStream:!1,signal:l}),h.id&&!h.pending?(n.onUpgrade(null,null,h),++d.openStreams):h.once("ready",()=>{n.onUpgrade(null,null,h),++d.openStreams}),h.once("close",()=>{d.openStreams-=1,d.openStreams===0&&e.unref()}),!0;u[fQe]=s,u[pQe]="https";let g=i==="PUT"||i==="POST"||i==="PATCH";r&&typeof r.read=="function"&&r.read(0);let f=ee.bodyLength(r);if(f==null&&(f=n.contentLength),(f===0||!g)&&(f=null),n.contentLength!=null&&n.contentLength!==f){if(t[eE])return xn(t,n,new qo),!1;process.emitWarning(new qo)}f!=null&&(W(r,"no body must not have content length"),u[EQe]=`${f}`),e.ref();let m=i==="GET"||i==="HEAD";return A?(u[mQe]="100-continue",h=e.request(u,{endStream:m,signal:l}),h.once("continue",y)):(h=e.request(u,{endStream:m,signal:l}),y()),++d.openStreams,h.once("response",I=>{n.onHeaders(Number(I[CQe]),I,h.resume.bind(h),"")===!1&&h.pause()}),h.once("end",()=>{n.onComplete([])}),h.on("data",I=>{n.onData(I)===!1&&h.pause()}),h.once("close",()=>{d.openStreams-=1,d.openStreams===0&&e.unref()}),h.once("error",function(I){t[ei]&&!t[ei].destroyed&&!this.closed&&!this.destroyed&&(d.streams-=1,ee.destroy(h,I))}),h.once("frameError",(I,w)=>{let _=new ro(`HTTP/2: "frameError" received - type ${I}, code ${w}`);xn(t,n,_),t[ei]&&!t[ei].destroyed&&!this.closed&&!this.destroyed&&(d.streams-=1,ee.destroy(h,_))}),!0;function y(){r?ee.isBuffer(r)?(W(f===r.byteLength,"buffer body must have content length"),h.cork(),h.write(r),h.uncork(),h.end(),n.onBodySent(r),n.onRequestSent()):ee.isBlobLike(r)?typeof r.stream=="function"?DQ({client:t,request:n,contentLength:f,h2stream:h,expectsPayload:g,body:r.stream(),socket:t[Vt],header:""}):Lj({body:r,client:t,request:n,contentLength:f,expectsPayload:g,h2stream:h,header:"",socket:t[Vt]}):ee.isStream(r)?xj({body:r,client:t,request:n,contentLength:f,expectsPayload:g,socket:t[Vt],h2stream:h,header:""}):ee.isIterable(r)?DQ({body:r,client:t,request:n,contentLength:f,expectsPayload:g,header:"",h2stream:h,socket:t[Vt]}):W(!1):n.onRequestSent()}}function xj({h2stream:t,body:e,client:n,request:r,socket:i,contentLength:s,header:o,expectsPayload:a}){if(W(s!==0||n[kt]===0,"stream body cannot be pipelined"),n[so]==="h2"){let f=function(m){r.onBodySent(m)},g=WBe(e,t,m=>{m?(ee.destroy(e,m),ee.destroy(t,m)):r.onRequestSent()});g.on("data",f),g.once("end",()=>{g.removeListener("data",f),ee.destroy(g)});return}let A=!1,l=new RQ({socket:i,request:r,contentLength:s,client:n,expectsPayload:a,header:o}),c=function(g){if(!A)try{!l.write(g)&&this.pause&&this.pause()}catch(f){ee.destroy(this,f)}},u=function(){A||e.resume&&e.resume()},h=function(){d(new CM)},d=function(g){if(!A){if(A=!0,W(i.destroyed||i[Ho]&&n[kt]<=1),i.off("drain",u).off("error",d),e.removeListener("data",c).removeListener("end",d).removeListener("error",d).removeListener("close",h),!g)try{l.end()}catch(f){g=f}l.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?ee.destroy(e,g):ee.destroy(e)}};e.on("data",c).on("end",d).on("error",d).on("close",h),e.resume&&e.resume(),i.on("drain",u).on("error",d)}function Lj(A){return E(this,arguments,function*({h2stream:t,body:e,client:n,request:r,socket:i,contentLength:s,header:o,expectsPayload:a}){W(s===e.size,"blob body must have content length");let l=n[so]==="h2";try{if(s!=null&&s!==e.size)throw new qo;let c=Buffer.from(yield e.arrayBuffer());l?(t.cork(),t.write(c),t.uncork()):(i.cork(),i.write(`${o}content-length: ${s}\r
\r
`,"latin1"),i.write(c),i.uncork()),r.onBodySent(c),r.onRequestSent(),a||(i[pr]=!0),ti(n)}catch(c){ee.destroy(l?t:i,c)}})}function DQ(A){return E(this,arguments,function*({h2stream:t,body:e,client:n,request:r,socket:i,contentLength:s,header:o,expectsPayload:a}){W(s!==0||n[kt]===0,"iterator body cannot be pipelined");let l=null;function c(){if(l){let S=l;l=null,S()}}let u=()=>new Promise((S,T)=>{W(l===null),i[Mn]?T(i[Mn]):l=S});if(n[so]==="h2"){t.on("close",c).on("drain",c);try{try{for(var d=Pn(e),g,f,m;g=!(f=yield d.next()).done;g=!1){let S=f.value;if(i[Mn])throw i[Mn];let T=t.write(S);r.onBodySent(S),T||(yield u())}}catch{m=[f]}finally{try{g&&(f=d.return)&&(yield f.call(d))}finally{if(m)throw m[0]}}}catch(S){t.destroy(S)}finally{r.onRequestSent(),t.end(),t.off("close",c).off("drain",c)}return}i.on("close",c).on("drain",c);let h=new RQ({socket:i,request:r,contentLength:s,client:n,expectsPayload:a,header:o});try{try{for(var y=Pn(e),I,w,_;I=!(w=yield y.next()).done;I=!1){let S=w.value;if(i[Mn])throw i[Mn];h.write(S)||(yield u())}}catch{_=[w]}finally{try{I&&(w=y.return)&&(yield w.call(y))}finally{if(_)throw _[0]}}h.end()}catch(S){h.destroy(S)}finally{i.off("close",c).off("drain",c)}})}var RQ=class{constructor({socket:e,request:n,contentLength:r,client:i,expectsPayload:s,header:o}){this.socket=e,this.request=n,this.contentLength=r,this.client=i,this.bytesWritten=0,this.expectsPayload=s,this.header=o,e[Ho]=!0}write(e){let{socket:n,request:r,contentLength:i,client:s,bytesWritten:o,expectsPayload:a,header:A}=this;if(n[Mn])throw n[Mn];if(n.destroyed)return!1;let l=Buffer.byteLength(e);if(!l)return!0;if(i!==null&&o+l>i){if(s[eE])throw new qo;process.emitWarning(new qo)}n.cork(),o===0&&(a||(n[pr]=!0),i===null?n.write(`${A}transfer-encoding: chunked\r
`,"latin1"):n.write(`${A}content-length: ${i}\r
\r
`,"latin1")),i===null&&n.write(`\r
${l.toString(16)}\r
`,"latin1"),this.bytesWritten+=l;let c=n.write(e);return n.uncork(),r.onBodySent(e),c||n[Pt].timeout&&n[Pt].timeoutType===Jh&&n[Pt].timeout.refresh&&n[Pt].timeout.refresh(),c}end(){let{socket:e,contentLength:n,client:r,bytesWritten:i,expectsPayload:s,header:o,request:a}=this;if(a.onRequestSent(),e[Ho]=!1,e[Mn])throw e[Mn];if(!e.destroyed){if(i===0?s?e.write(`${o}content-length: 0\r
\r
`,"latin1"):e.write(`${o}\r
`,"latin1"):n===null&&e.write(`\r
0\r
\r
`,"latin1"),n!==null&&i!==n){if(r[eE])throw new qo;process.emitWarning(new qo)}e[Pt].timeout&&e[Pt].timeoutType===Jh&&e[Pt].timeout.refresh&&e[Pt].timeout.refresh(),ti(r)}}destroy(e){let{socket:n,client:r}=this;n[Ho]=!1,e&&(W(r[kt]<=1,"pipeline should only contain this request"),ee.destroy(n,e))}};function xn(t,e,n){try{e.onError(n),W(e.aborted)}catch(r){t.emit("error",r)}}Oj.exports=gM});var Pj=C((bxe,Uj)=>{"use strict";var kQ=class{constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};Uj.exports=class{constructor(){this.head=this.tail=new kQ}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new kQ),this.head.push(e)}shift(){let e=this.tail,n=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),n}}});var Gj=C((Dxe,Vj)=>{"use strict";var{kFree:TQe,kConnected:kQe,kPending:NQe,kQueued:FQe,kRunning:MQe,kSize:xQe}=St(),zl=Symbol("pool"),IM=class{constructor(e){this[zl]=e}get connected(){return this[zl][kQe]}get free(){return this[zl][TQe]}get pending(){return this[zl][NQe]}get queued(){return this[zl][FQe]}get running(){return this[zl][MQe]}get size(){return this[zl][xQe]}};Vj.exports=IM});var vM=C((Rxe,Zj)=>{"use strict";var LQe=Wp(),OQe=Pj(),{kConnected:yM,kSize:qj,kRunning:Hj,kPending:Yj,kQueued:rE,kBusy:UQe,kFree:PQe,kUrl:VQe,kClose:GQe,kDestroy:qQe,kDispatch:HQe}=St(),YQe=Gj(),br=Symbol("clients"),Er=Symbol("needDrain"),iE=Symbol("queue"),BM=Symbol("closed resolve"),QM=Symbol("onDrain"),Jj=Symbol("onConnect"),Wj=Symbol("onDisconnect"),zj=Symbol("onConnectionError"),wM=Symbol("get dispatcher"),Kj=Symbol("add client"),Xj=Symbol("remove client"),jj=Symbol("stats"),_M=class extends LQe{constructor(){super(),this[iE]=new OQe,this[br]=[],this[rE]=0;let e=this;this[QM]=function(r,i){let s=e[iE],o=!1;for(;!o;){let a=s.shift();if(!a)break;e[rE]--,o=!this.dispatch(a.opts,a.handler)}this[Er]=o,!this[Er]&&e[Er]&&(e[Er]=!1,e.emit("drain",r,[e,...i])),e[BM]&&s.isEmpty()&&Promise.all(e[br].map(a=>a.close())).then(e[BM])},this[Jj]=(n,r)=>{e.emit("connect",n,[e,...r])},this[Wj]=(n,r,i)=>{e.emit("disconnect",n,[e,...r],i)},this[zj]=(n,r,i)=>{e.emit("connectionError",n,[e,...r],i)},this[jj]=new YQe(this)}get[UQe](){return this[Er]}get[yM](){return this[br].filter(e=>e[yM]).length}get[PQe](){return this[br].filter(e=>e[yM]&&!e[Er]).length}get[Yj](){let e=this[rE];for(let{[Yj]:n}of this[br])e+=n;return e}get[Hj](){let e=0;for(let{[Hj]:n}of this[br])e+=n;return e}get[qj](){let e=this[rE];for(let{[qj]:n}of this[br])e+=n;return e}get stats(){return this[jj]}[GQe](){return E(this,null,function*(){return this[iE].isEmpty()?Promise.all(this[br].map(e=>e.close())):new Promise(e=>{this[BM]=e})})}[qQe](e){return E(this,null,function*(){for(;;){let n=this[iE].shift();if(!n)break;n.handler.onError(e)}return Promise.all(this[br].map(n=>n.destroy(e)))})}[HQe](e,n){let r=this[wM]();return r?r.dispatch(e,n)||(r[Er]=!0,this[Er]=!this[wM]()):(this[Er]=!0,this[iE].push({opts:e,handler:n}),this[rE]++),!this[Er]}[Kj](e){return e.on("drain",this[QM]).on("connect",this[Jj]).on("disconnect",this[Wj]).on("connectionError",this[zj]),this[br].push(e),this[Er]&&process.nextTick(()=>{this[Er]&&this[QM](e[VQe],[this,e])}),this}[Xj](e){e.close(()=>{let n=this[br].indexOf(e);n!==-1&&this[br].splice(n,1)}),this[Er]=this[br].some(n=>!n[Er]&&n.closed!==!0&&n.destroyed!==!0)}};Zj.exports={PoolBase:_M,kClients:br,kNeedDrain:Er,kAddClient:Kj,kRemoveClient:Xj,kGetDispatcher:wM}});var Wh=C((kxe,nK)=>{"use strict";var{PoolBase:JQe,kClients:$j,kNeedDrain:WQe,kAddClient:zQe,kGetDispatcher:jQe}=vM(),KQe=nE(),{InvalidArgumentError:SM}=ut(),bM=Ue(),{kUrl:eK,kInterceptors:XQe}=St(),ZQe=zp(),DM=Symbol("options"),RM=Symbol("connections"),tK=Symbol("factory");function $Qe(t,e){return new KQe(t,e)}var TM=class extends JQe{constructor(e,d={}){var g=d,{connections:n,factory:r=$Qe,connect:i,connectTimeout:s,tls:o,maxCachedSessions:a,socketPath:A,autoSelectFamily:l,autoSelectFamilyAttemptTimeout:c,allowH2:u}=g,h=cs(g,["connections","factory","connect","connectTimeout","tls","maxCachedSessions","socketPath","autoSelectFamily","autoSelectFamilyAttemptTimeout","allowH2"]);if(super(),n!=null&&(!Number.isFinite(n)||n<0))throw new SM("invalid connections");if(typeof r!="function")throw new SM("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new SM("connect must be a function or an object");typeof i!="function"&&(i=ZQe(M(M(se(M({},o),{maxCachedSessions:a,allowH2:u,socketPath:A,timeout:s??1e4}),bM.nodeHasAutoSelectFamily&&l?{autoSelectFamily:l,autoSelectFamilyAttemptTimeout:c}:void 0),i))),this[XQe]=h.interceptors&&h.interceptors.Pool&&Array.isArray(h.interceptors.Pool)?h.interceptors.Pool:[],this[RM]=n||null,this[eK]=bM.parseOrigin(e),this[DM]=se(M({},bM.deepClone(h)),{connect:i,allowH2:u}),this[DM].interceptors=h.interceptors?M({},h.interceptors):void 0,this[tK]=r}[jQe](){let e=this[$j].find(n=>!n[WQe]);return e||((!this[RM]||this[$j].length<this[RM])&&(e=this[tK](this[eK],this[DM]),this[zQe](e)),e)}};nK.exports=TM});var AK=C((Fxe,aK)=>{"use strict";var{BalancedPoolMissingUpstreamError:ewe,InvalidArgumentError:twe}=ut(),{PoolBase:nwe,kClients:mr,kNeedDrain:sE,kAddClient:rwe,kRemoveClient:iwe,kGetDispatcher:swe}=vM(),owe=Wh(),{kUrl:kM,kInterceptors:awe}=St(),{parseOrigin:rK}=Ue(),iK=Symbol("factory"),NQ=Symbol("options"),sK=Symbol("kGreatestCommonDivisor"),jl=Symbol("kCurrentWeight"),Kl=Symbol("kIndex"),Ni=Symbol("kWeight"),FQ=Symbol("kMaxWeightPerServer"),MQ=Symbol("kErrorPenalty");function oK(t,e){return e===0?t:oK(e,t%e)}function Awe(t,e){return new owe(t,e)}var NM=class extends nwe{constructor(e=[],i={}){var s=i,{factory:n=Awe}=s,r=cs(s,["factory"]);if(super(),this[NQ]=r,this[Kl]=-1,this[jl]=0,this[FQ]=this[NQ].maxWeightPerServer||100,this[MQ]=this[NQ].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof n!="function")throw new twe("factory must be a function.");this[awe]=r.interceptors&&r.interceptors.BalancedPool&&Array.isArray(r.interceptors.BalancedPool)?r.interceptors.BalancedPool:[],this[iK]=n;for(let o of e)this.addUpstream(o);this._updateBalancedPoolStats()}addUpstream(e){let n=rK(e).origin;if(this[mr].find(i=>i[kM].origin===n&&i.closed!==!0&&i.destroyed!==!0))return this;let r=this[iK](n,Object.assign({},this[NQ]));this[rwe](r),r.on("connect",()=>{r[Ni]=Math.min(this[FQ],r[Ni]+this[MQ])}),r.on("connectionError",()=>{r[Ni]=Math.max(1,r[Ni]-this[MQ]),this._updateBalancedPoolStats()}),r.on("disconnect",(...i)=>{let s=i[2];s&&s.code==="UND_ERR_SOCKET"&&(r[Ni]=Math.max(1,r[Ni]-this[MQ]),this._updateBalancedPoolStats())});for(let i of this[mr])i[Ni]=this[FQ];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){this[sK]=this[mr].map(e=>e[Ni]).reduce(oK,0)}removeUpstream(e){let n=rK(e).origin,r=this[mr].find(i=>i[kM].origin===n&&i.closed!==!0&&i.destroyed!==!0);return r&&this[iwe](r),this}get upstreams(){return this[mr].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[kM].origin)}[swe](){if(this[mr].length===0)throw new ewe;if(!this[mr].find(s=>!s[sE]&&s.closed!==!0&&s.destroyed!==!0)||this[mr].map(s=>s[sE]).reduce((s,o)=>s&&o,!0))return;let r=0,i=this[mr].findIndex(s=>!s[sE]);for(;r++<this[mr].length;){this[Kl]=(this[Kl]+1)%this[mr].length;let s=this[mr][this[Kl]];if(s[Ni]>this[mr][i][Ni]&&!s[sE]&&(i=this[Kl]),this[Kl]===0&&(this[jl]=this[jl]-this[sK],this[jl]<=0&&(this[jl]=this[FQ])),s[Ni]>=this[jl]&&!s[sE])return s}return this[jl]=this[mr][i][Ni],this[Kl]=i,this[mr][i]}};aK.exports=NM});var FM=C((xxe,uK)=>{"use strict";var{kConnected:lK,kSize:cK}=St(),xQ=class{constructor(e){this.value=e}deref(){return this.value[lK]===0&&this.value[cK]===0?void 0:this.value}},LQ=class{constructor(e){this.finalizer=e}register(e,n){e.on&&e.on("disconnect",()=>{e[lK]===0&&e[cK]===0&&this.finalizer(n)})}};uK.exports=function(){return process.env.NODE_V8_COVERAGE?{WeakRef:xQ,FinalizationRegistry:LQ}:{WeakRef:global.WeakRef||xQ,FinalizationRegistry:global.FinalizationRegistry||LQ}}});var oE=C((Lxe,CK)=>{"use strict";var{InvalidArgumentError:OQ}=ut(),{kClients:IA,kRunning:hK,kClose:lwe,kDestroy:cwe,kDispatch:uwe,kInterceptors:hwe}=St(),dwe=Wp(),gwe=Wh(),fwe=nE(),pwe=Ue(),Ewe=BQ(),{WeakRef:mwe,FinalizationRegistry:Cwe}=FM()(),dK=Symbol("onConnect"),gK=Symbol("onDisconnect"),fK=Symbol("onConnectionError"),Iwe=Symbol("maxRedirections"),pK=Symbol("onDrain"),EK=Symbol("factory"),mK=Symbol("finalizer"),MM=Symbol("options");function ywe(t,e){return e&&e.connections===1?new fwe(t,e):new gwe(t,e)}var xM=class extends dwe{constructor(s={}){var o=s,{factory:e=ywe,maxRedirections:n=0,connect:r}=o,i=cs(o,["factory","maxRedirections","connect"]);if(super(),typeof e!="function")throw new OQ("factory must be a function.");if(r!=null&&typeof r!="function"&&typeof r!="object")throw new OQ("connect must be a function or an object");if(!Number.isInteger(n)||n<0)throw new OQ("maxRedirections must be a positive number");r&&typeof r!="function"&&(r=M({},r)),this[hwe]=i.interceptors&&i.interceptors.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[Ewe({maxRedirections:n})],this[MM]=se(M({},pwe.deepClone(i)),{connect:r}),this[MM].interceptors=i.interceptors?M({},i.interceptors):void 0,this[Iwe]=n,this[EK]=e,this[IA]=new Map,this[mK]=new Cwe(A=>{let l=this[IA].get(A);l!==void 0&&l.deref()===void 0&&this[IA].delete(A)});let a=this;this[pK]=(A,l)=>{a.emit("drain",A,[a,...l])},this[dK]=(A,l)=>{a.emit("connect",A,[a,...l])},this[gK]=(A,l,c)=>{a.emit("disconnect",A,[a,...l],c)},this[fK]=(A,l,c)=>{a.emit("connectionError",A,[a,...l],c)}}get[hK](){let e=0;for(let n of this[IA].values()){let r=n.deref();r&&(e+=r[hK])}return e}[uwe](e,n){let r;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))r=String(e.origin);else throw new OQ("opts.origin must be a non-empty string or URL.");let i=this[IA].get(r),s=i?i.deref():null;return s||(s=this[EK](e.origin,this[MM]).on("drain",this[pK]).on("connect",this[dK]).on("disconnect",this[gK]).on("connectionError",this[fK]),this[IA].set(r,new mwe(s)),this[mK].register(s,r)),s.dispatch(e,n)}[lwe](){return E(this,null,function*(){let e=[];for(let n of this[IA].values()){let r=n.deref();r&&e.push(r.close())}yield Promise.all(e)})}[cwe](e){return E(this,null,function*(){let n=[];for(let r of this[IA].values()){let i=r.deref();i&&n.push(i.destroy(e))}yield Promise.all(n)})}};CK.exports=xM});var SK=C((Pxe,vK)=>{"use strict";var BK=B("assert"),{Readable:Bwe}=B("stream"),{RequestAbortedError:QK,NotSupportedError:Qwe,InvalidArgumentError:wwe}=ut(),zh=Ue(),{ReadableStreamFrom:_we,toUSVString:vwe}=Ue(),LM,ni=Symbol("kConsume"),UQ=Symbol("kReading"),yA=Symbol("kBody"),IK=Symbol("abort"),wK=Symbol("kContentType");vK.exports=class extends Bwe{constructor({resume:e,abort:n,contentType:r="",highWaterMark:i=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:i}),this._readableState.dataEmitted=!1,this[IK]=n,this[ni]=null,this[yA]=null,this[wK]=r,this[UQ]=!1}destroy(e){return this.destroyed?this:(!e&&!this._readableState.endEmitted&&(e=new QK),e&&this[IK](),super.destroy(e))}emit(e,...n){return e==="data"?this._readableState.dataEmitted=!0:e==="error"&&(this._readableState.errorEmitted=!0),super.emit(e,...n)}on(e,...n){return(e==="data"||e==="readable")&&(this[UQ]=!0),super.on(e,...n)}addListener(e,...n){return this.on(e,...n)}off(e,...n){let r=super.off(e,...n);return(e==="data"||e==="readable")&&(this[UQ]=this.listenerCount("data")>0||this.listenerCount("readable")>0),r}removeListener(e,...n){return this.off(e,...n)}push(e){return this[ni]&&e!==null&&this.readableLength===0?(_K(this[ni],e),this[UQ]?super.push(e):!0):super.push(e)}text(){return E(this,null,function*(){return PQ(this,"text")})}json(){return E(this,null,function*(){return PQ(this,"json")})}blob(){return E(this,null,function*(){return PQ(this,"blob")})}arrayBuffer(){return E(this,null,function*(){return PQ(this,"arrayBuffer")})}formData(){return E(this,null,function*(){throw new Qwe})}get bodyUsed(){return zh.isDisturbed(this)}get body(){return this[yA]||(this[yA]=_we(this),this[ni]&&(this[yA].getReader(),BK(this[yA].locked))),this[yA]}dump(e){return E(this,null,function*(){let n=e&&Number.isFinite(e.limit)?e.limit:262144,r=e&&e.signal,i=()=>{this.destroy()},s;if(r){if(typeof r!="object"||!("aborted"in r))throw new wwe("signal must be an AbortSignal");zh.throwIfAborted(r),s=zh.addAbortListener(r,i)}try{try{for(var o=Pn(this),a,A,l;a=!(A=yield o.next()).done;a=!1){let c=A.value;if(zh.throwIfAborted(r),n-=Buffer.byteLength(c),n<0)return}}catch{l=[A]}finally{try{a&&(A=o.return)&&(yield A.call(o))}finally{if(l)throw l[0]}}}catch{zh.throwIfAborted(r)}finally{typeof s=="function"?s():s&&s[Symbol.dispose]()}})}};function Swe(t){return t[yA]&&t[yA].locked===!0||t[ni]}function bwe(t){return zh.isDisturbed(t)||Swe(t)}function PQ(t,e){return E(this,null,function*(){if(bwe(t))throw new TypeError("unusable");return BK(!t[ni]),new Promise((n,r)=>{t[ni]={type:e,stream:t,resolve:n,reject:r,length:0,body:[]},t.on("error",function(i){OM(this[ni],i)}).on("close",function(){this[ni].body!==null&&OM(this[ni],new QK)}),process.nextTick(Dwe,t[ni])})})}function Dwe(t){if(t.body===null)return;let{_readableState:e}=t.stream;for(let n of e.buffer)_K(t,n);for(e.endEmitted?yK(this[ni]):t.stream.on("end",function(){yK(this[ni])}),t.stream.resume();t.stream.read()!=null;);}function yK(t){let{type:e,body:n,resolve:r,stream:i,length:s}=t;try{if(e==="text")r(vwe(Buffer.concat(n)));else if(e==="json")r(JSON.parse(Buffer.concat(n)));else if(e==="arrayBuffer"){let o=new Uint8Array(s),a=0;for(let A of n)o.set(A,a),a+=A.byteLength;r(o.buffer)}else e==="blob"&&(LM||(LM=B("buffer").Blob),r(new LM(n,{type:i[wK]})));OM(t)}catch(o){i.destroy(o)}}function _K(t,e){t.length+=e.length,t.body.push(e)}function OM(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}});var UM=C((Gxe,DK)=>{"use strict";var Rwe=B("assert"),{ResponseStatusCodeError:VQ}=ut(),{toUSVString:bK}=Ue();function Twe(o){return E(this,arguments,function*({callback:t,body:e,contentType:n,statusCode:r,statusMessage:i,headers:s}){Rwe(e);let a=[],A=0;try{for(var l=Pn(e),c,u,h;c=!(u=yield l.next()).done;c=!1){let d=u.value;if(a.push(d),A+=d.length,A>128*1024){a=null;break}}}catch{h=[u]}finally{try{c&&(u=l.return)&&(yield u.call(l))}finally{if(h)throw h[0]}}if(r===204||!n||!a){process.nextTick(t,new VQ(`Response status code ${r}${i?`: ${i}`:""}`,r,s));return}try{if(n.startsWith("application/json")){let d=JSON.parse(bK(Buffer.concat(a)));process.nextTick(t,new VQ(`Response status code ${r}${i?`: ${i}`:""}`,r,s,d));return}if(n.startsWith("text/")){let d=bK(Buffer.concat(a));process.nextTick(t,new VQ(`Response status code ${r}${i?`: ${i}`:""}`,r,s,d));return}}catch{}process.nextTick(t,new VQ(`Response status code ${r}${i?`: ${i}`:""}`,r,s))})}DK.exports={getResolveErrorBodyCallback:Twe}});var Kh=C((Hxe,TK)=>{"use strict";var{addAbortListener:kwe}=Ue(),{RequestAbortedError:Nwe}=ut(),jh=Symbol("kListener"),BA=Symbol("kSignal");function RK(t){t.abort?t.abort():t.onError(new Nwe)}function Fwe(t,e){if(t[BA]=null,t[jh]=null,!!e){if(e.aborted){RK(t);return}t[BA]=e,t[jh]=()=>{RK(t)},kwe(t[BA],t[jh])}}function Mwe(t){t[BA]&&("removeEventListener"in t[BA]?t[BA].removeEventListener("abort",t[jh]):t[BA].removeListener("abort",t[jh]),t[BA]=null,t[jh]=null)}TK.exports={addSignal:Fwe,removeSignal:Mwe}});var MK=C((Yxe,FK)=>{"use strict";var xwe=SK(),{InvalidArgumentError:Xh,RequestAbortedError:Lwe}=ut(),oo=Ue(),{getResolveErrorBodyCallback:Owe}=UM(),{AsyncResource:Uwe}=B("async_hooks"),{addSignal:Pwe,removeSignal:kK}=Kh(),PM=class extends Uwe{constructor(e,n){if(!e||typeof e!="object")throw new Xh("invalid opts");let{signal:r,method:i,opaque:s,body:o,onInfo:a,responseHeaders:A,throwOnError:l,highWaterMark:c}=e;try{if(typeof n!="function")throw new Xh("invalid callback");if(c&&(typeof c!="number"||c<0))throw new Xh("invalid highWaterMark");if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new Xh("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new Xh("invalid method");if(a&&typeof a!="function")throw new Xh("invalid onInfo callback");super("UNDICI_REQUEST")}catch(u){throw oo.isStream(o)&&oo.destroy(o.on("error",oo.nop),u),u}this.responseHeaders=A||null,this.opaque=s||null,this.callback=n,this.res=null,this.abort=null,this.body=o,this.trailers={},this.context=null,this.onInfo=a||null,this.throwOnError=l,this.highWaterMark=c,oo.isStream(o)&&o.on("error",u=>{this.onError(u)}),Pwe(this,r)}onConnect(e,n){if(!this.callback)throw new Lwe;this.abort=e,this.context=n}onHeaders(e,n,r,i){let{callback:s,opaque:o,abort:a,context:A,responseHeaders:l,highWaterMark:c}=this,u=l==="raw"?oo.parseRawHeaders(n):oo.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:u});return}let d=(l==="raw"?oo.parseHeaders(n):u)["content-type"],g=new xwe({resume:r,abort:a,contentType:d,highWaterMark:c});this.callback=null,this.res=g,s!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(Owe,null,{callback:s,body:g,contentType:d,statusCode:e,statusMessage:i,headers:u}):this.runInAsyncScope(s,null,null,{statusCode:e,headers:u,trailers:this.trailers,opaque:o,body:g,context:A}))}onData(e){let{res:n}=this;return n.push(e)}onComplete(e){let{res:n}=this;kK(this),oo.parseHeaders(e,this.trailers),n.push(null)}onError(e){let{res:n,callback:r,body:i,opaque:s}=this;kK(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:s})})),n&&(this.res=null,queueMicrotask(()=>{oo.destroy(n,e)})),i&&(this.body=null,oo.destroy(i,e))}};function NK(t,e){if(e===void 0)return new Promise((n,r)=>{NK.call(this,t,(i,s)=>i?r(i):n(s))});try{this.dispatch(t,new PM(t,e))}catch(n){if(typeof e!="function")throw n;let r=t&&t.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}FK.exports=NK});var UK=C((Jxe,OK)=>{"use strict";var{finished:Vwe,PassThrough:Gwe}=B("stream"),{InvalidArgumentError:Zh,InvalidReturnValueError:qwe,RequestAbortedError:Hwe}=ut(),os=Ue(),{getResolveErrorBodyCallback:Ywe}=UM(),{AsyncResource:Jwe}=B("async_hooks"),{addSignal:Wwe,removeSignal:xK}=Kh(),VM=class extends Jwe{constructor(e,n,r){if(!e||typeof e!="object")throw new Zh("invalid opts");let{signal:i,method:s,opaque:o,body:a,onInfo:A,responseHeaders:l,throwOnError:c}=e;try{if(typeof r!="function")throw new Zh("invalid callback");if(typeof n!="function")throw new Zh("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new Zh("signal must be an EventEmitter or EventTarget");if(s==="CONNECT")throw new Zh("invalid method");if(A&&typeof A!="function")throw new Zh("invalid onInfo callback");super("UNDICI_STREAM")}catch(u){throw os.isStream(a)&&os.destroy(a.on("error",os.nop),u),u}this.responseHeaders=l||null,this.opaque=o||null,this.factory=n,this.callback=r,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=a,this.onInfo=A||null,this.throwOnError=c||!1,os.isStream(a)&&a.on("error",u=>{this.onError(u)}),Wwe(this,i)}onConnect(e,n){if(!this.callback)throw new Hwe;this.abort=e,this.context=n}onHeaders(e,n,r,i){let{factory:s,opaque:o,context:a,callback:A,responseHeaders:l}=this,c=l==="raw"?os.parseRawHeaders(n):os.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:c});return}this.factory=null;let u;if(this.throwOnError&&e>=400){let g=(l==="raw"?os.parseHeaders(n):c)["content-type"];u=new Gwe,this.callback=null,this.runInAsyncScope(Ywe,null,{callback:A,body:u,contentType:g,statusCode:e,statusMessage:i,headers:c})}else{if(s===null)return;if(u=this.runInAsyncScope(s,null,{statusCode:e,headers:c,opaque:o,context:a}),!u||typeof u.write!="function"||typeof u.end!="function"||typeof u.on!="function")throw new qwe("expected Writable");Vwe(u,{readable:!1},d=>{let{callback:g,res:f,opaque:m,trailers:y,abort:I}=this;this.res=null,(d||!f.readable)&&os.destroy(f,d),this.callback=null,this.runInAsyncScope(g,null,d||null,{opaque:m,trailers:y}),d&&I()})}return u.on("drain",r),this.res=u,(u.writableNeedDrain!==void 0?u.writableNeedDrain:u._writableState&&u._writableState.needDrain)!==!0}onData(e){let{res:n}=this;return n?n.write(e):!0}onComplete(e){let{res:n}=this;xK(this),n&&(this.trailers=os.parseHeaders(e),n.end())}onError(e){let{res:n,callback:r,opaque:i,body:s}=this;xK(this),this.factory=null,n?(this.res=null,os.destroy(n,e)):r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:i})})),s&&(this.body=null,os.destroy(s,e))}};function LK(t,e,n){if(n===void 0)return new Promise((r,i)=>{LK.call(this,t,e,(s,o)=>s?i(s):r(o))});try{this.dispatch(t,new VM(t,e,n))}catch(r){if(typeof n!="function")throw r;let i=t&&t.opaque;queueMicrotask(()=>n(r,{opaque:i}))}}OK.exports=LK});var GK=C((Wxe,VK)=>{"use strict";var{Readable:PK,Duplex:zwe,PassThrough:jwe}=B("stream"),{InvalidArgumentError:aE,InvalidReturnValueError:Kwe,RequestAbortedError:GQ}=ut(),Fi=Ue(),{AsyncResource:Xwe}=B("async_hooks"),{addSignal:Zwe,removeSignal:$we}=Kh(),e0e=B("assert"),$h=Symbol("resume"),GM=class extends PK{constructor(){super({autoDestroy:!0}),this[$h]=null}_read(){let{[$h]:e}=this;e&&(this[$h]=null,e())}_destroy(e,n){this._read(),n(e)}},qM=class extends PK{constructor(e){super({autoDestroy:!0}),this[$h]=e}_read(){this[$h]()}_destroy(e,n){!e&&!this._readableState.endEmitted&&(e=new GQ),n(e)}},HM=class extends Xwe{constructor(e,n){if(!e||typeof e!="object")throw new aE("invalid opts");if(typeof n!="function")throw new aE("invalid handler");let{signal:r,method:i,opaque:s,onInfo:o,responseHeaders:a}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new aE("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new aE("invalid method");if(o&&typeof o!="function")throw new aE("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=s||null,this.responseHeaders=a||null,this.handler=n,this.abort=null,this.context=null,this.onInfo=o||null,this.req=new GM().on("error",Fi.nop),this.ret=new zwe({readableObjectMode:e.objectMode,autoDestroy:!0,read:()=>{let{body:A}=this;A&&A.resume&&A.resume()},write:(A,l,c)=>{let{req:u}=this;u.push(A,l)||u._readableState.destroyed?c():u[$h]=c},destroy:(A,l)=>{let{body:c,req:u,res:h,ret:d,abort:g}=this;!A&&!d._readableState.endEmitted&&(A=new GQ),g&&A&&g(),Fi.destroy(c,A),Fi.destroy(u,A),Fi.destroy(h,A),$we(this),l(A)}}).on("prefinish",()=>{let{req:A}=this;A.push(null)}),this.res=null,Zwe(this,r)}onConnect(e,n){let{ret:r,res:i}=this;if(e0e(!i,"pipeline cannot be retried"),r.destroyed)throw new GQ;this.abort=e,this.context=n}onHeaders(e,n,r){let{opaque:i,handler:s,context:o}=this;if(e<200){if(this.onInfo){let A=this.responseHeaders==="raw"?Fi.parseRawHeaders(n):Fi.parseHeaders(n);this.onInfo({statusCode:e,headers:A})}return}this.res=new qM(r);let a;try{this.handler=null;let A=this.responseHeaders==="raw"?Fi.parseRawHeaders(n):Fi.parseHeaders(n);a=this.runInAsyncScope(s,null,{statusCode:e,headers:A,opaque:i,body:this.res,context:o})}catch(A){throw this.res.on("error",Fi.nop),A}if(!a||typeof a.on!="function")throw new Kwe("expected Readable");a.on("data",A=>{let{ret:l,body:c}=this;!l.push(A)&&c.pause&&c.pause()}).on("error",A=>{let{ret:l}=this;Fi.destroy(l,A)}).on("end",()=>{let{ret:A}=this;A.push(null)}).on("close",()=>{let{ret:A}=this;A._readableState.ended||Fi.destroy(A,new GQ)}),this.body=a}onData(e){let{res:n}=this;return n.push(e)}onComplete(e){let{res:n}=this;n.push(null)}onError(e){let{ret:n}=this;this.handler=null,Fi.destroy(n,e)}};function t0e(t,e){try{let n=new HM(t,e);return this.dispatch(se(M({},t),{body:n.req}),n),n.ret}catch(n){return new jwe().destroy(n)}}VK.exports=t0e});var WK=C((jxe,JK)=>{"use strict";var{InvalidArgumentError:YM,RequestAbortedError:n0e,SocketError:r0e}=ut(),{AsyncResource:i0e}=B("async_hooks"),qK=Ue(),{addSignal:s0e,removeSignal:HK}=Kh(),o0e=B("assert"),JM=class extends i0e{constructor(e,n){if(!e||typeof e!="object")throw new YM("invalid opts");if(typeof n!="function")throw new YM("invalid callback");let{signal:r,opaque:i,responseHeaders:s}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new YM("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=s||null,this.opaque=i||null,this.callback=n,this.abort=null,this.context=null,s0e(this,r)}onConnect(e,n){if(!this.callback)throw new n0e;this.abort=e,this.context=null}onHeaders(){throw new r0e("bad upgrade",null)}onUpgrade(e,n,r){let{callback:i,opaque:s,context:o}=this;o0e.strictEqual(e,101),HK(this),this.callback=null;let a=this.responseHeaders==="raw"?qK.parseRawHeaders(n):qK.parseHeaders(n);this.runInAsyncScope(i,null,null,{headers:a,socket:r,opaque:s,context:o})}onError(e){let{callback:n,opaque:r}=this;HK(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function YK(t,e){if(e===void 0)return new Promise((n,r)=>{YK.call(this,t,(i,s)=>i?r(i):n(s))});try{let n=new JM(t,e);this.dispatch(se(M({},t),{method:t.method||"GET",upgrade:t.protocol||"Websocket"}),n)}catch(n){if(typeof e!="function")throw n;let r=t&&t.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}JK.exports=YK});var ZK=C((Xxe,XK)=>{"use strict";var{AsyncResource:a0e}=B("async_hooks"),{InvalidArgumentError:WM,RequestAbortedError:A0e,SocketError:l0e}=ut(),zK=Ue(),{addSignal:c0e,removeSignal:jK}=Kh(),zM=class extends a0e{constructor(e,n){if(!e||typeof e!="object")throw new WM("invalid opts");if(typeof n!="function")throw new WM("invalid callback");let{signal:r,opaque:i,responseHeaders:s}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new WM("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=s||null,this.callback=n,this.abort=null,c0e(this,r)}onConnect(e,n){if(!this.callback)throw new A0e;this.abort=e,this.context=n}onHeaders(){throw new l0e("bad connect",null)}onUpgrade(e,n,r){let{callback:i,opaque:s,context:o}=this;jK(this),this.callback=null;let a=n;a!=null&&(a=this.responseHeaders==="raw"?zK.parseRawHeaders(n):zK.parseHeaders(n)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:a,socket:r,opaque:s,context:o})}onError(e){let{callback:n,opaque:r}=this;jK(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function KK(t,e){if(e===void 0)return new Promise((n,r)=>{KK.call(this,t,(i,s)=>i?r(i):n(s))});try{let n=new zM(t,e);this.dispatch(se(M({},t),{method:"CONNECT"}),n)}catch(n){if(typeof e!="function")throw n;let r=t&&t.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}XK.exports=KK});var $K=C(($xe,ed)=>{"use strict";ed.exports.request=MK();ed.exports.stream=UK();ed.exports.pipeline=GK();ed.exports.upgrade=WK();ed.exports.connect=ZK()});var KM=C((eLe,e5)=>{"use strict";var{UndiciError:u0e}=ut(),jM=class t extends u0e{constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};e5.exports={MockNotMatchedError:jM}});var td=C((tLe,t5)=>{"use strict";t5.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var AE=C((nLe,d5)=>{"use strict";var{MockNotMatchedError:Xl}=KM(),{kDispatches:qQ,kMockAgent:h0e,kOriginalDispatch:d0e,kOrigin:g0e,kGetNetConnect:f0e}=td(),{buildURL:p0e,nop:E0e}=Ue(),{STATUS_CODES:m0e}=B("http"),{types:{isPromise:C0e}}=B("util");function Yo(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}function r5(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e.toLocaleLowerCase(),n]))}function i5(t,e){if(Array.isArray(t)){for(let n=0;n<t.length;n+=2)if(t[n].toLocaleLowerCase()===e.toLocaleLowerCase())return t[n+1];return}else return typeof t.get=="function"?t.get(e):r5(t)[e.toLocaleLowerCase()]}function s5(t){let e=t.slice(),n=[];for(let r=0;r<e.length;r+=2)n.push([e[r],e[r+1]]);return Object.fromEntries(n)}function o5(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=s5(e)),t.headers(e?r5(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[n,r]of Object.entries(t.headers)){let i=i5(e,n);if(!Yo(r,i))return!1}return!0}function n5(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let n=new URLSearchParams(e.pop());return n.sort(),[...e,n.toString()].join("?")}function I0e(t,{path:e,method:n,body:r,headers:i}){let s=Yo(t.path,e),o=Yo(t.method,n),a=typeof t.body<"u"?Yo(t.body,r):!0,A=o5(t,i);return s&&o&&a&&A}function a5(t){return Buffer.isBuffer(t)?t:typeof t=="object"?JSON.stringify(t):t.toString()}function A5(t,e){let n=e.query?p0e(e.path,e.query):e.path,r=typeof n=="string"?n5(n):n,i=t.filter(({consumed:s})=>!s).filter(({path:s})=>Yo(n5(s),r));if(i.length===0)throw new Xl(`Mock dispatch not matched for path '${r}'`);if(i=i.filter(({method:s})=>Yo(s,e.method)),i.length===0)throw new Xl(`Mock dispatch not matched for method '${e.method}'`);if(i=i.filter(({body:s})=>typeof s<"u"?Yo(s,e.body):!0),i.length===0)throw new Xl(`Mock dispatch not matched for body '${e.body}'`);if(i=i.filter(s=>o5(s,e.headers)),i.length===0)throw new Xl(`Mock dispatch not matched for headers '${typeof e.headers=="object"?JSON.stringify(e.headers):e.headers}'`);return i[0]}function y0e(t,e,n){let r={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof n=="function"?{callback:n}:M({},n),s=se(M(M({},r),e),{pending:!0,data:M({error:null},i)});return t.push(s),s}function XM(t,e){let n=t.findIndex(r=>r.consumed?I0e(r,e):!1);n!==-1&&t.splice(n,1)}function l5(t){let{path:e,method:n,body:r,headers:i,query:s}=t;return{path:e,method:n,body:r,headers:i,query:s}}function ZM(t){return Object.entries(t).reduce((e,[n,r])=>[...e,Buffer.from(`${n}`),Array.isArray(r)?r.map(i=>Buffer.from(`${i}`)):Buffer.from(`${r}`)],[])}function c5(t){return m0e[t]||"unknown"}function B0e(t){return E(this,null,function*(){let e=[];try{for(var n=Pn(t),r,i,s;r=!(i=yield n.next()).done;r=!1){let o=i.value;e.push(o)}}catch{s=[i]}finally{try{r&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s[0]}}return Buffer.concat(e).toString("utf8")})}function u5(t,e){let n=l5(t),r=A5(this[qQ],n);r.timesInvoked++,r.data.callback&&(r.data=M(M({},r.data),r.data.callback(t)));let{data:{statusCode:i,data:s,headers:o,trailers:a,error:A},delay:l,persist:c}=r,{timesInvoked:u,times:h}=r;if(r.consumed=!c&&u>=h,r.pending=u<h,A!==null)return XM(this[qQ],n),e.onError(A),!0;typeof l=="number"&&l>0?setTimeout(()=>{d(this[qQ])},l):d(this[qQ]);function d(f,m=s){let y=Array.isArray(t.headers)?s5(t.headers):t.headers,I=typeof m=="function"?m(se(M({},t),{headers:y})):m;if(C0e(I)){I.then(T=>d(f,T));return}let w=a5(I),_=ZM(o),S=ZM(a);e.abort=E0e,e.onHeaders(i,_,g,c5(i)),e.onData(Buffer.from(w)),e.onComplete(S),XM(f,n)}function g(){}return!0}function Q0e(){let t=this[h0e],e=this[g0e],n=this[d0e];return function(i,s){if(t.isMockActive)try{u5.call(this,i,s)}catch(o){if(o instanceof Xl){let a=t[f0e]();if(a===!1)throw new Xl(`${o.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(h5(a,e))n.call(this,i,s);else throw new Xl(`${o.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw o}else n.call(this,i,s)}}function h5(t,e){let n=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(r=>Yo(r,n.host)))}function w0e(t){if(t){let e=t,{agent:n}=e;return cs(e,["agent"])}}d5.exports={getResponseData:a5,getMockDispatch:A5,addMockDispatch:y0e,deleteMockDispatch:XM,buildKey:l5,generateKeyValues:ZM,matchValue:Yo,getResponse:B0e,getStatusText:c5,mockDispatch:u5,buildMockDispatch:Q0e,checkNetConnect:h5,buildMockOptions:w0e,getHeaderByName:i5}});var sx=C((iLe,ix)=>{"use strict";var{getResponseData:_0e,buildKey:v0e,addMockDispatch:$M}=AE(),{kDispatches:HQ,kDispatchKey:YQ,kDefaultHeaders:ex,kDefaultTrailers:tx,kContentLength:nx,kMockDispatch:JQ}=td(),{InvalidArgumentError:as}=ut(),{buildURL:S0e}=Ue(),nd=class{constructor(e){this[JQ]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new as("waitInMs must be a valid integer > 0");return this[JQ].delay=e,this}persist(){return this[JQ].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new as("repeatTimes must be a valid integer > 0");return this[JQ].times=e,this}},rx=class{constructor(e,n){if(typeof e!="object")throw new as("opts must be an object");if(typeof e.path>"u")throw new as("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=S0e(e.path,e.query);else{let r=new URL(e.path,"data://");e.path=r.pathname+r.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[YQ]=v0e(e),this[HQ]=n,this[ex]={},this[tx]={},this[nx]=!1}createMockScopeDispatchData(e,n,r={}){let i=_0e(n),s=this[nx]?{"content-length":i.length}:{},o=M(M(M({},this[ex]),s),r.headers),a=M(M({},this[tx]),r.trailers);return{statusCode:e,data:n,headers:o,trailers:a}}validateReplyParameters(e,n,r){if(typeof e>"u")throw new as("statusCode must be defined");if(typeof n>"u")throw new as("data must be defined");if(typeof r!="object")throw new as("responseOptions must be an object")}reply(e){if(typeof e=="function"){let a=l=>{let c=e(l);if(typeof c!="object")throw new as("reply options callback must return an object");let{statusCode:u,data:h="",responseOptions:d={}}=c;return this.validateReplyParameters(u,h,d),M({},this.createMockScopeDispatchData(u,h,d))},A=$M(this[HQ],this[YQ],a);return new nd(A)}let[n,r="",i={}]=[...arguments];this.validateReplyParameters(n,r,i);let s=this.createMockScopeDispatchData(n,r,i),o=$M(this[HQ],this[YQ],s);return new nd(o)}replyWithError(e){if(typeof e>"u")throw new as("error must be defined");let n=$M(this[HQ],this[YQ],{error:e});return new nd(n)}defaultReplyHeaders(e){if(typeof e>"u")throw new as("headers must be defined");return this[ex]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new as("trailers must be defined");return this[tx]=e,this}replyContentLength(){return this[nx]=!0,this}};ix.exports.MockInterceptor=rx;ix.exports.MockScope=nd});var Ax=C((oLe,I5)=>{"use strict";var{promisify:b0e}=B("util"),D0e=nE(),{buildMockDispatch:R0e}=AE(),{kDispatches:g5,kMockAgent:f5,kClose:p5,kOriginalClose:E5,kOrigin:m5,kOriginalDispatch:T0e,kConnected:ox}=td(),{MockInterceptor:k0e}=sx(),C5=St(),{InvalidArgumentError:N0e}=ut(),ax=class extends D0e{constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new N0e("Argument opts.agent must implement Agent");this[f5]=n.agent,this[m5]=e,this[g5]=[],this[ox]=1,this[T0e]=this.dispatch,this[E5]=this.close.bind(this),this.dispatch=R0e.call(this),this.close=this[p5]}get[C5.kConnected](){return this[ox]}intercept(e){return new k0e(e,this[g5])}[p5](){return E(this,null,function*(){yield b0e(this[E5])(),this[ox]=0,this[f5][C5.kClients].delete(this[m5])})}};I5.exports=ax});var ux=C((ALe,S5)=>{"use strict";var{promisify:F0e}=B("util"),M0e=Wh(),{buildMockDispatch:x0e}=AE(),{kDispatches:y5,kMockAgent:B5,kClose:Q5,kOriginalClose:w5,kOrigin:_5,kOriginalDispatch:L0e,kConnected:lx}=td(),{MockInterceptor:O0e}=sx(),v5=St(),{InvalidArgumentError:U0e}=ut(),cx=class extends M0e{constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new U0e("Argument opts.agent must implement Agent");this[B5]=n.agent,this[_5]=e,this[y5]=[],this[lx]=1,this[L0e]=this.dispatch,this[w5]=this.close.bind(this),this.dispatch=x0e.call(this),this.close=this[Q5]}get[v5.kConnected](){return this[lx]}intercept(e){return new O0e(e,this[y5])}[Q5](){return E(this,null,function*(){yield F0e(this[w5])(),this[lx]=0,this[B5][v5.kClients].delete(this[_5])})}};S5.exports=cx});var D5=C((uLe,b5)=>{"use strict";var P0e={pronoun:"it",is:"is",was:"was",this:"this"},V0e={pronoun:"they",is:"are",was:"were",this:"these"};b5.exports=class{constructor(e,n){this.singular=e,this.plural=n}pluralize(e){let n=e===1,r=n?P0e:V0e,i=n?this.singular:this.plural;return se(M({},r),{count:e,noun:i})}}});var T5=C((gLe,R5)=>{"use strict";var{Transform:G0e}=B("stream"),{Console:q0e}=B("console");R5.exports=class{constructor({disableColors:e}={}){this.transform=new G0e({transform(n,r,i){i(null,n)}}),this.logger=new q0e({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let n=e.map(({method:r,path:i,data:{statusCode:s},persist:o,times:a,timesInvoked:A,origin:l})=>({Method:r,Origin:l,Path:i,"Status code":s,Persistent:o?"\u2705":"\u274C",Invocations:A,Remaining:o?1/0:a-A}));return this.logger.table(n),this.transform.read().toString()}}});var M5=C((fLe,F5)=>{"use strict";var{kClients:Zl}=St(),H0e=oE(),{kAgent:hx,kMockAgentSet:WQ,kMockAgentGet:k5,kDispatches:dx,kIsMockActive:zQ,kNetConnect:$l,kGetNetConnect:Y0e,kOptions:jQ,kFactory:KQ}=td(),J0e=Ax(),W0e=ux(),{matchValue:z0e,buildMockOptions:j0e}=AE(),{InvalidArgumentError:N5,UndiciError:K0e}=ut(),X0e=mQ(),Z0e=D5(),$0e=T5(),gx=class{constructor(e){this.value=e}deref(){return this.value}},fx=class extends X0e{constructor(e){if(super(e),this[$l]=!0,this[zQ]=!0,e&&e.agent&&typeof e.agent.dispatch!="function")throw new N5("Argument opts.agent must implement Agent");let n=e&&e.agent?e.agent:new H0e(e);this[hx]=n,this[Zl]=n[Zl],this[jQ]=j0e(e)}get(e){let n=this[k5](e);return n||(n=this[KQ](e),this[WQ](e,n)),n}dispatch(e,n){return this.get(e.origin),this[hx].dispatch(e,n)}close(){return E(this,null,function*(){yield this[hx].close(),this[Zl].clear()})}deactivate(){this[zQ]=!1}activate(){this[zQ]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[$l])?this[$l].push(e):this[$l]=[e];else if(typeof e>"u")this[$l]=!0;else throw new N5("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[$l]=!1}get isMockActive(){return this[zQ]}[WQ](e,n){this[Zl].set(e,new gx(n))}[KQ](e){let n=Object.assign({agent:this},this[jQ]);return this[jQ]&&this[jQ].connections===1?new J0e(e,n):new W0e(e,n)}[k5](e){let n=this[Zl].get(e);if(n)return n.deref();if(typeof e!="string"){let r=this[KQ]("http://localhost:9999");return this[WQ](e,r),r}for(let[r,i]of Array.from(this[Zl])){let s=i.deref();if(s&&typeof r!="string"&&z0e(r,e)){let o=this[KQ](e);return this[WQ](e,o),o[dx]=s[dx],o}}}[Y0e](){return this[$l]}pendingInterceptors(){let e=this[Zl];return Array.from(e.entries()).flatMap(([n,r])=>r.deref()[dx].map(i=>se(M({},i),{origin:n}))).filter(({pending:n})=>n)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new $0e}={}){let n=this.pendingInterceptors();if(n.length===0)return;let r=new Z0e("interceptor","interceptors").pluralize(n.length);throw new K0e(`
${r.count} ${r.noun} ${r.is} pending:

${e.format(n)}
`.trim())}};F5.exports=fx});var V5=C((ELe,P5)=>{"use strict";var{kProxy:e_e,kClose:t_e,kDestroy:n_e,kInterceptors:r_e}=St(),{URL:x5}=B("url"),L5=oE(),i_e=Wh(),s_e=Wp(),{InvalidArgumentError:cE,RequestAbortedError:o_e}=ut(),O5=zp(),lE=Symbol("proxy agent"),XQ=Symbol("proxy client"),ZQ=Symbol("proxy headers"),px=Symbol("request tls settings"),a_e=Symbol("proxy tls settings"),U5=Symbol("connect endpoint function");function A_e(t){return t==="https:"?443:80}function l_e(t){if(typeof t=="string"&&(t={uri:t}),!t||!t.uri)throw new cE("Proxy opts.uri is mandatory");return{uri:t.uri,protocol:t.protocol||"https"}}function c_e(t,e){return new i_e(t,e)}var Ex=class extends s_e{constructor(e){if(super(e),this[e_e]=l_e(e),this[lE]=new L5(e),this[r_e]=e.interceptors&&e.interceptors.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],typeof e=="string"&&(e={uri:e}),!e||!e.uri)throw new cE("Proxy opts.uri is mandatory");let{clientFactory:n=c_e}=e;if(typeof n!="function")throw new cE("Proxy opts.clientFactory must be a function.");if(this[px]=e.requestTls,this[a_e]=e.proxyTls,this[ZQ]=e.headers||{},e.auth&&e.token)throw new cE("opts.auth cannot be used in combination with opts.token");e.auth?this[ZQ]["proxy-authorization"]=`Basic ${e.auth}`:e.token&&(this[ZQ]["proxy-authorization"]=e.token);let r=new x5(e.uri),{origin:i,port:s,host:o}=r,a=O5(M({},e.proxyTls));this[U5]=O5(M({},e.requestTls)),this[XQ]=n(r,{connect:a}),this[lE]=new L5(se(M({},e),{connect:(A,l)=>E(this,null,function*(){let c=A.host;A.port||(c+=`:${A_e(A.protocol)}`);try{let{socket:u,statusCode:h}=yield this[XQ].connect({origin:i,port:s,path:c,signal:A.signal,headers:se(M({},this[ZQ]),{host:o})});if(h!==200&&(u.on("error",()=>{}).destroy(),l(new o_e("Proxy response !== 200 when HTTP Tunneling"))),A.protocol!=="https:"){l(null,u);return}let d;this[px]?d=this[px].servername:d=A.servername,this[U5](se(M({},A),{servername:d,httpSocket:u}),l)}catch(u){l(u)}})}))}dispatch(e,n){let{host:r}=new x5(e.origin),i=u_e(e.headers);return h_e(i),this[lE].dispatch(se(M({},e),{headers:se(M({},i),{host:r})}),n)}[t_e](){return E(this,null,function*(){yield this[lE].close(),yield this[XQ].close()})}[n_e](){return E(this,null,function*(){yield this[lE].destroy(),yield this[XQ].destroy()})}};function u_e(t){if(Array.isArray(t)){let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}return t}function h_e(t){if(t&&Object.keys(t).find(n=>n.toLowerCase()==="proxy-authorization"))throw new cE("Proxy-Authorization should be sent in ProxyAgent constructor")}P5.exports=Ex});var rd=C((CLe,Y5)=>{"use strict";var G5=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:d_e}=ut(),g_e=oE();H5()===void 0&&q5(new g_e);function q5(t){if(!t||typeof t.dispatch!="function")throw new d_e("Argument agent must implement Agent");Object.defineProperty(globalThis,G5,{value:t,writable:!0,enumerable:!1,configurable:!1})}function H5(){return globalThis[G5]}Y5.exports={setGlobalDispatcher:q5,getGlobalDispatcher:H5}});var W5=C((yLe,J5)=>{"use strict";J5.exports=class{constructor(e){this.handler=e}onConnect(...e){return this.handler.onConnect(...e)}onError(...e){return this.handler.onError(...e)}onUpgrade(...e){return this.handler.onUpgrade(...e)}onHeaders(...e){return this.handler.onHeaders(...e)}onData(...e){return this.handler.onData(...e)}onComplete(...e){return this.handler.onComplete(...e)}onBodySent(...e){return this.handler.onBodySent(...e)}}});var tc=C((BLe,X5)=>{"use strict";var{kHeadersList:Dr}=St(),{kGuard:ec}=Lo(),{kEnumerableProperty:ao}=Ue(),{makeIterator:mx,isValidHeaderName:uE,isValidHeaderValue:z5}=ki(),{webidl:ve}=fr(),f_e=B("assert"),Rr=Symbol("headers map"),Tr=Symbol("headers map sorted");function j5(t){let e=t.length;for(;/[\r\n\t ]/.test(t.charAt(--e)););return t.slice(0,e+1).replace(/^[\r\n\t ]+/,"")}function K5(t,e){if(Array.isArray(e))for(let n of e){if(n.length!==2)throw ve.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});t.append(n[0],n[1])}else if(typeof e=="object"&&e!==null)for(let[n,r]of Object.entries(e))t.append(n,r);else throw ve.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}var $Q=class t{cookies=null;constructor(e){e instanceof t?(this[Rr]=new Map(e[Rr]),this[Tr]=e[Tr],this.cookies=e.cookies):(this[Rr]=new Map(e),this[Tr]=null)}contains(e){return e=e.toLowerCase(),this[Rr].has(e)}clear(){this[Rr].clear(),this[Tr]=null,this.cookies=null}append(e,n){this[Tr]=null;let r=e.toLowerCase(),i=this[Rr].get(r);if(i){let s=r==="cookie"?"; ":", ";this[Rr].set(r,{name:i.name,value:`${i.value}${s}${n}`})}else this[Rr].set(r,{name:e,value:n});r==="set-cookie"&&(this.cookies??=[],this.cookies.push(n))}set(e,n){this[Tr]=null;let r=e.toLowerCase();return r==="set-cookie"&&(this.cookies=[n]),this[Rr].set(r,{name:e,value:n})}delete(e){return this[Tr]=null,e=e.toLowerCase(),e==="set-cookie"&&(this.cookies=null),this[Rr].delete(e)}get(e){return this.contains(e)?this[Rr].get(e.toLowerCase())?.value??null:null}*[Symbol.iterator](){for(let[e,{value:n}]of this[Rr])yield[e,n]}get entries(){let e={};if(this[Rr].size)for(let{name:n,value:r}of this[Rr].values())e[n]=r;return e}},id=class t{constructor(e=void 0){this[Dr]=new $Q,this[ec]="none",e!==void 0&&(e=ve.converters.HeadersInit(e),K5(this,e))}append(e,n){if(ve.brandCheck(this,t),ve.argumentLengthCheck(arguments,2,{header:"Headers.append"}),e=ve.converters.ByteString(e),n=ve.converters.ByteString(n),n=j5(n),uE(e)){if(!z5(n))throw ve.errors.invalidArgument({prefix:"Headers.append",value:n,type:"header value"})}else throw ve.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(this[ec]==="immutable")throw new TypeError("immutable");return this[ec],this[Dr].append(e,n)}delete(e){if(ve.brandCheck(this,t),ve.argumentLengthCheck(arguments,1,{header:"Headers.delete"}),e=ve.converters.ByteString(e),!uE(e))throw ve.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this[ec]==="immutable")throw new TypeError("immutable");if(this[ec],!!this[Dr].contains(e))return this[Dr].delete(e)}get(e){if(ve.brandCheck(this,t),ve.argumentLengthCheck(arguments,1,{header:"Headers.get"}),e=ve.converters.ByteString(e),!uE(e))throw ve.errors.invalidArgument({prefix:"Headers.get",value:e,type:"header name"});return this[Dr].get(e)}has(e){if(ve.brandCheck(this,t),ve.argumentLengthCheck(arguments,1,{header:"Headers.has"}),e=ve.converters.ByteString(e),!uE(e))throw ve.errors.invalidArgument({prefix:"Headers.has",value:e,type:"header name"});return this[Dr].contains(e)}set(e,n){if(ve.brandCheck(this,t),ve.argumentLengthCheck(arguments,2,{header:"Headers.set"}),e=ve.converters.ByteString(e),n=ve.converters.ByteString(n),n=j5(n),uE(e)){if(!z5(n))throw ve.errors.invalidArgument({prefix:"Headers.set",value:n,type:"header value"})}else throw ve.errors.invalidArgument({prefix:"Headers.set",value:e,type:"header name"});if(this[ec]==="immutable")throw new TypeError("immutable");return this[ec],this[Dr].set(e,n)}getSetCookie(){ve.brandCheck(this,t);let e=this[Dr].cookies;return e?[...e]:[]}get[Tr](){if(this[Dr][Tr])return this[Dr][Tr];let e=[],n=[...this[Dr]].sort((i,s)=>i[0]<s[0]?-1:1),r=this[Dr].cookies;for(let[i,s]of n)if(i==="set-cookie")for(let o of r)e.push([i,o]);else f_e(s!==null),e.push([i,s]);return this[Dr][Tr]=e,e}keys(){return ve.brandCheck(this,t),mx(()=>[...this[Tr].values()],"Headers","key")}values(){return ve.brandCheck(this,t),mx(()=>[...this[Tr].values()],"Headers","value")}entries(){return ve.brandCheck(this,t),mx(()=>[...this[Tr].values()],"Headers","key+value")}forEach(e,n=globalThis){if(ve.brandCheck(this,t),ve.argumentLengthCheck(arguments,1,{header:"Headers.forEach"}),typeof e!="function")throw new TypeError("Failed to execute 'forEach' on 'Headers': parameter 1 is not of type 'Function'.");for(let[r,i]of this)e.apply(n,[i,r,this])}[Symbol.for("nodejs.util.inspect.custom")](){return ve.brandCheck(this,t),this[Dr]}};id.prototype[Symbol.iterator]=id.prototype.entries;Object.defineProperties(id.prototype,{append:ao,delete:ao,get:ao,has:ao,set:ao,getSetCookie:ao,keys:ao,values:ao,entries:ao,forEach:ao,[Symbol.iterator]:{enumerable:!1},[Symbol.toStringTag]:{value:"Headers",configurable:!0}});ve.converters.HeadersInit=function(t){if(ve.util.Type(t)==="Object")return t[Symbol.iterator]?ve.converters["sequence<sequence<ByteString>>"](t):ve.converters["record<ByteString, ByteString>"](t);throw ve.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};X5.exports={fill:K5,Headers:id,HeadersList:$Q}});var rw=C((QLe,s8)=>{"use strict";var{Headers:p_e,HeadersList:Z5,fill:E_e}=tc(),{extractBody:$5,cloneBody:m_e,mixinBody:C_e}=Hp(),yx=Ue(),{kEnumerableProperty:ii}=yx,{isValidReasonPhrase:I_e,isCancelled:y_e,isAborted:B_e,isBlobLike:Q_e,serializeJavascriptValueToJSONString:w_e,isErrorLike:__e,isomorphicEncode:v_e}=ki(),{redirectStatus:S_e,nullBodyStatus:b_e,DOMException:e8}=fA(),{kState:bt,kHeaders:wn,kGuard:sd,kRealm:ri}=Lo(),{webidl:ye}=fr(),{FormData:D_e}=pQ(),{getGlobalOrigin:R_e}=Nh(),{URLSerializer:t8}=ss(),{kHeadersList:Cx}=St(),Bx=B("assert"),{types:Ix}=B("util"),r8=globalThis.ReadableStream||B("stream/web").ReadableStream,od=class t{static error(){let e={settingsObject:{}},n=new t;return n[bt]=tw(),n[ri]=e,n[wn][Cx]=n[bt].headersList,n[wn][sd]="immutable",n[wn][ri]=e,n}static json(e,n={}){ye.argumentLengthCheck(arguments,1,{header:"Response.json"}),n!==null&&(n=ye.converters.ResponseInit(n));let r=new TextEncoder("utf-8").encode(w_e(e)),i=$5(r),s={settingsObject:{}},o=new t;return o[ri]=s,o[wn][sd]="response",o[wn][ri]=s,n8(o,n,{body:i[0],type:"application/json"}),o}static redirect(e,n=302){let r={settingsObject:{}};ye.argumentLengthCheck(arguments,1,{header:"Response.redirect"}),e=ye.converters.USVString(e),n=ye.converters["unsigned short"](n);let i;try{i=new URL(e,R_e())}catch(a){throw Object.assign(new TypeError("Failed to parse URL from "+e),{cause:a})}if(!S_e.includes(n))throw new RangeError("Invalid status code "+n);let s=new t;s[ri]=r,s[wn][sd]="immutable",s[wn][ri]=r,s[bt].status=n;let o=v_e(t8(i));return s[bt].headersList.append("location",o),s}constructor(e=null,n={}){e!==null&&(e=ye.converters.BodyInit(e)),n=ye.converters.ResponseInit(n),this[ri]={settingsObject:{}},this[bt]=nw({}),this[wn]=new p_e,this[wn][sd]="response",this[wn][Cx]=this[bt].headersList,this[wn][ri]=this[ri];let r=null;if(e!=null){let[i,s]=$5(e);r={body:i,type:s}}n8(this,n,r)}get type(){return ye.brandCheck(this,t),this[bt].type}get url(){ye.brandCheck(this,t);let e=this[bt].urlList,n=e[e.length-1]??null;return n===null?"":t8(n,!0)}get redirected(){return ye.brandCheck(this,t),this[bt].urlList.length>1}get status(){return ye.brandCheck(this,t),this[bt].status}get ok(){return ye.brandCheck(this,t),this[bt].status>=200&&this[bt].status<=299}get statusText(){return ye.brandCheck(this,t),this[bt].statusText}get headers(){return ye.brandCheck(this,t),this[wn]}get body(){return ye.brandCheck(this,t),this[bt].body?this[bt].body.stream:null}get bodyUsed(){return ye.brandCheck(this,t),!!this[bt].body&&yx.isDisturbed(this[bt].body.stream)}clone(){if(ye.brandCheck(this,t),this.bodyUsed||this.body&&this.body.locked)throw ye.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=Qx(this[bt]),n=new t;return n[bt]=e,n[ri]=this[ri],n[wn][Cx]=e.headersList,n[wn][sd]=this[wn][sd],n[wn][ri]=this[wn][ri],n}};C_e(od);Object.defineProperties(od.prototype,{type:ii,url:ii,status:ii,ok:ii,redirected:ii,statusText:ii,headers:ii,clone:ii,body:ii,bodyUsed:ii,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(od,{json:ii,redirect:ii,error:ii});function Qx(t){if(t.internalResponse)return i8(Qx(t.internalResponse),t.type);let e=nw(se(M({},t),{body:null}));return t.body!=null&&(e.body=m_e(t.body)),e}function nw(t){return se(M({aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:""},t),{headersList:t.headersList?new Z5(t.headersList):new Z5,urlList:t.urlList?[...t.urlList]:[]})}function tw(t){let e=__e(t);return nw({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}function ew(t,e){return e=M({internalResponse:t},e),new Proxy(t,{get(n,r){return r in e?e[r]:n[r]},set(n,r,i){return Bx(!(r in e)),n[r]=i,!0}})}function i8(t,e){if(e==="basic")return ew(t,{type:"basic",headersList:t.headersList});if(e==="cors")return ew(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return ew(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return ew(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});Bx(!1)}function T_e(t,e=null){return Bx(y_e(t)),B_e(t)?tw(Object.assign(new e8("The operation was aborted.","AbortError"),{cause:e})):tw(Object.assign(new e8("Request was cancelled."),{cause:e}))}function n8(t,e,n){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!I_e(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[bt].status=e.status),"statusText"in e&&e.statusText!=null&&(t[bt].statusText=e.statusText),"headers"in e&&e.headers!=null&&E_e(t[wn],e.headers),n){if(b_e.includes(t.status))throw ye.errors.exception({header:"Response constructor",message:"Invalid response status code "+t.status});t[bt].body=n.body,n.type!=null&&!t[bt].headersList.contains("Content-Type")&&t[bt].headersList.append("content-type",n.type)}}ye.converters.ReadableStream=ye.interfaceConverter(r8);ye.converters.FormData=ye.interfaceConverter(D_e);ye.converters.URLSearchParams=ye.interfaceConverter(URLSearchParams);ye.converters.XMLHttpRequestBodyInit=function(t){return typeof t=="string"?ye.converters.USVString(t):Q_e(t)?ye.converters.Blob(t,{strict:!1}):Ix.isAnyArrayBuffer(t)||Ix.isTypedArray(t)||Ix.isDataView(t)?ye.converters.BufferSource(t):yx.isFormDataLike(t)?ye.converters.FormData(t,{strict:!1}):t instanceof URLSearchParams?ye.converters.URLSearchParams(t):ye.converters.DOMString(t)};ye.converters.BodyInit=function(t){return t instanceof r8?ye.converters.ReadableStream(t):t?.[Symbol.asyncIterator]?t:ye.converters.XMLHttpRequestBodyInit(t)};ye.converters.ResponseInit=ye.dictionaryConverter([{key:"status",converter:ye.converters["unsigned short"],defaultValue:200},{key:"statusText",converter:ye.converters.ByteString,defaultValue:""},{key:"headers",converter:ye.converters.HeadersInit}]);s8.exports={makeNetworkError:tw,makeResponse:nw,makeAppropriateNetworkError:T_e,filterResponse:i8,Response:od,cloneResponse:Qx}});var gE=C((_Le,h8)=>{"use strict";var{extractBody:k_e,mixinBody:N_e,cloneBody:F_e}=Hp(),{Headers:wx,fill:M_e,HeadersList:o8}=tc(),{FinalizationRegistry:x_e}=FM()(),dE=Ue(),{isValidHTTPToken:L_e,sameOrigin:a8,normalizeMethod:O_e,makePolicyContainer:U_e}=ki(),{forbiddenMethods:P_e,corsSafeListedMethods:V_e,referrerPolicy:G_e,requestRedirect:q_e,requestMode:H_e,requestCredentials:Y_e,requestCache:J_e,requestDuplex:W_e}=fA(),{kEnumerableProperty:an}=dE,{kHeaders:_n,kSignal:hE,kState:mt,kGuard:iw,kRealm:si}=Lo(),{webidl:ue}=fr(),{getGlobalOrigin:z_e}=Nh(),{URLSerializer:j_e}=ss(),{kHeadersList:sw}=St(),K_e=B("assert"),{getMaxListeners:A8,setMaxListeners:l8,getEventListeners:X_e,defaultMaxListeners:c8}=B("events"),_x=globalThis.TransformStream,u8=Symbol("init"),Z_e=Symbol("abortController"),$_e=new x_e(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),nc=class t{constructor(e,n={}){if(e===u8)return;ue.argumentLengthCheck(arguments,1,{header:"Request constructor"}),e=ue.converters.RequestInfo(e),n=ue.converters.RequestInit(n),this[si]={settingsObject:{baseUrl:z_e(),get origin(){return this.baseUrl?.origin},policyContainer:U_e()}};let r=null,i=null,s=this[si].settingsObject.baseUrl,o=null;if(typeof e=="string"){let f;try{f=new URL(e,s)}catch(m){throw new TypeError("Failed to parse URL from "+e,{cause:m})}if(f.username||f.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);r=ow({urlList:[f]}),i="cors"}else K_e(e instanceof t),r=e[mt],o=e[hE];let a=this[si].settingsObject.origin,A="client";if(r.window?.constructor?.name==="EnvironmentSettingsObject"&&a8(r.window,a)&&(A=r.window),n.window!=null)throw new TypeError(`'window' option '${A}' must be null`);if("window"in n&&(A="no-window"),r=ow({method:r.method,headersList:r.headersList,unsafeRequest:r.unsafeRequest,client:this[si].settingsObject,window:A,priority:r.priority,origin:r.origin,referrer:r.referrer,referrerPolicy:r.referrerPolicy,mode:r.mode,credentials:r.credentials,cache:r.cache,redirect:r.redirect,integrity:r.integrity,keepalive:r.keepalive,reloadNavigation:r.reloadNavigation,historyNavigation:r.historyNavigation,urlList:[...r.urlList]}),Object.keys(n).length>0&&(r.mode==="navigate"&&(r.mode="same-origin"),r.reloadNavigation=!1,r.historyNavigation=!1,r.origin="client",r.referrer="client",r.referrerPolicy="",r.url=r.urlList[r.urlList.length-1],r.urlList=[r.url]),n.referrer!==void 0){let f=n.referrer;if(f==="")r.referrer="no-referrer";else{let m;try{m=new URL(f,s)}catch(y){throw new TypeError(`Referrer "${f}" is not a valid URL.`,{cause:y})}m.protocol==="about:"&&m.hostname==="client"||a&&!a8(m,this[si].settingsObject.baseUrl)?r.referrer="client":r.referrer=m}}n.referrerPolicy!==void 0&&(r.referrerPolicy=n.referrerPolicy);let l;if(n.mode!==void 0?l=n.mode:l=i,l==="navigate")throw ue.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(l!=null&&(r.mode=l),n.credentials!==void 0&&(r.credentials=n.credentials),n.cache!==void 0&&(r.cache=n.cache),r.cache==="only-if-cached"&&r.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(n.redirect!==void 0&&(r.redirect=n.redirect),n.integrity!==void 0&&n.integrity!=null&&(r.integrity=String(n.integrity)),n.keepalive!==void 0&&(r.keepalive=!!n.keepalive),n.method!==void 0){let f=n.method;if(!L_e(n.method))throw TypeError(`'${n.method}' is not a valid HTTP method.`);if(P_e.indexOf(f.toUpperCase())!==-1)throw TypeError(`'${n.method}' HTTP method is unsupported.`);f=O_e(n.method),r.method=f}n.signal!==void 0&&(o=n.signal),this[mt]=r;let c=new AbortController;if(this[hE]=c.signal,this[hE][si]=this[si],o!=null){if(!o||typeof o.aborted!="boolean"||typeof o.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(o.aborted)c.abort(o.reason);else{this[Z_e]=c;let f=new WeakRef(c),m=function(){let y=f.deref();y!==void 0&&y.abort(this.reason)};try{(typeof A8=="function"&&A8(o)===c8||X_e(o,"abort").length>=c8)&&l8(100,o)}catch{}dE.addAbortListener(o,m),$_e.register(c,{signal:o,abort:m})}}if(this[_n]=new wx,this[_n][sw]=r.headersList,this[_n][iw]="request",this[_n][si]=this[si],l==="no-cors"){if(!V_e.includes(r.method))throw new TypeError(`'${r.method} is unsupported in no-cors mode.`);this[_n][iw]="request-no-cors"}if(Object.keys(n).length!==0){let f=new wx(this[_n]);if(n.headers!==void 0&&(f=n.headers),this[_n][sw].clear(),f.constructor.name==="Headers")for(let[m,y]of f)this[_n].append(m,y);else M_e(this[_n],f)}let u=e instanceof t?e[mt].body:null;if((n.body!=null||u!=null)&&(r.method==="GET"||r.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let h=null;if(n.body!=null){let[f,m]=k_e(n.body,r.keepalive);h=f,m&&!this[_n][sw].contains("content-type")&&this[_n].append("content-type",m)}let d=h??u;if(d!=null&&d.source==null){if(h!=null&&n.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(r.mode!=="same-origin"&&r.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');r.useCORSPreflightFlag=!0}let g=d;if(h==null&&u!=null){if(dE.isDisturbed(u.stream)||u.stream.locked)throw new TypeError("Cannot construct a Request with a Request object that has already been used.");_x||(_x=B("stream/web").TransformStream);let f=new _x;u.stream.pipeThrough(f),g={source:u.source,length:u.length,stream:f.readable}}this[mt].body=g}get method(){return ue.brandCheck(this,t),this[mt].method}get url(){return ue.brandCheck(this,t),j_e(this[mt].url)}get headers(){return ue.brandCheck(this,t),this[_n]}get destination(){return ue.brandCheck(this,t),this[mt].destination}get referrer(){return ue.brandCheck(this,t),this[mt].referrer==="no-referrer"?"":this[mt].referrer==="client"?"about:client":this[mt].referrer.toString()}get referrerPolicy(){return ue.brandCheck(this,t),this[mt].referrerPolicy}get mode(){return ue.brandCheck(this,t),this[mt].mode}get credentials(){return this[mt].credentials}get cache(){return ue.brandCheck(this,t),this[mt].cache}get redirect(){return ue.brandCheck(this,t),this[mt].redirect}get integrity(){return ue.brandCheck(this,t),this[mt].integrity}get keepalive(){return ue.brandCheck(this,t),this[mt].keepalive}get isReloadNavigation(){return ue.brandCheck(this,t),this[mt].reloadNavigation}get isHistoryNavigation(){return ue.brandCheck(this,t),this[mt].historyNavigation}get signal(){return ue.brandCheck(this,t),this[hE]}get body(){return ue.brandCheck(this,t),this[mt].body?this[mt].body.stream:null}get bodyUsed(){return ue.brandCheck(this,t),!!this[mt].body&&dE.isDisturbed(this[mt].body.stream)}get duplex(){return ue.brandCheck(this,t),"half"}clone(){if(ue.brandCheck(this,t),this.bodyUsed||this.body?.locked)throw new TypeError("unusable");let e=eve(this[mt]),n=new t(u8);n[mt]=e,n[si]=this[si],n[_n]=new wx,n[_n][sw]=e.headersList,n[_n][iw]=this[_n][iw],n[_n][si]=this[_n][si];let r=new AbortController;return this.signal.aborted?r.abort(this.signal.reason):dE.addAbortListener(this.signal,()=>{r.abort(this.signal.reason)}),n[hE]=r.signal,n}};N_e(nc);function ow(t){let e=se(M({method:"GET",localURLsOnly:!1,unsafeRequest:!1,body:null,client:null,reservedClient:null,replacesClientId:"",window:"client",keepalive:!1,serviceWorkers:"all",initiator:"",destination:"",priority:null,origin:"client",policyContainer:"client",referrer:"client",referrerPolicy:"",mode:"no-cors",useCORSPreflightFlag:!1,credentials:"same-origin",useCredentials:!1,cache:"default",redirect:"follow",integrity:"",cryptoGraphicsNonceMetadata:"",parserMetadata:"",reloadNavigation:!1,historyNavigation:!1,userActivation:!1,taintedOrigin:!1,redirectCount:0,responseTainting:"basic",preventNoCacheCacheControlHeaderModification:!1,done:!1,timingAllowFailed:!1},t),{headersList:t.headersList?new o8(t.headersList):new o8});return e.url=e.urlList[0],e}function eve(t){let e=ow(se(M({},t),{body:null}));return t.body!=null&&(e.body=F_e(t.body)),e}Object.defineProperties(nc.prototype,{method:an,url:an,headers:an,redirect:an,clone:an,signal:an,duplex:an,destination:an,body:an,bodyUsed:an,isHistoryNavigation:an,isReloadNavigation:an,keepalive:an,integrity:an,cache:an,credentials:an,attribute:an,referrerPolicy:an,referrer:an,mode:an,[Symbol.toStringTag]:{value:"Request",configurable:!0}});ue.converters.Request=ue.interfaceConverter(nc);ue.converters.RequestInfo=function(t){return typeof t=="string"?ue.converters.USVString(t):t instanceof nc?ue.converters.Request(t):ue.converters.USVString(t)};ue.converters.AbortSignal=ue.interfaceConverter(AbortSignal);ue.converters.RequestInit=ue.dictionaryConverter([{key:"method",converter:ue.converters.ByteString},{key:"headers",converter:ue.converters.HeadersInit},{key:"body",converter:ue.nullableConverter(ue.converters.BodyInit)},{key:"referrer",converter:ue.converters.USVString},{key:"referrerPolicy",converter:ue.converters.DOMString,allowedValues:G_e},{key:"mode",converter:ue.converters.DOMString,allowedValues:H_e},{key:"credentials",converter:ue.converters.DOMString,allowedValues:Y_e},{key:"cache",converter:ue.converters.DOMString,allowedValues:J_e},{key:"redirect",converter:ue.converters.DOMString,allowedValues:q_e},{key:"integrity",converter:ue.converters.DOMString},{key:"keepalive",converter:ue.converters.boolean},{key:"signal",converter:ue.nullableConverter(t=>ue.converters.AbortSignal(t,{strict:!1}))},{key:"window",converter:ue.converters.any},{key:"duplex",converter:ue.converters.DOMString,allowedValues:W_e}]);h8.exports={Request:nc,makeRequest:ow}});var dw=C((SLe,v8)=>{"use strict";var{Response:tve,makeNetworkError:st,makeAppropriateNetworkError:aw,filterResponse:vx,makeResponse:Aw}=rw(),{Headers:d8}=tc(),{Request:nve,makeRequest:rve}=gE(),fE=B("zlib"),{bytesMatch:ive,makePolicyContainer:sve,clonePolicyContainer:ove,requestBadPort:ave,TAOCheck:Ave,appendRequestOriginHeader:lve,responseLocationURL:cve,requestCurrentURL:Ao,setRequestReferrerPolicyOnRedirect:uve,tryUpgradeRequestToAPotentiallyTrustworthyURL:hve,createOpaqueTimingInfo:xx,appendFetchMetadata:dve,corsCheck:gve,crossOriginResourcePolicyCheck:fve,determineRequestsReferrer:pve,coarsenedSharedCurrentTime:Lx,createDeferredPromise:Eve,isBlobLike:mve,sameOrigin:kx,isCancelled:ad,isAborted:g8,isErrorLike:Cve,fullyReadBody:m8,readableStreamClose:Ive,isomorphicEncode:Nx,urlIsLocal:yve,urlIsHttpHttpsScheme:Ox,urlHasHttpsScheme:Bve}=ki(),{kState:Fx,kHeaders:Sx,kGuard:Qve,kRealm:f8}=Lo(),Ad=B("assert"),{safelyExtractBody:lw}=Hp(),{redirectStatus:C8,nullBodyStatus:I8,safeMethods:wve,requestBodyHeader:_ve,subresource:vve,DOMException:cw}=fA(),{kHeadersList:Mx}=St(),Sve=B("events"),{Readable:bve,pipeline:Dve}=B("stream"),{addAbortListener:Rve,isErrored:Tve,isReadable:uw,nodeMajor:p8,nodeMinor:kve}=Ue(),{dataURLProcessor:Nve,serializeAMimeType:Fve}=ss(),{TransformStream:Mve}=B("stream/web"),{getGlobalDispatcher:xve}=rd(),{webidl:Lve}=fr(),{STATUS_CODES:Ove}=B("http"),bx,Dx=globalThis.ReadableStream,hw=class extends Sve{constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing",this.setMaxListeners(21)}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new cw("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function Uve(t,e={}){Lve.argumentLengthCheck(arguments,1,{header:"globalThis.fetch"});let n=Eve(),r;try{r=new nve(t,e)}catch(h){return n.reject(h),n.promise}let i=r[Fx];if(r.signal.aborted)return Rx(n,i,null,r.signal.reason),n.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let o=null,a=null,A=!1,l=null;return Rve(r.signal,()=>{A=!0,Ad(l!=null),l.abort(r.signal.reason),Rx(n,i,o,r.signal.reason)}),l=B8({request:i,processResponseEndOfBody:h=>y8(h,"fetch"),processResponse:h=>{if(A)return Promise.resolve();if(h.aborted)return Rx(n,i,o,l.serializedAbortReason),Promise.resolve();if(h.type==="error")return n.reject(Object.assign(new TypeError("fetch failed"),{cause:h.error})),Promise.resolve();o=new tve,o[Fx]=h,o[f8]=a,o[Sx][Mx]=h.headersList,o[Sx][Qve]="immutable",o[Sx][f8]=a,n.resolve(o)},dispatcher:e.dispatcher??xve()}),n.promise}function y8(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let n=t.urlList[0],r=t.timingInfo,i=t.cacheState;Ox(n)&&r!==null&&(r.timingAllowPassed||(r=xx({startTime:r.startTime}),i=""),r.endTime=Lx(),t.timingInfo=r,Pve(r,n,e,globalThis,i))}function Pve(t,e,n,r,i){(p8>18||p8===18&&kve>=2)&&performance.markResourceTiming(t,e.href,n,r,i)}function Rx(t,e,n,r){if(r||(r=new cw("The operation was aborted.","AbortError")),t.reject(r),e.body!=null&&uw(e.body?.stream)&&e.body.stream.cancel(r).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s}),n==null)return;let i=n[Fx];i.body!=null&&uw(i.body?.stream)&&i.body.stream.cancel(r).catch(s=>{if(s.code!=="ERR_INVALID_STATE")throw s})}function B8({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseEndOfBody:i,processResponseConsumeBody:s,useParallelQueue:o=!1,dispatcher:a}){let A=null,l=!1;t.client!=null&&(A=t.client.globalObject,l=t.client.crossOriginIsolatedCapability);let c=Lx(l),u=xx({startTime:c}),h={controller:new hw(a),request:t,timingInfo:u,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseConsumeBody:s,processResponseEndOfBody:i,taskDestination:A,crossOriginIsolatedCapability:l};return Ad(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client?.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=ove(t.client.policyContainer):t.policyContainer=sve()),t.headersList.contains("accept")||t.headersList.append("accept","*/*"),t.headersList.contains("accept-language")||t.headersList.append("accept-language","*"),t.priority,vve.includes(t.destination),Q8(h).catch(d=>{h.controller.terminate(d)}),h.controller}function Q8(t,e=!1){return E(this,null,function*(){let n=t.request,r=null;if(n.localURLsOnly&&!yve(Ao(n))&&(r=st("local URLs only")),hve(n),ave(n)==="blocked"&&(r=st("bad port")),n.referrerPolicy===""&&(n.referrerPolicy=n.policyContainer.referrerPolicy),n.referrer!=="no-referrer"&&(n.referrer=pve(n)),r===null&&(r=yield E(this,null,function*(){let s=Ao(n);return kx(s,n.url)&&n.responseTainting==="basic"||s.protocol==="data:"||n.mode==="navigate"||n.mode==="websocket"?(n.responseTainting="basic",yield E8(t)):n.mode==="same-origin"?st('request mode cannot be "same-origin"'):n.mode==="no-cors"?n.redirect!=="follow"?st('redirect mode cannot be "follow" for "no-cors" request'):(n.responseTainting="opaque",yield E8(t)):Ox(Ao(n))?(n.responseTainting="cors",yield w8(t)):st("URL scheme must be a HTTP(S) scheme")})),e)return r;r.status!==0&&!r.internalResponse&&(n.responseTainting,n.responseTainting==="basic"?r=vx(r,"basic"):n.responseTainting==="cors"?r=vx(r,"cors"):n.responseTainting==="opaque"?r=vx(r,"opaque"):Ad(!1));let i=r.status===0?r:r.internalResponse;if(i.urlList.length===0&&i.urlList.push(...n.urlList),n.timingAllowFailed||(r.timingAllowPassed=!0),r.type==="opaque"&&i.status===206&&i.rangeRequested&&!n.headers.contains("range")&&(r=i=st()),r.status!==0&&(n.method==="HEAD"||n.method==="CONNECT"||I8.includes(i.status))&&(i.body=null,t.controller.dump=!0),n.integrity){let s=a=>Tx(t,st(a));if(n.responseTainting==="opaque"||r.body==null){s(r.error);return}let o=a=>{if(!ive(a,n.integrity)){s("integrity mismatch");return}r.body=lw(a)[0],Tx(t,r)};yield m8(r.body,o,s)}else Tx(t,r)})}function E8(t){if(ad(t)&&t.request.redirectCount===0)return Promise.resolve(aw(t));let{request:e}=t,{protocol:n}=Ao(e);switch(n){case"about:":return Promise.resolve(st("about scheme is not supported"));case"blob:":{bx||(bx=B("buffer").resolveObjectURL);let r=Ao(e);if(r.search.length!==0)return Promise.resolve(st("NetworkError when attempting to fetch resource."));let i=bx(r.toString());if(e.method!=="GET"||!mve(i))return Promise.resolve(st("invalid method"));let s=lw(i),o=s[0],a=Nx(`${o.length}`),A=s[1]??"",l=Aw({statusText:"OK",headersList:[["content-length",{name:"Content-Length",value:a}],["content-type",{name:"Content-Type",value:A}]]});return l.body=o,Promise.resolve(l)}case"data:":{let r=Ao(e),i=Nve(r);if(i==="failure")return Promise.resolve(st("failed to fetch the data URL"));let s=Fve(i.mimeType);return Promise.resolve(Aw({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:s}]],body:lw(i.body)[0]}))}case"file:":return Promise.resolve(st("not implemented... yet..."));case"http:":case"https:":return w8(t).catch(r=>st(r));default:return Promise.resolve(st("unknown scheme"))}}function Vve(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}function Tx(t,e){e.type==="error"&&(e.urlList=[t.request.urlList[0]],e.timingInfo=xx({startTime:t.timingInfo.startTime}));let n=()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e))};if(t.processResponse!=null&&queueMicrotask(()=>t.processResponse(e)),e.body==null)n();else{let r=(s,o)=>{o.enqueue(s)},i=new Mve({start(){},transform:r,flush:n},{size(){return 1}},{size(){return 1}});e.body={stream:e.body.stream.pipeThrough(i)}}if(t.processResponseConsumeBody!=null){let r=s=>t.processResponseConsumeBody(e,s),i=s=>t.processResponseConsumeBody(e,s);if(e.body==null)queueMicrotask(()=>r(null));else return m8(e.body,r,i);return Promise.resolve()}}function w8(t){return E(this,null,function*(){let e=t.request,n=null,r=null,i=t.timingInfo;if(e.serviceWorkers,n===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),r=n=yield _8(t),e.responseTainting==="cors"&&gve(e,n)==="failure")return st("cors failure");Ave(e,n)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||n.type==="opaque")&&fve(e.origin,e.client,e.destination,r)==="blocked"?st("blocked"):(C8.includes(r.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(),e.redirect==="error"?n=st("unexpected redirect"):e.redirect==="manual"?n=r:e.redirect==="follow"?n=yield Gve(t,n):Ad(!1)),n.timingInfo=i,n)})}function Gve(t,e){let n=t.request,r=e.internalResponse?e.internalResponse:e,i;try{if(i=cve(r,Ao(n).hash),i==null)return e}catch(o){return Promise.resolve(st(o))}if(!Ox(i))return Promise.resolve(st("URL scheme must be a HTTP(S) scheme"));if(n.redirectCount===20)return Promise.resolve(st("redirect count exceeded"));if(n.redirectCount+=1,n.mode==="cors"&&(i.username||i.password)&&!kx(n,i))return Promise.resolve(st('cross origin not allowed for request mode "cors"'));if(n.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(st('URL cannot contain credentials for request mode "cors"'));if(r.status!==303&&n.body!=null&&n.body.source==null)return Promise.resolve(st());if([301,302].includes(r.status)&&n.method==="POST"||r.status===303&&!["GET","HEAD"].includes(n.method)){n.method="GET",n.body=null;for(let o of _ve)n.headersList.delete(o)}kx(Ao(n),i)||(n.headersList.delete("authorization"),n.headersList.delete("cookie"),n.headersList.delete("host")),n.body!=null&&(Ad(n.body.source!=null),n.body=lw(n.body.source)[0]);let s=t.timingInfo;return s.redirectEndTime=s.postRedirectStartTime=Lx(t.crossOriginIsolatedCapability),s.redirectStartTime===0&&(s.redirectStartTime=s.startTime),n.urlList.push(i),uve(n,r),Q8(t,!0)}function _8(t,e=!1,n=!1){return E(this,null,function*(){let r=t.request,i=null,s=null,o=null,a=null,A=!1;r.window==="no-window"&&r.redirect==="error"?(i=t,s=r):(s=rve(r),i=M({},t),i.request=s);let l=r.credentials==="include"||r.credentials==="same-origin"&&r.responseTainting==="basic",c=s.body?s.body.length:null,u=null;if(s.body==null&&["POST","PUT"].includes(s.method)&&(u="0"),c!=null&&(u=Nx(`${c}`)),u!=null&&s.headersList.append("content-length",u),c!=null&&s.keepalive,s.referrer instanceof URL&&s.headersList.append("referer",Nx(s.referrer.href)),lve(s),dve(s),s.headersList.contains("user-agent")||s.headersList.append("user-agent",typeof esbuildDetection>"u"?"undici":"node"),s.cache==="default"&&(s.headersList.contains("if-modified-since")||s.headersList.contains("if-none-match")||s.headersList.contains("if-unmodified-since")||s.headersList.contains("if-match")||s.headersList.contains("if-range"))&&(s.cache="no-store"),s.cache==="no-cache"&&!s.preventNoCacheCacheControlHeaderModification&&!s.headersList.contains("cache-control")&&s.headersList.append("cache-control","max-age=0"),(s.cache==="no-store"||s.cache==="reload")&&(s.headersList.contains("pragma")||s.headersList.append("pragma","no-cache"),s.headersList.contains("cache-control")||s.headersList.append("cache-control","no-cache")),s.headersList.contains("range")&&s.headersList.append("accept-encoding","identity"),s.headersList.contains("accept-encoding")||(Bve(Ao(s))?s.headersList.append("accept-encoding","br, gzip, deflate"):s.headersList.append("accept-encoding","gzip, deflate")),s.headersList.delete("host"),a==null&&(s.cache="no-store"),s.mode!=="no-store"&&s.mode,o==null){if(s.mode==="only-if-cached")return st("only if cached");let h=yield qve(i,l,n);!wve.includes(s.method)&&h.status>=200&&h.status<=399,A&&h.status,o==null&&(o=h)}if(o.urlList=[...s.urlList],s.headersList.contains("range")&&(o.rangeRequested=!0),o.requestIncludesCredentials=l,o.status===407)return r.window==="no-window"?st():ad(t)?aw(t):st("proxy authentication required");if(o.status===421&&!n&&(r.body==null||r.body.source!=null)){if(ad(t))return aw(t);t.controller.connection.destroy(),o=yield _8(t,e,!0)}return o})}function qve(t,e=!1,n=!1){return E(this,null,function*(){Ad(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(f){this.destroyed||(this.destroyed=!0,this.abort?.(f??new cw("The operation was aborted.","AbortError")))}};let r=t.request,i=null,s=t.timingInfo;null==null&&(r.cache="no-store");let a=n?"yes":"no";r.mode;let A=null;if(r.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(r.body!=null){let f=function(I){return us(this,null,function*(){ad(t)||(yield I,t.processRequestBodyChunkLength?.(I.byteLength))})},m=()=>{ad(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},y=I=>{ad(t)||(I.name==="AbortError"?t.controller.abort():t.controller.terminate(I))};A=function(){return us(this,null,function*(){try{try{for(var I=Pn(r.body.stream),w,_,S;w=!(_=yield new cc(I.next())).done;w=!1){let T=_.value;yield*SA(f(T))}}catch{S=[_]}finally{try{w&&(_=I.return)&&(yield new cc(_.call(I)))}finally{if(S)throw S[0]}}m()}catch(T){y(T)}})}()}try{let{body:f,status:m,statusText:y,headersList:I,socket:w}=yield d({body:A});if(w)i=Aw({status:m,statusText:y,headersList:I,socket:w});else{let _=f[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=Aw({status:m,statusText:y,headersList:I})}}catch(f){return f.name==="AbortError"?(t.controller.connection.destroy(),aw(t,f)):st(f)}let l=()=>{t.controller.resume()},c=f=>{t.controller.abort(f)};Dx||(Dx=B("stream/web").ReadableStream);let u=new Dx({start(f){return E(this,null,function*(){t.controller.controller=f})},pull(f){return E(this,null,function*(){yield l(f)})},cancel(f){return E(this,null,function*(){yield c(f)})}},{highWaterMark:0,size(){return 1}});i.body={stream:u},t.controller.on("terminated",h),t.controller.resume=()=>E(this,null,function*(){for(;;){let f,m;try{let{done:y,value:I}=yield t.controller.next();if(g8(t))break;f=y?void 0:I}catch(y){t.controller.ended&&!s.encodedBodySize?f=void 0:(f=y,m=!0)}if(f===void 0){Ive(t.controller.controller),Vve(t,i);return}if(s.decodedBodySize+=f?.byteLength??0,m){t.controller.terminate(f);return}if(t.controller.controller.enqueue(new Uint8Array(f)),Tve(u)){t.controller.terminate();return}if(!t.controller.controller.desiredSize)return}});function h(f){g8(t)?(i.aborted=!0,uw(u)&&t.controller.controller.error(t.controller.serializedAbortReason)):uw(u)&&t.controller.controller.error(new TypeError("terminated",{cause:Cve(f)?f:void 0})),t.controller.connection.destroy()}return i;function d(m){return E(this,arguments,function*({body:f}){let y=Ao(r),I=t.controller.dispatcher;return new Promise((w,_)=>I.dispatch({path:y.pathname+y.search,origin:y.origin,method:r.method,body:t.controller.dispatcher.isMockActive?r.body&&r.body.source:f,headers:r.headersList.entries,maxRedirections:0,upgrade:r.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(S){let{connection:T}=t.controller;T.destroyed?S(new cw("The operation was aborted.","AbortError")):(t.controller.on("terminated",S),this.abort=T.abort=S)},onHeaders(S,T,oe,Qe){if(S<200)return;let Pe=[],Re="",b=new d8;if(Array.isArray(T))for(let p=0;p<T.length;p+=2){let U=T[p+0].toString("latin1"),Ie=T[p+1].toString("latin1");U.toLowerCase()==="content-encoding"?Pe=Ie.toLowerCase().split(",").map($e=>$e.trim()):U.toLowerCase()==="location"&&(Re=Ie),b.append(U,Ie)}else{let p=Object.keys(T);for(let U of p){let Ie=T[U];U.toLowerCase()==="content-encoding"?Pe=Ie.toLowerCase().split(",").map($e=>$e.trim()).reverse():U.toLowerCase()==="location"&&(Re=Ie),b.append(U,Ie)}}this.body=new bve({read:oe});let Fe=[],R=r.redirect==="follow"&&Re&&C8.includes(S);if(r.method!=="HEAD"&&r.method!=="CONNECT"&&!I8.includes(S)&&!R)for(let p of Pe)if(p==="x-gzip"||p==="gzip")Fe.push(fE.createGunzip({flush:fE.constants.Z_SYNC_FLUSH,finishFlush:fE.constants.Z_SYNC_FLUSH}));else if(p==="deflate")Fe.push(fE.createInflate());else if(p==="br")Fe.push(fE.createBrotliDecompress());else{Fe.length=0;break}return w({status:S,statusText:Qe,headersList:b[Mx],body:Fe.length?Dve(this.body,...Fe,()=>{}):this.body.on("error",()=>{})}),!0},onData(S){if(t.controller.dump)return;let T=S;return s.encodedBodySize+=T.byteLength,this.body.push(T)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.ended=!0,this.body.push(null)},onError(S){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(S),t.controller.terminate(S),_(S)},onUpgrade(S,T,oe){if(S!==101)return;let Qe=new d8;for(let Pe=0;Pe<T.length;Pe+=2){let Re=T[Pe+0].toString("latin1"),b=T[Pe+1].toString("latin1");Qe.append(Re,b)}return w({status:S,statusText:Ove[S],headersList:Qe[Mx],socket:oe}),!0}}))})}})}v8.exports={fetch:Uve,Fetch:hw,fetching:B8,finalizeAndReportTiming:y8}});var Ux=C((DLe,S8)=>{"use strict";S8.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var D8=C((RLe,b8)=>{"use strict";var{webidl:oi}=fr(),gw=Symbol("ProgressEvent state"),Px=class t extends Event{constructor(e,n={}){e=oi.converters.DOMString(e),n=oi.converters.ProgressEventInit(n??{}),super(e,n),this[gw]={lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total}}get lengthComputable(){return oi.brandCheck(this,t),this[gw].lengthComputable}get loaded(){return oi.brandCheck(this,t),this[gw].loaded}get total(){return oi.brandCheck(this,t),this[gw].total}};oi.converters.ProgressEventInit=oi.dictionaryConverter([{key:"lengthComputable",converter:oi.converters.boolean,defaultValue:!1},{key:"loaded",converter:oi.converters["unsigned long long"],defaultValue:0},{key:"total",converter:oi.converters["unsigned long long"],defaultValue:0},{key:"bubbles",converter:oi.converters.boolean,defaultValue:!1},{key:"cancelable",converter:oi.converters.boolean,defaultValue:!1},{key:"composed",converter:oi.converters.boolean,defaultValue:!1}]);b8.exports={ProgressEvent:Px}});var T8=C((TLe,R8)=>{"use strict";function Hve(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}R8.exports={getEncoding:Hve}});var U8=C((kLe,O8)=>{"use strict";var{kState:ld,kError:Vx,kResult:k8,kAborted:pE,kLastProgressEventFired:Gx}=Ux(),{ProgressEvent:Yve}=D8(),{getEncoding:N8}=T8(),{DOMException:Jve}=fA(),{serializeAMimeType:Wve,parseMIMEType:F8}=ss(),{types:zve}=B("util"),{StringDecoder:M8}=B("string_decoder"),{btoa:x8}=B("buffer"),jve={enumerable:!0,writable:!1,configurable:!1};function Kve(t,e,n,r){if(t[ld]==="loading")throw new Jve("Invalid state","InvalidStateError");t[ld]="loading",t[k8]=null,t[Vx]=null;let s=e.stream().getReader(),o=[],a=s.read(),A=!0;E(this,null,function*(){for(;!t[pE];)try{let{done:l,value:c}=yield a;if(A&&!t[pE]&&queueMicrotask(()=>{QA("loadstart",t)}),A=!1,!l&&zve.isUint8Array(c))o.push(c),(t[Gx]===void 0||Date.now()-t[Gx]>=50)&&!t[pE]&&(t[Gx]=Date.now(),queueMicrotask(()=>{QA("progress",t)})),a=s.read();else if(l){queueMicrotask(()=>{t[ld]="done";try{let u=Xve(o,n,e.type,r);if(t[pE])return;t[k8]=u,QA("load",t)}catch(u){t[Vx]=u,QA("error",t)}t[ld]!=="loading"&&QA("loadend",t)});break}}catch(l){if(t[pE])return;queueMicrotask(()=>{t[ld]="done",t[Vx]=l,QA("error",t),t[ld]!=="loading"&&QA("loadend",t)});break}})}function QA(t,e){let n=new Yve(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}function Xve(t,e,n,r){switch(e){case"DataURL":{let i="data:",s=F8(n||"application/octet-stream");s!=="failure"&&(i+=Wve(s)),i+=";base64,";let o=new M8("latin1");for(let a of t)i+=x8(o.write(a));return i+=x8(o.end()),i}case"Text":{let i="failure";if(r&&(i=N8(r)),i==="failure"&&n){let s=F8(n);s!=="failure"&&(i=N8(s.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),Zve(t,i)}case"ArrayBuffer":return L8(t).buffer;case"BinaryString":{let i="",s=new M8("latin1");for(let o of t)i+=s.write(o);return i+=s.end(),i}}}function Zve(t,e){let n=L8(t),r=$ve(n),i=0;r!==null&&(e=r,i=r==="UTF-8"?3:2);let s=n.slice(i);return new TextDecoder(e).decode(s)}function $ve(t){let[e,n,r]=t;return e===239&&n===187&&r===191?"UTF-8":e===254&&n===255?"UTF-16BE":e===255&&n===254?"UTF-16LE":null}function L8(t){let e=t.reduce((r,i)=>r+i.byteLength,0),n=0;return t.reduce((r,i)=>(r.set(i,n),n+=i.byteLength,r),new Uint8Array(e))}O8.exports={staticPropertyDescriptors:jve,readOperation:Kve,fireAProgressEvent:QA}});var q8=C((FLe,G8)=>{"use strict";var{staticPropertyDescriptors:cd,readOperation:fw,fireAProgressEvent:P8}=U8(),{kState:rc,kError:V8,kResult:pw,kEvents:We,kAborted:eSe}=Ux(),{webidl:tt}=fr(),{kEnumerableProperty:kr}=Ue(),As=class t extends EventTarget{constructor(){super(),this[rc]="empty",this[pw]=null,this[V8]=null,this[We]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){tt.brandCheck(this,t),tt.argumentLengthCheck(arguments,1,{header:"FileReader.readAsArrayBuffer"}),e=tt.converters.Blob(e,{strict:!1}),fw(this,e,"ArrayBuffer")}readAsBinaryString(e){tt.brandCheck(this,t),tt.argumentLengthCheck(arguments,1,{header:"FileReader.readAsBinaryString"}),e=tt.converters.Blob(e,{strict:!1}),fw(this,e,"BinaryString")}readAsText(e,n=void 0){tt.brandCheck(this,t),tt.argumentLengthCheck(arguments,1,{header:"FileReader.readAsText"}),e=tt.converters.Blob(e,{strict:!1}),n!==void 0&&(n=tt.converters.DOMString(n)),fw(this,e,"Text",n)}readAsDataURL(e){tt.brandCheck(this,t),tt.argumentLengthCheck(arguments,1,{header:"FileReader.readAsDataURL"}),e=tt.converters.Blob(e,{strict:!1}),fw(this,e,"DataURL")}abort(){if(this[rc]==="empty"||this[rc]==="done"){this[pw]=null;return}this[rc]==="loading"&&(this[rc]="done",this[pw]=null),this[eSe]=!0,P8("abort",this),this[rc]!=="loading"&&P8("loadend",this)}get readyState(){switch(tt.brandCheck(this,t),this[rc]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return tt.brandCheck(this,t),this[pw]}get error(){return tt.brandCheck(this,t),this[V8]}get onloadend(){return tt.brandCheck(this,t),this[We].loadend}set onloadend(e){tt.brandCheck(this,t),this[We].loadend&&this.removeEventListener("loadend",this[We].loadend),typeof e=="function"?(this[We].loadend=e,this.addEventListener("loadend",e)):this[We].loadend=null}get onerror(){return tt.brandCheck(this,t),this[We].error}set onerror(e){tt.brandCheck(this,t),this[We].error&&this.removeEventListener("error",this[We].error),typeof e=="function"?(this[We].error=e,this.addEventListener("error",e)):this[We].error=null}get onloadstart(){return tt.brandCheck(this,t),this[We].loadstart}set onloadstart(e){tt.brandCheck(this,t),this[We].loadstart&&this.removeEventListener("loadstart",this[We].loadstart),typeof e=="function"?(this[We].loadstart=e,this.addEventListener("loadstart",e)):this[We].loadstart=null}get onprogress(){return tt.brandCheck(this,t),this[We].progress}set onprogress(e){tt.brandCheck(this,t),this[We].progress&&this.removeEventListener("progress",this[We].progress),typeof e=="function"?(this[We].progress=e,this.addEventListener("progress",e)):this[We].progress=null}get onload(){return tt.brandCheck(this,t),this[We].load}set onload(e){tt.brandCheck(this,t),this[We].load&&this.removeEventListener("load",this[We].load),typeof e=="function"?(this[We].load=e,this.addEventListener("load",e)):this[We].load=null}get onabort(){return tt.brandCheck(this,t),this[We].abort}set onabort(e){tt.brandCheck(this,t),this[We].abort&&this.removeEventListener("abort",this[We].abort),typeof e=="function"?(this[We].abort=e,this.addEventListener("abort",e)):this[We].abort=null}};As.EMPTY=As.prototype.EMPTY=0;As.LOADING=As.prototype.LOADING=1;As.DONE=As.prototype.DONE=2;Object.defineProperties(As.prototype,{EMPTY:cd,LOADING:cd,DONE:cd,readAsArrayBuffer:kr,readAsBinaryString:kr,readAsText:kr,readAsDataURL:kr,abort:kr,readyState:kr,result:kr,error:kr,onloadstart:kr,onprogress:kr,onload:kr,onabort:kr,onerror:kr,onloadend:kr,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(As,{EMPTY:cd,LOADING:cd,DONE:cd});G8.exports={FileReader:As}});var Ew=C((MLe,H8)=>{"use strict";H8.exports={kConstruct:Symbol("constructable")}});var W8=C((xLe,J8)=>{"use strict";var tSe=B("assert"),{URLSerializer:Y8}=ss(),{isValidHeaderName:nSe}=ki();function rSe(t,e,n=!1){let r=Y8(t,n),i=Y8(e,n);return r===i}function iSe(t){tSe(t!==null);let e=[];for(let n of t.split(",")){if(n=n.trim(),n.length){if(!nSe(n))continue}else continue;e.push(n)}return e}J8.exports={urlEquals:rSe,fieldValues:iSe}});var $8=C((LLe,Z8)=>{"use strict";var{kConstruct:sSe}=Ew(),{urlEquals:oSe,fieldValues:qx}=W8(),{kEnumerableProperty:ic,isDisturbed:aSe}=Ue(),{kHeadersList:z8}=St(),{webidl:Ae}=fr(),{Response:K8,cloneResponse:ASe}=rw(),{Request:lo}=gE(),{kState:Cr,kHeaders:mw,kGuard:j8,kRealm:lSe}=Lo(),{fetching:cSe}=dw(),{urlIsHttpHttpsScheme:Cw,createDeferredPromise:ud,readAllBytes:uSe}=ki(),Hx=B("assert"),{getGlobalDispatcher:hSe}=rd(),Iw=class t{#e;constructor(){arguments[0]!==sSe&&Ae.illegalConstructor(),this.#e=arguments[1]}match(r){return E(this,arguments,function*(e,n={}){Ae.brandCheck(this,t),Ae.argumentLengthCheck(arguments,1,{header:"Cache.match"}),e=Ae.converters.RequestInfo(e),n=Ae.converters.CacheQueryOptions(n);let i=yield this.matchAll(e,n);if(i.length!==0)return i[0]})}matchAll(){return E(this,arguments,function*(e=void 0,n={}){Ae.brandCheck(this,t),e!==void 0&&(e=Ae.converters.RequestInfo(e)),n=Ae.converters.CacheQueryOptions(n);let r=null;if(e!==void 0)if(e instanceof lo){if(r=e[Cr],r.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(r=new lo(e)[Cr]);let i=[];if(e===void 0)for(let o of this.#e)i.push(o[1]);else{let o=this.#r(r,n);for(let a of o)i.push(a[1])}let s=[];for(let o of i){let a=new K8(o.body?.source??null),A=a[Cr].body;a[Cr]=o,a[Cr].body=A,a[mw][z8]=o.headersList,a[mw][j8]="immutable",s.push(a)}return Object.freeze(s)})}add(n){return E(this,arguments,function*(e){Ae.brandCheck(this,t),Ae.argumentLengthCheck(arguments,1,{header:"Cache.add"}),e=Ae.converters.RequestInfo(e);let r=[e];return yield this.addAll(r)})}addAll(n){return E(this,arguments,function*(e){Ae.brandCheck(this,t),Ae.argumentLengthCheck(arguments,1,{header:"Cache.addAll"}),e=Ae.converters["sequence<RequestInfo>"](e);let r=[],i=[];for(let h of e){if(typeof h=="string")continue;let d=h[Cr];if(!Cw(d.url)||d.method!=="GET")throw Ae.errors.exception({header:"Cache.addAll",message:"Expected http/s scheme when method is not GET."})}let s=[];for(let h of e){let d=new lo(h)[Cr];if(!Cw(d.url))throw Ae.errors.exception({header:"Cache.addAll",message:"Expected http/s scheme."});d.initiator="fetch",d.destination="subresource",i.push(d);let g=ud();s.push(cSe({request:d,dispatcher:hSe(),processResponse(f){if(f.type==="error"||f.status===206||f.status<200||f.status>299)g.reject(Ae.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(f.headersList.contains("vary")){let m=qx(f.headersList.get("vary"));for(let y of m)if(y==="*"){g.reject(Ae.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let I of s)I.abort();return}}},processResponseEndOfBody(f){if(f.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(f)}})),r.push(g.promise)}let a=yield Promise.all(r),A=[],l=0;for(let h of a){let d={type:"put",request:i[l],response:h};A.push(d),l++}let c=ud(),u=null;try{this.#n(A)}catch(h){u=h}return queueMicrotask(()=>{u===null?c.resolve(void 0):c.reject(u)}),c.promise})}put(r,i){return E(this,arguments,function*(e,n){Ae.brandCheck(this,t),Ae.argumentLengthCheck(arguments,2,{header:"Cache.put"}),e=Ae.converters.RequestInfo(e),n=Ae.converters.Response(n);let s=null;if(e instanceof lo?s=e[Cr]:s=new lo(e)[Cr],!Cw(s.url)||s.method!=="GET")throw Ae.errors.exception({header:"Cache.put",message:"Expected an http/s scheme when method is not GET"});let o=n[Cr];if(o.status===206)throw Ae.errors.exception({header:"Cache.put",message:"Got 206 status"});if(o.headersList.contains("vary")){let g=qx(o.headersList.get("vary"));for(let f of g)if(f==="*")throw Ae.errors.exception({header:"Cache.put",message:"Got * vary field value"})}if(o.body&&(aSe(o.body.stream)||o.body.stream.locked))throw Ae.errors.exception({header:"Cache.put",message:"Response body is locked or disturbed"});let a=ASe(o),A=ud();if(o.body!=null){let f=o.body.stream.getReader();uSe(f).then(A.resolve,A.reject)}else A.resolve(void 0);let l=[],c={type:"put",request:s,response:a};l.push(c);let u=yield A.promise;a.body!=null&&(a.body.source=u);let h=ud(),d=null;try{this.#n(l)}catch(g){d=g}return queueMicrotask(()=>{d===null?h.resolve():h.reject(d)}),h.promise})}delete(r){return E(this,arguments,function*(e,n={}){Ae.brandCheck(this,t),Ae.argumentLengthCheck(arguments,1,{header:"Cache.delete"}),e=Ae.converters.RequestInfo(e),n=Ae.converters.CacheQueryOptions(n);let i=null;if(e instanceof lo){if(i=e[Cr],i.method!=="GET"&&!n.ignoreMethod)return!1}else Hx(typeof e=="string"),i=new lo(e)[Cr];let s=[],o={type:"delete",request:i,options:n};s.push(o);let a=ud(),A=null,l;try{l=this.#n(s)}catch(c){A=c}return queueMicrotask(()=>{A===null?a.resolve(!!l?.length):a.reject(A)}),a.promise})}keys(){return E(this,arguments,function*(e=void 0,n={}){Ae.brandCheck(this,t),e!==void 0&&(e=Ae.converters.RequestInfo(e)),n=Ae.converters.CacheQueryOptions(n);let r=null;if(e!==void 0)if(e instanceof lo){if(r=e[Cr],r.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(r=new lo(e)[Cr]);let i=ud(),s=[];if(e===void 0)for(let o of this.#e)s.push(o[0]);else{let o=this.#r(r,n);for(let a of o)s.push(a[0])}return queueMicrotask(()=>{let o=[];for(let a of s){let A=new lo("https://a");A[Cr]=a,A[mw][z8]=a.headersList,A[mw][j8]="immutable",A[lSe]=a.client,o.push(A)}i.resolve(Object.freeze(o))}),i.promise})}#n(e){let n=this.#e,r=[...n],i=[],s=[];try{for(let o of e){if(o.type!=="delete"&&o.type!=="put")throw Ae.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(o.type==="delete"&&o.response!=null)throw Ae.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#r(o.request,o.options,i).length)throw new DOMException("???","InvalidStateError");let a;if(o.type==="delete"){if(a=this.#r(o.request,o.options),a.length===0)return[];for(let A of a){let l=n.indexOf(A);Hx(l!==-1),n.splice(l,1)}}else if(o.type==="put"){if(o.response==null)throw Ae.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let A=o.request;if(!Cw(A.url))throw Ae.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(A.method!=="GET")throw Ae.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(o.options!=null)throw Ae.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});a=this.#r(o.request);for(let l of a){let c=n.indexOf(l);Hx(c!==-1),n.splice(c,1)}n.push([o.request,o.response]),i.push([o.request,o.response])}s.push([o.request,o.response])}return s}catch(o){throw this.#e.length=0,this.#e=r,o}}#r(e,n,r){let i=[],s=r??this.#e;for(let o of s){let[a,A]=o;this.#t(e,a,A,n)&&i.push(o)}return i}#t(e,n,r=null,i){let s=new URL(e.url),o=new URL(n.url);if(i?.ignoreSearch&&(o.search="",s.search=""),!oSe(s,o,!0))return!1;if(r==null||i?.ignoreVary||!r.headersList.contains("vary"))return!0;let a=qx(r.headersList.get("vary"));for(let A of a){if(A==="*")return!1;let l=n.headersList.get(A),c=e.headersList.get(A);if(l!==c)return!1}return!0}};Object.defineProperties(Iw.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:ic,matchAll:ic,add:ic,addAll:ic,put:ic,delete:ic,keys:ic});var X8=[{key:"ignoreSearch",converter:Ae.converters.boolean,defaultValue:!1},{key:"ignoreMethod",converter:Ae.converters.boolean,defaultValue:!1},{key:"ignoreVary",converter:Ae.converters.boolean,defaultValue:!1}];Ae.converters.CacheQueryOptions=Ae.dictionaryConverter(X8);Ae.converters.MultiCacheQueryOptions=Ae.dictionaryConverter([...X8,{key:"cacheName",converter:Ae.converters.DOMString}]);Ae.converters.Response=Ae.interfaceConverter(K8);Ae.converters["sequence<RequestInfo>"]=Ae.sequenceConverter(Ae.converters.RequestInfo);Z8.exports={Cache:Iw}});var t6=C((ULe,e6)=>{"use strict";var{kConstruct:EE}=Ew(),{Cache:yw}=$8(),{webidl:Ir}=fr(),{kEnumerableProperty:mE}=Ue(),Bw=class t{#e=new Map;constructor(){arguments[0]!==EE&&Ir.illegalConstructor()}match(r){return E(this,arguments,function*(e,n={}){if(Ir.brandCheck(this,t),Ir.argumentLengthCheck(arguments,1,{header:"CacheStorage.match"}),e=Ir.converters.RequestInfo(e),n=Ir.converters.MultiCacheQueryOptions(n),n.cacheName!=null){if(this.#e.has(n.cacheName)){let i=this.#e.get(n.cacheName);return yield new yw(EE,i).match(e,n)}}else for(let i of this.#e.values()){let o=yield new yw(EE,i).match(e,n);if(o!==void 0)return o}})}has(n){return E(this,arguments,function*(e){return Ir.brandCheck(this,t),Ir.argumentLengthCheck(arguments,1,{header:"CacheStorage.has"}),e=Ir.converters.DOMString(e),this.#e.has(e)})}open(n){return E(this,arguments,function*(e){if(Ir.brandCheck(this,t),Ir.argumentLengthCheck(arguments,1,{header:"CacheStorage.open"}),e=Ir.converters.DOMString(e),this.#e.has(e)){let i=this.#e.get(e);return new yw(EE,i)}let r=[];return this.#e.set(e,r),new yw(EE,r)})}delete(n){return E(this,arguments,function*(e){return Ir.brandCheck(this,t),Ir.argumentLengthCheck(arguments,1,{header:"CacheStorage.delete"}),e=Ir.converters.DOMString(e),this.#e.delete(e)})}keys(){return E(this,null,function*(){return Ir.brandCheck(this,t),[...this.#e.keys()]})}};Object.defineProperties(Bw.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:mE,has:mE,open:mE,delete:mE,keys:mE});e6.exports={CacheStorage:Bw}});var r6=C((VLe,n6)=>{"use strict";n6.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var Yx=C((GLe,o6)=>{"use strict";var i6=B("assert"),{kHeadersList:s6}=St();function dSe(t){if(t.length===0)return!1;for(let e of t){let n=e.charCodeAt(0);if(n>=0||n<=8||n>=10||n<=31||n===127)return!1}}function gSe(t){for(let e of t){let n=e.charCodeAt(0);if(n<=32||n>127||e==="("||e===")"||e===">"||e==="<"||e==="@"||e===","||e===";"||e===":"||e==="\\"||e==='"'||e==="/"||e==="["||e==="]"||e==="?"||e==="="||e==="{"||e==="}")throw new Error("Invalid cookie name")}}function fSe(t){for(let e of t){let n=e.charCodeAt(0);if(n<33||n===34||n===44||n===59||n===92||n>126)throw new Error("Invalid header value")}}function pSe(t){for(let e of t)if(e.charCodeAt(0)<33||e===";")throw new Error("Invalid cookie path")}function ESe(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}function mSe(t){typeof t=="number"&&(t=new Date(t));let e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=e[t.getUTCDay()],i=t.getUTCDate().toString().padStart(2,"0"),s=n[t.getUTCMonth()],o=t.getUTCFullYear(),a=t.getUTCHours().toString().padStart(2,"0"),A=t.getUTCMinutes().toString().padStart(2,"0"),l=t.getUTCSeconds().toString().padStart(2,"0");return`${r}, ${i} ${s} ${o} ${a}:${A}:${l} GMT`}function CSe(t){if(t<0)throw new Error("Invalid cookie max-age")}function ISe(t){if(t.name.length===0)return null;gSe(t.name),fSe(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(CSe(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(ESe(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(pSe(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${mSe(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let n of t.unparsed){if(!n.includes("="))throw new Error("Invalid unparsed");let[r,...i]=n.split("=");e.push(`${r.trim()}=${i.join("=")}`)}return e.join("; ")}var Qw;function ySe(t){if(t[s6])return t[s6];Qw||(Qw=Object.getOwnPropertySymbols(t).find(n=>n.description==="headers list"),i6(Qw,"Headers cannot be parsed"));let e=t[Qw];return i6(e),e}o6.exports={isCTLExcludingHtab:dSe,stringify:ISe,getHeadersList:ySe}});var A6=C((qLe,a6)=>{"use strict";var{maxNameValuePairSize:BSe,maxAttributeValueSize:QSe}=r6(),{isCTLExcludingHtab:wSe}=Yx(),{collectASequenceOfCodePointsFast:ww}=ss(),_Se=B("assert");function vSe(t){if(wSe(t))return null;let e="",n="",r="",i="";if(t.includes(";")){let s={position:0};e=ww(";",t,s),n=t.slice(s.position)}else e=t;if(!e.includes("="))i=e;else{let s={position:0};r=ww("=",e,s),i=e.slice(s.position+1)}return r=r.trim(),i=i.trim(),r.length+i.length>BSe?null:M({name:r,value:i},hd(n))}function hd(t,e={}){if(t.length===0)return e;_Se(t[0]===";"),t=t.slice(1);let n="";t.includes(";")?(n=ww(";",t,{position:0}),t=t.slice(n.length)):(n=t,t="");let r="",i="";if(n.includes("=")){let o={position:0};r=ww("=",n,o),i=n.slice(o.position+1)}else r=n;if(r=r.trim(),i=i.trim(),i.length>QSe)return hd(t,e);let s=r.toLowerCase();if(s==="expires"){let o=new Date(i);e.expires=o}else if(s==="max-age"){let o=i.charCodeAt(0);if((o<48||o>57)&&i[0]!=="-"||!/^\d+$/.test(i))return hd(t,e);let a=Number(i);e.maxAge=a}else if(s==="domain"){let o=i;o[0]==="."&&(o=o.slice(1)),o=o.toLowerCase(),e.domain=o}else if(s==="path"){let o="";i.length===0||i[0]!=="/"?o="/":o=i,e.path=o}else if(s==="secure")e.secure=!0;else if(s==="httponly")e.httpOnly=!0;else if(s==="samesite"){let o="Default",a=i.toLowerCase();a.includes("none")&&(o="None"),a.includes("strict")&&(o="Strict"),a.includes("lax")&&(o="Lax"),e.sameSite=o}else e.unparsed??=[],e.unparsed.push(`${r}=${i}`);return hd(t,e)}a6.exports={parseSetCookie:vSe,parseUnparsedAttributes:hd}});var h6=C((YLe,u6)=>{"use strict";var{parseSetCookie:SSe}=A6(),{stringify:l6,getHeadersList:bSe}=Yx(),{webidl:Ne}=fr(),{Headers:_w}=tc();function DSe(t){Ne.argumentLengthCheck(arguments,1,{header:"getCookies"}),Ne.brandCheck(t,_w,{strict:!1});let e=t.get("cookie"),n={};if(!e)return n;for(let r of e.split(";")){let[i,...s]=r.split("=");n[i.trim()]=s.join("=")}return n}function RSe(t,e,n){Ne.argumentLengthCheck(arguments,2,{header:"deleteCookie"}),Ne.brandCheck(t,_w,{strict:!1}),e=Ne.converters.DOMString(e),n=Ne.converters.DeleteCookieAttributes(n),c6(t,M({name:e,value:"",expires:new Date(0)},n))}function TSe(t){Ne.argumentLengthCheck(arguments,1,{header:"getSetCookies"}),Ne.brandCheck(t,_w,{strict:!1});let e=bSe(t).cookies;return e?e.map(n=>SSe(Array.isArray(n)?n[1]:n)):[]}function c6(t,e){Ne.argumentLengthCheck(arguments,2,{header:"setCookie"}),Ne.brandCheck(t,_w,{strict:!1}),e=Ne.converters.Cookie(e),l6(e)&&t.append("Set-Cookie",l6(e))}Ne.converters.DeleteCookieAttributes=Ne.dictionaryConverter([{converter:Ne.nullableConverter(Ne.converters.DOMString),key:"path",defaultValue:null},{converter:Ne.nullableConverter(Ne.converters.DOMString),key:"domain",defaultValue:null}]);Ne.converters.Cookie=Ne.dictionaryConverter([{converter:Ne.converters.DOMString,key:"name"},{converter:Ne.converters.DOMString,key:"value"},{converter:Ne.nullableConverter(t=>typeof t=="number"?Ne.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:null},{converter:Ne.nullableConverter(Ne.converters["long long"]),key:"maxAge",defaultValue:null},{converter:Ne.nullableConverter(Ne.converters.DOMString),key:"domain",defaultValue:null},{converter:Ne.nullableConverter(Ne.converters.DOMString),key:"path",defaultValue:null},{converter:Ne.nullableConverter(Ne.converters.boolean),key:"secure",defaultValue:null},{converter:Ne.nullableConverter(Ne.converters.boolean),key:"httpOnly",defaultValue:null},{converter:Ne.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Ne.sequenceConverter(Ne.converters.DOMString),key:"unparsed",defaultValue:[]}]);u6.exports={getCookies:DSe,deleteCookie:RSe,getSetCookies:TSe,setCookie:c6}});var dd=C((WLe,d6)=>{"use strict";var kSe="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",NSe={enumerable:!0,writable:!1,configurable:!1},FSe={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},MSe={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},xSe=2**16-1,LSe={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},OSe=Buffer.allocUnsafe(0);d6.exports={uid:kSe,staticPropertyDescriptors:NSe,states:FSe,opcodes:MSe,maxUnsigned16Bit:xSe,parserStates:LSe,emptyBuffer:OSe}});var CE=C((zLe,g6)=>{"use strict";g6.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var Wx=C((jLe,f6)=>{"use strict";var{webidl:le}=fr(),{kEnumerableProperty:Nr}=Ue(),{MessagePort:USe}=B("worker_threads"),vw=class t extends Event{#e;constructor(e,n={}){le.argumentLengthCheck(arguments,1,{header:"MessageEvent constructor"}),e=le.converters.DOMString(e),n=le.converters.MessageEventInit(n),super(e,n),this.#e=n}get data(){return le.brandCheck(this,t),this.#e.data}get origin(){return le.brandCheck(this,t),this.#e.origin}get lastEventId(){return le.brandCheck(this,t),this.#e.lastEventId}get source(){return le.brandCheck(this,t),this.#e.source}get ports(){return le.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,n=!1,r=!1,i=null,s="",o="",a=null,A=[]){return le.brandCheck(this,t),le.argumentLengthCheck(arguments,1,{header:"MessageEvent.initMessageEvent"}),new t(e,{bubbles:n,cancelable:r,data:i,origin:s,lastEventId:o,source:a,ports:A})}},Sw=class t extends Event{#e;constructor(e,n={}){le.argumentLengthCheck(arguments,1,{header:"CloseEvent constructor"}),e=le.converters.DOMString(e),n=le.converters.CloseEventInit(n),super(e,n),this.#e=n}get wasClean(){return le.brandCheck(this,t),this.#e.wasClean}get code(){return le.brandCheck(this,t),this.#e.code}get reason(){return le.brandCheck(this,t),this.#e.reason}},bw=class t extends Event{#e;constructor(e,n){le.argumentLengthCheck(arguments,1,{header:"ErrorEvent constructor"}),super(e,n),e=le.converters.DOMString(e),n=le.converters.ErrorEventInit(n??{}),this.#e=n}get message(){return le.brandCheck(this,t),this.#e.message}get filename(){return le.brandCheck(this,t),this.#e.filename}get lineno(){return le.brandCheck(this,t),this.#e.lineno}get colno(){return le.brandCheck(this,t),this.#e.colno}get error(){return le.brandCheck(this,t),this.#e.error}};Object.defineProperties(vw.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Nr,origin:Nr,lastEventId:Nr,source:Nr,ports:Nr,initMessageEvent:Nr});Object.defineProperties(Sw.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Nr,code:Nr,wasClean:Nr});Object.defineProperties(bw.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Nr,filename:Nr,lineno:Nr,colno:Nr,error:Nr});le.converters.MessagePort=le.interfaceConverter(USe);le.converters["sequence<MessagePort>"]=le.sequenceConverter(le.converters.MessagePort);var Jx=[{key:"bubbles",converter:le.converters.boolean,defaultValue:!1},{key:"cancelable",converter:le.converters.boolean,defaultValue:!1},{key:"composed",converter:le.converters.boolean,defaultValue:!1}];le.converters.MessageEventInit=le.dictionaryConverter([...Jx,{key:"data",converter:le.converters.any,defaultValue:null},{key:"origin",converter:le.converters.USVString,defaultValue:""},{key:"lastEventId",converter:le.converters.DOMString,defaultValue:""},{key:"source",converter:le.nullableConverter(le.converters.MessagePort),defaultValue:null},{key:"ports",converter:le.converters["sequence<MessagePort>"],get defaultValue(){return[]}}]);le.converters.CloseEventInit=le.dictionaryConverter([...Jx,{key:"wasClean",converter:le.converters.boolean,defaultValue:!1},{key:"code",converter:le.converters["unsigned short"],defaultValue:0},{key:"reason",converter:le.converters.USVString,defaultValue:""}]);le.converters.ErrorEventInit=le.dictionaryConverter([...Jx,{key:"message",converter:le.converters.DOMString,defaultValue:""},{key:"filename",converter:le.converters.USVString,defaultValue:""},{key:"lineno",converter:le.converters["unsigned long"],defaultValue:0},{key:"colno",converter:le.converters["unsigned long"],defaultValue:0},{key:"error",converter:le.converters.any}]);f6.exports={MessageEvent:vw,CloseEvent:Sw,ErrorEvent:bw}});var Tw=C((KLe,m6)=>{"use strict";var{kReadyState:Dw,kController:PSe,kResponse:VSe,kBinaryType:GSe,kWebSocketURL:qSe}=CE(),{states:Rw,opcodes:p6}=dd(),{MessageEvent:HSe,ErrorEvent:YSe}=Wx();function JSe(t){return t[Dw]===Rw.OPEN}function WSe(t){return t[Dw]===Rw.CLOSING}function zSe(t){return t[Dw]===Rw.CLOSED}function zx(t,e,n=Event,r){let i=new n(t,r);e.dispatchEvent(i)}function jSe(t,e,n){if(t[Dw]!==Rw.OPEN)return;let r;if(e===p6.TEXT)try{r=new TextDecoder("utf-8",{fatal:!0}).decode(n)}catch{E6(t,"Received invalid UTF-8 in text frame.");return}else e===p6.BINARY&&(t[GSe]==="blob"?r=new Blob([n]):r=new Uint8Array(n).buffer);zx("message",t,HSe,{origin:t[qSe].origin,data:r})}function KSe(t){if(t.length===0)return!1;for(let e of t){let n=e.charCodeAt(0);if(n<33||n>126||e==="("||e===")"||e==="<"||e===">"||e==="@"||e===","||e===";"||e===":"||e==="\\"||e==='"'||e==="/"||e==="["||e==="]"||e==="?"||e==="="||e==="{"||e==="}"||n===32||n===9)return!1}return!0}function XSe(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}function E6(t,e){let{[PSe]:n,[VSe]:r}=t;n.abort(),r?.socket&&!r.socket.destroyed&&r.socket.destroy(),e&&zx("error",t,YSe,{error:new Error(e)})}m6.exports={isEstablished:JSe,isClosing:WSe,isClosed:zSe,fireEvent:zx,isValidSubprotocol:KSe,isValidStatusCode:XSe,failWebsocketConnection:E6,websocketMessageReceived:jSe}});var w6=C((XLe,Q6)=>{"use strict";var Kx=B("diagnostics_channel"),{uid:ZSe,states:I6}=dd(),{kReadyState:y6,kSentClose:C6,kByteParser:B6,kReceivedClose:$Se}=CE(),{fireEvent:ebe,failWebsocketConnection:sc}=Tw(),{CloseEvent:tbe}=Wx(),{makeRequest:nbe}=gE(),{fetching:rbe}=dw(),{Headers:ibe}=tc(),{getGlobalDispatcher:sbe}=rd(),{kHeadersList:obe}=St(),Jo={};Jo.open=Kx.channel("undici:websocket:open");Jo.close=Kx.channel("undici:websocket:close");Jo.socketError=Kx.channel("undici:websocket:socket_error");var jx;try{jx=B("crypto")}catch{}function abe(t,e,n,r,i){let s=t;s.protocol=t.protocol==="ws:"?"http:":"https:";let o=nbe({urlList:[s],serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(i.headers){let c=new ibe(i.headers)[obe];o.headersList=c}let a=jx.randomBytes(16).toString("base64");o.headersList.append("sec-websocket-key",a),o.headersList.append("sec-websocket-version","13");for(let c of e)o.headersList.append("sec-websocket-protocol",c);let A="";return rbe({request:o,useParallelQueue:!0,dispatcher:i.dispatcher??sbe(),processResponse(c){if(c.type==="error"||c.status!==101){sc(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!c.headersList.get("Sec-WebSocket-Protocol")){sc(n,"Server did not respond with sent protocols.");return}if(c.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){sc(n,'Server did not set Upgrade header to "websocket".');return}if(c.headersList.get("Connection")?.toLowerCase()!=="upgrade"){sc(n,'Server did not set Connection header to "upgrade".');return}let u=c.headersList.get("Sec-WebSocket-Accept"),h=jx.createHash("sha1").update(a+ZSe).digest("base64");if(u!==h){sc(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let d=c.headersList.get("Sec-WebSocket-Extensions");if(d!==null&&d!==A){sc(n,"Received different permessage-deflate than the one set.");return}let g=c.headersList.get("Sec-WebSocket-Protocol");if(g!==null&&g!==o.headersList.get("Sec-WebSocket-Protocol")){sc(n,"Protocol was not set in the opening handshake.");return}c.socket.on("data",Abe),c.socket.on("close",lbe),c.socket.on("error",cbe),Jo.open.hasSubscribers&&Jo.open.publish({address:c.socket.address(),protocol:g,extensions:d}),r(c)}})}function Abe(t){this.ws[B6].write(t)||this.pause()}function lbe(){let{ws:t}=this,e=t[C6]&&t[$Se],n=1005,r="",i=t[B6].closingInfo;i?(n=i.code??1005,r=i.reason):t[C6]||(n=1006),t[y6]=I6.CLOSED,ebe("close",t,tbe,{wasClean:e,code:n,reason:r}),Jo.close.hasSubscribers&&Jo.close.publish({websocket:t,code:n,reason:r})}function cbe(t){let{ws:e}=this;e[y6]=I6.CLOSING,Jo.socketError.hasSubscribers&&Jo.socketError.publish(t),this.destroy()}Q6.exports={establishWebSocketConnection:abe}});var Zx=C((ZLe,v6)=>{"use strict";var{maxUnsigned16Bit:ube}=dd(),_6;try{_6=B("crypto")}catch{}var Xx=class{constructor(e){this.frameData=e,this.maskKey=_6.randomBytes(4)}createFrame(e){let n=this.frameData?.byteLength??0,r=n,i=6;n>ube?(i+=8,r=127):n>125&&(i+=2,r=126);let s=Buffer.allocUnsafe(n+i);s[0]=s[1]=0,s[0]|=128,s[0]=(s[0]&240)+e;s[i-4]=this.maskKey[0],s[i-3]=this.maskKey[1],s[i-2]=this.maskKey[2],s[i-1]=this.maskKey[3],s[1]=r,r===126?s.writeUInt16BE(n,2):r===127&&(s[2]=s[3]=0,s.writeUIntBE(n,4,6)),s[1]|=128;for(let o=0;o<n;o++)s[i+o]=this.frameData[o]^this.maskKey[o%4];return s}};v6.exports={WebsocketFrameSend:Xx}});var F6=C(($Le,N6)=>{"use strict";var{Writable:hbe}=B("stream"),k6=B("diagnostics_channel"),{parserStates:Mi,opcodes:xi,states:dbe,emptyBuffer:gbe}=dd(),{kReadyState:fbe,kSentClose:S6,kResponse:b6,kReceivedClose:D6}=CE(),{isValidStatusCode:R6,failWebsocketConnection:IE,websocketMessageReceived:pbe}=Tw(),{WebsocketFrameSend:T6}=Zx(),gd={};gd.ping=k6.channel("undici:websocket:ping");gd.pong=k6.channel("undici:websocket:pong");var $x=class extends hbe{#e=[];#n=0;#r=Mi.INFO;#t={};#i=[];constructor(e){super(),this.ws=e}_write(e,n,r){this.#e.push(e),this.#n+=e.length,this.run(r)}run(e){for(;;){if(this.#r===Mi.INFO){if(this.#n<2)return e();let n=this.consume(2);if(this.#t.fin=(n[0]&128)!==0,this.#t.opcode=n[0]&15,this.#t.originalOpcode??=this.#t.opcode,this.#t.fragmented=!this.#t.fin&&this.#t.opcode!==xi.CONTINUATION,this.#t.fragmented&&this.#t.opcode!==xi.BINARY&&this.#t.opcode!==xi.TEXT){IE(this.ws,"Invalid frame type was fragmented.");return}let r=n[1]&127;if(r<=125?(this.#t.payloadLength=r,this.#r=Mi.READ_DATA):r===126?this.#r=Mi.PAYLOADLENGTH_16:r===127&&(this.#r=Mi.PAYLOADLENGTH_64),this.#t.fragmented&&r>125){IE(this.ws,"Fragmented frame exceeded 125 bytes.");return}else if((this.#t.opcode===xi.PING||this.#t.opcode===xi.PONG||this.#t.opcode===xi.CLOSE)&&r>125){IE(this.ws,"Payload length for control frame exceeded 125 bytes.");return}else if(this.#t.opcode===xi.CLOSE){if(r===1){IE(this.ws,"Received close frame with a 1-byte body.");return}let i=this.consume(r);if(this.#t.closeInfo=this.parseCloseBody(!1,i),!this.ws[S6]){let s=Buffer.allocUnsafe(2);s.writeUInt16BE(this.#t.closeInfo.code,0);let o=new T6(s);this.ws[b6].socket.write(o.createFrame(xi.CLOSE),a=>{a||(this.ws[S6]=!0)})}this.ws[fbe]=dbe.CLOSING,this.ws[D6]=!0,this.end();return}else if(this.#t.opcode===xi.PING){let i=this.consume(r);if(!this.ws[D6]){let s=new T6(i);this.ws[b6].socket.write(s.createFrame(xi.PONG)),gd.ping.hasSubscribers&&gd.ping.publish({payload:i})}if(this.#r=Mi.INFO,this.#n>0)continue;e();return}else if(this.#t.opcode===xi.PONG){let i=this.consume(r);if(gd.pong.hasSubscribers&&gd.pong.publish({payload:i}),this.#n>0)continue;e();return}}else if(this.#r===Mi.PAYLOADLENGTH_16){if(this.#n<2)return e();let n=this.consume(2);this.#t.payloadLength=n.readUInt16BE(0),this.#r=Mi.READ_DATA}else if(this.#r===Mi.PAYLOADLENGTH_64){if(this.#n<8)return e();let n=this.consume(8),r=n.readUInt32BE(0);if(r>2**31-1){IE(this.ws,"Received payload length > 2^31 bytes.");return}let i=n.readUInt32BE(4);this.#t.payloadLength=(r<<8)+i,this.#r=Mi.READ_DATA}else if(this.#r===Mi.READ_DATA){if(this.#n<this.#t.payloadLength)return e();if(this.#n>=this.#t.payloadLength){let n=this.consume(this.#t.payloadLength);if(this.#i.push(n),!this.#t.fragmented||this.#t.fin&&this.#t.opcode===xi.CONTINUATION){let r=Buffer.concat(this.#i);pbe(this.ws,this.#t.originalOpcode,r),this.#t={},this.#i.length=0}this.#r=Mi.INFO}}if(!(this.#n>0)){e();break}}}consume(e){if(e>this.#n)return null;if(e===0)return gbe;if(this.#e[0].length===e)return this.#n-=this.#e[0].length,this.#e.shift();let n=Buffer.allocUnsafe(e),r=0;for(;r!==e;){let i=this.#e[0],{length:s}=i;if(s+r===e){n.set(this.#e.shift(),r);break}else if(s+r>e){n.set(i.subarray(0,e-r),r),this.#e[0]=i.subarray(e-r);break}else n.set(this.#e.shift(),r),r+=i.length}return this.#n-=e,n}parseCloseBody(e,n){let r;if(n.length>=2&&(r=n.readUInt16BE(0)),e)return R6(r)?{code:r}:null;let i=n.subarray(2);if(i[0]===239&&i[1]===187&&i[2]===191&&(i=i.subarray(3)),r!==void 0&&!R6(r))return null;try{i=new TextDecoder("utf-8",{fatal:!0}).decode(i)}catch{return null}return{code:r,reason:i}}get closingInfo(){return this.#t.closeInfo}};N6.exports={ByteParser:$x}});var G6=C((e1e,V6)=>{"use strict";var{webidl:fe}=fr(),{DOMException:wA}=fA(),{URLSerializer:Ebe}=ss(),{getGlobalOrigin:mbe}=Nh(),{staticPropertyDescriptors:_A,states:fd,opcodes:yE,emptyBuffer:Cbe}=dd(),{kWebSocketURL:M6,kReadyState:Wo,kController:Ibe,kBinaryType:kw,kResponse:Nw,kSentClose:ybe,kByteParser:Bbe}=CE(),{isEstablished:x6,isClosing:L6,isValidSubprotocol:Qbe,failWebsocketConnection:wbe,fireEvent:_be}=Tw(),{establishWebSocketConnection:vbe}=w6(),{WebsocketFrameSend:BE}=Zx(),{ByteParser:Sbe}=F6(),{kEnumerableProperty:Li,isBlobLike:U6}=Ue(),{getGlobalDispatcher:bbe}=rd(),{types:P6}=B("util"),O6=!1,ai=class t extends EventTarget{#e={open:null,error:null,close:null,message:null};#n=0;#r="";#t="";constructor(e,n=[]){super(),fe.argumentLengthCheck(arguments,1,{header:"WebSocket constructor"}),O6||(O6=!0,process.emitWarning("WebSockets are experimental, expect them to change at any time.",{code:"UNDICI-WS"}));let r=fe.converters["DOMString or sequence<DOMString> or WebSocketInit"](n);e=fe.converters.USVString(e),n=r.protocols;let i=mbe(),s;try{s=new URL(e,i)}catch(o){throw new wA(o,"SyntaxError")}if(s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),s.protocol!=="ws:"&&s.protocol!=="wss:")throw new wA(`Expected a ws: or wss: protocol, got ${s.protocol}`,"SyntaxError");if(s.hash||s.href.endsWith("#"))throw new wA("Got fragment","SyntaxError");if(typeof n=="string"&&(n=[n]),n.length!==new Set(n.map(o=>o.toLowerCase())).size)throw new wA("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(n.length>0&&!n.every(o=>Qbe(o)))throw new wA("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[M6]=new URL(s.href),this[Ibe]=vbe(s,n,this,o=>this.#i(o),r),this[Wo]=t.CONNECTING,this[kw]="blob"}close(e=void 0,n=void 0){if(fe.brandCheck(this,t),e!==void 0&&(e=fe.converters["unsigned short"](e,{clamp:!0})),n!==void 0&&(n=fe.converters.USVString(n)),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new wA("invalid code","InvalidAccessError");let r=0;if(n!==void 0&&(r=Buffer.byteLength(n),r>123))throw new wA(`Reason must be less than 123 bytes; received ${r}`,"SyntaxError");if(!(this[Wo]===t.CLOSING||this[Wo]===t.CLOSED))if(!x6(this))wbe(this,"Connection was closed before it was established."),this[Wo]=t.CLOSING;else if(L6(this))this[Wo]=t.CLOSING;else{let i=new BE;e!==void 0&&n===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&n!==void 0?(i.frameData=Buffer.allocUnsafe(2+r),i.frameData.writeUInt16BE(e,0),i.frameData.write(n,2,"utf-8")):i.frameData=Cbe,this[Nw].socket.write(i.createFrame(yE.CLOSE),o=>{o||(this[ybe]=!0)}),this[Wo]=fd.CLOSING}}send(e){if(fe.brandCheck(this,t),fe.argumentLengthCheck(arguments,1,{header:"WebSocket.send"}),e=fe.converters.WebSocketSendData(e),this[Wo]===t.CONNECTING)throw new wA("Sent before connected.","InvalidStateError");if(!x6(this)||L6(this))return;let n=this[Nw].socket;if(typeof e=="string"){let r=Buffer.from(e),s=new BE(r).createFrame(yE.TEXT);this.#n+=r.byteLength,n.write(s,()=>{this.#n-=r.byteLength})}else if(P6.isArrayBuffer(e)){let r=Buffer.from(e),s=new BE(r).createFrame(yE.BINARY);this.#n+=r.byteLength,n.write(s,()=>{this.#n-=r.byteLength})}else if(ArrayBuffer.isView(e)){let r=Buffer.from(e,e.byteOffset,e.byteLength),s=new BE(r).createFrame(yE.BINARY);this.#n+=r.byteLength,n.write(s,()=>{this.#n-=r.byteLength})}else if(U6(e)){let r=new BE;e.arrayBuffer().then(i=>{let s=Buffer.from(i);r.frameData=s;let o=r.createFrame(yE.BINARY);this.#n+=s.byteLength,n.write(o,()=>{this.#n-=s.byteLength})})}}get readyState(){return fe.brandCheck(this,t),this[Wo]}get bufferedAmount(){return fe.brandCheck(this,t),this.#n}get url(){return fe.brandCheck(this,t),Ebe(this[M6])}get extensions(){return fe.brandCheck(this,t),this.#t}get protocol(){return fe.brandCheck(this,t),this.#r}get onopen(){return fe.brandCheck(this,t),this.#e.open}set onopen(e){fe.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return fe.brandCheck(this,t),this.#e.error}set onerror(e){fe.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return fe.brandCheck(this,t),this.#e.close}set onclose(e){fe.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return fe.brandCheck(this,t),this.#e.message}set onmessage(e){fe.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return fe.brandCheck(this,t),this[kw]}set binaryType(e){fe.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[kw]="blob":this[kw]=e}#i(e){this[Nw]=e;let n=new Sbe(this);n.on("drain",function(){this.ws[Nw].socket.resume()}),e.socket.ws=this,this[Bbe]=n,this[Wo]=fd.OPEN;let r=e.headersList.get("sec-websocket-extensions");r!==null&&(this.#t=r);let i=e.headersList.get("sec-websocket-protocol");i!==null&&(this.#r=i),_be("open",this)}};ai.CONNECTING=ai.prototype.CONNECTING=fd.CONNECTING;ai.OPEN=ai.prototype.OPEN=fd.OPEN;ai.CLOSING=ai.prototype.CLOSING=fd.CLOSING;ai.CLOSED=ai.prototype.CLOSED=fd.CLOSED;Object.defineProperties(ai.prototype,{CONNECTING:_A,OPEN:_A,CLOSING:_A,CLOSED:_A,url:Li,readyState:Li,bufferedAmount:Li,onopen:Li,onerror:Li,onclose:Li,close:Li,onmessage:Li,binaryType:Li,send:Li,extensions:Li,protocol:Li,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(ai,{CONNECTING:_A,OPEN:_A,CLOSING:_A,CLOSED:_A});fe.converters["sequence<DOMString>"]=fe.sequenceConverter(fe.converters.DOMString);fe.converters["DOMString or sequence<DOMString>"]=function(t){return fe.util.Type(t)==="Object"&&Symbol.iterator in t?fe.converters["sequence<DOMString>"](t):fe.converters.DOMString(t)};fe.converters.WebSocketInit=fe.dictionaryConverter([{key:"protocols",converter:fe.converters["DOMString or sequence<DOMString>"],get defaultValue(){return[]}},{key:"dispatcher",converter:t=>t,get defaultValue(){return bbe()}},{key:"headers",converter:fe.nullableConverter(fe.converters.HeadersInit)}]);fe.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return fe.util.Type(t)==="Object"&&!(Symbol.iterator in t)?fe.converters.WebSocketInit(t):{protocols:fe.converters["DOMString or sequence<DOMString>"](t)}};fe.converters.WebSocketSendData=function(t){if(fe.util.Type(t)==="Object"){if(U6(t))return fe.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||P6.isAnyArrayBuffer(t))return fe.converters.BufferSource(t)}return fe.converters.USVString(t)};V6.exports={WebSocket:ai}});var J6=C((t1e,Be)=>{"use strict";var Dbe=nE(),q6=mQ(),H6=ut(),Rbe=Wh(),Tbe=AK(),kbe=oE(),oc=Ue(),{InvalidArgumentError:Fw}=H6,pd=$K(),Nbe=zp(),Fbe=Ax(),Mbe=M5(),xbe=ux(),Lbe=KM(),Obe=V5(),{getGlobalDispatcher:Y6,setGlobalDispatcher:Ube}=rd(),Pbe=W5(),Vbe=aM(),Gbe=BQ(),eL;try{B("crypto"),eL=!0}catch{eL=!1}Object.assign(q6.prototype,pd);Be.exports.Dispatcher=q6;Be.exports.Client=Dbe;Be.exports.Pool=Rbe;Be.exports.BalancedPool=Tbe;Be.exports.Agent=kbe;Be.exports.ProxyAgent=Obe;Be.exports.DecoratorHandler=Pbe;Be.exports.RedirectHandler=Vbe;Be.exports.createRedirectInterceptor=Gbe;Be.exports.buildConnector=Nbe;Be.exports.errors=H6;function QE(t){return(e,n,r)=>{if(typeof n=="function"&&(r=n,n=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new Fw("invalid url");if(n!=null&&typeof n!="object")throw new Fw("invalid opts");if(n&&n.path!=null){if(typeof n.path!="string")throw new Fw("invalid opts.path");let o=n.path;n.path.startsWith("/")||(o=`/${o}`),e=new URL(oc.parseOrigin(e).origin+o)}else n||(n=typeof e=="object"?e:{}),e=oc.parseURL(e);let{agent:i,dispatcher:s=Y6()}=n;if(i)throw new Fw("unsupported opts.agent. Did you mean opts.client?");return t.call(s,se(M({},n),{origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:n.method||(n.body?"PUT":"GET")}),r)}}Be.exports.setGlobalDispatcher=Ube;Be.exports.getGlobalDispatcher=Y6;if(oc.nodeMajor>16||oc.nodeMajor===16&&oc.nodeMinor>=8){let t=null;Be.exports.fetch=function(a){return E(this,arguments,function*(o){t||(t=dw().fetch);try{return yield t(...arguments)}catch(A){throw typeof A=="object"&&Error.captureStackTrace(A,this),A}})},Be.exports.Headers=tc().Headers,Be.exports.Response=rw().Response,Be.exports.Request=gE().Request,Be.exports.FormData=pQ().FormData,Be.exports.File=gQ().File,Be.exports.FileReader=q8().FileReader;let{setGlobalOrigin:e,getGlobalOrigin:n}=Nh();Be.exports.setGlobalOrigin=e,Be.exports.getGlobalOrigin=n;let{CacheStorage:r}=t6(),{kConstruct:i}=Ew();Be.exports.caches=new r(i)}if(oc.nodeMajor>=16){let{deleteCookie:t,getCookies:e,getSetCookies:n,setCookie:r}=h6();Be.exports.deleteCookie=t,Be.exports.getCookies=e,Be.exports.getSetCookies=n,Be.exports.setCookie=r;let{parseMIMEType:i,serializeAMimeType:s}=ss();Be.exports.parseMIMEType=i,Be.exports.serializeAMimeType=s}if(oc.nodeMajor>=18&&eL){let{WebSocket:t}=G6();Be.exports.WebSocket=t}Be.exports.request=QE(pd.request);Be.exports.stream=QE(pd.stream);Be.exports.pipeline=QE(pd.pipeline);Be.exports.connect=QE(pd.connect);Be.exports.upgrade=QE(pd.upgrade);Be.exports.MockClient=Fbe;Be.exports.MockPool=xbe;Be.exports.MockAgent=Mbe;Be.exports.mockErrors=Lbe});var FX="firebase",MX="10.8.0";Or(FX,MX,"app");var fs=new Kw("ANGULARFIRE2_VERSION");var xX=(t,e)=>{let n=e?[e]:$L(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ui=class{constructor(){return xX(LX)}},LX="app-check";function s0(){}var JE=class{zone;delegate;constructor(e,n=mL){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},o0=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",s0,{},s0,s0)),n.pipe(jw({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ta=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new JE(Zone.current)),this.insideAngular=n.run(()=>new JE(Zone.current,uc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(j(ci))};static \u0275prov=xr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function e1(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function a0(t){return t.pipe(jo(e1().outsideAngular))}function yt(t){return OX(e1())(t)}function OX(t){return function(n){return n=n.lift(new o0(t.ngZone)),n.pipe(hc(t.outsideAngular),jo(t.insideAngular))}}var UX=new Map,PX={activated:!1,tokenObservers:[]},VX={initialized:!1,enabled:!1};function Pi(t){return UX.get(t)||Object.assign({},PX)}function s1(){return VX}var GX="https://content-firebaseappcheck.googleapis.com/v1";var qX="exchangeDebugToken",t1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},TRe=24*60*60*1e3;var l0=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new dn,this.pending.promise.catch(n=>{}),yield HX(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new dn,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function HX(t){return new Promise(e=>{setTimeout(e,t)})}var YX={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},na=new WL("appCheck","AppCheck",YX);function o1(t){if(!Pi(t).activated)throw na.create("use-before-activation",{appName:t.name})}function a1(r,i){return E(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let d=yield o.getHeartbeatsHeader();d&&(s["X-Firebase-Client"]=d)}let a={method:"POST",body:JSON.stringify(e),headers:s},A;try{A=yield fetch(t,a)}catch(d){throw na.create("fetch-network-error",{originalErrorMessage:d?.message})}if(A.status!==200)throw na.create("fetch-status-error",{httpStatus:A.status});let l;try{l=yield A.json()}catch(d){throw na.create("fetch-parse-error",{originalErrorMessage:d?.message})}let c=l.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw na.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let u=Number(c[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})}function A1(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${GX}/projects/${n}/apps/${r}:${qX}?key=${i}`,body:{debug_token:e}}}var JX="firebase-app-check-database",WX=1,c0="firebase-app-check-store";var zE=null;function zX(){return zE||(zE=new Promise((t,e)=>{try{let n=indexedDB.open(JX,WX);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(na.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(c0,{keyPath:"compositeKey"})}}}catch(n){e(na.create("storage-open",{originalErrorMessage:n?.message}))}}),zE)}function jX(t,e){return KX(XX(t),e)}function KX(t,e){return E(this,null,function*(){let r=(yield zX()).transaction(c0,"readwrite"),s=r.objectStore(c0).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=A=>{o()},r.onerror=A=>{var l;a(na.create("storage-set",{originalErrorMessage:(l=A.target.error)===null||l===void 0?void 0:l.message}))}})})}function XX(t){return`${t.options.appId}-${t.name}`}var u0=new ea("@firebase/app-check");function A0(t,e){return VE()?jX(t,e).catch(n=>{u0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function l1(){return s1().enabled}function c1(){return E(this,null,function*(){let t=s1();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var ZX={error:"UNKNOWN_ERROR"};function $X(t){return PE.encodeString(JSON.stringify(t),!1)}function h0(t,e=!1){return E(this,null,function*(){let n=t.app;o1(n);let r=Pi(n),i=r.token,s;if(i&&!Fd(i)&&(r.token=void 0,i=void 0),!i){let A=yield r.cachedTokenPromise;A&&(Fd(A)?i=A:yield A0(n,void 0))}if(!e&&i&&Fd(i))return{token:i.token};let o=!1;if(l1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=a1(A1(n,yield c1()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let A=yield r.exchangeTokenPromise;return yield A0(n,A),r.token=A,{token:A.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Pi(n).exchangeTokenPromise}catch(A){A.code==="appCheck/throttled"?u0.warn(A.message):u0.error(A),s=A}let a;return i?s?Fd(i)?a={token:i.token,internalError:s}:a=r1(s):(a={token:i.token},r.token=i,yield A0(n,i)):a=r1(s),o&&rZ(n,a),a})}function eZ(t){return E(this,null,function*(){let e=t.app;o1(e);let{provider:n}=Pi(e);if(l1()){let r=yield c1(),{token:i}=yield a1(A1(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function tZ(t,e,n,r){let{app:i}=t,s=Pi(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Fd(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),n1(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>n1(t))}function u1(t,e){let n=Pi(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function n1(t){let{app:e}=t,n=Pi(e),r=n.tokenRefresher;r||(r=nZ(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function nZ(t){let{app:e}=t;return new l0(()=>E(this,null,function*(){let n=Pi(e),r;if(n.token?r=yield h0(t,!0):r=yield h0(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Pi(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},t1.RETRIAL_MIN_WAIT,t1.RETRIAL_MAX_WAIT)}function rZ(t,e){let n=Pi(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Fd(t){return t.expireTimeMillis-Date.now()>0}function r1(t){return{token:$X(ZX),error:t}}var d0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Pi(this.app);for(let n of e)u1(this.app,n.next);return Promise.resolve()}};function iZ(t,e){return new d0(t,e)}function sZ(t){return{getToken:e=>h0(t,e),getLimitedUseToken:()=>eZ(t),addTokenListener:e=>tZ(t,"INTERNAL",e),removeTokenListener:e=>u1(t.app,e)}}var oZ="@firebase/app-check",aZ="0.8.2";var AZ="app-check",i1="app-check-internal";function lZ(){ho(new bn(AZ,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return iZ(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(i1).initialize()})),ho(new bn(i1,t=>{let e=t.getProvider("app-check").getImmediate();return sZ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Or(oZ,aZ)}lZ();var cZ=["localhost","0.0.0.0","127.0.0.1"],qRe=typeof window<"u"&&cZ.includes(window.location.hostname);var uZ="firebase",hZ="10.8.0";Mt.registerVersion(uZ,hZ,"app-compat");var dZ=["ngOnDestroy"],d1=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(dZ.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let A=a?.[s];return typeof A=="function"?A.bind(a):A?.then?A.then(l=>n.run(()=>l)):n.run(()=>A)});return new Proxy(()=>{},{get:(a,A)=>o[A],apply:(a,A,l)=>o.then(c=>{let u=c?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,u),u})})})});var KE=class{constructor(e){return e}},ps=new je("angularfire2.app.options"),Es=new je("angularfire2.app.name");function go(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=Mt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Mt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;gZ("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new KE(o)}var gZ=(t,...e)=>{Xw()&&typeof console<"u"&&console[t](...e)},fZ={provide:KE,useFactory:go,deps:[ps,ci,[new vL,Es]]},g1=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:ps,useValue:n},{provide:Es,useValue:r}]}}constructor(n){Mt.registerVersion("angularfire",fs.full,"core"),Mt.registerVersion("angularfire",fs.full,"app-compat"),Mt.registerVersion("angular",NL.full,n.toString())}static \u0275fac=function(r){return new(r||t)(j(ds))};static \u0275mod=ln({type:t});static \u0275inj=An({providers:[fZ]})}return t})();function ra(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return pZ(i,o)||(h1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${EZ?" You may need to reload as Firebase is not HMR aware.":""}`),h1("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function pZ(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var EZ=typeof module<"u"&&!!module.hot,h1=(t,...e)=>{Xw()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Md=new je("angularfire2.auth.use-emulator"),xd=new je("angularfire2.auth.settings"),Ld=new je("angularfire2.auth.tenant-id"),Od=new je("angularfire2.auth.langugage-code"),Ud=new je("angularfire2.auth.use-device-language"),Pd=new je("angularfire.auth.persistence"),Vd=(t,e,n,r,i,s,o,a)=>ra(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let A=e.runOutsideAngular(()=>t.auth());if(n&&A.useEmulator(...n),r&&(A.tenantId=r),A.languageCode=i,s&&A.useDeviceLanguage(),o)for(let[l,c]of Object.entries(o))A.settings[l]=c;return a&&A.setPersistence(a),A},[n,r,i,s,o,a]),XE=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,A,l,c,u,h,d){let g=new EL,f=Mr(void 0).pipe(jo(o.outsideAngular),li(()=>s.runOutsideAngular(()=>import("./chunk-5DTZVEIA.mjs"))),ot(()=>go(n,s,r)),ot(m=>Vd(m,s,a,l,c,u,A,h)),Ww({bufferSize:1,refCount:!1}));if(LE(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Mr(null);else{f.pipe(yL()).subscribe();let m=f.pipe(li(w=>w.getRedirectResult().then(_=>_,()=>null)),yt,Ww({bufferSize:1,refCount:!1})),y=f.pipe(li(w=>new hs(_=>({unsubscribe:s.runOutsideAngular(()=>w.onAuthStateChanged(S=>_.next(S),S=>_.error(S),()=>_.complete()))})))),I=f.pipe(li(w=>new hs(_=>({unsubscribe:s.runOutsideAngular(()=>w.onIdTokenChanged(S=>_.next(S),S=>_.error(S),()=>_.complete()))}))));this.authState=m.pipe(zw(y),hc(o.outsideAngular),jo(o.insideAngular)),this.user=m.pipe(zw(I),hc(o.outsideAngular),jo(o.insideAngular)),this.idToken=this.user.pipe(li(w=>w?tr(w.getIdToken()):Mr(null))),this.idTokenResult=this.user.pipe(li(w=>w?tr(w.getIdTokenResult()):Mr(null))),this.credential=vd(m,g,this.authState.pipe(bA(w=>!w))).pipe(ot(w=>w?.user?w:null),hc(o.outsideAngular),jo(o.insideAngular))}return d1(this,f,s,{spy:{apply:(m,y,I)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&I.then(w=>g.next(w))}}})}static \u0275fac=function(r){return new(r||t)(j(ps),j(Es,8),j(ds),j(ci),j(ta),j(Md,8),j(xd,8),j(Ld,8),j(Od,8),j(Ud,8),j(Pd,8),j(Ui,8))};static \u0275prov=xr({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var RU=DE(KO(),1);var fm="5",TU="v",kU="s",NU="r",FU="f",MU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xU="ls",LU="p",r_="ac",OU="websocket",UU="long_polling";var i_=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$t(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:qE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var s_=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ui(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var PU=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new i_(e)}}catch{}return new s_},VA=PU("localStorage"),o_=PU("sessionStorage");var bc=new ea("@firebase/database"),VU=function(){let t=1;return function(){return t++}}(),GU=function(t){let e=ZL(t),n=new XL;n.update(e);let r=n.digest();return PE.encodeByteArray(r)},Bg=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bg.apply(null,r):typeof r=="object"?e+=$t(r):e+=r,e+=" "}return e},GA=null,XO=!0,qU=function(t,e){x(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(bc.logLevel=hi.VERBOSE,GA=bc.log.bind(bc),e&&o_.set("logging_enabled",!0)):typeof t=="function"?GA=t:(GA=null,o_.remove("logging_enabled"))},gn=function(...t){if(XO===!0&&(XO=!1,GA===null&&o_.get("logging_enabled")===!0&&qU(!0)),GA){let e=Bg.apply(null,t);GA(e)}},Qg=function(t){return function(...e){gn(t,...e)}},a_=function(...t){let e="FIREBASE INTERNAL ERROR: "+Bg(...t);bc.error(e)},Bs=function(...t){let e=`FIREBASE FATAL ERROR: ${Bg(...t)}`;throw bc.error(e),new Error(e)},Vn=function(...t){let e="FIREBASE WARNING: "+Bg(...t);bc.warn(e)},w$=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},_$=function(t){if(gs()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},la="[MIN_NAME]",fo="[MAX_NAME]",HA=function(t,e){if(t===e)return 0;if(t===la||e===fo)return-1;if(e===la||t===fo)return 1;{let n=ZO(t),r=ZO(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},v$=function(t,e){return t===e?0:t<e?-1:1},Zd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+$t(e))},av=function(t){if(typeof t!="object"||t===null)return $t(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=$t(e[r]),n+=":",n+=av(t[e[r]]);return n+="}",n},HU=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function fn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var YU=function(t){x(!Pm(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,A;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(A=n;A;A-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(A=e;A;A-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let c=l.join(""),u="";for(A=0;A<64;A+=8){let h=parseInt(c.substr(A,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},S$=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},b$=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function D$(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var R$=new RegExp("^-?(0*)\\d{1,10}$"),T$=-2147483648,k$=2147483647,ZO=function(t){if(R$.test(t)){let e=Number(t);if(e>=T$&&e<=k$)return e}return null},Lc=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Vn("Exception was thrown by user callback.",n),e},Math.floor(0))}},N$=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ng=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var pm=class{constructor(e,n,r,i,s=!1,o="",a=!1,A=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=A,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=VA.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&VA.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function F$(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function JU(t,e,n){x(typeof e=="string","typeof type must == string"),x(typeof n=="object","typeof params must == object");let r;if(e===OU)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===UU)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);F$(t)&&(n.ns=t.namespace);let i=[];return fn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var A_=class{constructor(){this.counters_={}}incrementCounter(e,n=1){ui(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return YL(this.counters_)}};var K0={},X0={};function Av(t){let e=t.toString();return K0[e]||(K0[e]=new A_),K0[e]}function M$(t,e){let n=t.toString();return X0[n]||(X0[n]=e()),X0[n]}var lv="";function cv(t){lv=t}var x$=16384,L$=45e3,ag=null;typeof MozWebSocket<"u"?ag=MozWebSocket:typeof WebSocket<"u"&&(ag=WebSocket);function O$(t){ag=t}var vc=(()=>{class t{constructor(n,r,i,s,o,a,A){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qg(this.connId),this.stats_=Av(r),this.connURL=t.connectionURL_(r,a,A,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[TU]=fm,!gs()&&typeof location<"u"&&location.hostname&&MU.test(location.hostname)&&(a[NU]=FU),r&&(a[kU]=r),i&&(a[xU]=i),s&&(a[r_]=s),o&&(a[LU]=o),JU(n,OU,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,VA.set("previous_websocket_failure",!0);try{let i;if(gs()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${fm}/${lv}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ag(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&ag!==null&&!t.forceDisallow_}static previouslyFailed(){return VA.isInMemoryStorage||VA.get("previous_websocket_failure")===!0}markConnectionHealthy(){VA.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=qE(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(x(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=$t(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=HU(r,x$);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(L$))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),$O="@firebase/database",eU="1.0.3";var l_=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var c_=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(e)}},rg=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),u_=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Lc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var tU="start",U$="close",P$="pLPCommand",V$="pRTLPCB",WU="id",zU="pw",jU="ser",G$="cb",q$="seg",H$="ts",Y$="d",J$="dframe",KU=1870,XU=30,W$=KU-XU,z$=25e3,j$=3e4,Ag=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qg(e),this.stats_=Av(n),this.urlFn=A=>(this.appCheckToken&&(A[r_]=this.appCheckToken),JU(n,UU,A))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new u_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(j$)),_$(()=>{if(this.isClosed_)return;this.scriptTagHolder=new h_((...s)=>{let[o,a,A,l,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===tU)this.id=a,this.password=A;else if(o===U$)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[tU]="t",r[jU]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[G$]=this.scriptTagHolder.uniqueCallbackIdentifier),r[TU]=fm,this.transportSessionId&&(r[kU]=this.transportSessionId),this.lastSessionId&&(r[xU]=this.lastSessionId),this.applicationId&&(r[LU]=this.applicationId),this.appCheckToken&&(r[r_]=this.appCheckToken),typeof location<"u"&&location.hostname&&MU.test(location.hostname)&&(r[NU]=FU);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return gs()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!S$()&&!b$()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=$t(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=HL(n),i=HU(r,W$);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(gs())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[J$]="t",r[WU]=e,r[zU]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=$t(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},h_=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,gs())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=VU(),window[P$+this.uniqueCallbackIdentifier]=e,window[V$+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";</script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){gn("frame writing exception"),a.stack&&gn(a.stack),gn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[WU]=this.myID,e[zU]=this.myPW,e[jU]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+XU+r.length<=KU;){let o=this.pendingSegs.shift();r=r+"&"+q$+i+"="+o.seg+"&"+H$+i+"="+o.ts+"&"+Y$+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(z$)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){gs()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{gn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var ZU=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ag,vc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=vc&&vc.isAvailable(),i=r&&!vc.previouslyFailed();if(n.webSocketOnly&&(r||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[vc];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),K$=6e4,X$=5e3,Z$=10*1024,$$=100*1024,Z0="t",nU="d",e7="s",rU="r",t7="e",iU="o",sU="a",oU="n",aU="p",n7="h",d_=class{constructor(e,n,r,i,s,o,a,A,l,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=A,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qg("c:"+this.id+":"),this.transportManager_=new ZU(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ng(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Z$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Z0 in e){let n=e[Z0];n===sU?this.upgradeIfSecondaryHealthy_():n===rU?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===iU&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Zd("t",e),r=Zd("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:aU,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:sU,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:oU,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Zd("t",e),r=Zd("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Zd(Z0,e);if(nU in e){let r=e[nU];if(n===n7){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===oU){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===e7?this.onConnectionShutdown_(r):n===rU?this.onReset_(r):n===t7?a_("Server Error: "+r):n===iU?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):a_("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),fm!==r&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ng(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(K$))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ng(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(X$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:aU,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(VA.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Em=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var mm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},x(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){x(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Cm=class t extends mm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!e0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return x(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var AU=32,lU=768,Ge=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ve(){return new Ge("")}function we(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ca(t){return t.pieces_.length-t.pieceNum_}function nt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ge(t.pieces_,e)}function uv(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function r7(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function lg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $U(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ge(e,0)}function Qt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ge(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function ir(t,e){let n=we(t),r=we(e);if(n===null)return e;if(n===r)return ir(nt(t),nt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function i7(t,e){let n=lg(t,0),r=lg(e,0);for(let i=0;i<n.length&&i<r.length;i++){let s=HA(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function hv(t,e){if(ca(t)!==ca(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function di(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ca(t)>ca(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var g_=class{constructor(e,n){this.errorPrefix_=n,this.parts_=lg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Nd(this.parts_[r]);eP(this)}};function s7(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Nd(e),eP(t)}function o7(t){let e=t.parts_.pop();t.byteLength_-=Nd(e),t.parts_.length>0&&(t.byteLength_-=1)}function eP(t){if(t.byteLength_>lU)throw new Error(t.errorPrefix_+"has a key path longer than "+lU+" bytes ("+t.byteLength_+").");if(t.parts_.length>AU)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+AU+") or object contains a cycle "+PA(t))}function PA(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var f_=class t extends mm{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return x(e==="visible","Unknown event type: "+e),[this.visible_]}};var $d=1e3,a7=60*5*1e3,cU=30*1e3,A7=1.3,l7=3e4,c7="server_kill",uU=3,dv=(()=>{class t extends Em{constructor(n,r,i,s,o,a,A,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=A,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Qg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$d,this.maxReconnectDelay_=a7,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!gs())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");f_.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Cm.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_($t(o)),x(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new dn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let A=a.d;a.s==="ok"?r.resolve(A):r.reject(A)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),x(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let A={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,A),this.connected_&&this.sendListen_(A)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,A=>{let l=A.d,c=A.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",A),c!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(c,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&ui(n,"w")){let i=$o(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||jL(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=cU)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=zL(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let A=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(A):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+$t(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):a_("Unrecognized action received from server: "+$t(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){x(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$d,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=$d,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>l7&&(this.reconnectDelay_=$d),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*A7)}this.onConnectStatus_(!1)}establishConnection_(){return E(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,A=null,l=function(){A?A.close():(a=!0,i())},c=function(h){x(A,"sendRequest call when we're not connected not allowed."),A.sendRequest(h)};this.realtime_={close:l,sendRequest:c};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,d]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?gn("getToken() completed but was canceled"):(gn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,A=new d_(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{Vn(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(c7)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Vn(h),l())}}})}interrupt(n){gn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){gn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],HE(this.interruptReasons_)&&(this.reconnectDelay_=$d,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>av(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Ge(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){gn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=uU&&(this.reconnectDelay_=cU,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){gn("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=uU&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";gs()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+lv.replace(/\./g,"-")]=1,e0()?n["framework.cordova"]=1:JL()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Cm.getInstance().currentlyOnline();return HE(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),be=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Dc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new be(la,e),i=new be(la,n);return this.compare(r,i)!==0}minPost(){return be.MIN}};var gm,Im=class extends Dc{static get __EMPTY_NODE(){return gm}static set __EMPTY_NODE(e){gm=e}compare(e,n){return HA(e.name,n.name)}isDefinedOn(e){throw mc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return be.MIN}maxPost(){return new be(fo,gm)}makePost(e,n){return x(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,gm)}toString(){return".key"}},ys=new Im;var Sc=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Vi=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??gi.EMPTY_NODE,this.right=o??gi.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return gi.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return gi.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),p_=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Vi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},gi=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vi.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vi.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Sc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Sc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Sc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Sc(this.root_,null,this.comparator_,!0,e)}};gi.EMPTY_NODE=new p_;function u7(t,e){return HA(t.name,e.name)}function gv(t,e){return HA(t,e)}var E_;function h7(t){E_=t}var tP=function(t){return typeof t=="number"?"number:"+YU(t):"string:"+t},nP=function(t){if(t.isLeafNode()){let e=t.val();x(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ui(e,".sv"),"Priority must be a string or number.")}else x(t===E_||t.isEmpty(),"priority of unexpected type.");x(t===E_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var hU,Rc=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,x(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),nP(this.priorityNode_)}static set __childrenNodeConstructor(n){hU=n}static get __childrenNodeConstructor(){return hU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return _e(n)?this:we(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=we(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(x(i!==".priority"||ca(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(nt(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+tP(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=YU(this.value_):n+=this.value_,this.lazyHash_=GU(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(x(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return x(s>=0,"Unknown leaf type: "+r),x(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),rP,iP;function d7(t){rP=t}function g7(t){iP=t}var m_=class extends Dc{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?HA(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return be.MIN}maxPost(){return new be(fo,new Rc("[PRIORITY-POST]",iP))}makePost(e,n){let r=rP(e);return new be(n,new Rc("[PRIORITY-POST]",r))}toString(){return".priority"}},at=new m_;var f7=Math.log(2),C_=class{constructor(e){let n=s=>parseInt(Math.log(s)/f7,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ym=function(t,e,n,r){t.sort(e);let i=function(A,l){let c=l-A,u,h;if(c===0)return null;if(c===1)return u=t[A],h=n?n(u):u,new Vi(h,u.node,Vi.BLACK,null,null);{let d=parseInt(c/2,10)+A,g=i(A,d),f=i(d+1,l);return u=t[d],h=n?n(u):u,new Vi(h,u.node,Vi.BLACK,g,f)}},s=function(A){let l=null,c=null,u=t.length,h=function(g,f){let m=u-g,y=u;u-=g;let I=i(m+1,y),w=t[m],_=n?n(w):w;d(new Vi(_,w.node,f,null,I))},d=function(g){l?(l.left=g,l=g):(c=g,l=g)};for(let g=0;g<A.count;++g){let f=A.nextBitIsOne(),m=Math.pow(2,A.count-(g+1));f?h(m,Vi.BLACK):(h(m,Vi.BLACK),h(m,Vi.RED))}return c},o=new C_(t.length),a=s(o);return new gi(r||e,a)};var $0,_c={},Tc=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return x(_c&&at,"ChildrenNode.ts has not been loaded"),$0=$0||new t({".priority":_c},{".priority":at}),$0}get(e){let n=$o(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof gi?n:null}hasIndex(e){return ui(this.indexSet_,e.toString())}addIndex(e,n){x(e!==ys,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(be.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ym(r,e.getCompare()):a=_c;let A=e.toString(),l=Object.assign({},this.indexSet_);l[A]=e;let c=Object.assign({},this.indexes_);return c[A]=a,new t(c,l)}addToIndexes(e,n){let r=kd(this.indexes_,(i,s)=>{let o=$o(this.indexSet_,s);if(x(o,"Missing index implementation for "+s),i===_c)if(o.isDefinedOn(e.node)){let a=[],A=n.getIterator(be.Wrap),l=A.getNext();for(;l;)l.name!==e.name&&a.push(l),l=A.getNext();return a.push(e),ym(a,o.getCompare())}else return _c;else{let a=n.get(e.name),A=i;return a&&(A=A.remove(new be(e.name,a))),A.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=kd(this.indexes_,i=>{if(i===_c)return i;{let s=n.get(e.name);return s?i.remove(new be(e.name,s)):i}});return new t(r,this.indexSet_)}};var eg,Ee=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nP(this.priorityNode_),this.children_.isEmpty()&&x(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eg||(eg=new t(new gi(gv),null,Tc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eg}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?eg:r}}getChild(n){let r=we(n);return r===null?this:this.getImmediateChild(r).getChild(nt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(x(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new be(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?eg:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=we(n);if(i===null)return r;{x(we(n)!==".priority"||ca(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(nt(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(at,(a,A)=>{r[a]=A.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let A in r)a[A]=r[A];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+tP(this.getPriority().val())+":"),this.forEachChild(at,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":GU(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new be(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new be(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new be(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,be.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,be.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===wg?-1:0}withIndex(n){if(n===ys||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ys||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(at),s=r.getIterator(at),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ys?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),I_=class extends Ee{constructor(){super(new gi(gv),Ee.EMPTY_NODE,Tc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ee.EMPTY_NODE}isEmpty(){return!1}},wg=new I_;Object.defineProperties(be,{MIN:{value:new be(la,Ee.EMPTY_NODE)},MAX:{value:new be(fo,wg)}});Im.__EMPTY_NODE=Ee.EMPTY_NODE;Rc.__childrenNodeConstructor=Ee;h7(wg);g7(wg);var p7=!0;function Dt(t,e=null){if(t===null)return Ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),x(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Rc(n,Dt(e))}if(!(t instanceof Array)&&p7){let n=[],r=!1;if(fn(t,(o,a)=>{if(o.substring(0,1)!=="."){let A=Dt(a);A.isEmpty()||(r=r||!A.getPriority().isEmpty(),n.push(new be(o,A)))}}),n.length===0)return Ee.EMPTY_NODE;let s=ym(n,u7,o=>o.name,gv);if(r){let o=ym(n,at.getCompare());return new Ee(s,Dt(e),new Tc({".priority":o},{".priority":at}))}else return new Ee(s,Dt(e),Tc.Default)}else{let n=Ee.EMPTY_NODE;return fn(t,(r,i)=>{if(ui(t,r)&&r.substring(0,1)!=="."){let s=Dt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Dt(e))}}d7(Dt);var cg=class extends Dc{constructor(e){super(),this.indexPath_=e,x(!_e(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?HA(e.name,n.name):s}makePost(e,n){let r=Dt(e),i=Ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new be(n,i)}maxPost(){let e=Ee.EMPTY_NODE.updateChild(this.indexPath_,wg);return new be(fo,e)}toString(){return lg(this.indexPath_,0).join("/")}};var y_=class extends Dc{compare(e,n){let r=e.node.compareTo(n.node);return r===0?HA(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,n){let r=Dt(e);return new be(n,r)}toString(){return".value"}},fv=new y_;function sP(t){return{type:"value",snapshotNode:t}}function kc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ug(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function hg(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function E7(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var dg=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){x(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ug(n,a)):x(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(kc(n,r)):o.trackChildChange(hg(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(at,(i,s)=>{n.hasChild(i)||r.trackChildChange(ug(i,s))}),n.isLeafNode()||n.forEachChild(at,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(hg(i,s,o))}else r.trackChildChange(kc(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Bm=class t{constructor(e){this.indexedFilter_=new dg(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new be(n,r))||(r=Ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ee.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ee.EMPTY_NODE);let s=this;return n.forEachChild(at,(o,a)=>{s.matches(new be(o,a))||(i=i.updateImmediateChild(o,Ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var B_=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Bm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new be(n,r))||(r=Ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ee.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ee.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let u=this.index_.getCompare();o=(h,d)=>u(d,h)}else o=this.index_.getCompare();let a=e;x(a.numChildren()===this.limit_,"");let A=new be(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(A);if(a.hasChild(n)){let u=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let d=h==null?1:o(h,A);if(c&&!r.isEmpty()&&d>=0)return s?.trackChildChange(hg(n,r,u)),a.updateImmediateChild(n,r);{s?.trackChildChange(ug(n,u));let f=a.updateImmediateChild(n,Ee.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(kc(h.name,h.node)),f.updateImmediateChild(h.name,h.node)):f}}else return r.isEmpty()?e:c&&o(l,A)>=0?(s!=null&&(s.trackChildChange(ug(l.name,l.node)),s.trackChildChange(kc(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,Ee.EMPTY_NODE)):e}};var gg=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=at}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return x(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return x(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:la}hasEnd(){return this.endSet_}getIndexEndValue(){return x(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return x(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return x(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===at}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function m7(t){return t.loadsAllData()?new dg(t.getIndex()):t.hasLimit()?new B_(t):new Bm(t)}function C7(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function I7(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Q_(t,e,n){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function y7(t,e,n){let r;return t.index_===ys||n?r=Q_(t,e,n):r=Q_(t,e,fo),r.startAfterSet_=!0,r}function w_(t,e,n){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function B7(t,e,n){let r;return t.index_===ys||n?r=w_(t,e,n):r=w_(t,e,la),r.endBeforeSet_=!0,r}function Vm(t,e){let n=t.copy();return n.index_=e,n}function dU(t){let e={};if(t.isDefault())return e;let n;if(t.index_===at?n="$priority":t.index_===fv?n="$value":t.index_===ys?n="$key":(x(t.index_ instanceof cg,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=$t(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=$t(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+$t(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=$t(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+$t(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function gU(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==at&&(e.i=t.index_.toString()),e}var __=class t extends Em{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Qg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(x(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let A=dU(e._queryParams);this.restRequest_(s+".json",A,(l,c)=>{let u=c;if(l===404&&(u=null,l=null),l===null&&this.onDataUpdate_(s,u,!1,r),$o(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=dU(e._queryParams),r=e._path.toString(),i=new dn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+KL(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let A=null;if(a.status>=200&&a.status<300){try{A=qE(a.responseText)}catch{Vn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,A)}else a.status!==401&&a.status!==404&&Vn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var v_=class{constructor(){this.rootNode_=Ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Qm(){return{value:null,children:new Map}}function Oc(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=we(e);t.children.has(r)||t.children.set(r,Qm());let i=t.children.get(r);e=nt(e),Oc(i,e,n)}}function S_(t,e){if(_e(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(at,(r,i)=>{Oc(t,new Ge(r),i)}),S_(t,e)}}else if(t.children.size>0){let n=we(e);return e=nt(e),t.children.has(n)&&S_(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function b_(t,e,n){t.value!==null?n(e,t.value):Q7(t,(r,i)=>{let s=new Ge(e.toString()+"/"+r);b_(i,s,n)})}function Q7(t,e){t.children.forEach((n,r)=>{e(r,n)})}var D_=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&fn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var fU=10*1e3,w7=30*1e3,_7=5*60*1e3,R_=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new D_(e);let r=fU+(w7-fU)*Math.random();ng(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;fn(e,(i,s)=>{s>0&&ui(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ng(this.reportStats_.bind(this),Math.floor(Math.random()*2*_7))}};var Is=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Is||{});function pv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ev(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mv(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var T_=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Is.ACK_USER_WRITE,this.source=pv()}operationForChild(e){if(_e(this.path)){if(this.affectedTree.value!=null)return x(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Ge(e));return new t(Ve(),n,this.revert)}}else return x(we(this.path)===e,"operationForChild called for unrelated child."),new t(nt(this.path),this.affectedTree,this.revert)}};var wm=class t{constructor(e,n){this.source=e,this.path=n,this.type=Is.LISTEN_COMPLETE}operationForChild(e){return _e(this.path)?new t(this.source,Ve()):new t(this.source,nt(this.path))}};var Nc=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Is.OVERWRITE}operationForChild(e){return _e(this.path)?new t(this.source,Ve(),this.snap.getImmediateChild(e)):new t(this.source,nt(this.path),this.snap)}};var fg=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Is.MERGE}operationForChild(e){if(_e(this.path)){let n=this.children.subtree(new Ge(e));return n.isEmpty()?null:n.value?new Nc(this.source,Ve(),n.value):new t(this.source,Ve(),n)}else return x(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,nt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Qs=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;let n=we(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var k_=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function v7(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(E7(o.childName,o.snapshotNode))}),tg(t,i,"child_removed",e,r,n),tg(t,i,"child_added",e,r,n),tg(t,i,"child_moved",s,r,n),tg(t,i,"child_changed",e,r,n),tg(t,i,"value",e,r,n),i}function tg(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,A)=>b7(t,a,A)),o.forEach(a=>{let A=S7(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(A,t.query_))})})}function S7(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function b7(t,e,n){if(e.childName==null||n.childName==null)throw mc("Should only compare child_ events.");let r=new be(e.childName,e.snapshotNode),i=new be(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Gm(t,e){return{eventCache:t,serverCache:e}}function ig(t,e,n,r){return Gm(new Qs(e,n,r),t.serverCache)}function oP(t,e,n,r){return Gm(t.eventCache,new Qs(e,n,r))}function _m(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function qA(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var e_,D7=()=>(e_||(e_=new gi(v$)),e_),sr=class t{constructor(e,n=D7()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return fn(e,(r,i)=>{n=n.set(new Ge(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ve(),value:this.value};if(_e(e))return null;{let r=we(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(nt(e),n);return s!=null?{path:Qt(new Ge(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{let n=we(e),r=this.children.get(n);return r!==null?r.subtree(nt(e)):new t(null)}}set(e,n){if(_e(e))return new t(n,this.children);{let r=we(e),s=(this.children.get(r)||new t(null)).set(nt(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(_e(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=we(e),r=this.children.get(n);if(r){let i=r.remove(nt(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(_e(e))return this.value;{let n=we(e),r=this.children.get(n);return r?r.get(nt(e)):null}}setTree(e,n){if(_e(e))return n;{let r=we(e),s=(this.children.get(r)||new t(null)).setTree(nt(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Ve(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ve(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(_e(e))return null;{let s=we(e),o=this.children.get(s);return o?o.findOnPath_(nt(e),Qt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ve(),n)}foreachOnPath_(e,n,r){if(_e(e))return this;{this.value&&r(n,this.value);let i=we(e),s=this.children.get(i);return s?s.foreachOnPath_(nt(e),Qt(n,i),r):new t(null)}}foreach(e){this.foreach_(Ve(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Qt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Gi=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new sr(null))}};function sg(t,e,n){if(_e(e))return new Gi(new sr(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=ir(i,e);return s=s.updateChild(o,n),new Gi(t.writeTree_.set(i,s))}else{let i=new sr(n),s=t.writeTree_.setTree(e,i);return new Gi(s)}}}function N_(t,e,n){let r=t;return fn(n,(i,s)=>{r=sg(r,Qt(e,i),s)}),r}function pU(t,e){if(_e(e))return Gi.empty();{let n=t.writeTree_.setTree(e,new sr(null));return new Gi(n)}}function F_(t,e){return YA(t,e)!=null}function YA(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ir(n.path,e)):null}function EU(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(at,(r,i)=>{e.push(new be(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new be(r,i.value))}),e}function aa(t,e){if(_e(e))return t;{let n=YA(t,e);return n!=null?new Gi(new sr(n)):new Gi(t.writeTree_.subtree(e))}}function M_(t){return t.writeTree_.isEmpty()}function Fc(t,e){return aP(Ve(),t.writeTree_,e)}function aP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(x(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=aP(Qt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qt(t,".priority"),r)),n}}function qm(t,e){return uP(e,t)}function R7(t,e,n,r,i){x(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=sg(t.visibleWrites,e,n)),t.lastWriteId=r}function T7(t,e,n,r){x(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=N_(t.visibleWrites,e,n),t.lastWriteId=r}function k7(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function N7(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);x(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&F7(a,r.path)?i=!1:di(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return M7(t),!0;if(r.snap)t.visibleWrites=pU(t.visibleWrites,r.path);else{let a=r.children;fn(a,A=>{t.visibleWrites=pU(t.visibleWrites,Qt(r.path,A))})}return!0}else return!1}function F7(t,e){if(t.snap)return di(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&di(Qt(t.path,n),e))return!0;return!1}function M7(t){t.visibleWrites=AP(t.allWrites,x7,Ve()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function x7(t){return t.visible}function AP(t,e,n){let r=Gi.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)di(n,o)?(a=ir(n,o),r=sg(r,a,s.snap)):di(o,n)&&(a=ir(o,n),r=sg(r,Ve(),s.snap.getChild(a)));else if(s.children){if(di(n,o))a=ir(n,o),r=N_(r,a,s.children);else if(di(o,n))if(a=ir(o,n),_e(a))r=N_(r,Ve(),s.children);else{let A=$o(s.children,we(a));if(A){let l=A.getChild(nt(a));r=sg(r,Ve(),l)}}}else throw mc("WriteRecord should have .snap or .children")}}return r}function lP(t,e,n,r,i){if(!r&&!i){let s=YA(t.visibleWrites,e);if(s!=null)return s;{let o=aa(t.visibleWrites,e);if(M_(o))return n;if(n==null&&!F_(o,Ve()))return null;{let a=n||Ee.EMPTY_NODE;return Fc(o,a)}}}else{let s=aa(t.visibleWrites,e);if(!i&&M_(s))return n;if(!i&&n==null&&!F_(s,Ve()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(di(l.path,e)||di(e,l.path))},a=AP(t.allWrites,o,e),A=n||Ee.EMPTY_NODE;return Fc(a,A)}}}function L7(t,e,n){let r=Ee.EMPTY_NODE,i=YA(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(at,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=aa(t.visibleWrites,e);return n.forEachChild(at,(o,a)=>{let A=Fc(aa(s,new Ge(o)),a);r=r.updateImmediateChild(o,A)}),EU(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=aa(t.visibleWrites,e);return EU(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function O7(t,e,n,r,i){x(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Qt(e,n);if(F_(t.visibleWrites,s))return null;{let o=aa(t.visibleWrites,s);return M_(o)?i.getChild(n):Fc(o,i.getChild(n))}}function U7(t,e,n,r){let i=Qt(e,n),s=YA(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=aa(t.visibleWrites,i);return Fc(o,r.getNode().getImmediateChild(n))}else return null}function P7(t,e){return YA(t.visibleWrites,e)}function V7(t,e,n,r,i,s,o){let a,A=aa(t.visibleWrites,e),l=YA(A,Ve());if(l!=null)a=l;else if(n!=null)a=Fc(A,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let c=[],u=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),d=h.getNext();for(;d&&c.length<i;)u(d,r)!==0&&c.push(d),d=h.getNext();return c}else return[]}function G7(){return{visibleWrites:Gi.empty(),allWrites:[],lastWriteId:-1}}function vm(t,e,n,r){return lP(t.writeTree,t.treePath,e,n,r)}function Cv(t,e){return L7(t.writeTree,t.treePath,e)}function mU(t,e,n,r){return O7(t.writeTree,t.treePath,e,n,r)}function Sm(t,e){return P7(t.writeTree,Qt(t.treePath,e))}function q7(t,e,n,r,i,s){return V7(t.writeTree,t.treePath,e,n,r,i,s)}function Iv(t,e,n){return U7(t.writeTree,t.treePath,e,n)}function cP(t,e){return uP(Qt(t.treePath,e),t.writeTree)}function uP(t,e){return{treePath:t,writeTree:e}}var x_=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;x(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),x(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,hg(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ug(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,kc(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,hg(r,e.snapshotNode,i.oldSnap));else throw mc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var L_=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},hP=new L_,pg=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Qs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Iv(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qA(this.viewCache_),s=q7(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function H7(t){return{filter:t}}function Y7(t,e){x(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),x(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function J7(t,e,n,r,i){let s=new x_,o,a;if(n.type===Is.OVERWRITE){let l=n;l.source.fromUser?o=O_(t,e,l.path,l.snap,r,i,s):(x(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!_e(l.path),o=bm(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Is.MERGE){let l=n;l.source.fromUser?o=z7(t,e,l.path,l.children,r,i,s):(x(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=U_(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Is.ACK_USER_WRITE){let l=n;l.revert?o=X7(t,e,l.path,r,i,s):o=j7(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Is.LISTEN_COMPLETE)o=K7(t,e,n.path,r,s);else throw mc("Unknown operation type: "+n.type);let A=s.getChanges();return W7(e,o,A),{viewCache:o,changes:A}}function W7(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=_m(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(sP(_m(e)))}}function dP(t,e,n,r,i,s){let o=e.eventCache;if(Sm(r,n)!=null)return e;{let a,A;if(_e(n))if(x(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=qA(e),c=l instanceof Ee?l:Ee.EMPTY_NODE,u=Cv(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let l=vm(r,qA(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=we(n);if(l===".priority"){x(ca(n)===1,"Can't have a priority with additional path components");let c=o.getNode();A=e.serverCache.getNode();let u=mU(r,n,c,A);u!=null?a=t.filter.updatePriority(c,u):a=o.getNode()}else{let c=nt(n),u;if(o.isCompleteForChild(l)){A=e.serverCache.getNode();let h=mU(r,n,o.getNode(),A);h!=null?u=o.getNode().getImmediateChild(l).updateChild(c,h):u=o.getNode().getImmediateChild(l)}else u=Iv(r,l,e.serverCache);u!=null?a=t.filter.updateChild(o.getNode(),l,u,c,i,s):a=o.getNode()}}return ig(e,a,o.isFullyInitialized()||_e(n),t.filter.filtersNodes())}}function bm(t,e,n,r,i,s,o,a){let A=e.serverCache,l,c=o?t.filter:t.filter.getIndexedFilter();if(_e(n))l=c.updateFullNode(A.getNode(),r,null);else if(c.filtersNodes()&&!A.isFiltered()){let d=A.getNode().updateChild(n,r);l=c.updateFullNode(A.getNode(),d,null)}else{let d=we(n);if(!A.isCompleteForPath(n)&&ca(n)>1)return e;let g=nt(n),m=A.getNode().getImmediateChild(d).updateChild(g,r);d===".priority"?l=c.updatePriority(A.getNode(),m):l=c.updateChild(A.getNode(),d,m,g,hP,null)}let u=oP(e,l,A.isFullyInitialized()||_e(n),c.filtersNodes()),h=new pg(i,u,s);return dP(t,u,n,i,h,a)}function O_(t,e,n,r,i,s,o){let a=e.eventCache,A,l,c=new pg(i,e,s);if(_e(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),A=ig(e,l,!0,t.filter.filtersNodes());else{let u=we(n);if(u===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),A=ig(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=nt(n),d=a.getNode().getImmediateChild(u),g;if(_e(h))g=r;else{let f=c.getCompleteChild(u);f!=null?uv(h)===".priority"&&f.getChild($U(h)).isEmpty()?g=f:g=f.updateChild(h,r):g=Ee.EMPTY_NODE}if(d.equals(g))A=e;else{let f=t.filter.updateChild(a.getNode(),u,g,h,c,o);A=ig(e,f,a.isFullyInitialized(),t.filter.filtersNodes())}}}return A}function CU(t,e){return t.eventCache.isCompleteForChild(e)}function z7(t,e,n,r,i,s,o){let a=e;return r.foreach((A,l)=>{let c=Qt(n,A);CU(e,we(c))&&(a=O_(t,a,c,l,i,s,o))}),r.foreach((A,l)=>{let c=Qt(n,A);CU(e,we(c))||(a=O_(t,a,c,l,i,s,o))}),a}function IU(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function U_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let A=e,l;_e(n)?l=r:l=new sr(null).setTree(n,r);let c=e.serverCache.getNode();return l.children.inorderTraversal((u,h)=>{if(c.hasChild(u)){let d=e.serverCache.getNode().getImmediateChild(u),g=IU(t,d,h);A=bm(t,A,new Ge(u),g,i,s,o,a)}}),l.children.inorderTraversal((u,h)=>{let d=!e.serverCache.isCompleteForChild(u)&&h.value===null;if(!c.hasChild(u)&&!d){let g=e.serverCache.getNode().getImmediateChild(u),f=IU(t,g,h);A=bm(t,A,new Ge(u),f,i,s,o,a)}}),A}function j7(t,e,n,r,i,s,o){if(Sm(i,n)!=null)return e;let a=e.serverCache.isFiltered(),A=e.serverCache;if(r.value!=null){if(_e(n)&&A.isFullyInitialized()||A.isCompleteForPath(n))return bm(t,e,n,A.getNode().getChild(n),i,s,a,o);if(_e(n)){let l=new sr(null);return A.getNode().forEachChild(ys,(c,u)=>{l=l.set(new Ge(c),u)}),U_(t,e,n,l,i,s,a,o)}else return e}else{let l=new sr(null);return r.foreach((c,u)=>{let h=Qt(n,c);A.isCompleteForPath(h)&&(l=l.set(c,A.getNode().getChild(h)))}),U_(t,e,n,l,i,s,a,o)}}function K7(t,e,n,r,i){let s=e.serverCache,o=oP(e,s.getNode(),s.isFullyInitialized()||_e(n),s.isFiltered());return dP(t,o,n,r,hP,i)}function X7(t,e,n,r,i,s){let o;if(Sm(r,n)!=null)return e;{let a=new pg(r,e,i),A=e.eventCache.getNode(),l;if(_e(n)||we(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=vm(r,qA(e));else{let u=e.serverCache.getNode();x(u instanceof Ee,"serverChildren would be complete if leaf node"),c=Cv(r,u)}c=c,l=t.filter.updateFullNode(A,c,s)}else{let c=we(n),u=Iv(r,c,e.serverCache);u==null&&e.serverCache.isCompleteForChild(c)&&(u=A.getImmediateChild(c)),u!=null?l=t.filter.updateChild(A,c,u,nt(n),a,s):e.eventCache.getNode().hasChild(c)?l=t.filter.updateChild(A,c,Ee.EMPTY_NODE,nt(n),a,s):l=A,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=vm(r,qA(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Sm(r,Ve())!=null,ig(e,l,o,t.filter.filtersNodes())}}var P_=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new dg(r.getIndex()),s=m7(r);this.processor_=H7(s);let o=n.serverCache,a=n.eventCache,A=i.updateFullNode(Ee.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(Ee.EMPTY_NODE,a.getNode(),null),c=new Qs(A,o.isFullyInitialized(),i.filtersNodes()),u=new Qs(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Gm(u,c),this.eventGenerator_=new k_(this.query_)}get query(){return this.query_}};function Z7(t){return t.viewCache_.serverCache.getNode()}function $7(t){return _m(t.viewCache_)}function eee(t,e){let n=qA(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(we(e)).isEmpty())?n.getChild(e):null}function yU(t){return t.eventRegistrations_.length===0}function tee(t,e){t.eventRegistrations_.push(e)}function BU(t,e,n){let r=[];if(n){x(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function QU(t,e,n,r){e.type===Is.MERGE&&e.source.queryId!==null&&(x(qA(t.viewCache_),"We should always have a full cache before handling merges"),x(_m(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=J7(t.processor_,i,e,n,r);return Y7(t.processor_,s.viewCache),x(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,gP(t,s.changes,s.viewCache.eventCache.getNode(),null)}function nee(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(at,(s,o)=>{r.push(kc(s,o))}),n.isFullyInitialized()&&r.push(sP(n.getNode())),gP(t,r,n.getNode(),e)}function gP(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return v7(t.eventGenerator_,e,n,i)}var Dm,Rm=class{constructor(){this.views=new Map}};function ree(t){x(!Dm,"__referenceConstructor has already been defined"),Dm=t}function iee(){return x(Dm,"Reference.ts has not been loaded"),Dm}function see(t){return t.views.size===0}function yv(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return x(s!=null,"SyncTree gave us an op for an invalid query."),QU(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(QU(o,e,n,r));return s}}function fP(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=vm(n,i?r:null),A=!1;a?A=!0:r instanceof Ee?(a=Cv(n,r),A=!1):(a=Ee.EMPTY_NODE,A=!1);let l=Gm(new Qs(a,A,!1),new Qs(r,i,!1));return new P_(e,l)}return o}function oee(t,e,n,r,i,s){let o=fP(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),tee(o,n),nee(o,n)}function aee(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=ua(t);if(i==="default")for(let[A,l]of t.views.entries())o=o.concat(BU(l,n,r)),yU(l)&&(t.views.delete(A),l.query._queryParams.loadsAllData()||s.push(l.query));else{let A=t.views.get(i);A&&(o=o.concat(BU(A,n,r)),yU(A)&&(t.views.delete(i),A.query._queryParams.loadsAllData()||s.push(A.query)))}return a&&!ua(t)&&s.push(new(iee())(e._repo,e._path)),{removed:s,events:o}}function pP(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Aa(t,e){let n=null;for(let r of t.views.values())n=n||eee(r,e);return n}function EP(t,e){if(e._queryParams.loadsAllData())return Hm(t);{let r=e._queryIdentifier;return t.views.get(r)}}function mP(t,e){return EP(t,e)!=null}function ua(t){return Hm(t)!=null}function Hm(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Tm;function Aee(t){x(!Tm,"__referenceConstructor has already been defined"),Tm=t}function lee(){return x(Tm,"Reference.ts has not been loaded"),Tm}var cee=1,km=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new sr(null),this.pendingWriteTree_=G7(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Bv(t,e,n,r,i){return R7(t.pendingWriteTree_,e,n,r,i),i?Uc(t,new Nc(pv(),e,n)):[]}function uee(t,e,n,r){T7(t.pendingWriteTree_,e,n,r);let i=sr.fromObject(n);return Uc(t,new fg(pv(),e,i))}function oa(t,e,n=!1){let r=k7(t.pendingWriteTree_,e);if(N7(t.pendingWriteTree_,e)){let s=new sr(null);return r.snap!=null?s=s.set(Ve(),!0):fn(r.children,o=>{s=s.set(new Ge(o),!0)}),Uc(t,new T_(r.path,s,n))}else return[]}function _g(t,e,n){return Uc(t,new Nc(Ev(),e,n))}function hee(t,e,n){let r=sr.fromObject(n);return Uc(t,new fg(Ev(),e,r))}function dee(t,e){return Uc(t,new wm(Ev(),e))}function gee(t,e,n){let r=Qv(t,n);if(r){let i=wv(r),s=i.path,o=i.queryId,a=ir(s,e),A=new wm(mv(o),a);return _v(t,s,A)}else return[]}function Nm(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||mP(o,e))){let A=aee(o,e,n,r);see(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=A.removed;if(a=A.events,!i){let c=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(s,(h,d)=>ua(d));if(c&&!u){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let d=Eee(h);for(let g=0;g<d.length;++g){let f=d[g],m=f.query,y=BP(t,f);t.listenProvider_.startListening(og(m),Eg(t,m),y.hashFn,y.onComplete)}}}!u&&l.length>0&&!r&&(c?t.listenProvider_.stopListening(og(e),null):l.forEach(h=>{let d=t.queryToTagMap.get(Jm(h));t.listenProvider_.stopListening(og(h),d)}))}mee(t,l)}return a}function CP(t,e,n,r){let i=Qv(t,r);if(i!=null){let s=wv(i),o=s.path,a=s.queryId,A=ir(o,e),l=new Nc(mv(a),A,n);return _v(t,o,l)}else return[]}function fee(t,e,n,r){let i=Qv(t,r);if(i){let s=wv(i),o=s.path,a=s.queryId,A=ir(o,e),l=sr.fromObject(n),c=new fg(mv(a),A,l);return _v(t,o,c)}else return[]}function V_(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,d)=>{let g=ir(h,i);s=s||Aa(d,g),o=o||ua(d)});let a=t.syncPointTree_.get(i);a?(o=o||ua(a),s=s||Aa(a,Ve())):(a=new Rm,t.syncPointTree_=t.syncPointTree_.set(i,a));let A;s!=null?A=!0:(A=!1,s=Ee.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((d,g)=>{let f=Aa(g,Ve());f&&(s=s.updateImmediateChild(d,f))}));let l=mP(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Jm(e);x(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let d=Cee();t.queryToTagMap.set(h,d),t.tagToQueryMap.set(d,h)}let c=qm(t.pendingWriteTree_,i),u=oee(a,e,n,c,s,A);if(!l&&!o&&!r){let h=EP(a,e);u=u.concat(Iee(t,e,h))}return u}function Ym(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let A=ir(o,e),l=Aa(a,A);if(l)return l});return lP(i,e,s,n,!0)}function pee(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,c)=>{let u=ir(l,n);r=r||Aa(c,u)});let i=t.syncPointTree_.get(n);i?r=r||Aa(i,Ve()):(i=new Rm,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new Qs(r,!0,!1):null,a=qm(t.pendingWriteTree_,e._path),A=fP(i,e,a,s?o.getNode():Ee.EMPTY_NODE,s);return $7(A)}function Uc(t,e){return IP(e,t.syncPointTree_,null,qm(t.pendingWriteTree_,Ve()))}function IP(t,e,n,r){if(_e(t.path))return yP(t,e,n,r);{let i=e.get(Ve());n==null&&i!=null&&(n=Aa(i,Ve()));let s=[],o=we(t.path),a=t.operationForChild(o),A=e.children.get(o);if(A&&a){let l=n?n.getImmediateChild(o):null,c=cP(r,o);s=s.concat(IP(a,A,l,c))}return i&&(s=s.concat(yv(i,t,r,n))),s}}function yP(t,e,n,r){let i=e.get(Ve());n==null&&i!=null&&(n=Aa(i,Ve()));let s=[];return e.children.inorderTraversal((o,a)=>{let A=n?n.getImmediateChild(o):null,l=cP(r,o),c=t.operationForChild(o);c&&(s=s.concat(yP(c,a,A,l)))}),i&&(s=s.concat(yv(i,t,r,n))),s}function BP(t,e){let n=e.query,r=Eg(t,n);return{hashFn:()=>(Z7(e)||Ee.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?gee(t,n._path,r):dee(t,n._path);{let s=D$(i,n);return Nm(t,n,null,s)}}}}function Eg(t,e){let n=Jm(e);return t.queryToTagMap.get(n)}function Jm(t){return t._path.toString()+"$"+t._queryIdentifier}function Qv(t,e){return t.tagToQueryMap.get(e)}function wv(t){let e=t.indexOf("$");return x(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ge(t.substr(0,e))}}function _v(t,e,n){let r=t.syncPointTree_.get(e);x(r,"Missing sync point for query tag that we're tracking");let i=qm(t.pendingWriteTree_,e);return yv(r,n,i,null)}function Eee(t){return t.fold((e,n,r)=>{if(n&&ua(n))return[Hm(n)];{let i=[];return n&&(i=pP(n)),fn(r,(s,o)=>{i=i.concat(o)}),i}})}function og(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(lee())(t._repo,t._path):t}function mee(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Jm(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Cee(){return cee++}function Iee(t,e,n){let r=e._path,i=Eg(t,e),s=BP(t,n),o=t.listenProvider_.startListening(og(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)x(!ua(a.value),"If we're adding a query, it shouldn't be shadowed");else{let A=a.fold((l,c,u)=>{if(!_e(l)&&c&&ua(c))return[Hm(c).query];{let h=[];return c&&(h=h.concat(pP(c).map(d=>d.query))),fn(u,(d,g)=>{h=h.concat(g)}),h}});for(let l=0;l<A.length;++l){let c=A[l];t.listenProvider_.stopListening(og(c),Eg(t,c))}}return o}var G_=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},q_=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Qt(this.path_,e);return new t(this.syncTree_,n)}node(){return Ym(this.syncTree_,this.path_)}},yee=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},wU=function(t,e,n){if(!t||typeof t!="object")return t;if(x(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Bee(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Qee(t[".sv"],e);x(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Bee=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:x(!1,"Unexpected server value: "+t)}},Qee=function(t,e,n){t.hasOwnProperty("increment")||x(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&x(!1,"Unexpected increment value: "+r);let i=e.node();if(x(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},QP=function(t,e,n,r){return Sv(e,new q_(n,t),r)},vv=function(t,e,n){return Sv(t,new G_(e),n)};function Sv(t,e,n){let r=t.getPriority().val(),i=wU(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=wU(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Rc(a,Dt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Rc(i))),o.forEachChild(at,(a,A)=>{let l=Sv(A,e.getImmediateChild(a),n);l!==A&&(s=s.updateImmediateChild(a,l))}),s}}var mg=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Wm(t,e){let n=e instanceof Ge?e:new Ge(e),r=t,i=we(n);for(;i!==null;){let s=$o(r.node.children,i)||{children:{},childCount:0};r=new mg(i,r,s),n=nt(n),i=we(n)}return r}function JA(t){return t.node.value}function bv(t,e){t.node.value=e,H_(t)}function wP(t){return t.node.childCount>0}function wee(t){return JA(t)===void 0&&!wP(t)}function zm(t,e){fn(t.node.children,(n,r)=>{e(new mg(n,t,r))})}function _P(t,e,n,r){n&&!r&&e(t),zm(t,i=>{_P(i,e,!0,r)}),n&&r&&e(t)}function _ee(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function vg(t){return new Ge(t.parent===null?t.name:vg(t.parent)+"/"+t.name)}function H_(t){t.parent!==null&&vee(t.parent,t.name,t)}function vee(t,e,n){let r=wee(n),i=ui(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,H_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,H_(t))}var See=/[\[\].#$\/\u0000-\u001F\u007F]/,bee=/[\[\].#$\u0000-\u001F\u007F]/,t_=10*1024*1024,jm=function(t){return typeof t=="string"&&t.length!==0&&!See.test(t)},vP=function(t){return typeof t=="string"&&t.length!==0&&!bee.test(t)},Dee=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vP(t)},Cg=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Pm(t)||t&&typeof t=="object"&&ui(t,".sv")},ws=function(t,e,n,r){r&&e===void 0||Sg(Qr(t,"value"),e,n)},Sg=function(t,e,n){let r=n instanceof Ge?new g_(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+PA(r));if(typeof e=="function")throw new Error(t+"contains a function "+PA(r)+" with contents = "+e.toString());if(Pm(e))throw new Error(t+"contains "+e.toString()+" "+PA(r));if(typeof e=="string"&&e.length>t_/3&&Nd(e)>t_)throw new Error(t+"contains a string greater than "+t_+" utf8 bytes "+PA(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(fn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!jm(o)))throw new Error(t+" contains an invalid key ("+o+") "+PA(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);s7(r,o),Sg(t,a,r),o7(r)}),i&&s)throw new Error(t+' contains ".value" child '+PA(r)+" in addition to actual children.")}},Ree=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let s=lg(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!jm(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(i7);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&di(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},SP=function(t,e,n,r){if(r&&e===void 0)return;let i=Qr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];fn(e,(o,a)=>{let A=new Ge(o);if(Sg(i,a,Qt(n,A)),uv(A)===".priority"&&!Cg(a))throw new Error(i+"contains an invalid value for '"+A.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(A)}),Ree(i,s)},Dv=function(t,e,n){if(!(n&&e===void 0)){if(Pm(e))throw new Error(Qr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Cg(e))throw new Error(Qr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bg=function(t,e,n,r){if(!(r&&n===void 0)&&!jm(n))throw new Error(Qr(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Pc=function(t,e,n,r){if(!(r&&n===void 0)&&!vP(n))throw new Error(Qr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Tee=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Pc(t,e,n,r)},Pr=function(t,e){if(we(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},bP=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Dee(n))throw new Error(Qr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Y_=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Km(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!hv(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function DP(t,e,n){Km(t,n),RP(t,r=>hv(r,e))}function Vr(t,e,n){Km(t,n),RP(t,r=>di(r,e)||di(e,r))}function RP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(kee(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function kee(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();GA&&gn("event: "+n.toString()),Lc(r)}}}var TP="repo_interrupt",Nee=25,J_=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Y_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qm(),this.transactionQueueTree_=new mg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Fee(t,e,n){if(t.stats_=Av(t.repoInfo_),t.forceRestClient_||N$())t.server_=new __(t.repoInfo_,(r,i,s,o)=>{_U(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>vU(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$t(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new dv(t.repoInfo_,e,(r,i,s,o)=>{_U(t,r,i,s,o)},r=>{vU(t,r)},r=>{Mee(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=M$(t.repoInfo_,()=>new R_(t.stats_,t.server_)),t.infoData_=new v_,t.infoSyncTree_=new km({startListening:(r,i,s,o)=>{let a=[],A=t.infoData_.getNode(r._path);return A.isEmpty()||(a=_g(t.infoSyncTree_,r._path,A),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Rv(t,"connected",!1),t.serverSyncTree_=new km({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,A)=>{let l=o(a,A);Vr(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function kP(t){let n=t.infoData_.getNode(new Ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Dg(t){return yee({timestamp:kP(t)})}function _U(t,e,n,r,i){t.dataUpdateCount++;let s=new Ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let A=kd(n,l=>Dt(l));o=fee(t.serverSyncTree_,s,A,i)}else{let A=Dt(n);o=CP(t.serverSyncTree_,s,A,i)}else if(r){let A=kd(n,l=>Dt(l));o=hee(t.serverSyncTree_,s,A)}else{let A=Dt(n);o=_g(t.serverSyncTree_,s,A)}let a=s;o.length>0&&(a=Mc(t,s)),Vr(t.eventQueue_,a,o)}function vU(t,e){Rv(t,"connected",e),e===!1&&Oee(t)}function Mee(t,e){fn(e,(n,r)=>{Rv(t,n,r)})}function Rv(t,e,n){let r=new Ge("/.info/"+e),i=Dt(n);t.infoData_.updateSnapshot(r,i);let s=_g(t.infoSyncTree_,r,i);Vr(t.eventQueue_,r,s)}function Xm(t){return t.nextWriteId_++}function xee(t,e,n){let r=pee(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=Dt(i).withIndex(e._queryParams.getIndex());V_(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=_g(t.serverSyncTree_,e._path,s);else{let a=Eg(t.serverSyncTree_,e);o=CP(t.serverSyncTree_,e._path,s,a)}return Vr(t.eventQueue_,e._path,o),Nm(t.serverSyncTree_,e,n,null,!0),s},i=>(Vc(t,"get for query "+$t(e)+" failed: "+i),Promise.reject(new Error(i))))}function Tv(t,e,n,r,i){Vc(t,"set",{path:e.toString(),value:n,priority:r});let s=Dg(t),o=Dt(n,r),a=Ym(t.serverSyncTree_,e),A=vv(o,a,s),l=Xm(t),c=Bv(t.serverSyncTree_,e,A,l,!0);Km(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(h,d)=>{let g=h==="ok";g||Vn("set at "+e+" failed: "+h);let f=oa(t.serverSyncTree_,l,!g);Vr(t.eventQueue_,e,f),ha(t,i,h,d)});let u=Nv(t,e);Mc(t,u),Vr(t.eventQueue_,u,[])}function Lee(t,e,n,r){Vc(t,"update",{path:e.toString(),value:n});let i=!0,s=Dg(t),o={};if(fn(n,(a,A)=>{i=!1,o[a]=QP(Qt(e,a),Dt(A),t.serverSyncTree_,s)}),i)gn("update() called with empty data.  Don't do anything."),ha(t,r,"ok",void 0);else{let a=Xm(t),A=uee(t.serverSyncTree_,e,o,a);Km(t.eventQueue_,A),t.server_.merge(e.toString(),n,(l,c)=>{let u=l==="ok";u||Vn("update at "+e+" failed: "+l);let h=oa(t.serverSyncTree_,a,!u),d=h.length>0?Mc(t,e):e;Vr(t.eventQueue_,d,h),ha(t,r,l,c)}),fn(n,l=>{let c=Nv(t,Qt(e,l));Mc(t,c)}),Vr(t.eventQueue_,e,[])}}function Oee(t){Vc(t,"onDisconnectEvents");let e=Dg(t),n=Qm();b_(t.onDisconnect_,Ve(),(i,s)=>{let o=QP(i,s,t.serverSyncTree_,e);Oc(n,i,o)});let r=[];b_(n,Ve(),(i,s)=>{r=r.concat(_g(t.serverSyncTree_,i,s));let o=Nv(t,i);Mc(t,o)}),t.onDisconnect_=Qm(),Vr(t.eventQueue_,Ve(),r)}function Uee(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&S_(t.onDisconnect_,e),ha(t,n,r,i)})}function SU(t,e,n,r){let i=Dt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Oc(t.onDisconnect_,e,i),ha(t,r,s,o)})}function Pee(t,e,n,r,i){let s=Dt(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Oc(t.onDisconnect_,e,s),ha(t,i,o,a)})}function Vee(t,e,n,r){if(HE(n)){gn("onDisconnect().update() called with empty data.  Don't do anything."),ha(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&fn(n,(o,a)=>{let A=Dt(a);Oc(t.onDisconnect_,Qt(e,o),A)}),ha(t,r,i,s)})}function Gee(t,e,n){let r;we(e._path)===".info"?r=V_(t.infoSyncTree_,e,n):r=V_(t.serverSyncTree_,e,n),DP(t.eventQueue_,e._path,r)}function W_(t,e,n){let r;we(e._path)===".info"?r=Nm(t.infoSyncTree_,e,n):r=Nm(t.serverSyncTree_,e,n),DP(t.eventQueue_,e._path,r)}function NP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(TP)}function qee(t){t.persistentConnection_&&t.persistentConnection_.resume(TP)}function Vc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),gn(n,...e)}function ha(t,e,n,r){e&&Lc(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function Hee(t,e,n,r,i,s){Vc(t,"transaction on "+e);let o={path:e,update:n,onComplete:r,status:null,order:VU(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=kv(t,e,void 0);o.currentInputSnapshot=a;let A=o.update(a.val());if(A===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Sg("transaction failed: Data returned ",A,o.path),o.status=0;let l=Wm(t.transactionQueueTree_,e),c=JA(l)||[];c.push(o),bv(l,c);let u;typeof A=="object"&&A!==null&&ui(A,".priority")?(u=$o(A,".priority"),x(Cg(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(Ym(t.serverSyncTree_,e)||Ee.EMPTY_NODE).getPriority().val();let h=Dg(t),d=Dt(A,u),g=vv(d,a,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=g,o.currentWriteId=Xm(t);let f=Bv(t.serverSyncTree_,e,g,o.currentWriteId,o.applyLocally);Vr(t.eventQueue_,e,f),Zm(t,t.transactionQueueTree_)}}function kv(t,e,n){return Ym(t.serverSyncTree_,e,n)||Ee.EMPTY_NODE}function Zm(t,e=t.transactionQueueTree_){if(e||$m(t,e),JA(e)){let n=MP(t,e);x(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Yee(t,vg(e),n)}else wP(e)&&zm(e,n=>{Zm(t,n)})}function Yee(t,e,n){let r=n.map(l=>l.currentWriteId),i=kv(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let c=n[l];x(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;let u=ir(e,c.path);s=s.updateChild(u,c.currentOutputSnapshotRaw)}let a=s.val(!0),A=e;t.server_.put(A.toString(),a,l=>{Vc(t,"transaction put response",{path:A.toString(),status:l});let c=[];if(l==="ok"){let u=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(oa(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&u.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();$m(t,Wm(t.transactionQueueTree_,e)),Zm(t,t.transactionQueueTree_),Vr(t.eventQueue_,e,c);for(let h=0;h<u.length;h++)Lc(u[h])}else{if(l==="datastale")for(let u=0;u<n.length;u++)n[u].status===3?n[u].status=4:n[u].status=0;else{Vn("transaction at "+A.toString()+" failed: "+l);for(let u=0;u<n.length;u++)n[u].status=4,n[u].abortReason=l}Mc(t,e)}},o)}function Mc(t,e){let n=FP(t,e),r=vg(n),i=MP(t,n);return Jee(t,i,r),r}function Jee(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let A=e[a],l=ir(n,A.path),c=!1,u;if(x(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),A.status===4)c=!0,u=A.abortReason,i=i.concat(oa(t.serverSyncTree_,A.currentWriteId,!0));else if(A.status===0)if(A.retryCount>=Nee)c=!0,u="maxretry",i=i.concat(oa(t.serverSyncTree_,A.currentWriteId,!0));else{let h=kv(t,A.path,o);A.currentInputSnapshot=h;let d=e[a].update(h.val());if(d!==void 0){Sg("transaction failed: Data returned ",d,A.path);let g=Dt(d);typeof d=="object"&&d!=null&&ui(d,".priority")||(g=g.updatePriority(h.getPriority()));let m=A.currentWriteId,y=Dg(t),I=vv(g,h,y);A.currentOutputSnapshotRaw=g,A.currentOutputSnapshotResolved=I,A.currentWriteId=Xm(t),o.splice(o.indexOf(m),1),i=i.concat(Bv(t.serverSyncTree_,A.path,I,A.currentWriteId,A.applyLocally)),i=i.concat(oa(t.serverSyncTree_,m,!0))}else c=!0,u="nodata",i=i.concat(oa(t.serverSyncTree_,A.currentWriteId,!0))}Vr(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(u),!1,null))))}$m(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Lc(r[a]);Zm(t,t.transactionQueueTree_)}function FP(t,e){let n,r=t.transactionQueueTree_;for(n=we(e);n!==null&&JA(r)===void 0;)r=Wm(r,n),e=nt(e),n=we(e);return r}function MP(t,e){let n=[];return xP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function xP(t,e,n){let r=JA(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);zm(e,i=>{xP(t,i,n)})}function $m(t,e){let n=JA(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,bv(e,n.length>0?n:void 0)}zm(e,r=>{$m(t,r)})}function Nv(t,e){let n=vg(FP(t,e)),r=Wm(t.transactionQueueTree_,e);return _ee(r,i=>{n_(t,i)}),n_(t,r),_P(r,i=>{n_(t,i)}),n}function n_(t,e){let n=JA(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(x(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(x(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(oa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?bv(e,void 0):n.length=s+1,Vr(t.eventQueue_,vg(e),i);for(let o=0;o<r.length;o++)Lc(r[o])}}function Wee(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function zee(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vn(`Invalid query segment '${n}' in query '${t}'`)}return e}var z_=function(t,e){let n=jee(t),r=n.namespace;n.domain==="firebase.com"&&Bs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Bs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||w$();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new pm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ge(n.pathString)}},jee=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",A=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let c=t.indexOf("/");c===-1&&(c=t.length);let u=t.indexOf("?");u===-1&&(u=t.length),e=t.substring(0,Math.min(c,u)),c<u&&(i=Wee(t.substring(c,u)));let h=zee(t.substring(Math.min(t.length,u)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",A=parseInt(e.substring(l+1),10)):l=e.length;let d=e.slice(0,l);if(d.toLowerCase()==="localhost")n="localhost";else if(d.split(".").length<=2)n=d;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:A,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var bU="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Kee=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=bU.charAt(n%64),n=Math.floor(n/64);x(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=bU.charAt(e[i]);return x(o.length===20,"nextPushId: Length should be 20."),o}}();var Fm=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$t(this.snapshot.exportVal())}},Mm=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Ig=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return x(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var xm=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new dn;return Uee(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Pr("OnDisconnect.remove",this._path);let e=new dn;return SU(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Pr("OnDisconnect.set",this._path),ws("OnDisconnect.set",e,this._path,!1);let n=new dn;return SU(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Pr("OnDisconnect.setWithPriority",this._path),ws("OnDisconnect.setWithPriority",e,this._path,!1),Dv("OnDisconnect.setWithPriority",n,!1);let r=new dn;return Pee(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Pr("OnDisconnect.update",this._path),SP("OnDisconnect.update",e,this._path,!1);let n=new dn;return Vee(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var or=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return _e(this._path)?null:uv(this._path)}get ref(){return new Gr(this._repo,this._path)}get _queryIdentifier(){let e=gU(this._queryParams),n=av(e);return n==="{}"?"default":n}get _queryObject(){return gU(this._queryParams)}isEqual(e){if(e=de(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=hv(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+r7(this._path)}};function eC(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ga(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ys){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==la)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==fo)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===at){if(e!=null&&!Cg(e)||n!=null&&!Cg(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(x(t.getIndex()instanceof cg||t.getIndex()===fv,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function tC(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Gr=class t extends or{constructor(e,n){super(e,n,new gg,!1)}get parent(){let e=$U(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},xc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Ge(e),r=da(this.ref,e);return new t(this._node.getChild(n),r,at)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,da(this.ref,r),at)))}hasChild(e){let n=new Ge(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Fv(t,e){return t=de(t),t._checkNotDeleted("ref"),e!==void 0?da(t._root,e):t._root}function Mv(t,e){t=de(t),t._checkNotDeleted("refFromURL");let n=z_(e,t._repo.repoInfo_.nodeAdmin);bP("refFromURL",n);let r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Bs("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Fv(t,n.path.toString())}function da(t,e){return t=de(t),we(t._path)===null?Tee("child","path",e,!1):Pc("child","path",e,!1),new Gr(t._repo,Qt(t._path,e))}function LP(t,e){t=de(t),Pr("push",t._path),ws("push",e,t._path,!0);let n=kP(t._repo),r=Kee(n),i=da(t,r),s=da(t,r),o;return e!=null?o=nC(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function OP(t){return Pr("remove",t._path),nC(t,null)}function nC(t,e){t=de(t),Pr("set",t._path),ws("set",e,t._path,!1);let n=new dn;return Tv(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function UP(t,e){t=de(t),Pr("setPriority",t._path),Dv("setPriority",e,!1);let n=new dn;return Tv(t._repo,Qt(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function PP(t,e,n){if(Pr("setWithPriority",t._path),ws("setWithPriority",e,t._path,!1),Dv("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new dn;return Tv(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function VP(t,e){SP("update",e,t._path,!1);let n=new dn;return Lee(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function GP(t){t=de(t);let e=new Ig(()=>{}),n=new yg(e);return xee(t._repo,t,n).then(r=>new xc(r,new Gr(t._repo,t._path),t._queryParams.getIndex()))}var yg=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Fm("value",this,new xc(e.snapshotNode,new Gr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Mm(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Lm=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Mm(this,e,n):null}createEvent(e,n){x(e.childName!=null,"Child events should have a childName.");let r=da(new Gr(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Fm(e.type,this,new xc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Rg(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let A=n,l=(c,u)=>{W_(t._repo,t,a),A(c,u)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Ig(n,s||void 0),a=e==="value"?new yg(o):new Lm(e,o);return Gee(t._repo,t,a),()=>W_(t._repo,t,a)}function rC(t,e,n,r){return Rg(t,"value",e,n,r)}function xv(t,e,n,r){return Rg(t,"child_added",e,n,r)}function Lv(t,e,n,r){return Rg(t,"child_changed",e,n,r)}function Ov(t,e,n,r){return Rg(t,"child_moved",e,n,r)}function Uv(t,e,n,r){return Rg(t,"child_removed",e,n,r)}function Pv(t,e,n){let r=null,i=n?new Ig(n):null;e==="value"?r=new yg(i):e&&(r=new Lm(e,i)),W_(t._repo,t,r)}var qr=class{},Om=class extends qr{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){ws("endAt",this._value,e._path,!0);let n=w_(e._queryParams,this._value,this._key);if(tC(n),ga(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new or(e._repo,e._path,n,e._orderByCalled)}};function qP(t,e){return bg("endAt","key",e,!0),new Om(t,e)}var j_=class extends qr{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){ws("endBefore",this._value,e._path,!1);let n=B7(e._queryParams,this._value,this._key);if(tC(n),ga(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new or(e._repo,e._path,n,e._orderByCalled)}};function HP(t,e){return bg("endBefore","key",e,!0),new j_(t,e)}var Um=class extends qr{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){ws("startAt",this._value,e._path,!0);let n=Q_(e._queryParams,this._value,this._key);if(tC(n),ga(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new or(e._repo,e._path,n,e._orderByCalled)}};function YP(t=null,e){return bg("startAt","key",e,!0),new Um(t,e)}var K_=class extends qr{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){ws("startAfter",this._value,e._path,!1);let n=y7(e._queryParams,this._value,this._key);if(tC(n),ga(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new or(e._repo,e._path,n,e._orderByCalled)}};function JP(t,e){return bg("startAfter","key",e,!0),new K_(t,e)}var X_=class extends qr{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new or(e._repo,e._path,C7(e._queryParams,this._limit),e._orderByCalled)}};function WP(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new X_(t)}var Z_=class extends qr{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new or(e._repo,e._path,I7(e._queryParams,this._limit),e._orderByCalled)}};function zP(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Z_(t)}var $_=class extends qr{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){eC(e,"orderByChild");let n=new Ge(this._path);if(_e(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new cg(n),i=Vm(e._queryParams,r);return ga(i),new or(e._repo,e._path,i,!0)}};function jP(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pc("orderByChild","path",t,!1),new $_(t)}var ev=class extends qr{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){eC(e,"orderByKey");let n=Vm(e._queryParams,ys);return ga(n),new or(e._repo,e._path,n,!0)}};function KP(){return new ev}var tv=class extends qr{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){eC(e,"orderByPriority");let n=Vm(e._queryParams,at);return ga(n),new or(e._repo,e._path,n,!0)}};function XP(){return new tv}var nv=class extends qr{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){eC(e,"orderByValue");let n=Vm(e._queryParams,fv);return ga(n),new or(e._repo,e._path,n,!0)}};function ZP(){return new nv}var rv=class extends qr{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(ws("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Om(this._value,this._key)._apply(new Um(this._value,this._key)._apply(e))}};function $P(t,e){return bg("equalTo","key",e,!0),new rv(t,e)}function fi(t,...e){let n=de(t);for(let r of e)n=r._apply(n);return n}ree(Gr);Aee(Gr);var Xee="FIREBASE_DATABASE_EMULATOR_HOST",iv={},Zee=!1;function $ee(t,e,n,r){t.repoInfo_=new pm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Vv(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Bs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=z_(s,i),a=o.repoInfo,A,l;typeof process<"u"&&process.env&&(l=process.env[Xee]),l?(A=!0,s=`http://${l}?ns=${a.namespace}`,o=z_(s,i),a=o.repoInfo):A=!o.repoInfo.secure;let c=i&&A?new rg(rg.OWNER):new c_(t.name,t.options,e);bP("Invalid Firebase Database URL",o),_e(o.path)||Bs("Database URL must point to the root of a Firebase Database (not including a child path).");let u=tte(a,t,c,new l_(t.name,n));return new sv(u,t)}function ete(t,e){let n=iv[e];(!n||n[t.key]!==t)&&Bs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),NP(t),delete n[t.key]}function tte(t,e,n,r){let i=iv[e.name];i||(i={},iv[e.name]=i);let s=i[t.toURLString()];return s&&Bs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new J_(t,Zee,n,r),i[t.toURLString()]=s,s}var sv=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Fee(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gr(this._repo,Ve())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ete(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Bs("Cannot call "+e+" on a deleted database.")}};function e2(){ZU.IS_TRANSPORT_INITIALIZED&&Vn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function t2(){e2(),Ag.forceDisallow()}function n2(){e2(),vc.forceDisallow(),Ag.forceAllow()}function r2(t,e,n,r={}){t=de(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Bs("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Bs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new rg(rg.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Cc(r.mockUserToken,t.app.options.projectId);s=new rg(o)}$ee(i,e,n,s)}function i2(t){t=de(t),t._checkNotDeleted("goOffline"),NP(t._repo)}function s2(t){t=de(t),t._checkNotDeleted("goOnline"),qee(t._repo)}function o2(t,e){qU(t,e)}function nte(t){cv(Ic),ho(new bn("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Vv(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Or($O,eU,t),Or($O,eU,"esm2017")}var rte={".sv":"timestamp"};function a2(){return rte}function A2(t){return{".sv":{increment:t}}}var ov=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function l2(t,e,n){var r;if(t=de(t),Pr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,s=new dn,o=(A,l,c)=>{let u=null;A?s.reject(A):(u=new xc(c,new Gr(t._repo,t._path),at),s.resolve(new ov(l,u)))},a=rC(t,()=>{});return Hee(t._repo,t._path,e,o,a,i),s.promise}dv.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};dv.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};O$(RU.default.Client);nte("node");var ite="@firebase/database-compat",ste="1.0.3";var ote=new ea("@firebase/database-compat"),c2=function(t){let e="FIREBASE WARNING: "+t;ote.warn(e)};var ate=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Qr(t,e)+"must be a boolean.")},Ate=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Qr(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var Gv=class{constructor(e){this._delegate=e}cancel(e){ce("OnDisconnect.cancel",0,1,arguments.length),cn("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){ce("OnDisconnect.remove",0,1,arguments.length),cn("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){ce("OnDisconnect.set",1,2,arguments.length),cn("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){ce("OnDisconnect.setWithPriority",2,3,arguments.length),cn("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(ce("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,c2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cn("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}};var qv=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return ce("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var WA=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return ce("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ce("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ce("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ce("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return ce("DataSnapshot.child",0,1,arguments.length),e=String(e),Pc("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return ce("DataSnapshot.hasChild",1,1,arguments.length),Pc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return ce("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return ce("DataSnapshot.forEach",1,1,arguments.length),cn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return ce("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ce("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ce("DataSnapshot.ref",0,0,arguments.length),new po(this._database,this._delegate.ref)}get ref(){return this.getRef()}},iC=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;ce("Query.on",2,4,arguments.length),cn("Query.on","callback",n,!1);let o=t.getCancelAndContextArgs_("Query.on",r,i),a=(l,c)=>{n.call(o.context,new WA(this.database,l),c)};a.userCallback=n,a.context=o.context;let A=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return rC(this._delegate,a,A),n;case"child_added":return xv(this._delegate,a,A),n;case"child_removed":return Uv(this._delegate,a,A),n;case"child_changed":return Lv(this._delegate,a,A),n;case"child_moved":return Ov(this._delegate,a,A),n;default:throw new Error(Qr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(ce("Query.off",0,3,arguments.length),Ate("Query.off",e,!0),cn("Query.off","callback",n,!0),r0("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,Pv(this._delegate,e,i)}else Pv(this._delegate,e)}get(){return GP(this._delegate).then(e=>new WA(this.database,e))}once(e,n,r,i){ce("Query.once",1,4,arguments.length),cn("Query.once","callback",n,!0);let s=t.getCancelAndContextArgs_("Query.once",r,i),o=new dn,a=(l,c)=>{let u=new WA(this.database,l);n&&n.call(s.context,u,c),o.resolve(u)};a.userCallback=n,a.context=s.context;let A=l=>{s.cancel&&s.cancel.call(s.context,l),o.reject(l)};switch(e){case"value":rC(this._delegate,a,A,{onlyOnce:!0});break;case"child_added":xv(this._delegate,a,A,{onlyOnce:!0});break;case"child_removed":Uv(this._delegate,a,A,{onlyOnce:!0});break;case"child_changed":Lv(this._delegate,a,A,{onlyOnce:!0});break;case"child_moved":Ov(this._delegate,a,A,{onlyOnce:!0});break;default:throw new Error(Qr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return ce("Query.limitToFirst",1,1,arguments.length),new t(this.database,fi(this._delegate,WP(e)))}limitToLast(e){return ce("Query.limitToLast",1,1,arguments.length),new t(this.database,fi(this._delegate,zP(e)))}orderByChild(e){return ce("Query.orderByChild",1,1,arguments.length),new t(this.database,fi(this._delegate,jP(e)))}orderByKey(){return ce("Query.orderByKey",0,0,arguments.length),new t(this.database,fi(this._delegate,KP()))}orderByPriority(){return ce("Query.orderByPriority",0,0,arguments.length),new t(this.database,fi(this._delegate,XP()))}orderByValue(){return ce("Query.orderByValue",0,0,arguments.length),new t(this.database,fi(this._delegate,ZP()))}startAt(e=null,n){return ce("Query.startAt",0,2,arguments.length),new t(this.database,fi(this._delegate,YP(e,n)))}startAfter(e=null,n){return ce("Query.startAfter",0,2,arguments.length),new t(this.database,fi(this._delegate,JP(e,n)))}endAt(e=null,n){return ce("Query.endAt",0,2,arguments.length),new t(this.database,fi(this._delegate,qP(e,n)))}endBefore(e=null,n){return ce("Query.endBefore",0,2,arguments.length),new t(this.database,fi(this._delegate,HP(e,n)))}equalTo(e,n){return ce("Query.equalTo",1,2,arguments.length),new t(this.database,fi(this._delegate,$P(e,n)))}toString(){return ce("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ce("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(ce("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,cn(e,"cancel",i.cancel,!0),i.context=r,r0(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Qr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new po(this.database,new Gr(this._delegate._repo,this._delegate._path))}},po=class t extends iC{constructor(e,n){super(e,new or(n._repo,n._path,new gg,!1)),this.database=e,this._delegate=n}getKey(){return ce("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return ce("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,da(this._delegate,e))}getParent(){ce("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return ce("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){ce("Reference.set",1,2,arguments.length),cn("Reference.set","onComplete",n,!0);let r=nC(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(ce("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,c2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pr("Reference.update",this._delegate._path),cn("Reference.update","onComplete",n,!0);let r=VP(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){ce("Reference.setWithPriority",2,3,arguments.length),cn("Reference.setWithPriority","onComplete",r,!0);let i=PP(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){ce("Reference.remove",0,1,arguments.length),cn("Reference.remove","onComplete",e,!0);let n=OP(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){ce("Reference.transaction",1,3,arguments.length),cn("Reference.transaction","transactionUpdate",e,!1),cn("Reference.transaction","onComplete",n,!0),ate("Reference.transaction","applyLocally",r,!0);let i=l2(this._delegate,e,{applyLocally:r}).then(s=>new qv(s.committed,new WA(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){ce("Reference.setPriority",1,2,arguments.length),cn("Reference.setPriority","onComplete",n,!0);let r=UP(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){ce("Reference.push",0,2,arguments.length),cn("Reference.push","onComplete",n,!0);let r=LP(this._delegate,e),i=r.then(o=>new t(this.database,o));n&&i.then(()=>n(null),o=>n(o));let s=new t(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Pr("Reference.onDisconnect",this._delegate._path),new Gv(new xm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var zA=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:t2,forceLongPolling:n2}}useEmulator(e,n,r={}){r2(this._delegate,e,n,r)}ref(e){if(ce("database.ref",0,1,arguments.length),e instanceof po){let n=Mv(this._delegate,e.toString());return new po(this,n)}else{let n=Fv(this._delegate,e);return new po(this,n)}}refFromURL(e){ce("database.refFromURL",1,1,arguments.length);let r=Mv(this._delegate,e);return new po(this,r)}goOffline(){return ce("database.goOffline",0,0,arguments.length),i2(this._delegate)}goOnline(){return ce("database.goOnline",0,0,arguments.length),s2(this._delegate)}};zA.ServerValue={TIMESTAMP:a2(),increment:t=>A2(t)};function lte({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){cv(n);let a=new i0("database-standalone"),A=new YE("auth-internal",a);A.setComponent(new bn("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new YE("app-check-internal",a),l.setComponent(new bn("app-check-internal",()=>i,"PRIVATE"))),{instance:new zA(Vv(t,A,l,e,o),t),namespace:s}}var cte=Object.freeze({__proto__:null,initStandalone:lte});var ute=zA.ServerValue;function hte(t){t.INTERNAL.registerComponent(new bn("database-compat",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new zA(i,r)},"PUBLIC").setServiceProps({Reference:po,Query:iC,Database:zA,DataSnapshot:WA,enableLogging:o2,INTERNAL:cte,ServerValue:ute}).setMultipleInstances(!0)),t.registerVersion(ite,ste,"node")}hte(Mt);function Tg(t,e,n="on",r=uc){return new hs(i=>{let s=null;return s=t[n](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),n==="on"?{unsubscribe(){s!=null&&t.off(e,s)}}:{unsubscribe(){}}}).pipe(ot(i=>{let{snapshot:s,prevKey:o}=i,a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),BL())}function dte(t){return typeof t=="string"}function gte(t){return typeof t.exportVal=="function"}function f2(t){return t==null}function p2(t){return typeof t.set=="function"}function u2(t,e){return p2(e)?e:t.ref(e)}function E2(t,e){if(dte(t))return e.stringCase();if(p2(t))return e.firebaseCase();if(gte(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function m2(t){return(f2(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function C2(t,e,n){e=m2(e);let r=e.map(i=>Tg(t,i,"on",n));return vd(...r)}function fte(t,e,n){let r=C2(t,e).pipe(DA((i,s)=>[...i,s],[]));return Ete(t,r,n)}function pte(t,e){return Tg(t,"value","on",e).pipe(ot(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function Ete(t,e,n){return pte(t,n).pipe(wL(e),ot(([i,s])=>{let o=i.lastKeyToLoad,a=s.map(A=>A.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),QL(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),ot(i=>i.actions))}function h2(t,e){return function(r,i){return E2(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function mte(t){return function(n){return n?E2(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function Cte(t,e,n){return Tg(t,"value","once",n).pipe(li(r=>{let i=[Mr(r)];return e.forEach(s=>i.push(Tg(t,s,"on",n))),vd(...i).pipe(DA(yte,[]))}),RE())}function I2(t,e){let n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Ite(t,e){if(f2(e))return 0;{let n=I2(t,e);return n===-1?t.length:n+1}}function yte(t,e){let{payload:n,prevKey:r,key:i}=e,s=I2(t,i),o=Ite(t,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(A=>{let l={payload:A,type:"value",prevKey:a,key:A.key};return a=A.key,t=[...t,l],!1})}return t;case"child_added":if(s>-1)(t[s-1]?.key||null)!==r&&(t=t.filter(A=>A.payload.key!==n.key),t.splice(o,0,e));else{if(r==null)return[e,...t];t=t.slice(),t.splice(o,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){let a=t.splice(s,1)[0];return t=t.slice(),t.splice(o,0,a),t}return t;default:return t}}function d2(t,e,n){return e=m2(e),Cte(t,e,n)}function Bte(t,e){let n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:h2(r,"update"),set:h2(r,"set"),push:i=>r.push(i),remove:mte(r),snapshotChanges(i){return d2(t,i,n).pipe(yt)},stateChanges(i){return C2(t,i,n).pipe(yt)},auditTrail(i){return fte(t,i,n).pipe(yt)},valueChanges(i,s){return d2(t,i,n).pipe(ot(a=>a.map(A=>s&&s.idField?se(M({},A.payload.val()),{[s.idField]:A.key}):A.payload.val())),yt)}}}function g2(t,e){return function(){return Tg(t,"value","on",e)}}function Qte(t,e){return{query:t,snapshotChanges(){return g2(t,e.schedulers.outsideAngular)().pipe(yt)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return g2(t,e.schedulers.outsideAngular)().pipe(yt,ot(r=>r.payload.exists()?r.payload.val():null))}}}var wte=new je("angularfire2.realtimeDatabaseURL"),_te=new je("angularfire2.database.use-emulator"),jA=(()=>{class t{schedulers;database;constructor(n,r,i,s,o,a,A,l,c,u,h,d,g,f,m){this.schedulers=a;let y=A,I=go(n,o,r);l&&Vd(I,o,c,h,d,g,u,f),this.database=ra(`${I.name}.database.${i}`,"AngularFireDatabase",I.name,()=>{let w=o.runOutsideAngular(()=>I.database(i||void 0));return y&&w.useEmulator(...y),w},[y])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>u2(this.database,n)),s=i;return r&&(s=r(i)),Bte(s,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>u2(this.database,n));return Qte(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||t)(j(ps),j(Es,8),j(wte,8),j(ds),j(ci),j(ta),j(_te,8),j(XE,8),j(Md,8),j(xd,8),j(Ld,8),j(Od,8),j(Ud,8),j(Pd,8),j(Ui,8))};static \u0275prov=xr({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),y2=(()=>{class t{constructor(){Mt.registerVersion("angularfire",fs.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ln({type:t});static \u0275inj=An({providers:[jA]})}return t})();var R2=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Ye(Dd),Ye(bd))},e.\u0275dir=Oi({type:e});let t=e;return t})(),AC=(()=>{let e=class e extends R2{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Sd(e)))(s||e)}})(),e.\u0275dir=Oi({type:e,features:[Xo]});let t=e;return t})(),Mg=new je("");var vte={provide:Mg,useExisting:dc(()=>qc),multi:!0};function Ste(){let t=Zw()?Zw().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var bte=new je(""),qc=(()=>{let e=class e extends R2{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Ste())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Ye(Dd),Ye(bd),Ye(bte,8))},e.\u0275dir=Oi({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Je("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[pc([vte]),Xo]});let t=e;return t})();var Dte=new je(""),Rte=new je("");function T2(t){return t!=null}function k2(t){return bL(t)?tr(t):t}function N2(t){let e={};return t.forEach(n=>{e=n!=null?M(M({},e),n):e}),Object.keys(e).length===0?null:e}function F2(t,e){return e.map(n=>n(t))}function Tte(t){return!t.validate}function M2(t){return t.map(e=>Tte(e)?e:n=>e.validate(n))}function kte(t){if(!t)return null;let e=t.filter(T2);return e.length==0?null:function(n){return N2(F2(n,e))}}function x2(t){return t!=null?kte(M2(t)):null}function Nte(t){if(!t)return null;let e=t.filter(T2);return e.length==0?null:function(n){let r=F2(n,e).map(k2);return CL(r).pipe(ot(N2))}}function L2(t){return t!=null?Nte(M2(t)):null}function B2(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Fte(t){return t._rawValidators}function Mte(t){return t._rawAsyncValidators}function Yv(t){return t?Array.isArray(t)?t:[t]:[]}function oC(t,e){return Array.isArray(t)?t.includes(e):t===e}function Q2(t,e){let n=Yv(e);return Yv(t).forEach(i=>{oC(n,i)||n.push(i)}),n}function w2(t,e){return Yv(e).filter(n=>!oC(t,n))}var aC=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=x2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=L2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Jv=class extends aC{get formDirective(){return null}get path(){return null}},Fg=class extends aC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Wv=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},xte={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Fke=se(M({},xte),{"[class.ng-submitted]":"isSubmitted"}),lC=(()=>{let e=class e extends Wv{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Ye(Fg,2))},e.\u0275dir=Oi({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&SL("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Xo]});let t=e;return t})();var kg="VALID",sC="INVALID",Gc="PENDING",Ng="DISABLED";function Lte(t){return(cC(t)?t.validators:t)||null}function Ote(t){return Array.isArray(t)?x2(t):t||null}function Ute(t,e){return(cC(e)?e.asyncValidators:t)||null}function Pte(t){return Array.isArray(t)?L2(t):t||null}function cC(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var zv=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kg}get invalid(){return this.status===sC}get pending(){return this.status==Gc}get disabled(){return this.status===Ng}get enabled(){return this.status!==Ng}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Q2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Q2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(w2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(w2(e,this._rawAsyncValidators))}hasValidator(e){return oC(this._rawValidators,e)}hasAsyncValidator(e){return oC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Gc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ng,this.errors=null,this._forEachChild(r=>{r.disable(se(M({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=kg,this._forEachChild(r=>{r.enable(se(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(se(M({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kg||this.status===Gc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ng:kg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Gc,this._hasOwnPendingAsyncValidator=!0;let n=k2(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new FE,this.statusChanges=new FE}_calculateStatus(){return this._allControlsDisabled()?Ng:this.errors?sC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gc)?Gc:this._anyControlsHaveStatus(sC)?sC:kg}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cC(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ote(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Pte(this._rawAsyncValidators)}};var O2=new je("CallSetDisabledState",{providedIn:"root",factory:()=>jv}),jv="always";function Vte(t,e){return[...e.path,t]}function Gte(t,e,n=jv){Hte(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Yte(t,e),Wte(t,e),Jte(t,e),qte(t,e)}function _2(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function qte(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Hte(t,e){let n=Fte(t);e.validator!==null?t.setValidators(B2(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Mte(t);e.asyncValidator!==null?t.setAsyncValidators(B2(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();_2(e._rawValidators,i),_2(e._rawAsyncValidators,i)}function Yte(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&U2(t,e)})}function Jte(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&U2(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function U2(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Wte(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function zte(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function jte(t){return Object.getPrototypeOf(t.constructor)===AC}function Kte(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===qc?n=s:jte(s)?r=s:i=s}),i||r||n||null}function v2(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function S2(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Xte=class extends zv{constructor(e=null,n,r){super(Lte(n),Ute(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cC(n)&&(n.nonNullable||n.initialValueIsDefault)&&(S2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){v2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){v2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){S2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Zte={provide:Fg,useExisting:dc(()=>xg)},b2=Promise.resolve(),xg=(()=>{let e=class e extends Fg{constructor(r,i,s,o,a,A){super(),this._changeDetectorRef=a,this.callSetDisabledState=A,this.control=new Xte,this._registered=!1,this.name="",this.update=new FE,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Kte(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),zte(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Gte(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){b2.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&FL(i);b2.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Vte(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(Ye(Jv,9),Ye(Dte,10),Ye(Rte,10),Ye(Mg,10),Ye(Rd,8),Ye(O2,8))},e.\u0275dir=Oi({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[NE.None,"disabled","isDisabled"],model:[NE.None,"ngModel","model"],options:[NE.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pc([Zte]),Xo,_L]});let t=e;return t})();var $te={provide:Mg,useExisting:dc(()=>Lg),multi:!0},Lg=(()=>{let e=class e extends AC{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Sd(e)))(s||e)}})(),e.\u0275dir=Oi({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Je("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[pc([$te]),Xo]});let t=e;return t})();var ene={provide:Mg,useExisting:dc(()=>Hc),multi:!0};function P2(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function tne(t){return t.split(":")[0]}var Hc=(()=>{let e=class e extends AC{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=P2(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=tne(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Sd(e)))(s||e)}})(),e.\u0275dir=Oi({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Je("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[pc([ene]),Xo]});let t=e;return t})(),uC=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(P2(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Ye(bd),Ye(Dd),Ye(Hc,9))},e.\u0275dir=Oi({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),nne={provide:Mg,useExisting:dc(()=>V2),multi:!0};function D2(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function rne(t){return t.split(":")[0]}var V2=(()=>{let e=class e extends AC{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let A=0;A<a.length;A++){let l=a[A],c=this._getOptionValue(l.value);s.push(c)}}else{let a=i.options;for(let A=0;A<a.length;A++){let l=a[A];if(l.selected){let c=this._getOptionValue(l.value);s.push(c)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=rne(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Sd(e)))(s||e)}})(),e.\u0275dir=Oi({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Je("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[pc([nne]),Xo]});let t=e;return t})(),hC=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(D2(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(D2(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Ye(bd),Ye(Dd),Ye(V2,9))},e.\u0275dir=Oi({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var ine=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=An({});let t=e;return t})();var G2=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:O2,useValue:r.callSetDisabledState??jv}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=An({imports:[ine]});let t=e;return t})();var H2=(()=>{let e=class e{transform(r){let i=[],s=new Map;for(let o of r){let a=o.who,A=o.membercount;s.has(a)?s.set(a,s.get(a)+A):s.set(a,A)}for(let[o,a]of s.entries()){let A=r.filter(c=>c.who===o);if(A.length>1){let c={};for(let u of A){let h=u.member,d=u.membercount;c[h]?c[h]+=d:c[h]=d}for(let[u,h]of Object.entries(c))i.push({member:o,helper:u,totalAmount:h})}else i.push({member:o,helper:A[0].member,totalAmount:a})}return i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=RA({name:"mapMembers",type:e,pure:!0});let t=e;return t})();var Y2=(()=>{let e=class e{transform(r){if(!r||r.length<2)return[];let i=[];for(let s of r){if(s.participantName)continue;let o=s.member,a=s.helper,A=s.totalAmount;if(o!==void 0&&a!==void 0&&A!==void 0){if(a&&A){let l=r.find(c=>c.member===o&&c.helper===a)?.totalAmount||0;if(l&&A>l){let c=A-l;i.push({borrower:a,helper:o,difference:c})}}if(a&&!r.some(l=>l.member===a&&l.helper===o)&&i.push({borrower:a,helper:o,difference:A}),a&&r.some(l=>l.member===a&&l.helper===o)){let l=r.find(c=>c.member===a&&c.helper===o)?.totalAmount||0;if(l&&A>l){let c=A-l;i.push({borrower:a,helper:o,difference:c})}}}}return i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=RA({name:"calculateSummary",type:e,pure:!0});let t=e;return t})();function ane(t,e){if(t&1){let n=Lr();P(0,"tr"),Br(1,"td"),P(2,"td"),X(3),L(),P(4,"td"),X(5),L(),P(6,"td"),X(7),L(),P(8,"td"),X(9),L(),P(10,"td"),X(11),L(),P(12,"td")(13,"button",12),Je("click",function(){Ct(n);let i=Se().$implicit,s=Se();return It(s.deleteRecord(i))}),X(14,"\u522A\u9664"),L()()()}if(t&2){let n=Se().$implicit,r=Se();K(3),Sn(n==null?null:n.who),K(2),Sn(n==null?null:n.count),K(2),Sn(n==null?null:n.buy),K(2),Sn(n==null?null:n.member),K(2),Sn(n==null?null:n.membercount),K(2),he("disabled",(r.accountData==null?null:r.accountData.settle)==="2")}}function Ane(t,e){if(t&1&&(gc(0),Ht(1,ane,15,6,"tr",11),fc()),t&2){let n=e.$implicit;K(),he("ngIf",(n==null?null:n.who)&&(n==null?null:n.count)&&(n==null?null:n.buy)&&(n==null?null:n.member)&&(n==null?null:n.membercount))}}function lne(t,e){if(t&1&&(P(0,"tr"),Br(1,"td"),P(2,"td"),X(3),L(),P(4,"td"),X(5),L(),P(6,"td"),X(7),L(),Br(8,"td"),L()),t&2){let n=Se().$implicit;K(3),Sn(n.member),K(2),Sn(n.helper),K(2),Sn(n.totalAmount)}}function cne(t,e){if(t&1&&(gc(0),Ht(1,lne,9,3,"tr",11),fc()),t&2){let n=e.$implicit;K(),he("ngIf",n.member&&n.totalAmount)}}function une(t,e){if(t&1&&(P(0,"table",2)(1,"thead")(2,"tr"),Br(3,"th"),P(4,"th"),X(5,"\u91D1\u4E3B"),L(),P(6,"th"),X(7,"\u5E6B\u8AB0\u588A"),L(),P(8,"th"),X(9,"\u4EE3\u588A\u91D1\u984D"),L(),Br(10,"th"),L()(),P(11,"tbody"),Ht(12,cne,2,1,"ng-container",3),Zo(13,"mapMembers"),L()()),t&2){let n=Se();K(12),he("ngForOf",TA(13,1,n.accountList))}}function hne(t,e){if(t&1&&(P(0,"span"),X(1),L()),t&2){let n=Se().$implicit;K(),RL("",n.borrower," \u61C9\u652F\u4ED8\u7D66 ",n.helper," ",n.difference,"")}}function dne(t,e){if(t&1&&(gc(0),Ht(1,hne,2,3,"span",11),fc()),t&2){let n=e.$implicit;K(),he("ngIf",n.totalAmount!==0)}}function gne(t,e){if(t&1&&(P(0,"div",13)(1,"span"),X(2,"\u7E3D\u7D50"),L(),Ht(3,dne,2,1,"ng-container",3),Zo(4,"calculateSummary"),Zo(5,"mapMembers"),L()),t&2){let n=Se();K(3),he("ngForOf",TA(4,1,TA(5,3,n.accountList)))}}function fne(t,e){if(t&1){let n=Lr();P(0,"div",14),Je("click",function(){Ct(n);let i=Se();return It(i.toggleDialog())}),L()}}function pne(t,e){t&1&&(P(0,"span"),X(1,"\u91D1\u984D"),L())}function Ene(t,e){if(t&1&&(P(0,"option",28),X(1),L()),t&2){let n=e.$implicit;he("value",n),K(),Sn(n)}}function mne(t,e){if(t&1&&(P(0,"option",28),X(1),L()),t&2){let n=e.$implicit;he("value",n),K(),Sn(n)}}function Cne(t,e){if(t&1){let n=Lr();P(0,"input",24),Je("ngModelChange",function(i){Ct(n);let s=Se(2);return It(s.membercount=i)}),L()}if(t&2){let n=Se(2);he("ngModel",n.membercount)}}function Ine(t,e){if(t&1){let n=Lr();P(0,"div",15)(1,"div",16)(2,"p"),X(3,"\u65B0\u589E\u4E00\u7B46\u7D00\u9304"),L()(),P(4,"div",17)(5,"div",18)(6,"span"),X(7,"\u91D1\u4E3B"),L(),P(8,"span"),X(9,"\u8CB7\u4EC0\u9EBC"),L(),P(10,"span"),X(11,"\u7E3D\u984D"),L(),P(12,"span"),X(13,"\u5E6B\u8AB0\u588A"),L(),Ht(14,pne,2,0,"span",11),L(),P(15,"div",19)(16,"select",20),Je("ngModelChange",function(i){Ct(n);let s=Se();return It(s.selectValue=i)}),P(17,"option",21),X(18,"\u8ACB\u9078\u64C7\u91D1\u4E3B"),L(),Ht(19,Ene,2,2,"option",22),L(),P(20,"input",23),Je("ngModelChange",function(i){Ct(n);let s=Se();return It(s.inputValue=i)}),L(),P(21,"input",24),Je("ngModelChange",function(i){Ct(n);let s=Se();return It(s.numberValue=i)}),L(),P(22,"select",20),Je("ngModelChange",function(i){Ct(n);let s=Se();return It(s.member=i)}),P(23,"option",21),X(24,"\u8ACB\u9078\u64C7\u5E6B\u8AB0\u588A"),L(),Ht(25,mne,2,2,"option",22),L(),Ht(26,Cne,1,1,"input",25),L()(),P(27,"div",26)(28,"button",27),Je("click",function(){Ct(n);let i=Se();return It(i.addRecord())}),X(29,"\u65B0\u589E"),L()()()}if(t&2){let n=Se();K(14),he("ngIf",n.member!=="\u5168\u90E8"),K(2),he("ngModel",n.selectValue),K(3),he("ngForOf",n.accountData.participantName),K(),he("ngModel",n.inputValue),K(),he("ngModel",n.numberValue),K(),he("ngModel",n.member),K(3),he("ngForOf",n.getAvailableHelpers()),K(),he("ngIf",n.member!=="\u5168\u90E8")}}var z2=(()=>{let e=class e{constructor(r,i){this.db=r,this.route=i,this.addTrue=!1,this.selectValue="",this.inputValue="",this.member="",this.accountId="",this.accountList=[]}ngOnInit(){this.routeSub=this.route.params.subscribe(r=>{this.accountId=r.id,this.getAccountData(this.accountId)})}getAccountData(r){this.db.object(`account/${r}`).valueChanges().subscribe(i=>{this.accountData={date:i.date,title:i.title,settle:i.settle,participantName:i.participantName};let s=Object.keys(i).filter(o=>o!=="date"&&o!=="title");this.accountList=s.map(o=>M({$key:o},i[o])),console.log(this.accountData),console.log(this.accountList)})}toggleDialog(){this.addTrue=!this.addTrue}addRecord(){if(this.numberValue!==void 0){let r=this.numberValue,i=this.selectValue,s=this.inputValue;if(this.member==="\u5168\u90E8"){let o=this.getAvailableHelpers();o.forEach(a=>{if(a!==i){let A={who:i,buy:s,count:r,member:a,membercount:Math.floor(r/o.length)};a!=="\u5168\u90E8"&&(this.pushRecordToDatabase(A),this.addTrue=!1)}})}else if(this.member!=="\u5168\u90E8"&&i){let o={who:i,buy:s,count:r,member:this.member,membercount:this.membercount};this.pushRecordToDatabase(o),this.addTrue=!1}}}pushRecordToDatabase(r){this.db.list(`account/${this.accountId}`).push(r).then(s=>{let o=s.key;console.log("New record added with ID:",o)}).catch(s=>{console.error("Error adding new record: ",s)}),this.clearInputValues(),this.toggleDialog()}clearInputValues(){this.selectValue="",this.inputValue="",this.numberValue=void 0,this.member="",this.membercount=void 0}calculateTotalAmount(r){let i=0;for(let s of this.accountList)s.member===r&&(i+=s.membercount);return i}getAvailableHelpers(){let r=this.selectValue,i=this.accountData.participantName.filter(s=>s!==r);return i.unshift("\u5168\u90E8"),i}deleteRecord(r){let i=r.$key;if(!i)return;console.log(i),confirm("\u78BA\u5B9A\u8981\u522A\u9664\u9019\u7B46\u55CE?")&&this.db.object(`account/${this.accountId}/${i}`).remove().then(()=>{console.log(`account/${this.accountId}/${i}`),console.log("Record deleted successfully")}).catch(o=>{console.error("Error deleting record:",o)})}};e.\u0275fac=function(i){return new(i||e)(Ye(jA),Ye(OE))},e.\u0275cmp=Ko({type:e,selectors:[["app-accounts"]],decls:33,vars:9,consts:[[1,"accounts"],[1,"accounts__top"],[1,"table","accounts__table"],[4,"ngFor","ngForOf"],[1,"accounts__spacer"],["class","table accounts__table",4,"ngIf"],["class","accounts__total",4,"ngIf"],[1,"add"],[1,"add__addBtn",3,"disabled","click"],["class","overlay",3,"click",4,"ngIf"],["class","dialog",4,"ngIf"],[4,"ngIf"],[1,"accounts__editBtn",3,"disabled","click"],[1,"accounts__total"],[1,"overlay",3,"click"],[1,"dialog"],[1,"dialog__topbar"],[1,"dialog__maintext"],[1,"dialog__left"],[1,"dialog__right"],["name","","id","",3,"ngModel","ngModelChange"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange",4,"ngIf"],[1,"dialog__btn"],[1,"dialog__add",3,"click"],[3,"value"]],template:function(i,s){i&1&&(P(0,"div",0)(1,"div",1)(2,"span"),X(3),L(),P(4,"span"),X(5),L(),P(6,"span"),X(7),L()(),P(8,"table",2)(9,"thead")(10,"tr"),Br(11,"th"),P(12,"th"),X(13,"\u91D1\u4E3B"),L(),P(14,"th"),X(15,"\u7E3D\u984D"),L(),P(16,"th"),X(17,"\u8CB7\u4EC0\u9EBC"),L(),P(18,"th"),X(19,"\u5E6B\u8AB0\u588A"),L(),P(20,"th"),X(21,"\u91D1\u984D"),L(),Br(22,"th"),L()(),Ht(23,Ane,2,1,"ng-container",3),L(),P(24,"div",4),X(25," \xA0 "),L(),Ht(26,une,14,3,"table",5)(27,gne,6,5,"div",6),L(),P(28,"div",7)(29,"button",8),Je("click",function(){return s.toggleDialog()}),X(30,"+"),L()(),Ht(31,fne,1,0,"div",9)(32,Ine,30,8,"div",10)),i&2&&(K(3),Sn(s.accountData==null?null:s.accountData.date),K(2),Sn(s.accountData==null?null:s.accountData.title),K(2),ME("\u53C3\u8207\u4EBA\u54E1\uFF1A",s.accountData==null?null:s.accountData.participantName,""),K(16),he("ngForOf",s.accountList),K(3),he("ngIf",s.accountList.length>3),K(),he("ngIf",s.accountList.length>3),K(2),he("disabled",s.accountData&&s.accountData.settle==="2"),K(2),he("ngIf",s.addTrue),K(),he("ngIf",s.addTrue))},dependencies:[xE,Ec,uC,hC,qc,Lg,Hc,lC,xg,H2,Y2],styles:[".accounts[_ngcontent-%COMP%]{position:relative;color:#b86a6a}.accounts__top[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;margin:20px auto;font-size:20px}.accounts__table[_ngcontent-%COMP%]{color:#b86a6a;font-size:14px;text-align:center}.accounts__editBtn[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #B86A6A;border-radius:8px;color:#b86a6a;margin-bottom:8px}.accounts[_ngcontent-%COMP%]   .accounts__editBtn[_ngcontent-%COMP%]:disabled{background-color:#b0b0b0;color:#6c6c6c;border:1px solid #6c6c6c;cursor:not-allowed}.accounts__spacer[_ngcontent-%COMP%]{margin-bottom:20px}.accounts__total[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.accounts__total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:10px;font-size:16px}.add[_ngcontent-%COMP%]{position:fixed;bottom:40px;right:20px}.add__addBtn[_ngcontent-%COMP%]{background-color:#b86a6a;font-size:16px;color:#fff;border-radius:50%;border:1px solid #F5D0D0}.add__addBtn[_ngcontent-%COMP%]:disabled{display:none}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.dialog[_ngcontent-%COMP%]{width:360px;background-color:#fff;position:absolute;border-radius:20px;top:50%;left:50%;transform:translate(-50%,-50%)}.dialog__topbar[_ngcontent-%COMP%]{background-color:#f5d0d0;text-align:center;font-size:20px;border-radius:20px 20px 0 0;font-weight:600;color:#b86a6a}.dialog__topbar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:8px}.dialog__maintext[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto}.dialog__left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;text-align:center;font-size:16px}.dialog__left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b86a6a;font-weight:600}.dialog__right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.dialog__right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:24px;width:200px;background-color:#f5d0d0;border:1px solid white;font-size:16px}.dialog__right[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;height:24px;width:200px;background-color:#f5d0d0;border:1px solid white}.dialog__btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.dialog__add[_ngcontent-%COMP%]{background-color:#f5d0d0;border:1px solid #B86A6A;border-radius:20px;text-align:center;margin:20px 0;width:100px}"]});let t=e;return t})();var j2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ko({type:e,selectors:[["app-header"]],decls:3,vars:0,consts:[[1,"header"],[1,"header__text"]],template:function(i,s){i&1&&(P(0,"div",0)(1,"h1",1),X(2,"\u5171\u7528\u8A18\u5E33"),L()())},styles:[".header[_ngcontent-%COMP%]{background-color:#f5d0d0}.header__text[_ngcontent-%COMP%]{color:#fff;font-size:28px;padding:12px;text-align:center;font-weight:600}"]});let t=e;return t})();var K2=(()=>{let e=class e{constructor(r){this.db=r}loadnewAccountData(r){return this.db.object(`account/${r}`).valueChanges()}};e.\u0275fac=function(i){return new(i||e)(j(jA))},e.\u0275prov=xr({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var X2=(()=>{let e=class e{transform(r){return r?r.slice().reverse():[]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=RA({name:"reverse",type:e,pure:!0});let t=e;return t})();function wne(t,e){if(t&1){let n=Lr();P(0,"div",7),Je("click",function(){Ct(n);let i=Se();return It(i.toggleDialog())}),L()}}function _ne(t,e){t&1&&Br(0,"div",8)}function vne(t,e){t&1&&(P(0,"div",17)(1,"span"),X(2,"\u65E5\u671F"),L(),P(3,"span"),X(4,"\u540D\u7A31"),L(),P(5,"span"),X(6,"\u4EBA\u6578"),L()())}function Sne(t,e){if(t&1){let n=Lr();P(0,"div",18)(1,"input",19),Je("ngModelChange",function(i){Ct(n);let s=Se(2);return It(s.dateValue=i)}),Zo(2,"date"),L(),P(3,"input",20),Je("ngModelChange",function(i){Ct(n);let s=Se(2);return It(s.titleValue=i)}),L(),P(4,"input",21),Je("ngModelChange",function(i){Ct(n);let s=Se(2);return It(s.numberOfPeople=i)}),L()()}if(t&2){let n=Se(2);K(),DL("min",kL(2,4,n.minDate,"yyyy-MM-dd")),he("ngModel",n.dateValue),K(2),he("ngModel",n.titleValue),K(),he("ngModel",n.numberOfPeople)}}function bne(t,e){if(t&1){let n=Lr();gc(0),P(1,"input",23),Je("ngModelChange",function(i){let o=Ct(n).index,a=Se(3);return It(a.participantName[o]=i)}),L(),fc()}if(t&2){let n=e.index,r=Se(3);K(),he("ngModel",r.participantName[n])}}function Dne(t,e){if(t&1&&(P(0,"div",22),Ht(1,bne,2,1,"ng-container",5),L()),t&2){let n=Se(2);K(),he("ngForOf",n.countPeople(n.numberOfPeople))}}function Rne(t,e){if(t&1){let n=Lr();P(0,"div",24)(1,"button",25),Je("click",function(){Ct(n);let i=Se(2);return It(i.toNewAccount())}),X(2,"\u65B0\u589E"),L()()}}function Tne(t,e){if(t&1){let n=Lr();P(0,"div",26)(1,"button",27),Je("click",function(){Ct(n);let i=Se(2);return It(i.goNextPage())}),X(2,"\u4E0B\u4E00\u6B65"),L()()}}function kne(t,e){if(t&1&&(P(0,"div",9)(1,"div",10)(2,"p"),X(3,"\u65B0\u589E\u4E00\u7B46\u7D00\u9304"),L()(),P(4,"div",11),Ht(5,vne,7,0,"div",12)(6,Sne,5,7,"div",13),L(),Ht(7,Dne,2,1,"div",14)(8,Rne,3,0,"div",15)(9,Tne,3,0,"div",16),L()),t&2){let n=Se();K(5),he("ngIf",n.mainPage),K(),he("ngIf",n.mainPage),K(),he("ngIf",n.showNameInput),K(),he("ngIf",n.showNameInput),K(),he("ngIf",n.mainPage)}}var Nne=(t,e,n)=>({editSettle:t,"fade-out":e,"fade-out-active":n});function Fne(t,e){if(t&1){let n=Lr();P(0,"div")(1,"div",28)(2,"div",29)(3,"div",30)(4,"span"),X(5),L(),P(6,"span"),X(7),L(),P(8,"span"),X(9),L()(),P(10,"div",31)(11,"button",32),Je("click",function(){let s=Ct(n).$implicit,o=Se();return It(o.viewAccountDetails(s.key))}),X(12,"\u67E5\u770B"),L(),P(13,"button",33),Je("click",function(){let s=Ct(n).$implicit,o=Se();return It(o.editAccount(s.key))}),X(14,"\u7DE8\u8F2F"),L()()()()()}if(t&2){let n=e.$implicit;K(),he("ngClass",TL(5,Nne,n.value.settle==="2",n.value.isDelete,n.value.isDelete)),K(4),Sn(n.value.date),K(2),Sn(n.value.title),K(2),ME("\u53C3\u8207\u4EBA\u54E1\uFF1A",n.value.participantName,""),K(4),he("disabled",n.value.settle==="2")}}function Mne(t,e){if(t&1){let n=Lr();P(0,"div",34)(1,"div",35)(2,"p"),X(3,"\u7DE8\u8F2F"),L()(),P(4,"div",36)(5,"div",37)(6,"span"),X(7,"\u65E5\u671F"),L(),P(8,"span"),X(9,"\u540D\u7A31"),L(),P(10,"span"),X(11,"\u72C0\u614B"),L()(),P(12,"div",38)(13,"span"),X(14),L(),P(15,"input",20),Je("ngModelChange",function(i){Ct(n);let s=Se();return It(s.titleValue=i)}),L(),P(16,"select",39),Je("ngModelChange",function(i){Ct(n);let s=Se();return It(s.settleValue=i)}),P(17,"option",40),X(18,"\u8ACB\u9078\u64C7"),L(),P(19,"option",41),X(20,"\u5C1A\u672A\u7D50\u6E05"),L(),P(21,"option",42),X(22,"\u5DF2\u7D93\u7D50\u6E05"),L()()()(),P(23,"div",43)(24,"button",44),Je("click",function(){Ct(n);let i=Se();return It(i.saveEdit())}),X(25,"\u5132\u5B58"),L(),P(26,"button",44),Je("click",function(){Ct(n);let i=Se();return It(i.toggleEdit())}),X(27,"\u53D6\u6D88"),L()(),P(28,"div",45)(29,"button",46),Je("click",function(){Ct(n);let i=Se();return It(i.deleteAccount(i.editAccountId))}),X(30,"\u522A\u9664"),L()()()}if(t&2){let n=Se();K(14),Sn(n.dateValue),K(),he("ngModel",n.titleValue),K(),he("ngModel",n.settleValue)}}var Z2=(()=>{let e=class e{ngOnInit(){this.loadnewAccountData(this.newAccountId),this.minDate=new Date}constructor(r,i,s,o){this.router=r,this.dataService=i,this.db=s,this.cdr=o,this.addTrue=!1,this.editTrue=!1,this.dateValue="",this.titleValue="",this.settleValue="",this.newAccountId="",this.showButtons=!1,this.showNameInput=!1,this.mainPage=!0,this.numberOfPeople=0,this.participantName=[],this.newAccountData={},this.editAccountId=null,this.isDelete=!1}toNewAccount(){let r={date:this.dateValue,title:this.titleValue,settle:this.settleValue="1",isDelete:this.isDelete,participantName:this.participantName},i=this.db.createPushId();this.db.object(`account/${i}`).set(r).then(()=>{this.toggleDialog(),this.dateValue="",this.titleValue="",this.numberOfPeople=0,this.participantName=[],this.showNameInput=!1,this.mainPage=!0}).catch(s=>{console.error("Error writing new account data:",s)})}toggleDialog(){this.addTrue=!this.addTrue,this.dateValue="",this.titleValue="",this.settleValue=""}toggleEdit(){this.editTrue=!1}goNextPage(){this.showNameInput=!0,this.mainPage=!1}countPeople(r){return new Array(r)}viewAccountDetails(r){this.router.navigate(["/account",r])}loadnewAccountData(r){this.db.object(`account/${r}`).valueChanges().subscribe(i=>{i?(this.newAccountData=i,this.showButtons=!0):this.showButtons=!1},i=>{console.error("Error fetching account data:",i)})}editAccount(r){r&&(this.editTrue=!0,this.editAccountId=r,this.dateValue=this.newAccountData[r].date,this.titleValue=this.newAccountData[r].title,this.settleValue=this.newAccountData[r].settle)}saveEdit(){if(!this.editAccountId)return;let r={date:this.dateValue,title:this.titleValue,settle:this.settleValue};this.db.object(`account/${this.editAccountId}`).update(r).then(()=>{this.editAccountId=null,this.toggleEdit()}).catch(i=>{console.error("Error updating account data:",i)})}deleteAccount(r){if(!r)return;confirm("\u78BA\u5B9A\u8981\u522A\u9664\u9019\u7B46\u55CE?")&&(this.newAccountData[r].isDelete=!0,this.editTrue=!1,setTimeout(()=>{this.db.object(`account/${r}`).remove().then(()=>{delete this.newAccountData[r],this.dateValue="",this.titleValue=""}).catch(s=>{console.error("Error deleting account:",s)}).finally(()=>{})},600))}};e.\u0275fac=function(i){return new(i||e)(Ye(UE),Ye(K2),Ye(jA),Ye(Rd))},e.\u0275cmp=Ko({type:e,selectors:[["app-add-button"]],decls:10,vars:9,consts:[[1,"addButton"],["type","button",1,"addButton__btn",3,"click"],["class","overlay",3,"click",4,"ngIf"],["class","overlay",4,"ngIf"],["class","dialog",4,"ngIf"],[4,"ngFor","ngForOf"],["class","editDialog",4,"ngIf"],[1,"overlay",3,"click"],[1,"overlay"],[1,"dialog"],[1,"dialog__topbar"],[1,"dialog__maintext"],["class","dialog__left",4,"ngIf"],["class","dialog__right",4,"ngIf"],["class","dialog__showName",4,"ngIf"],["class","dialog__btn",4,"ngIf"],["class","dialog__nextbtn",4,"ngIf"],[1,"dialog__left"],[1,"dialog__right"],["type","date",3,"ngModel","min","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],[1,"dialog__showName"],["type","text","placeholder","\u53C3\u8207\u4EBA\u54E1\u540D\u7A31",3,"ngModel","ngModelChange"],[1,"dialog__btn"],[1,"dialog__add",3,"click"],[1,"dialog__nextbtn"],[1,"dialog__nextPage",3,"click"],[1,"accountDetails",3,"ngClass"],[1,"accountDetails__main"],[1,"accountDetails__top"],[1,"accountDetails__btn"],["type","button",1,"accountDetails__search",3,"click"],["type","button",1,"accountDetails__search",3,"disabled","click"],[1,"editDialog"],[1,"editDialog__topbar"],[1,"editDialog__maintext"],[1,"editDialog__left"],[1,"editDialog__right"],["name","","id","",3,"ngModel","ngModelChange"],["value",""],["value","1"],["value","2"],[1,"editDialog__btn"],[1,"editDialog__add",3,"click"],[1,"editDialog__delete"],[1,"editDialog__deleteBtn",3,"click"]],template:function(i,s){i&1&&(P(0,"div",0)(1,"button",1),Je("click",function(){return s.toggleDialog()}),X(2,"\u65B0\u589E\u4E00\u7B46"),L()(),Ht(3,wne,1,0,"div",2)(4,_ne,1,0,"div",3)(5,kne,10,5,"div",4)(6,Fne,15,9,"div",5),Zo(7,"reverse"),Zo(8,"keyvalue"),Ht(9,Mne,31,3,"div",6)),i&2&&(K(3),he("ngIf",s.addTrue),K(),he("ngIf",s.editTrue),K(),he("ngIf",s.addTrue),K(),he("ngForOf",TA(7,5,TA(8,7,s.newAccountData))),K(3),he("ngIf",s.editTrue===!0))},dependencies:[LL,xE,Ec,uC,hC,qc,Lg,Hc,lC,xg,OL,UL,X2],styles:[".addButton[_ngcontent-%COMP%]{margin:20px auto;display:flex;justify-content:center;align-items:center}.addButton__btn[_ngcontent-%COMP%]{background-color:#f5d0d080;border:1px solid #B86A6A;width:280px;font-size:16px;font-weight:600;color:#b86a6a;border-radius:10px;padding:4px}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080}.dialog[_ngcontent-%COMP%]{width:360px;background-color:#fff;position:absolute;border-radius:20px;font-size:16px;top:50%;left:50%;transform:translate(-50%,-50%)}.dialog__topbar[_ngcontent-%COMP%]{background-color:#f5d0d0;text-align:center;font-size:20px;border-radius:20px 20px 0 0;font-weight:600;color:#b86a6a}.dialog__maintext[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto}.dialog__left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;text-align:center}.dialog__left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b86a6a;font-weight:600}.dialog__right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.dialog__right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:24px;width:200px;background-color:#f5d0d0;border:1px solid white}.dialog__showName[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;gap:20px;width:100%}.dialog__showName[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:24px;width:200px;background-color:#f5d0d0;border:1px solid white;text-align:center}.dialog__btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.dialog__add[_ngcontent-%COMP%]{background-color:#f5d0d0;border:1px solid #B86A6A;border-radius:20px;text-align:center;margin:20px 0;width:100px}.dialog__nextbtn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.dialog__nextPage[_ngcontent-%COMP%]{background-color:#f5d0d0;border:1px solid #B86A6A;border-radius:20px;text-align:center;margin:20px 0;width:100px}.accountDetails__main[_ngcontent-%COMP%]{background-color:#f5d0d080;border:1px solid #B86A6A;border-radius:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:28px 16px}.accountDetails__top[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#b86a6a;text-align:center;font-weight:600;font-size:16px}.accountDetails__btn[_ngcontent-%COMP%]{display:flex;gap:64px;margin-bottom:12px}.accountDetails__search[_ngcontent-%COMP%]{width:120px;height:27px;background-color:#fff;border:1px solid #F5D0D0;border-radius:20px;color:#b86a6a;font-size:16px;font-weight:600}.editDialog[_ngcontent-%COMP%]{width:360px;background-color:#fff;position:absolute;border-radius:20px;top:50%;left:50%;transform:translate(-50%,-50%)}.editDialog__topbar[_ngcontent-%COMP%]{background-color:#f5d0d0;text-align:center;font-size:20px;border-radius:20px 20px 0 0;font-weight:600;color:#b86a6a}.editDialog__maintext[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto}.editDialog__left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;text-align:center;font-size:16px}.editDialog__left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#b86a6a;font-weight:600}.editDialog__right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;font-size:16px}.editDialog__right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:24px;width:200px;background-color:#f5d0d0;border:1px solid white}.editDialog__btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.editDialog__add[_ngcontent-%COMP%]{background-color:#f5d0d0;border:1px solid #B86A6A;border-radius:20px;text-align:center;margin:20px 20px 0;width:100px;font-weight:600;font-size:16px}.editDialog[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:24px;width:200px;text-align:center;background-color:#f5d0d0;border:1px solid white}.editDialog__delete[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto 20px}.editDialog__deleteBtn[_ngcontent-%COMP%]{background-color:#f009;border:1px solid rgba(255,0,0,.6);border-radius:20px;text-align:center;margin:20px 20px 0;width:100px;font-weight:600;font-size:16px}.editSettle[_ngcontent-%COMP%]   .accountDetails__main[_ngcontent-%COMP%]{background-color:#d9d9d980;border:1px solid rgba(217,217,217,.5);border-radius:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:28px 16px}.editSettle[_ngcontent-%COMP%]   .accountDetails__top[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#6c6c6c;text-align:center;font-weight:600;font-size:16px}.editSettle__btn[_ngcontent-%COMP%]{display:flex;gap:64px;margin-bottom:12px}.editSettle[_ngcontent-%COMP%]   .accountDetails__search[_ngcontent-%COMP%]:disabled{background-color:#b0b0b0;color:#6c6c6c;border:1px solid #6c6c6c;cursor:not-allowed}.fade-out[_ngcontent-%COMP%]{opacity:1;transition:opacity .5s ease-out}.fade-out.fade-out-active[_ngcontent-%COMP%]{opacity:0}"]});let t=e;return t})();function Lne(t,e){t&1&&Br(0,"router-outlet")}function One(t,e){t&1&&Br(0,"app-add-button")}var Yc=(()=>{let e=class e{constructor(r,i){this.router=r,this.activatedRoute=i,this.title="count",this.isAccountPage=!1}ngOnInit(){this.router.events.pipe(bA(r=>r instanceof GL)).subscribe(()=>{this.isAccountPage=this.activatedRoute.snapshot.firstChild?.routeConfig?.path==="account/:id"})}};e.\u0275fac=function(i){return new(i||e)(Ye(UE),Ye(OE))},e.\u0275cmp=Ko({type:e,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(i,s){i&1&&(Br(0,"app-header"),Ht(1,Lne,1,0,"router-outlet",0)(2,One,1,0,"app-add-button",0)),i&2&&(K(),he("ngIf",s.isAccountPage),K(),he("ngIf",!s.isAccountPage))},dependencies:[Ec,qL,j2,Z2]});let t=e;return t})();var Une=[{path:"",component:Yc},{path:"account/:id",component:z2}],$2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=An({providers:[{provide:ML,useClass:xL}],imports:[$w.forRoot(Une),$w]});let t=e;return t})();import{inspect as Kue,TextEncoder as Xue,TextDecoder as Zue}from"util";import{randomBytes as $ue}from"crypto";var Pne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hi={},H,ES=ES||{},ge=Pne||self;function vC(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Xg(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Vne(t){return Object.prototype.hasOwnProperty.call(t,Kv)&&t[Kv]||(t[Kv]=++Gne)}var Kv="closure_uid_"+(1e9*Math.random()>>>0),Gne=0;function qne(t,e,n){return t.call.apply(t.bind,arguments)}function Hne(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Gn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Gn=qne:Gn=Hne,Gn.apply(null,arguments)}function dC(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function En(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function fa(){this.s=this.s,this.o=this.o}var Yne=0;fa.prototype.s=!1;fa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Yne!=0)&&Vne(this)};fa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var hV=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mS(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eV(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(vC(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function qn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}qn.prototype.h=function(){this.defaultPrevented=!0};var Jne=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};ge.addEventListener("test",n,e),ge.removeEventListener("test",n,e)}catch{}return t}();function qg(t){return/^[\s\xa0]*$/.test(t)}function SC(){var t=ge.navigator;return t&&(t=t.userAgent)?t:""}function _s(t){return SC().indexOf(t)!=-1}function CS(t){return CS[" "](t),t}CS[" "]=function(){};function Wne(t,e){var n=Mre;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var zne=_s("Opera"),jc=_s("Trident")||_s("MSIE"),dV=_s("Edge"),tS=dV||jc,gV=_s("Gecko")&&!(SC().toLowerCase().indexOf("webkit")!=-1&&!_s("Edge"))&&!(_s("Trident")||_s("MSIE"))&&!_s("Edge"),jne=SC().toLowerCase().indexOf("webkit")!=-1&&!_s("Edge");function fV(){var t=ge.document;return t?t.documentMode:void 0}var nS;e:{if(gC="",fC=function(){var t=SC();if(gV)return/rv:([^\);]+)(\)|;)/.exec(t);if(dV)return/Edge\/([\d\.]+)/.exec(t);if(jc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(jne)return/WebKit\/(\S+)/.exec(t);if(zne)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),fC&&(gC=fC?fC[1]:""),jc&&(pC=fV(),pC!=null&&pC>parseFloat(gC))){nS=String(pC);break e}nS=gC}var gC,fC,pC,rS;ge.document&&jc?(Xv=fV(),rS=Xv||parseInt(nS,10)||void 0):rS=void 0;var Xv,Kne=rS;function Hg(t,e){if(qn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(gV){e:{try{CS(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Xne[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Hg.$.h.call(this)}}En(Hg,qn);var Xne={2:"touch",3:"pen",4:"mouse"};Hg.prototype.h=function(){Hg.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zg="closure_listenable_"+(1e6*Math.random()|0),Zne=0;function $ne(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Zne,this.fa=this.ia=!1}function bC(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function IS(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function ere(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function pV(t){let e={};for(let n in t)e[n]=t[n];return e}var tV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function EV(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<tV.length;s++)n=tV[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function DC(t){this.src=t,this.g={},this.h=0}DC.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=sS(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new $ne(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function iS(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=hV(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(bC(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function sS(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var yS="closure_lm_"+(1e6*Math.random()|0),Zv={};function mV(t,e,n,r,i){if(r&&r.once)return IV(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mV(t,e[s],n,r,i);return null}return n=wS(n),t&&t[Zg]?t.O(e,n,Xg(r)?!!r.capture:!!r,i):CV(t,e,n,!1,r,i)}function CV(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Xg(i)?!!i.capture:!!i,a=QS(t);if(a||(t[yS]=a=new DC(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=tre(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Jne||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(BV(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function tre(){function t(n){return e.call(t.src,t.listener,n)}let e=nre;return t}function IV(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)IV(t,e[s],n,r,i);return null}return n=wS(n),t&&t[Zg]?t.P(e,n,Xg(r)?!!r.capture:!!r,i):CV(t,e,n,!0,r,i)}function yV(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)yV(t,e[s],n,r,i);else r=Xg(r)?!!r.capture:!!r,n=wS(n),t&&t[Zg]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=sS(s,n,r,i),-1<n&&(bC(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=QS(t))&&(e=t.g[e.toString()],t=-1,e&&(t=sS(e,n,r,i)),(n=-1<t?e[t]:null)&&BS(n))}function BS(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Zg])iS(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(BV(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=QS(e))?(iS(n,t),n.h==0&&(n.src=null,e[yS]=null)):bC(t)}}}function BV(t){return t in Zv?Zv[t]:Zv[t]="on"+t}function nre(t,e){if(t.fa)t=!0;else{e=new Hg(e,this);var n=t.listener,r=t.la||t.src;t.ia&&BS(t),t=n.call(r,e)}return t}function QS(t){return t=t[yS],t instanceof DC?t:null}var $v="__closure_events_fn_"+(1e9*Math.random()>>>0);function wS(t){return typeof t=="function"?t:(t[$v]||(t[$v]=function(e){return t.handleEvent(e)}),t[$v])}function pn(){fa.call(this),this.i=new DC(this),this.S=this,this.J=null}En(pn,fa);pn.prototype[Zg]=!0;pn.prototype.removeEventListener=function(t,e,n,r){yV(this,t,e,n,r)};function Tn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new qn(e,t);else if(e instanceof qn)e.target=e.target||t;else{var i=e;e=new qn(r,t),EV(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=EC(o,r,!0,e)&&i}if(o=e.g=t,i=EC(o,r,!0,e)&&i,i=EC(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=EC(o,r,!1,e)&&i}pn.prototype.N=function(){if(pn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)bC(n[r]);delete t.g[e],t.h--}}this.J=null};pn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};pn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function EC(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,A=o.la||o.src;o.ia&&iS(t.i,o),i=a.call(A,r)!==!1&&i}}return i&&!r.defaultPrevented}var _S=ge.JSON.stringify,oS=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function rre(){var t=vS;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var aS=class{constructor(){this.h=this.g=null}add(e,n){let r=QV.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},QV=new oS(()=>new AS,t=>t.reset()),AS=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function ire(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function sre(t){ge.setTimeout(()=>{throw t},0)}var Yg,Jg=!1,vS=new aS,wV=()=>{let t=ge.Promise.resolve(void 0);Yg=()=>{t.then(ore)}},ore=()=>{for(var t;t=rre();){try{t.h.call(t.g)}catch(n){sre(n)}var e=QV;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jg=!1};function RC(t,e){pn.call(this),this.h=t||1,this.g=e||ge,this.j=Gn(this.qb,this),this.l=Date.now()}En(RC,pn);H=RC.prototype;H.ga=!1;H.T=null;H.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tn(this,"tick"),this.ga&&(SS(this),this.start()))}};H.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function SS(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}H.N=function(){RC.$.N.call(this),SS(this),delete this.g};function bS(t,e,n){if(typeof t=="function")n&&(t=Gn(t,n));else if(t&&typeof t.handleEvent=="function")t=Gn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ge.setTimeout(t,e||0)}function _V(t){t.g=bS(()=>{t.g=null,t.i&&(t.i=!1,_V(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var lS=class extends fa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_V(this)}N(){super.N(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Wg(t){fa.call(this),this.h=t,this.g={}}En(Wg,fa);var nV=[];function vV(t,e,n,r){Array.isArray(n)||(n&&(nV[0]=n.toString()),n=nV);for(var i=0;i<n.length;i++){var s=mV(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function SV(t){IS(t.g,function(e,n){this.g.hasOwnProperty(n)&&BS(e)},t),t.g={}}Wg.prototype.N=function(){Wg.$.N.call(this),SV(this)};Wg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function TC(){this.g=!0}TC.prototype.Ea=function(){this.g=!1};function are(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),A=0;A<a.length;A++){var l=a[A].split("=");if(1<l.length){var c=l[0];l=l[1];var u=c.split("_");o=2<=u.length&&u[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Are(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Wc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+cre(t,n)+(r?" "+r:"")})}function lre(t,e){t.info(function(){return"TIMEOUT: "+e})}TC.prototype.info=function(){};function cre(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return _S(n)}catch{return e}}var $A={},rV=null;function kC(){return rV=rV||new pn}$A.Ta="serverreachability";function bV(t){qn.call(this,$A.Ta,t)}En(bV,qn);function zg(t){let e=kC();Tn(e,new bV(e))}$A.STAT_EVENT="statevent";function DV(t,e){qn.call(this,$A.STAT_EVENT,t),this.stat=e}En(DV,qn);function ar(t){let e=kC();Tn(e,new DV(e,t))}$A.Ua="timingevent";function RV(t,e){qn.call(this,$A.Ua,t),this.size=e}En(RV,qn);function $g(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){t()},e)}var NC={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},TV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function DS(){}DS.prototype.h=null;function iV(t){return t.h||(t.h=t.i())}function kV(){}var ef={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function RS(){qn.call(this,"d")}En(RS,qn);function TS(){qn.call(this,"c")}En(TS,qn);var cS;function FC(){}En(FC,DS);FC.prototype.g=function(){return new XMLHttpRequest};FC.prototype.i=function(){return{}};cS=new FC;function tf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Wg(this),this.P=ure,t=tS?125:void 0,this.V=new RC(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new NV}function NV(){this.i=null,this.g="",this.h=!1}var ure=45e3,FV={},uS={};H=tf.prototype;H.setTimeout=function(t){this.P=t};function hS(t,e,n){t.L=1,t.A=xC(mo(e)),t.u=n,t.S=!0,MV(t,null)}function MV(t,e){t.G=Date.now(),nf(t),t.B=mo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),qV(n.i,"t",r),t.o=0,n=t.l.J,t.h=new NV,t.g=cG(t.l,n?e:null,!t.u),0<t.O&&(t.M=new lS(Gn(t.Pa,t,t.g),t.O)),vV(t.U,t.g,"readystatechange",t.nb),e=t.I?pV(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),zg(),are(t.j,t.v,t.B,t.m,t.W,t.u)}H.nb=function(t){t=t.target;let e=this.M;e&&vs(t)==3?e.l():this.Pa(t)};H.Pa=function(t){try{if(t==this.g)e:{let c=vs(this.g);var e=this.g.Ia();let u=this.g.da();if(!(3>c)&&(c!=3||tS||this.g&&(this.h.h||this.g.ja()||AV(this.g)))){this.J||c!=4||e==7||(e==8||0>=u?zg(3):zg(2)),MC(this);var n=this.g.da();this.ca=n;t:if(xV(this)){var r=AV(this.g);t="";var i=r.length,s=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){KA(this),Gg(this);var o="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Are(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,A=this.g;if((a=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qg(a)){var l=a;break t}}l=null}if(n=l)Wc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dS(this,n);else{this.i=!1,this.s=3,ar(12),KA(this),Gg(this);break e}}this.S?(LV(this,c,o),tS&&this.i&&c==3&&(vV(this.U,this.V,"tick",this.mb),this.V.start())):(Wc(this.j,this.m,o,null),dS(this,o)),c==4&&KA(this),this.i&&!this.J&&(c==4?oG(this.l,this):(this.i=!1,nf(this)))}else kre(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ar(12)):(this.s=0,ar(13)),KA(this),Gg(this)}}}catch{}finally{}};function xV(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function LV(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=hre(t,n),i==uS){e==4&&(t.s=4,ar(14),r=!1),Wc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==FV){t.s=4,ar(15),Wc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Wc(t.j,t.m,i,null),dS(t,i);xV(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,ar(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),LS(e),e.M=!0,ar(11))):(Wc(t.j,t.m,n,"[Invalid Chunked Response]"),KA(t),Gg(t))}H.mb=function(){if(this.g){var t=vs(this.g),e=this.g.ja();this.o<e.length&&(MC(this),LV(this,t,e),this.i&&t!=4&&nf(this))}};function hre(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?uS:(n=Number(e.substring(n,r)),isNaN(n)?FV:(r+=1,r+n>e.length?uS:(e=e.slice(r,r+n),t.o=r+n,e)))}H.cancel=function(){this.J=!0,KA(this)};function nf(t){t.Y=Date.now()+t.P,OV(t,t.P)}function OV(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=$g(Gn(t.lb,t),e)}function MC(t){t.C&&(ge.clearTimeout(t.C),t.C=null)}H.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(lre(this.j,this.B),this.L!=2&&(zg(),ar(17)),KA(this),this.s=2,Gg(this)):OV(this,this.Y-t)};function Gg(t){t.l.H==0||t.J||oG(t.l,t)}function KA(t){MC(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,SS(t.V),SV(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function dS(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||gS(n.i,t))){if(!t.K&&gS(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)BC(n),UC(n);else break e;xS(n),ar(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=$g(Gn(n.ib,n),6e3));if(1>=JV(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else XA(n,11)}else if((t.K||n.g==t)&&BC(n),!qg(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));let u=l[4];u!=null&&(n.Ga=u,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let d=t.g;if(d){let g=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(kS(s,s.h),s.h=null))}if(r.F){let f=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,gt(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=lG(r,r.J?r.pa:null,r.Y),o.K){WV(r.i,o);var a=o,A=r.L;A&&a.setTimeout(A),a.C&&(MC(a),nf(a)),r.g=o}else iG(r);0<n.j.length&&PC(n)}else l[0]!="stop"&&l[0]!="close"||XA(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?XA(n,7):MS(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}zg(4)}catch{}}function dre(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(vC(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function gre(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(vC(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function UV(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(vC(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=gre(t),r=dre(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var PV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fre(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ZA(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ZA){this.h=t.h,IC(this,t.j),this.s=t.s,this.g=t.g,yC(this,t.m),this.l=t.l;var e=t.i,n=new jg;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),sV(this,n),this.o=t.o}else t&&(e=String(t).match(PV))?(this.h=!1,IC(this,e[1]||"",!0),this.s=Pg(e[2]||""),this.g=Pg(e[3]||"",!0),yC(this,e[4]),this.l=Pg(e[5]||"",!0),sV(this,e[6]||"",!0),this.o=Pg(e[7]||"")):(this.h=!1,this.i=new jg(null,this.h))}ZA.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Vg(e,oV,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Vg(e,oV,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Vg(n,n.charAt(0)=="/"?mre:Ere,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Vg(n,Ire)),t.join("")};function mo(t){return new ZA(t)}function IC(t,e,n){t.j=n?Pg(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yC(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function sV(t,e,n){e instanceof jg?(t.i=e,yre(t.i,t.h)):(n||(e=Vg(e,Cre)),t.i=new jg(e,t.h))}function gt(t,e,n){t.i.set(e,n)}function xC(t){return gt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Pg(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vg(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,pre),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pre(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var oV=/[#\/\?@]/g,Ere=/[#\?:]/g,mre=/[#\?]/g,Cre=/[#\?@]/g,Ire=/#/g;function jg(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pa(t){t.g||(t.g=new Map,t.h=0,t.i&&fre(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}H=jg.prototype;H.add=function(t,e){pa(this),this.i=null,t=Kc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function VV(t,e){pa(t),e=Kc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function GV(t,e){return pa(t),e=Kc(t,e),t.g.has(e)}H.forEach=function(t,e){pa(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};H.ta=function(){pa(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};H.Z=function(t){pa(this);let e=[];if(typeof t=="string")GV(this,t)&&(e=e.concat(this.g.get(Kc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};H.set=function(t,e){return pa(this),this.i=null,t=Kc(this,t),GV(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};H.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function qV(t,e,n){VV(t,e),0<n.length&&(t.i=null,t.g.set(Kc(t,e),mS(n)),t.h+=n.length)}H.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Kc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function yre(t,e){e&&!t.j&&(pa(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(VV(this,r),qV(this,i,n))},t)),t.j=e}var Bre=class{constructor(t,e){this.g=t,this.map=e}};function HV(t){this.l=t||Qre,ge.PerformanceNavigationTiming?(t=ge.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ge.g&&ge.g.Ka&&ge.g.Ka()&&ge.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Qre=10;function YV(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function JV(t){return t.h?1:t.g?t.g.size:0}function gS(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function kS(t,e){t.g?t.g.add(e):t.h=e}function WV(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}HV.prototype.cancel=function(){if(this.i=zV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function zV(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return mS(t.i)}var wre=class{stringify(t){return ge.JSON.stringify(t,void 0)}parse(t){return ge.JSON.parse(t,void 0)}};function _re(){this.g=new wre}function vre(t,e,n){let r=n||"";try{UV(t,function(i,s){let o=i;Xg(i)&&(o=_S(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sre(t,e){let n=new TC;if(ge.Image){let r=new Image;r.onload=dC(mC,n,r,"TestLoadImage: loaded",!0,e),r.onerror=dC(mC,n,r,"TestLoadImage: error",!1,e),r.onabort=dC(mC,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=dC(mC,n,r,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function mC(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function rf(t){this.l=t.ec||null,this.j=t.ob||!1}En(rf,DS);rf.prototype.g=function(){return new LC(this.l,this.j)};rf.prototype.i=function(t){return function(){return t}}({});function LC(t,e){pn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=NS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}En(LC,pn);var NS=0;H=LC.prototype;H.open=function(t,e){if(this.readyState!=NS)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Kg(this)};H.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};H.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sf(this)),this.readyState=NS};H.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Kg(this)),this.g&&(this.readyState=3,Kg(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jV(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function jV(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}H.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sf(this):Kg(this),this.readyState==3&&jV(this)}};H.Za=function(t){this.g&&(this.response=this.responseText=t,sf(this))};H.Ya=function(t){this.g&&(this.response=t,sf(this))};H.ka=function(){this.g&&sf(this)};function sf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Kg(t)}H.setRequestHeader=function(t,e){this.v.append(t,e)};H.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};H.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Kg(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(LC.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var bre=ge.JSON.parse;function xt(t){pn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=KV,this.L=this.M=!1}En(xt,pn);var KV="",Dre=/^https?$/i,Rre=["POST","PUT"];H=xt.prototype;H.Oa=function(t){this.M=t};H.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cS.g(),this.C=this.u?iV(this.u):iV(cS),this.g.onreadystatechange=Gn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){aV(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ge.FormData&&t instanceof ge.FormData,!(0<=hV(Rre,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{$V(this),0<this.B&&((this.L=Tre(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gn(this.ua,this)):this.A=bS(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){aV(this,s)}};function Tre(t){return jc&&typeof t.timeout=="number"&&t.ontimeout!==void 0}H.ua=function(){typeof ES<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))};function aV(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XV(t),OC(t)}function XV(t){t.F||(t.F=!0,Tn(t,"complete"),Tn(t,"error"))}H.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tn(this,"complete"),Tn(this,"abort"),OC(this))};H.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),OC(this,!0)),xt.$.N.call(this)};H.La=function(){this.s||(this.G||this.v||this.l?ZV(this):this.kb())};H.kb=function(){ZV(this)};function ZV(t){if(t.h&&typeof ES<"u"&&(!t.C[1]||vs(t)!=4||t.da()!=2)){if(t.v&&vs(t)==4)bS(t.La,0,t);else if(Tn(t,"readystatechange"),vs(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(PV)[1]||null;!i&&ge.self&&ge.self.location&&(i=ge.self.location.protocol.slice(0,-1)),r=!Dre.test(i?i.toLowerCase():"")}n=r}if(n)Tn(t,"complete"),Tn(t,"success");else{t.m=6;try{var s=2<vs(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",XV(t)}}finally{OC(t)}}}}function OC(t,e){if(t.g){$V(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Tn(t,"ready");try{n.onreadystatechange=r}catch{}}}function $V(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ge.clearTimeout(t.A),t.A=null)}H.isActive=function(){return!!this.g};function vs(t){return t.g?t.g.readyState:0}H.da=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}};H.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};H.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),bre(e)}};function AV(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case KV:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function kre(t){let e={};t=(t.g&&2<=vs(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(qg(t[r]))continue;var n=ire(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}ere(e,function(r){return r.join(", ")})}H.Ia=function(){return this.m};H.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function eG(t){let e="";return IS(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function FS(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=eG(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):gt(t,e,n))}function Og(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function tG(t){this.Ga=0,this.j=[],this.l=new TC,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Og("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Og("baseRetryDelayMs",5e3,t),this.hb=Og("retryDelaySeedMs",1e4,t),this.eb=Og("forwardChannelMaxRetries",2,t),this.xa=Og("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new HV(t&&t.concurrentRequestLimit),this.Ja=new _re,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}H=tG.prototype;H.ra=8;H.H=1;function MS(t){if(nG(t),t.H==3){var e=t.W++,n=mo(t.I);if(gt(n,"SID",t.K),gt(n,"RID",e),gt(n,"TYPE","terminate"),of(t,n),e=new tf(t,t.l,e),e.L=2,e.A=xC(mo(n)),n=!1,ge.navigator&&ge.navigator.sendBeacon)try{n=ge.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ge.Image&&(new Image().src=e.A,n=!0),n||(e.g=cG(e.l,null),e.g.ha(e.A)),e.G=Date.now(),nf(e)}AG(t)}function UC(t){t.g&&(LS(t),t.g.cancel(),t.g=null)}function nG(t){UC(t),t.u&&(ge.clearTimeout(t.u),t.u=null),BC(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ge.clearTimeout(t.m),t.m=null)}function PC(t){if(!YV(t.i)&&!t.m){t.m=!0;var e=t.Na;Yg||wV(),Jg||(Yg(),Jg=!0),vS.add(e,t),t.C=0}}function Nre(t,e){return JV(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=$g(Gn(t.Na,t,e),aG(t,t.C)),t.C++,!0)}H.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new tf(this,this.l,t),s=this.s;if(this.U&&(s?(s=pV(s),EV(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=rG(this,i,e),n=mo(this.I),gt(n,"RID",t),gt(n,"CVER",22),this.F&&gt(n,"X-HTTP-Session-Id",this.F),of(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(eG(s)))+"&"+e:this.o&&FS(n,this.o,s)),kS(this.i,i),this.bb&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",e),gt(n,"SID","null"),i.aa=!0,hS(i,n,null)):hS(i,n,e),this.H=2}}else this.H==3&&(t?lV(this,t):this.j.length==0||YV(this.i)||lV(this))};function lV(t,e){var n;e?n=e.m:n=t.W++;let r=mo(t.I);gt(r,"SID",t.K),gt(r,"RID",n),gt(r,"AID",t.V),of(t,r),t.o&&t.s&&FS(r,t.o,t.s),n=new tf(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=rG(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),kS(t.i,n),hS(n,r,e)}function of(t,e){t.na&&IS(t.na,function(n,r){gt(e,r,n)}),t.h&&UV({},function(n,r){gt(e,r,n)})}function rG(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Gn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let A=0;A<n;A++){let l=i[A].g,c=i[A].map;if(l-=s,0>l)s=Math.max(0,i[A].g-100),a=!1;else try{vre(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function iG(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Yg||wV(),Jg||(Yg(),Jg=!0),vS.add(e,t),t.A=0}}function xS(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=$g(Gn(t.Ma,t),aG(t,t.A)),t.A++,!0)}H.Ma=function(){if(this.u=null,sG(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=$g(Gn(this.jb,this),t)}};H.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ar(10),UC(this),sG(this))};function LS(t){t.B!=null&&(ge.clearTimeout(t.B),t.B=null)}function sG(t){t.g=new tf(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=mo(t.wa);gt(e,"RID","rpc"),gt(e,"SID",t.K),gt(e,"AID",t.V),gt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&gt(e,"TO",t.qa),gt(e,"TYPE","xmlhttp"),of(t,e),t.o&&t.s&&FS(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=xC(mo(e)),n.u=null,n.S=!0,MV(n,t)}H.ib=function(){this.v!=null&&(this.v=null,UC(this),xS(this),ar(19))};function BC(t){t.v!=null&&(ge.clearTimeout(t.v),t.v=null)}function oG(t,e){var n=null;if(t.g==e){BC(t),LS(t),t.g=null;var r=2}else if(gS(t.i,e))n=e.F,WV(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=kC(),Tn(r,new RV(r,n)),PC(t)}else iG(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Nre(t,e)||r==2&&xS(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:XA(t,5);break;case 4:XA(t,10);break;case 3:XA(t,6);break;default:XA(t,2)}}}function aG(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function XA(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Gn(t.pb,t);n||(n=new ZA("//www.google.com/images/cleardot.gif"),ge.location&&ge.location.protocol=="http"||IC(n,"https"),xC(n)),Sre(n.toString(),r)}else ar(2);t.H=0,t.h&&t.h.za(e),AG(t),nG(t)}H.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ar(2)):(this.l.info("Failed to ping google.com"),ar(1))};function AG(t){if(t.H=0,t.ma=[],t.h){let e=zV(t.i);(e.length!=0||t.j.length!=0)&&(eV(t.ma,e),eV(t.ma,t.j),t.i.i.length=0,mS(t.j),t.j.length=0),t.h.ya()}}function lG(t,e,n){var r=n instanceof ZA?mo(n):new ZA(n);if(r.g!="")e&&(r.g=e+"."+r.g),yC(r,r.m);else{var i=ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ZA(null);r&&IC(s,r),e&&(s.g=e),i&&yC(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&gt(r,n,e),gt(r,"VER",t.ra),of(t,r),r}function cG(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new xt(new rf({ob:n})):new xt(t.va),e.Oa(t.J),e}H.isActive=function(){return!!this.h&&this.h.isActive(this)};function uG(){}H=uG.prototype;H.Ba=function(){};H.Aa=function(){};H.za=function(){};H.ya=function(){};H.isActive=function(){return!0};H.Va=function(){};function QC(){if(jc&&!(10<=Number(Kne)))throw Error("Environmental error: no available transport.")}QC.prototype.g=function(t,e){return new Hr(t,e)};function Hr(t,e){pn.call(this),this.g=new tG(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!qg(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qg(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Xc(this)}En(Hr,pn);Hr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ar(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=lG(t,null,t.Y),PC(t)};Hr.prototype.close=function(){MS(this.g)};Hr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=_S(t),t=n);e.j.push(new Bre(e.fb++,t)),e.H==3&&PC(e)};Hr.prototype.N=function(){this.g.h=null,delete this.j,MS(this.g),delete this.g,Hr.$.N.call(this)};function hG(t){RS.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}En(hG,RS);function dG(){TS.call(this),this.status=1}En(dG,TS);function Xc(t){this.g=t}En(Xc,uG);Xc.prototype.Ba=function(){Tn(this.g,"a")};Xc.prototype.Aa=function(t){Tn(this.g,new hG(t))};Xc.prototype.za=function(t){Tn(this.g,new dG)};Xc.prototype.ya=function(){Tn(this.g,"b")};function Fre(){this.blockSize=-1}function qi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}En(qi,Fre);qi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function eS(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}qi.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)eS(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){eS(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){eS(this,r),i=0;break}}this.h=i,this.i+=e};qi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ke(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var Mre={};function OS(t){return-128<=t&&128>t?Wne(t,function(e){return new Ke([e|0],0>e?-1:0)}):new Ke([t|0],0>t?-1:0)}function Ss(t){if(isNaN(t)||!isFinite(t))return zc;if(0>t)return Rn(Ss(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=fS;return new Ke(e,0)}function gG(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Rn(gG(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ss(Math.pow(e,8)),r=zc,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ss(Math.pow(e,s)),r=r.R(s).add(Ss(o))):(r=r.R(n),r=r.add(Ss(o)))}return r}var fS=4294967296,zc=OS(0),pS=OS(1),cV=OS(16777216);H=Ke.prototype;H.ea=function(){if(pi(this))return-Rn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:fS+r)*e,e*=fS}return t};H.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Eo(this))return"0";if(pi(this))return"-"+Rn(this).toString(t);for(var e=Ss(Math.pow(t,6)),n=this,r="";;){var i=_C(n,e).g;n=wC(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Eo(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};H.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Eo(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function pi(t){return t.h==-1}H.X=function(t){return t=wC(this,t),pi(t)?-1:Eo(t)?0:1};function Rn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ke(n,~t.h).add(pS)}H.abs=function(){return pi(this)?Rn(this):this};H.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ke(n,n[n.length-1]&-2147483648?-1:0)};function wC(t,e){return t.add(Rn(e))}H.R=function(t){if(Eo(this)||Eo(t))return zc;if(pi(this))return pi(t)?Rn(this).R(Rn(t)):Rn(Rn(this).R(t));if(pi(t))return Rn(this.R(Rn(t)));if(0>this.X(cV)&&0>t.X(cV))return Ss(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,A=t.D(i)&65535;n[2*r+2*i]+=o*A,CC(n,2*r+2*i),n[2*r+2*i+1]+=s*A,CC(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,CC(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,CC(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ke(n,0)};function CC(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ug(t,e){this.g=t,this.h=e}function _C(t,e){if(Eo(e))throw Error("division by zero");if(Eo(t))return new Ug(zc,zc);if(pi(t))return e=_C(Rn(t),e),new Ug(Rn(e.g),Rn(e.h));if(pi(e))return e=_C(t,Rn(e)),new Ug(Rn(e.g),e.h);if(30<t.g.length){if(pi(t)||pi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=pS,r=e;0>=r.X(t);)n=uV(n),r=uV(r);var i=Jc(n,1),s=Jc(r,1);for(r=Jc(r,2),n=Jc(n,2);!Eo(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Jc(r,1),n=Jc(n,1)}return e=wC(t,i.R(e)),new Ug(i,e)}for(i=zc;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ss(n),o=s.R(e);pi(o)||0<o.X(t);)n-=r,s=Ss(n),o=s.R(e);Eo(s)&&(s=pS),i=i.add(s),t=wC(t,o)}return new Ug(i,t)}H.gb=function(t){return _C(this,t).h};H.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ke(n,this.h&t.h)};H.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ke(n,this.h|t.h)};H.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ke(n,this.h^t.h)};function uV(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ke(n,t.h)}function Jc(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ke(i,t.h)}QC.prototype.createWebChannel=QC.prototype.g;Hr.prototype.send=Hr.prototype.u;Hr.prototype.open=Hr.prototype.m;Hr.prototype.close=Hr.prototype.close;NC.NO_ERROR=0;NC.TIMEOUT=8;NC.HTTP_ERROR=6;TV.COMPLETE="complete";kV.EventType=ef;ef.OPEN="a";ef.CLOSE="b";ef.ERROR="c";ef.MESSAGE="d";pn.prototype.listen=pn.prototype.O;xt.prototype.listenOnce=xt.prototype.P;xt.prototype.getLastError=xt.prototype.Sa;xt.prototype.getLastErrorCode=xt.prototype.Ia;xt.prototype.getStatus=xt.prototype.da;xt.prototype.getResponseJson=xt.prototype.Wa;xt.prototype.getResponseText=xt.prototype.ja;xt.prototype.send=xt.prototype.ha;xt.prototype.setWithCredentials=xt.prototype.Oa;qi.prototype.digest=qi.prototype.l;qi.prototype.reset=qi.prototype.reset;qi.prototype.update=qi.prototype.j;Ke.prototype.add=Ke.prototype.add;Ke.prototype.multiply=Ke.prototype.R;Ke.prototype.modulo=Ke.prototype.gb;Ke.prototype.compare=Ke.prototype.X;Ke.prototype.toNumber=Ke.prototype.ea;Ke.prototype.toString=Ke.prototype.toString;Ke.prototype.getBits=Ke.prototype.D;Ke.fromNumber=Ss;Ke.fromString=gG;var Wke=Hi.createWebChannelTransport=function(){return new QC},zke=Hi.getStatEventTarget=function(){return kC()},jke=Hi.ErrorCode=NC,Kke=Hi.EventType=TV,Xke=Hi.Event=$A,Zke=Hi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$ke=Hi.FetchXmlHttpFactory=rf,eNe=Hi.WebChannel=kV,tNe=Hi.XhrIo=xt,fG=Hi.Md5=qi,el=Hi.Integer=Ke;var Il=DE(qJ(),1),t4=DE(ND(),1);var HJ="@firebase/firestore",YJ="4.4.2";var rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null);rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid");rn.FIRST_PARTY=new rn("first-party-uid");rn.MOCK_USER=new rn("mock-user");var ehe="10.8.0";var mh=ehe;function the(t){mh=t}function nhe(t){return Kue(t,{depth:100})}var Xa=new ea("@firebase/firestore");function Ju(){return Xa.logLevel}function n4(t){Xa.setLogLevel(t)}function F(t,...e){if(Xa.logLevel<=hi.DEBUG){let n=e.map(uN);Xa.debug(`Firestore (${mh}): ${t}`,...n)}}function Rt(t,...e){if(Xa.logLevel<=hi.ERROR){let n=e.map(uN);Xa.error(`Firestore (${mh}): ${t}`,...n)}}function Di(t,...e){if(Xa.logLevel<=hi.WARN){let n=e.map(uN);Xa.warn(`Firestore (${mh}): ${t}`,...n)}}function uN(t){if(typeof t=="string")return t;try{return nhe(t)}catch{return t}}function J(t="Unexpected state"){let e=`FIRESTORE (${mh}) INTERNAL ASSERTION FAILED: `+t;throw Rt(e),new Error(e)}function Z(t,e){t||J()}function r4(t,e){t||J()}function Y(t,e){return t}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=class extends GE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Wy=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rn.UNAUTHENTICATED))}shutdown(){}},dT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},gT=class{constructor(e){this.authProvider=e,this.currentUser=rn.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.tokenCounter,i=A=>this.tokenCounter!==r?(r=this.tokenCounter,n(A)):Promise.resolve(),s=new Wt;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),s.resolve(),s=new Wt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let A=s;e.enqueueRetryable(()=>E(this,null,function*(){yield A.promise,yield i(this.currentUser)}))},a=A=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.tokenListener),o()};this.authProvider.onInit(A=>a(A)),setTimeout(()=>{if(!this.auth){let A=this.authProvider.getImmediate({optional:!0});A?a(A):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wt)}},0),o()}getToken(){let e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.tokenCounter!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new Wy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new rn(e)}},fT=class{constructor(e,n,r){this.sessionIndex=e,this.iamToken=n,this.authTokenFactory=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},pT=class{constructor(e,n,r){this.sessionIndex=e,this.iamToken=n,this.authTokenFactory=r}getToken(){return Promise.resolve(new fT(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,n){e.enqueueRetryable(()=>n(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ET=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mT=class{constructor(e){this.appCheckProvider=e,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(e,n){let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.latestAppCheckToken;return this.latestAppCheckToken=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.tokenListener=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.appCheckProvider.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Z(typeof n.token=="string"),this.latestAppCheckToken=n.token,new ET(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}};function rhe(t){if(!t)return new hT;switch(t.type){case"firstParty":return new pT(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new D(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function ihe(t){return $ue(t)}var zy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="",i=20;for(;r.length<i;){let s=ihe(40);for(let o=0;o<s.length;++o)r.length<i&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}};function me(t,e){return t<e?-1:t>e?1:0}function yl(t,e,n){return t.length!==e.length?!1:t.every((r,i)=>n(r,e[i]))}function i4(t){return t+"\0"}var JJ=-62135596800,WJ=1e6,Tt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<JJ)throw new D(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-n*1e3)*WJ);return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return this.seconds*1e3+this.nanoseconds/WJ}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-JJ,n=String(e).padStart(12,"0"),r=String(this.nanoseconds).padStart(9,"0");return n+"."+r}};var ne=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Tt(0,0))}static max(){return new t(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return this.timestamp.seconds*1e6+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var zJ="__name__",jy=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},xe=class t extends jy{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new D(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},she=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jt=class t extends jy{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return she.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zJ}static keyField(){return new t([zJ])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new D(v.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new D(v.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let A=e[i+1];if(!(A==="\\"||A==="."||A==="`"))throw new D(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=A,i+=2}else a==="`"?(o=!o,i++):a==="."&&!o?(s(),i++):(r+=a,i++)}if(s(),o)throw new D(v.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(xe.fromString(e))}static fromName(e){return new t(xe.fromString(e).popFirst(5))}static empty(){return new t(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2===0}static fromSegments(e){return new t(new xe(e.slice()))}};var th=-1,ohe=0,CT=(()=>{class t{constructor(n,r,i,s){this.indexId=n,this.collectionGroup=r,this.fields=i,this.indexState=s}}return t.UNKNOWN_ID=-1,t})();function hN(t){return t.fields.find(e=>e.kind===2)}function Bl(t){return t.fields.filter(e=>e.kind!==2)}function ahe(t){let e=Bl(t);return e.length===0?0:e[e.length-1].kind}function Ahe(t){return`id=${t.indexId}|cg=${t.collectionGroup}|f=${t.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}var Zu=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var ep=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(ohe,Ri.min())}};function s4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new Ri(i,q.empty(),e)}function o4(t){return new Ri(t.readTime,t.key,th)}var Ri=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ne.min(),q.empty(),th)}static max(){return new t(ne.max(),q.empty(),th)}};function dN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0||(n=q.comparator(t.documentKey,e.documentKey),n!==0)?n:me(t.largestBatchId,e.largestBatchId)}var a4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ky=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function AA(t){return E(this,null,function*(){if(t.code===v.FAILED_PRECONDITION&&t.message===a4)F("LocalStore","Unexpectedly lost primary lease");else throw t})}var Q=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},A=>r(A))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let A=0;A<s;A++){let l=A;n(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var zr="SimpleDb",lhe=3,Xy=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.completionDeferred=new Wt,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{n.error?this.completionDeferred.reject(new Cl(e,n.error)):this.completionDeferred.resolve()},this.transaction.onerror=r=>{let i=gN(r.target.error);this.completionDeferred.reject(new Cl(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Cl(n,s)}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(F(zr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;!this.aborted&&typeof e.commit=="function"&&e.commit()}store(e){let n=this.transaction.objectStore(e);return new yT(n)}},Do=class t{constructor(e,n,r){this.name=e,this.version=n,this.schemaConverter=r,t.getIOSVersion(Td())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F(zr,"Removing database:",e),hl(window.indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!VE())return!1;if(t.isMockPersistence())return!0;let e=Td(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static isMockPersistence(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,n){return e.store(n)}static getIOSVersion(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static getAndroidVersion(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}ensureDb(e){return E(this,null,function*(){return this.db||(F(zr,"Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Cl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new D(v.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new D(v.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Cl(e,o))},i.onupgradeneeded=s=>{F(zr,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.schemaConverter.createOrUpgrade(o,i.transaction,s.oldVersion,this.version).next(()=>{F(zr,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=n=>this.versionchangelistener(n)),this.db})}setVersionChangeListener(e){this.versionchangelistener=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return E(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.ensureDb(e);let a=Xy.open(this.db,e,s?"readonly":"readwrite",r),A=i(a).next(l=>(a.maybeCommit(),l)).catch(l=>(a.abort(l),Q.reject(l))).toPromise();return A.catch(()=>{}),yield a.completionPromise,A}catch(a){let A=a,l=A.name!=="FirebaseError"&&o<lhe;if(F(zr,"Transaction failed with error:",A.message,"Retrying:",l),this.close(),!l)return Promise.reject(A)}}})}close(){this.db&&this.db.close(),this.db=void 0}},IT=class{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return hl(this.dbCursor.delete())}},Cl=class extends D{constructor(e,n){super(v.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function lA(t){return t.name==="IndexedDbTransactionError"}var yT=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(F(zr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(F(zr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hl(r)}add(e){F(zr,"ADD",this.store.name,e,e);let n=this.store.add(e);return hl(n)}get(e){let n=this.store.get(e);return hl(n).next(r=>(r===void 0&&(r=null),F(zr,"GET",this.store.name,e,r),r))}delete(e){F(zr,"DELETE",this.store.name,e);let n=this.store.delete(e);return hl(n)}count(){F(zr,"COUNT",this.store.name);let e=this.store.count();return hl(e)}loadAll(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new Q((o,a)=>{s.onerror=A=>{a(A.target.error)},s.onsuccess=A=>{o(A.target.result)}})}else{let s=this.cursor(r),o=[];return this.iterateCursor(s,(a,A)=>{o.push(A)}).next(()=>o)}}loadFirst(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new Q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}deleteAll(e,n){F(zr,"DELETE ALL",this.store.name);let r=this.options(e,n);r.keysOnly=!1;let i=this.cursor(r);return this.iterateCursor(i,(s,o,a)=>a.delete())}iterate(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.iterateCursor(i,n)}iterateSerial(e){let n=this.cursor({});return new Q((r,i)=>{n.onerror=s=>{let o=gN(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;if(!o){r();return}e(o.primaryKey,o.value).next(a=>{a?o.continue():r()})}})}iterateCursor(e,n){let r=[];return new Q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a){i();return}let A=new IT(a),l=n(a.primaryKey,a.value,A);if(l instanceof Q){let c=l.catch(u=>(A.done(),Q.reject(u)));r.push(c)}A.isDone?i():A.skipToKey===null?a.continue():a.continue(A.skipToKey)}}).next(()=>Q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}else return this.store.openCursor(e.range,n)}};function hl(t){return new Q((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=gN(r.target.error);n(i)}})}var jJ=!1;function gN(t){let e=Do.getIOSVersion(Td());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jJ||(jJ=!0,setTimeout(()=>{throw r},0)),r}}return t}var zf="IndexBackfiller",che=15*1e3,uhe=60*1e3,hhe=50,BT=class{constructor(e,n){this.asyncQueue=e,this.backfiller=n,this.task=null}start(){this.schedule(che)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}schedule(e){F(zf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>E(this,null,function*(){this.task=null;try{let n=yield this.backfiller.backfill();F(zf,`Documents written: ${n}`)}catch(n){lA(n)?F(zf,"Ignoring IndexedDB error during index backfill: ",n):yield AA(n)}yield this.schedule(uhe)}))}},QT=class{constructor(e,n){this.localStore=e,this.persistence=n}backfill(){return E(this,arguments,function*(e=hhe){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.writeIndexEntries(n,e))})}writeIndexEntries(e,n){let r=new Set,i=n,s=!0;return Q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o===null||r.has(o))s=!1;else return F(zf,`Processing collection: ${o}`),this.writeEntriesForCollectionGroup(e,o,i).next(a=>{i-=a,r.add(o)})})).next(()=>n-i)}writeEntriesForCollectionGroup(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.getNewOffset(i,s)).next(a=>(F(zf,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}getNewOffset(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=o4(s);dN(o,r)>0&&(r=o)}),new Ri(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var jr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.setPreviousValue(i),this.writeNewSequenceNumber=i=>r.writeSequenceNumber(i))}setPreviousValue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(n),n}}t.INVALID=-1;return t})(),$u="",wT="",A4="",l4="";function hr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=KJ(e)),e=dhe(t.get(n),e);return KJ(e)}function dhe(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+=$u+A4;break;case $u:n+=$u+l4;break;default:n+=s}}return n}function KJ(t){return t+$u+wT}function Ys(t){let e=t.length;if(Z(e>=2),e===2)return Z(t.charAt(0)===$u&&t.charAt(1)===wT),xe.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf($u,s);switch((o<0||o>n)&&J(),t.charAt(o+1)){case wT:let A=t.substring(s,o),l;i.length===0?l=A:(i+=A,l=i,i=""),r.push(l);break;case A4:i+=t.substring(s,o),i+="\0";break;case l4:i+=t.substring(s,o+1);break;default:J()}s=o+2}return new xe(r)}var dl="remoteDocuments";var _p="owner",Uu="owner",vp="mutationQueues",ghe="userId",$i="mutations",c4="batchId",El="userMutationsIndex",u4=["userId","batchId"];function fhe(t){return[t]}function Vy(t,e){return[t,hr(e)]}function h4(t,e,n){return[t,hr(e),n]}var phe={},Ch="documentMutations",UB="remoteDocumentsV14",Ehe=["prefixPath","collectionGroup","readTime","documentId"],Gy="documentKeyIndex",mhe=["prefixPath","collectionGroup","documentId"],d4="collectionGroupIndex",Che=["collectionGroup","readTime","prefixPath","documentId"],Sp="remoteDocumentGlobal",_T="remoteDocumentGlobalKey",Ih="targets",Ihe="targetId",g4="queryTargetsIndex",yhe=["canonicalId","targetId"],yh="targetDocuments",Bhe=["targetId","path"],fN="documentTargetsIndex",Qhe=["path","targetId"],Zy="targetGlobalKey",Ml="targetGlobal",tp="collectionParents",whe=["collectionId","parent"],nh="clientMetadata",_he="clientId",PB="bundles",vhe="bundleId",VB="namedQueries",She="name",pN="indexConfiguration",bhe="indexId",vT="collectionGroupIndex",Dhe="collectionGroup",EN="indexState",Rhe=["indexId","uid"],f4="sequenceNumberIndex",The=["uid","sequenceNumber"],mN="indexEntries",khe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],p4="documentKeyIndex",Nhe=["indexId","uid","orderedDocumentKey"],GB="documentOverlays",Fhe=["userId","collectionPath","documentId"],ST="collectionPathOverlayIndex",Mhe=["userId","collectionPath","largestBatchId"],E4="collectionGroupOverlayIndex",xhe=["userId","collectionGroup","largestBatchId"],Lhe=[vp,$i,Ch,dl,Ih,_p,Ml,yh],Ohe=Lhe,Uhe=[...Ohe,nh],Phe=[...Uhe,Sp],Vhe=[...Phe,tp],m4=[...Vhe,PB,VB],Ghe=[...m4,GB],C4=[vp,$i,Ch,UB,Ih,_p,Ml,yh,nh,Sp,tp,PB,VB,GB],I4=C4,qhe=[...I4,pN,EN,mN];function Hhe(t){if(t===15)return qhe;if(t===14)return I4;if(t===13)return C4;if(t===12)return Ghe;if(t===11)return m4;J()}var np=class extends Ky{constructor(e,n){super(),this.simpleDbTransaction=e,this.currentSequenceNumber=n}};function Qn(t,e){let n=Y(t);return Do.getStore(n.simpleDbTransaction,e)}function XJ(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xl(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function y4(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ft=class t{constructor(e,n){this.comparator=e,this.root=n||jf.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jf.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jf.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}},Ku=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)this.isReverse?e=e.left:e=e.right;else if(s===0){this.nodeStack.push(e);break}else this.nodeStack.push(e),this.isReverse?e=e.right:e=e.left}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jf=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let n=this;return!n.left.isRed()&&!n.left.left.isRed()&&(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let i,s=this;if(r(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed()&&!s.left.left.isRed()&&(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(n,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),!s.right.isEmpty()&&!s.right.isRed()&&!s.right.left.isRed()&&(s=s.moveRedRight()),r(n,s.key)===0){if(s.right.isEmpty())return t.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(n,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){let n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let n=this.left.check();if(n!==this.right.check())throw J();return n+(this.isRed()?0:1)}}return t.EMPTY=null,t.RED=!0,t.BLACK=!1,t})(),bT=class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new jf(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};jf.EMPTY=new bT;var it=class t{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(n!==void 0?r=this.data.getIteratorFrom(n):r=this.data.getIterator();r.hasNext();){let i=r.getNext();if(!e(i.key))return}}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $y(this.data.getIterator())}getIteratorFrom(e){return new $y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},$y=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Yhe(t,e,n,r,i){let s=t.getIterator(),o=e.getIterator(),a=Pu(s),A=Pu(o);for(;a||A;){let l=!1,c=!1;if(a&&A){let u=n(a,A);u<0?c=!0:u>0&&(l=!0)}else a!=null?c=!0:l=!0;l?(r(A),A=Pu(o)):c?(i(a),a=Pu(s)):(a=Pu(s),A=Pu(o))}}function Pu(t){return t.hasNext()?t.getNext():void 0}var Kr=class t{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new t([])}unionWith(e){let n=new it(jt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,(n,r)=>n.isEqual(r))}};function Jhe(t){return Buffer.from(t,"base64").toString("binary")}function Whe(t){return Buffer.from(t,"binary").toString("base64")}function B4(){return!0}var Bn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=Jhe(e);return new t(n)}static fromUint8Array(e){let n=zhe(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return Whe(this.binaryString)}toUint8Array(){return jhe(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Bn.EMPTY_BYTE_STRING=new Bn("");function zhe(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function jhe(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var Khe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Za(t){if(Z(!!t),typeof t=="string"){let e=0,n=Khe.exec(t);if(Z(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}else{let e=Ut(t.seconds),n=Ut(t.nanos);return{seconds:e,nanos:n}}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $a(t){return typeof t=="string"?Bn.fromBase64String(t):Bn.fromUint8Array(t)}var Q4="server_timestamp",w4="__type__",_4="__previous_value__",v4="__local_write_time__";function qB(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[w4])===null||n===void 0?void 0:n.stringValue)===Q4}function Xhe(t,e){let n={fields:{[w4]:{stringValue:Q4},[v4]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&qB(e)&&(e=CN(e)),e&&(n.fields[_4]=e),{mapValue:n}}function CN(t){let e=t.mapValue.fields[_4];return qB(e)?CN(e):e}function rp(t){let e=Za(t.mapValue.fields[v4].timestampValue);return new Tt(e.seconds,e.nanos)}var DT=class{constructor(e,n,r,i,s,o,a,A,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=A,this.useFetchStreams=l}},ZJ="(default)",eA=class t{constructor(e,n){this.projectId=e,this.database=n||ZJ}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===ZJ}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function Zhe(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new D(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eA(t.options.projectId,e)}var Ka=-1;function bp(t){return t==null}function ip(t){return t===0&&1/t===-1/0}function S4(t){return typeof t=="number"&&Number.isInteger(t)&&!ip(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var b4="__max__",za={mapValue:{fields:{__type__:{stringValue:b4}}}},qy={nullValue:"NULL_VALUE"};function Ql(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qB(t)?4:D4(t)?9007199254740991:10:J()}function es(t,e){if(t===e)return!0;let n=Ql(t),r=Ql(e);if(n!==r)return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rp(t).isEqual(rp(e));case 3:return $he(t,e);case 5:return t.stringValue===e.stringValue;case 6:return tde(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return ede(t,e);case 2:return nde(t,e);case 9:return yl(t.arrayValue.values||[],e.arrayValue.values||[],es);case 10:return rde(t,e);case 9007199254740991:return!0;default:return J()}}function $he(t,e){if(typeof t.timestampValue=="string"&&typeof e.timestampValue=="string"&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;let n=Za(t.timestampValue),r=Za(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}function ede(t,e){return Ut(t.geoPointValue.latitude)===Ut(e.geoPointValue.latitude)&&Ut(t.geoPointValue.longitude)===Ut(e.geoPointValue.longitude)}function tde(t,e){return $a(t.bytesValue).isEqual($a(e.bytesValue))}function nde(t,e){if("integerValue"in t&&"integerValue"in e)return Ut(t.integerValue)===Ut(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){let n=Ut(t.doubleValue),r=Ut(e.doubleValue);return n===r?ip(n)===ip(r):isNaN(n)&&isNaN(r)}return!1}function rde(t,e){let n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(XJ(n)!==XJ(r))return!1;for(let i in n)if(n.hasOwnProperty(i)&&(r[i]===void 0||!es(n[i],r[i])))return!1;return!0}function sp(t,e){return(t.values||[]).find(n=>es(n,e))!==void 0}function tA(t,e){if(t===e)return 0;let n=Ql(t),r=Ql(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return ide(t,e);case 3:return $J(t.timestampValue,e.timestampValue);case 4:return $J(rp(t),rp(e));case 5:return me(t.stringValue,e.stringValue);case 6:return ade(t.bytesValue,e.bytesValue);case 7:return sde(t.referenceValue,e.referenceValue);case 8:return ode(t.geoPointValue,e.geoPointValue);case 9:return Ade(t.arrayValue,e.arrayValue);case 10:return lde(t.mapValue,e.mapValue);default:throw J()}}function ide(t,e){let n=Ut(t.integerValue||t.doubleValue),r=Ut(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}function $J(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);let n=Za(t),r=Za(e),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function sde(t,e){let n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){let s=me(n[i],r[i]);if(s!==0)return s}return me(n.length,r.length)}function ode(t,e){let n=me(Ut(t.latitude),Ut(e.latitude));return n!==0?n:me(Ut(t.longitude),Ut(e.longitude))}function ade(t,e){let n=$a(t),r=$a(e);return n.compareTo(r)}function Ade(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=tA(n[i],r[i]);if(s)return s}return me(n.length,r.length)}function lde(t,e){if(t===za.mapValue&&e===za.mapValue)return 0;if(t===za.mapValue)return 1;if(e===za.mapValue)return-1;let n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){let a=me(r[o],s[o]);if(a!==0)return a;let A=tA(n[r[o]],i[s[o]]);if(A!==0)return A}return me(r.length,s.length)}function rh(t){return IN(t)}function IN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?ude(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?cde(t.bytesValue):"referenceValue"in t?dde(t.referenceValue):"geoPointValue"in t?hde(t.geoPointValue):"arrayValue"in t?fde(t.arrayValue):"mapValue"in t?gde(t.mapValue):J()}function cde(t){return $a(t).toBase64()}function ude(t){let e=Za(t);return`time(${e.seconds},${e.nanos})`}function hde(t){return`geo(${t.latitude},${t.longitude})`}function dde(t){return q.fromName(t).toString()}function gde(t){let e=Object.keys(t.fields||{}).sort(),n="{",r=!0;for(let i of e)r?r=!1:n+=",",n+=`${i}:${IN(t.fields[i])}`;return n+"}"}function fde(t){let e="[",n=!0;for(let r of t.values||[])n?n=!1:e+=",",e+=IN(r);return e+"]"}function wl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function RT(t){return!!t&&"integerValue"in t}function pde(t){return!!t&&"doubleValue"in t}function Ede(t){return RT(t)||pde(t)}function op(t){return!!t&&"arrayValue"in t}function eW(t){return!!t&&"nullValue"in t}function tW(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hy(t){return!!t&&"mapValue"in t}function Kf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return xl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kf(r)),e}else if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kf(t.arrayValue.values[n]);return e}else return Object.assign({},t)}function D4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===b4}function mde(t){return"nullValue"in t?qy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?wl(eA.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:J()}function Cde(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?wl(eA.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?za:J()}function nW(t,e){let n=tA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function rW(t,e){let n=tA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var jn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){let r=this.getFieldsMap(e.popLast());r[e.lastSegment()]=Kf(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let A=this.getFieldsMap(n);this.applyChanges(A,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Kf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Hy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];(!Hy(i)||!i.mapValue.fields)&&(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xl(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Kf(this.value))}};function R4(t){let e=[];return xl(t.fields,(n,r)=>{let i=new jt([n]);if(Hy(r)){let o=R4(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Kr(e)}var nn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ne.min(),ne.min(),ne.min(),jn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ne.min(),ne.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ne.min(),ne.min(),jn.empty(),2)}convertToFoundDocument(e,n){return this.createTime.isEqual(ne.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};function Ide(t,e,n){let r=e.data.field(t),i=n.data.field(t);return r!==null&&i!==null?tA(r,i):J()}var js=class{constructor(e,n){this.position=e,this.inclusive=n}};function T4(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField())r=q.comparator(q.fromName(o.referenceValue),n.key);else{let a=n.data.field(s.field);r=tA(o,a)}if(s.dir==="desc"&&(r=r*-1),r!==0)break}return r}function yde(t,e,n){let r=T4(t,e,n);return t.inclusive?r>=0:r>0}function Bde(t,e,n){let r=T4(t,e,n);return t.inclusive?r<=0:r<0}function iW(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++){let r=t.position[n],i=e.position[n];if(!es(r,i))return!1}return!0}var _l=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Qde(t){return t.field.canonicalString()+t.dir}function wde(t){return`${t.field.canonicalString()} (${t.dir})`}function _de(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var eB=class{},ke=class t extends eB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NT(e,n,r):n==="array-contains"?new xT(e,r):n==="in"?new tB(e,r):n==="not-in"?new LT(e,r):n==="array-contains-any"?new OT(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FT(e,r):new MT(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(tA(n,this.value)):n!==null&&Ql(this.value)===Ql(n)&&this.matchesComparison(tA(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Xe=class t extends eB{constructor(e,n){super(),this.filters=e,this.op=n,this.memoizedFlattenedFilters=null}static create(e,n){return new t(e,n)}matches(e){return ih(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}getFilters(){return Object.assign([],this.filters)}};function ih(t){return t.op==="and"}function TT(t){return t.op==="or"}function yN(t){return k4(t)&&ih(t)}function k4(t){for(let e of t.filters)if(e instanceof Xe)return!1;return!0}function kT(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+rh(t.value);if(yN(t))return t.filters.map(e=>kT(e)).join(",");{let e=t.filters.map(n=>kT(n)).join(",");return`${t.op}(${e})`}}function N4(t,e){if(t instanceof ke)return vde(t,e);if(t instanceof Xe)return Sde(t,e);J()}function vde(t,e){return e instanceof ke&&t.op===e.op&&t.field.isEqual(e.field)&&es(t.value,e.value)}function Sde(t,e){return e instanceof Xe&&t.op===e.op&&t.filters.length===e.filters.length?t.filters.reduce((r,i,s)=>r&&N4(i,e.filters[s]),!0):!1}function F4(t,e){let n=t.filters.concat(e);return Xe.create(n,t.op)}function M4(t){return t instanceof ke?Dde(t):t instanceof Xe?bde(t):"Filter"}function bde(t){return t.op.toString()+" {"+t.getFilters().map(M4).join(" ,")+"}"}function Dde(t){return`${t.field.canonicalString()} ${t.op} ${rh(t.value)}`}var NT=class extends ke{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},FT=class extends ke{constructor(e,n){super(e,"in",n),this.keys=x4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},MT=class extends ke{constructor(e,n){super(e,"not-in",n),this.keys=x4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function x4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var xT=class extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return op(n)&&sp(n.arrayValue,this.value)}},tB=class extends ke{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&sp(this.value.arrayValue,n)}},LT=class extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!sp(this.value.arrayValue,n)}},OT=class extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!op(n)||!n.arrayValue.values?!1:n.arrayValue.values.some(r=>sp(this.value.arrayValue,r))}};var UT=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}};function PT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new UT(t,e,n,r,i,s,o)}function vl(t){let e=Y(t);if(e.memoizedCanonicalId===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>Qde(r)).join(","),bp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>rh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>rh(r)).join(",")),e.memoizedCanonicalId=n}return e.memoizedCanonicalId}function Rde(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>M4(n)).join(", ")}]`),bp(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>wde(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>rh(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>rh(n)).join(",")),`Target(${e})`}function Dp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_de(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!N4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup!==e.collectionGroup||!t.path.isEqual(e.path)||!iW(t.startAt,e.startAt)?!1:iW(t.endAt,e.endAt)}function nB(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function HB(t,e){return t.filters.filter(n=>n instanceof ke&&n.field.isEqual(e))}function Tde(t,e){let n=hN(e);if(n===void 0)return null;for(let r of HB(t,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}function kde(t,e){let n=new Map;for(let r of Bl(e))for(let i of HB(t,r.fieldPath))switch(i.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),i.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),i.value),Array.from(n.values())}return null}function Nde(t,e){let n=[],r=!0;for(let i of Bl(e)){let s=i.kind===0?L4(t,i.fieldPath,t.startAt):O4(t,i.fieldPath,t.startAt);n.push(s.value),r&&(r=s.inclusive)}return new js(n,r)}function Fde(t,e){let n=[],r=!0;for(let i of Bl(e)){let s=i.kind===0?O4(t,i.fieldPath,t.endAt):L4(t,i.fieldPath,t.endAt);n.push(s.value),r&&(r=s.inclusive)}return new js(n,r)}function L4(t,e,n){let r=qy,i=!0;for(let s of HB(t,e)){let o=qy,a=!0;switch(s.op){case"<":case"<=":o=mde(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=qy;break}nW({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let a=n.position[s];nW({value:r,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function O4(t,e,n){let r=za,i=!0;for(let s of HB(t,e)){let o=za,a=!0;switch(s.op){case">=":case">":o=Cde(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=za;break}rW({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let a=n.position[s];rW({value:r,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function Mde(t){let e=new it(jt.comparator),n=!1;for(let r of t.filters)for(let i of r.getFlattenedFilters())i.field.isKeyField()||(i.op==="array-contains"||i.op==="array-contains-any"?n=!0:e=e.add(i.field));for(let r of t.orderBy)r.field.isKeyField()||(e=e.add(r.field));return e.size+(n?1:0)}function xde(t){return t.limit!==null}var ts=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,A=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=A,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}};function U4(t,e,n,r,i,s,o,a){return new ts(t,e,n,r,i,s,o,a)}function Bh(t){return new ts(t)}function Lde(t,e){return new ts(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function sW(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ode(t){let e=new it(jt.comparator);return t.filters.forEach(n=>{n.getFlattenedFilters().forEach(i=>{i.isInequality()&&(e=e.add(i.field))})}),e}function Ude(t){return new ts(xe.emptyPath(),t)}function Pde(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function BN(t){return t.collectionGroup!==null}function sh(t){let e=Y(t);if(e.memoizedNormalizedOrderBy===null){e.memoizedNormalizedOrderBy=[];let n=new Set;for(let s of e.explicitOrderBy)e.memoizedNormalizedOrderBy.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";Ode(e).forEach(s=>{!n.has(s.canonicalString())&&!s.isKeyField()&&e.memoizedNormalizedOrderBy.push(new _l(s,r))}),n.has(jt.keyField().canonicalString())||e.memoizedNormalizedOrderBy.push(new _l(jt.keyField(),r))}return e.memoizedNormalizedOrderBy}function dr(t){let e=Y(t);return e.memoizedTarget||(e.memoizedTarget=Vde(e,sh(t))),e.memoizedTarget}function Vde(t,e){if(t.limitType==="F")return PT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new _l(i.field,s)});let n=t.endAt?new js(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new js(t.startAt.position,t.startAt.inclusive):null;return PT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function QN(t,e){let n=t.filters.concat([e]);return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gde(t,e){let n=t.explicitOrderBy.concat([e]);return new ts(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function rB(t,e,n){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qde(t,e){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function Hde(t,e){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function Rp(t,e){return Dp(dr(t),dr(e))&&t.limitType===e.limitType}function P4(t){return`${vl(dr(t))}|lt:${t.limitType}`}function Wu(t){return`Query(target=${Rde(dr(t))}; limitType=${t.limitType})`}function Tp(t,e){return e.isFoundDocument()&&Yde(t,e)&&Jde(t,e)&&Wde(t,e)&&zde(t,e)}function Yde(t,e){let n=e.key.path;return t.collectionGroup!==null?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):q.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}function Jde(t,e){for(let n of sh(t))if(!n.field.isKeyField()&&e.data.field(n.field)===null)return!1;return!0}function Wde(t,e){for(let n of t.filters)if(!n.matches(e))return!1;return!0}function zde(t,e){return!(t.startAt&&!Bde(t.startAt,sh(t),e)||t.endAt&&!yde(t.endAt,sh(t),e))}function V4(t){return t.collectionGroup||(t.path.length%2===1?t.path.lastSegment():t.path.get(t.path.length-2))}function G4(t){return(e,n)=>{let r=!1;for(let i of sh(t)){let s=jde(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jde(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):Ide(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var Ks=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0){this.inner[r]=[[e,n]],this.innerSize++;return}for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e)){i[s]=[e,n];return}i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xl(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return y4(this.inner)}size(){return this.innerSize}};var Kde=new ft(q.comparator);function Sr(){return Kde}var q4=new ft(q.comparator);function Jf(...t){let e=q4;for(let n of t)e=e.insert(n.key,n);return e}function Xde(){return ap()}function H4(t){let e=q4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Js(){return ap()}function Y4(){return ap()}function ap(){return new Ks(t=>t.toString(),(t,e)=>t.isEqual(e))}var Zde=new ft(q.comparator);function $de(){return Zde}var ege=new it(q.comparator);function Ce(...t){let e=ege;for(let n of t)e=e.add(n);return e}var tge=new it(me);function wN(){return tge}function J4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ip(e)?"-0":e}}function W4(t){return{integerValue:""+t}}function z4(t,e){return S4(e)?W4(e):J4(t,e)}var oh=class{constructor(){this._=void 0}};function nge(t,e,n){return t instanceof nA?Xhe(n,e):t instanceof Ro?K4(t,e):t instanceof To?X4(t,e):sge(t,e)}function rge(t,e,n){return t instanceof Ro?K4(t,e):t instanceof To?X4(t,e):n}function j4(t,e){return t instanceof rA?Ede(e)?e:{integerValue:0}:null}function ige(t,e){return t instanceof Ro&&e instanceof Ro||t instanceof To&&e instanceof To?yl(t.elements,e.elements,es):t instanceof rA&&e instanceof rA?es(t.operand,e.operand):t instanceof nA&&e instanceof nA}var nA=class extends oh{},Ro=class extends oh{constructor(e){super(),this.elements=e}};function K4(t,e){let n=Z4(e);for(let r of t.elements)n.some(i=>es(i,r))||n.push(r);return{arrayValue:{values:n}}}var To=class extends oh{constructor(e){super(),this.elements=e}};function X4(t,e){let n=Z4(e);for(let r of t.elements)n=n.filter(i=>!es(i,r));return{arrayValue:{values:n}}}var rA=class extends oh{constructor(e,n){super(),this.serializer=e,this.operand=n}};function sge(t,e){let n=j4(t,e),r=oW(n)+oW(t.operand);return RT(n)&&RT(t.operand)?W4(r):J4(t.serializer,r)}function oW(t){return Ut(t.integerValue||t.doubleValue)}function Z4(t){return op(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Sl=class{constructor(e,n){this.field=e,this.transform=n}};function oge(t,e){return t.field.isEqual(e.field)&&ige(t.transform,e.transform)}function age(t,e){return t===void 0&&e===void 0?!0:t&&e?yl(t,e,(n,r)=>oge(n,r)):!1}var VT=class{constructor(e,n){this.version=e,this.transformResults=n}},Ot=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function YB(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists!==void 0?t.exists===e.isFoundDocument():!0}var ah=class{};function $4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sA(t.key,Ot.none()):new iA(t.key,t.data,Ot.none());{let n=t.data,r=jn.empty(),i=new it(jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ns(t.key,r,new Kr(i.toArray()),Ot.none())}}function Age(t,e,n){t instanceof iA?cge(t,e,n):t instanceof ns?hge(t,e,n):gge(t,e,n)}function Xf(t,e,n,r){return t instanceof iA?uge(t,e,n,r):t instanceof ns?dge(t,e,n,r):fge(t,e,n)}function lge(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=j4(r.transform,i||null);s!=null&&(n===null&&(n=jn.empty()),n.set(r.field,s))}return n||null}function aW(t,e){return t.type!==e.type||!t.key.isEqual(e.key)||!t.precondition.isEqual(e.precondition)||!age(t.fieldTransforms,e.fieldTransforms)?!1:t.type===0?t.value.isEqual(e.value):t.type===1?t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask):!0}var iA=class extends ah{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}};function cge(t,e,n){let r=t.value.clone(),i=t3(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}function uge(t,e,n,r){if(!YB(t.precondition,e))return n;let i=t.value.clone(),s=n3(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}var ns=class extends ah{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function hge(t,e,n){if(!YB(t.precondition,e)){e.convertToUnknownDocument(n.version);return}let r=t3(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(e3(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}function dge(t,e,n,r){if(!YB(t.precondition,e))return n;let i=n3(t.fieldTransforms,r,e),s=e.data;return s.setAll(e3(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),n===null?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(o=>o.field))}function e3(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function t3(t,e,n){let r=new Map;Z(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rge(o,a,n[i]))}return r}function n3(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,nge(s,o,e))}return r}var sA=class extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};function gge(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}function fge(t,e,n){return YB(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}var Ap=class extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lp=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];if(s.key.isEqual(e.key)){let o=r[i];Age(s,e,o)}}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xf(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Xf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Y4();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let A=$4(o,a);A!==null&&r.set(i.key,A),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,(n,r)=>aW(n,r))&&yl(this.baseMutations,e.baseMutations,(n,r)=>aW(n,r))}},GT=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Z(e.mutations.length===r.length);let i=$de(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var cp=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qT=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var yn=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}(yn||{});function r3(t){switch(t){case v.OK:return J();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0;default:return J()}}function pge(t){return r3(t)&&t!==v.ABORTED}function Yy(t){if(t===void 0)return Rt("GRPC error has no .code"),v.UNKNOWN;switch(t){case yn.OK:return v.OK;case yn.CANCELLED:return v.CANCELLED;case yn.UNKNOWN:return v.UNKNOWN;case yn.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case yn.INTERNAL:return v.INTERNAL;case yn.UNAVAILABLE:return v.UNAVAILABLE;case yn.UNAUTHENTICATED:return v.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case yn.NOT_FOUND:return v.NOT_FOUND;case yn.ALREADY_EXISTS:return v.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return v.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case yn.ABORTED:return v.ABORTED;case yn.OUT_OF_RANGE:return v.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return v.UNIMPLEMENTED;case yn.DATA_LOSS:return v.DATA_LOSS;default:return J()}}var HT=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rT=null;function i3(){return new Xue}function Ege(){return new Zue("utf-8")}var mge=new el([4294967295,4294967295],0);function AW(t){let e=i3().encode(t),n=new fG;return n.update(e),new Uint8Array(n.digest())}function lW(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0),o=new el([n,r],0),a=new el([i,s],0);return[o,a]}var YT=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.bitCount=e.length*8-n,this.bitCountInInteger=el.fromNumber(this.bitCount)}getBitIndex(e,n,r){let i=e.add(n.multiply(el.fromNumber(r)));return i.compare(mge)===1&&(i=new el([i.getBits(0),i.getBits(1)],0)),i.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){let n=this.bitmap[Math.floor(e/8)],r=e%8;return(n&1<<r)!==0}mightContain(e){if(this.bitCount===0)return!1;let n=AW(e),[r,i]=lW(n);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(r,i,s);if(!this.isBitSet(o))return!1}return!0}static create(e,n,r){let i=e%8===0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.bitCount===0)return;let n=AW(e),[r,i]=lW(n);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(r,i,s);this.setBit(o)}}setBit(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ml=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var up=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,hp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ne.min(),i,new ft(me),Sr(),Ce())}},hp=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Ce(),Ce(),Ce())}};var eh=class{constructor(e,n,r,i){this.updatedTargetIds=e,this.removedTargetIds=n,this.key=r,this.newDoc=i}},iB=class{constructor(e,n){this.targetId=e,this.existenceFilter=n}},sB=class{constructor(e,n,r=Bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},oB=class{constructor(){this.pendingResponses=0,this.documentChanges=uW(),this._resumeToken=Bn.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return this.pendingResponses!==0}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=Ce(),n=Ce(),r=Ce();return this.documentChanges.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new hp(this._resumeToken,this._current,e,n,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=uW()}addDocumentChange(e,n){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,n)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,Z(this.pendingResponses>=0)}markCurrent(){this._hasPendingChanges=!0,this._current=!0}},Cge="WatchChangeAggregator",JT=class{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=Sr(),this.pendingDocumentTargetMapping=cW(),this.pendingTargetResets=new ft(me)}handleDocumentChange(e){for(let n of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(n,e.newDoc):this.removeDocumentFromTarget(n,e.key,e.newDoc);for(let n of e.removedTargetIds)this.removeDocumentFromTarget(n,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,n=>{let r=this.ensureTargetState(n);switch(e.state){case 0:this.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(n);break;case 3:this.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(n)&&(this.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.targetStates.forEach((r,i)=>{this.isActiveTarget(i)&&n(i)})}handleExistenceFilter(e){let n=e.targetId,r=e.existenceFilter.count,i=this.targetDataForActiveTarget(n);if(i){let s=i.target;if(nB(s))if(r===0){let o=new q(s.path);this.removeDocumentFromTarget(n,o,nn.newNoDocument(o,ne.min()))}else Z(r===1);else{let o=this.getCurrentDocumentCountForTarget(n);if(o!==r){let a=this.parseBloomFilter(e),A=a?this.applyBloomFilter(a,e,o):1;if(A!==0){this.resetTarget(n);let l=A===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(n,l)}rT?.notifyOnExistenceFilterMismatch(Ige(o,e.existenceFilter,this.metadataProvider.getDatabaseId(),a,A))}}}}parseBloomFilter(e){let n=e.existenceFilter.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o;try{o=$a(r).toUint8Array()}catch(A){if(A instanceof HT)return Di("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw A}let a;try{a=new YT(o,i,s)}catch(A){return A instanceof ml?Di("BloomFilter error: ",A):Di("Applying bloom filter failed: ",A),null}return a.bitCount===0?null:a}applyBloomFilter(e,n,r){let i=n.existenceFilter.count,s=this.filterRemovedDocuments(e,n.targetId);return i===r-s?0:2}filterRemovedDocuments(e,n){let r=this.metadataProvider.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.metadataProvider.getDatabaseId(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.removeDocumentFromTarget(n,s,null),i++)}),i}createRemoteEvent(e){let n=new Map;this.targetStates.forEach((s,o)=>{let a=this.targetDataForActiveTarget(o);if(a){if(s.current&&nB(a.target)){let A=new q(a.target.path);this.pendingDocumentUpdates.get(A)===null&&!this.targetContainsDocument(o,A)&&this.removeDocumentFromTarget(o,A,nn.newNoDocument(A,e))}s.hasPendingChanges&&(n.set(o,s.toTargetChange()),s.clearPendingChanges())}});let r=Ce();this.pendingDocumentTargetMapping.forEach((s,o)=>{let a=!0;o.forEachWhile(A=>{let l=this.targetDataForActiveTarget(A);return l&&l.purpose!=="TargetPurposeLimboResolution"?(a=!1,!1):!0}),a&&(r=r.add(s))}),this.pendingDocumentUpdates.forEach((s,o)=>o.setReadTime(e));let i=new up(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Sr(),this.pendingDocumentTargetMapping=cW(),this.pendingTargetResets=new ft(me),i}addDocumentToTarget(e,n){if(!this.isActiveTarget(e))return;let r=this.targetContainsDocument(e,n.key)?2:0;this.ensureTargetState(e).addDocumentChange(n.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(n.key,n),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(n.key,this.ensureDocumentTargetMapping(n.key).add(e))}removeDocumentFromTarget(e,n,r){if(!this.isActiveTarget(e))return;let i=this.ensureTargetState(e);this.targetContainsDocument(e,n)?i.addDocumentChange(n,1):i.removeDocumentChange(n),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(n,this.ensureDocumentTargetMapping(n).delete(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(n,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let r=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let n=this.targetStates.get(e);return n||(n=new oB,this.targetStates.set(e,n)),n}ensureDocumentTargetMapping(e){let n=this.pendingDocumentTargetMapping.get(e);return n||(n=new it(me),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,n)),n}isActiveTarget(e){let n=this.targetDataForActiveTarget(e)!==null;return n||F(Cge,"Detected inactive target",e),n}targetDataForActiveTarget(e){let n=this.targetStates.get(e);return n&&n.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new oB),this.metadataProvider.getRemoteKeysForTarget(e).forEach(r=>{this.removeDocumentFromTarget(e,r,null)})}targetContainsDocument(e,n){return this.metadataProvider.getRemoteKeysForTarget(e).has(n)}};function cW(){return new ft(q.comparator)}function uW(){return new ft(q.comparator)}function Ige(t,e,n,r,i){var s,o,a,A,l,c;let u={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},h=e.unchangedNames;return h&&(u.bloomFilter={applied:i===0,hashCount:(s=h?.hashCount)!==null&&s!==void 0?s:0,bitmapLength:(A=(a=(o=h?.bits)===null||o===void 0?void 0:o.bitmap)===null||a===void 0?void 0:a.length)!==null&&A!==void 0?A:0,padding:(c=(l=h?.bits)===null||l===void 0?void 0:l.padding)!==null&&c!==void 0?c:0,mightContain:d=>{var g;return(g=r?.mightContain(d))!==null&&g!==void 0?g:!1}}),u}var yge=(()=>{let t={};return t.asc="ASCENDING",t.desc="DESCENDING",t})(),Bge=(()=>{let t={};return t["<"]="LESS_THAN",t["<="]="LESS_THAN_OR_EQUAL",t[">"]="GREATER_THAN",t[">="]="GREATER_THAN_OR_EQUAL",t["=="]="EQUAL",t["!="]="NOT_EQUAL",t["array-contains"]="ARRAY_CONTAINS",t.in="IN",t["not-in"]="NOT_IN",t["array-contains-any"]="ARRAY_CONTAINS_ANY",t})(),Qge=(()=>{let t={};return t.and="AND",t.or="OR",t})();var WT=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function wge(t){let e=t.code===void 0?v.UNKNOWN:Yy(t.code);return new D(e,t.message||"")}function zT(t,e){return t.useProto3Json||bp(e)?e:{value:e}}function _ge(t){let e;return typeof t=="object"?e=t.value:e=t,bp(e)?null:e}function Ah(t,e){if(t.useProto3Json){let r=new Date(e.seconds*1e3).toISOString().replace(/\.\d*/,"").replace("Z",""),i=("000000000"+e.nanoseconds).slice(-9);return`${r}.${i}Z`}else return{seconds:""+e.seconds,nanos:e.nanoseconds}}function vge(t){let e=Za(t);return new Tt(e.seconds,e.nanos)}function s3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sge(t,e){return t.useProto3Json?(Z(e===void 0||typeof e=="string"),Bn.fromBase64String(e||"")):(Z(e===void 0||e instanceof Uint8Array),Bn.fromUint8Array(e||new Uint8Array))}function bge(t,e){return Ah(t,e.toTimestamp())}function zt(t){return Z(!!t),ne.fromTimestamp(vge(t))}function _N(t,e){return jT(t,e).canonicalString()}function jT(t,e){let n=Dge(t).child("documents");return e===void 0?n:n.child(e)}function o3(t){let e=xe.fromString(t);return Z(p3(e)),e}function dp(t,e){return _N(t.databaseId,e.path)}function Ws(t,e){let n=o3(e);if(n.get(1)!==t.databaseId.projectId)throw new D(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(l3(n))}function a3(t,e){return _N(t.databaseId,e)}function A3(t){let e=o3(t);return e.length===4?xe.emptyPath():l3(e)}function KT(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Dge(t){return new xe(["projects",t.projectId,"databases",t.database])}function l3(t){return Z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hW(t,e,n){return{name:dp(t,e),fields:n.value.mapValue.fields}}function Rge(t,e){return{name:dp(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ah(t,e.version.toTimestamp()),createTime:Ah(t,e.createTime.toTimestamp())}}function c3(t,e,n){let r=Ws(t,e.name),i=zt(e.updateTime),s=e.createTime?zt(e.createTime):ne.min(),o=new jn({mapValue:{fields:e.fields}}),a=nn.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Tge(t,e){Z(!!e.found),e.found.name,e.found.updateTime;let n=Ws(t,e.found.name),r=zt(e.found.updateTime),i=e.found.createTime?zt(e.found.createTime):ne.min(),s=new jn({mapValue:{fields:e.found.fields}});return nn.newFoundDocument(n,r,i,s)}function kge(t,e){Z(!!e.missing),Z(!!e.readTime);let n=Ws(t,e.missing),r=zt(e.readTime);return nn.newNoDocument(n,r)}function Nge(t,e){return"found"in e?Tge(t,e):"missing"in e?kge(t,e):J()}function Fge(t,e){let n;if("targetChange"in e){e.targetChange;let r=Mge(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=Sge(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&wge(o);n=new sB(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ws(t,r.document.name),s=zt(r.document.updateTime),o=r.document.createTime?zt(r.document.createTime):ne.min(),a=new jn({mapValue:{fields:r.document.fields}}),A=nn.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new eh(l,c,A.key,A)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ws(t,r.document),s=r.readTime?zt(r.readTime):ne.min(),o=nn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new eh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ws(t,r.document),s=r.removedTargetIds||[];n=new eh([],s,i,null)}else if("filter"in e){e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new qT(i,s),a=r.targetId;n=new iB(a,o)}else return J();return n}function Mge(t){return t==="NO_CHANGE"?0:t==="ADD"?1:t==="REMOVE"?2:t==="CURRENT"?3:t==="RESET"?4:J()}function xge(t){if(!("targetChange"in t))return ne.min();let e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?ne.min():zt(e.readTime)}function gp(t,e){let n;if(e instanceof iA)n={update:hW(t,e.key,e.value)};else if(e instanceof sA)n={delete:dp(t,e.key)};else if(e instanceof ns)n={update:hW(t,e.key,e.data),updateMask:ffe(e.fieldMask)};else if(e instanceof Ap)n={verify:dp(t,e.key)};else return J();return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>Vge(t,r))),e.precondition.isNone||(n.currentDocument=Lge(t,e.precondition)),n}function XT(t,e){let n=e.currentDocument?Oge(e.currentDocument):Ot.none(),r=e.updateTransforms?e.updateTransforms.map(i=>Gge(t,i)):[];if(e.update){e.update.name;let i=Ws(t,e.update.name),s=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=pfe(e.updateMask);return new ns(i,s,o,n,r)}else return new iA(i,s,n,r)}else if(e.delete){let i=Ws(t,e.delete);return new sA(i,n)}else if(e.verify){let i=Ws(t,e.verify);return new Ap(i,n)}else return J()}function Lge(t,e){return e.updateTime!==void 0?{updateTime:bge(t,e.updateTime)}:e.exists!==void 0?{exists:e.exists}:J()}function Oge(t){return t.updateTime!==void 0?Ot.updateTime(zt(t.updateTime)):t.exists!==void 0?Ot.exists(t.exists):Ot.none()}function Uge(t,e){let n=t.updateTime?zt(t.updateTime):zt(e);return n.isEqual(ne.min())&&(n=zt(e)),new VT(n,t.transformResults||[])}function Pge(t,e){return t&&t.length>0?(Z(e!==void 0),t.map(n=>Uge(n,e))):[]}function Vge(t,e){let n=e.transform;if(n instanceof nA)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ro)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof To)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rA)return{fieldPath:e.field.canonicalString(),increment:n.operand};throw J()}function Gge(t,e){let n=null;if("setToServerValue"in e)Z(e.setToServerValue==="REQUEST_TIME"),n=new nA;else if("appendMissingElements"in e){let i=e.appendMissingElements.values||[];n=new Ro(i)}else if("removeAllFromArray"in e){let i=e.removeAllFromArray.values||[];n=new To(i)}else"increment"in e?n=new rA(t,e.increment):J();let r=jt.fromServerFormat(e.fieldPath);return new Sl(r,n)}function u3(t,e){return{documents:[a3(t,e.path)]}}function qge(t){let e=t.documents.length;Z(e===1);let n=t.documents[0];return dr(Bh(A3(n)))}function h3(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=a3(t,i);let s=zge(e.filters);s&&(n.structuredQuery.where=s);let o=Kge(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=zT(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Zge(e.startAt)),e.endAt&&(n.structuredQuery.endAt=$ge(e.endAt)),{queryTarget:n,parent:i}}function d3(t){let e=A3(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Z(r===1);let c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=jge(n.where));let o=[];n.orderBy&&(o=Xge(n.orderBy));let a=null;n.limit&&(a=_ge(n.limit));let A=null;n.startAt&&(A=efe(n.startAt));let l=null;return n.endAt&&(l=tfe(n.endAt)),U4(e,i,o,s,a,"F",A,l)}function Hge(t){return dr(d3(t))}function Yge(t,e){let n=Jge(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Jge(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}function Wge(t,e){let n,r=e.target;if(nB(r)?n={documents:u3(t,r)}:n={query:h3(t,r).queryTarget},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=s3(t,e.resumeToken);let i=zT(t,e.expectedCount);i!==null&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(ne.min())>0){n.readTime=Ah(t,e.snapshotVersion.toTimestamp());let i=zT(t,e.expectedCount);i!==null&&(n.expectedCount=i)}return n}function zge(t){if(t.length!==0)return f3(Xe.create(t,"and"))}function jge(t){let e=g3(t);return e instanceof Xe&&yN(e)?e.getFilters():[e]}function g3(t){return t.unaryFilter!==void 0?hfe(t):t.fieldFilter!==void 0?dfe(t):t.compositeFilter!==void 0?gfe(t):J()}function Kge(t){if(t.length!==0)return t.map(e=>Afe(e))}function Xge(t){return t.map(e=>lfe(e))}function Zge(t){return{before:t.inclusive,values:t.position}}function $ge(t){return{before:!t.inclusive,values:t.position}}function efe(t){let e=!!t.before,n=t.values||[];return new js(n,e)}function tfe(t){let e=!t.before,n=t.values||[];return new js(n,e)}function nfe(t){return yge[t]}function rfe(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function ife(t){return Bge[t]}function sfe(t){return Qge[t]}function ofe(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J();default:return J()}}function afe(t){switch(t){case"AND":return"and";case"OR":return"or";default:return J()}}function zu(t){return{fieldPath:t.canonicalString()}}function Xu(t){return jt.fromServerFormat(t.fieldPath)}function Afe(t){return{field:zu(t.field),direction:nfe(t.dir)}}function lfe(t){return new _l(Xu(t.field),rfe(t.direction))}function f3(t){return t instanceof ke?ufe(t):t instanceof Xe?cfe(t):J()}function cfe(t){let e=t.getFilters().map(n=>f3(n));return e.length===1?e[0]:{compositeFilter:{op:sfe(t.op),filters:e}}}function ufe(t){if(t.op==="=="){if(tW(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NAN"}};if(eW(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tW(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NOT_NAN"}};if(eW(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(t.field),op:ife(t.op),value:t.value}}}function hfe(t){switch(t.unaryFilter.op){case"IS_NAN":let e=Xu(t.unaryFilter.field);return ke.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=Xu(t.unaryFilter.field);return ke.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=Xu(t.unaryFilter.field);return ke.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=Xu(t.unaryFilter.field);return ke.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J();default:return J()}}function dfe(t){return ke.create(Xu(t.fieldFilter.field),ofe(t.fieldFilter.op),t.fieldFilter.value)}function gfe(t){return Xe.create(t.compositeFilter.filters.map(e=>g3(e)),afe(t.compositeFilter.op))}function ffe(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pfe(t){let e=t.fieldPaths||[];return new Kr(e.map(n=>jt.fromServerFormat(n)))}function p3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var lh=class t{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=Bn.EMPTY_BYTE_STRING,A=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=A}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var aB=class{constructor(e){this.remoteSerializer=e}};function Efe(t,e){let n;if(e.document)n=c3(t.remoteSerializer,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=Dl(e.noDocument.readTime);n=nn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else if(e.unknownDocument){let r=q.fromSegments(e.unknownDocument.path),i=Dl(e.unknownDocument.version);n=nn.newUnknownDocument(r,i)}else return J();return e.readTime&&n.setReadTime(mfe(e.readTime)),n}function dW(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:JB(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=Rge(t.remoteSerializer,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bl(e.version)};else if(e.isUnknownDocument())r.unknownDocument={path:n.path.toArray(),version:bl(e.version)};else return J();return r}function JB(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mfe(t){let e=new Tt(t[0],t[1]);return ne.fromTimestamp(e)}function bl(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dl(t){let e=new Tt(t.seconds,t.nanoseconds);return ne.fromTimestamp(e)}function Cfe(t,e,n){let r=n.baseMutations.map(s=>gp(t.remoteSerializer,s)),i=n.mutations.map(s=>gp(t.remoteSerializer,s));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}function gl(t,e){let n=(e.baseMutations||[]).map(s=>XT(t.remoteSerializer,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let A=e.mutations[s+1];o.updateTransforms=A.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>XT(t.remoteSerializer,s)),i=Tt.fromMillis(e.localWriteTimeMs);return new lp(e.batchId,i,n,r)}function Wf(t){let e=Dl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Dl(t.lastLimboFreeSnapshotVersion):ne.min(),r;return Ife(t.query)?r=qge(t.query):r=Hge(t.query),new lh(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Bn.fromBase64String(t.resumeToken))}function E3(t,e){let n=bl(e.snapshotVersion),r=bl(e.lastLimboFreeSnapshotVersion),i;nB(e.target)?i=u3(t.remoteSerializer,e.target):i=h3(t.remoteSerializer,e.target).queryTarget;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vl(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ife(t){return t.documents!==void 0}function yfe(t){return{id:t.bundleId,createTime:Dl(t.createTime),version:t.version}}function Bfe(t){return{bundleId:t.id,createTime:bl(zt(t.createTime)),version:t.version}}function Qfe(t){return{name:t.name,query:vN(t.bundledQuery),readTime:Dl(t.readTime)}}function wfe(t){return{name:t.name,readTime:bl(zt(t.readTime)),bundledQuery:t.bundledQuery}}function vN(t){let e=d3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rB(e,e.limit,"L"):e}function _fe(t){return{name:t.name,query:vN(t.bundledQuery),readTime:zt(t.readTime)}}function vfe(t){return{id:t.id,version:t.version,createTime:zt(t.createTime)}}function iT(t,e){return new cp(e.largestBatchId,XT(t.remoteSerializer,e.overlayMutation))}function Sfe(t,e,n){let[r,i,s]=m3(e,n.mutation.key);return{userId:e,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:gp(t.remoteSerializer,n.mutation)}}function m3(t,e){let n=e.path.lastSegment(),r=hr(e.path.popLast());return[t,r,n]}function bfe(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}function Dfe(t,e){let n=e?new ep(e.sequenceNumber,new Ri(Dl(e.readTime),new q(Ys(e.documentKey)),e.largestBatchId)):ep.empty(),r=t.fields.map(([i,s])=>new Zu(jt.fromServerFormat(i),s));return new CT(t.indexId,t.collectionGroup,r,n)}function gW(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:bl(r.readTime),documentKey:hr(r.documentKey.path),largestBatchId:r.largestBatchId}}var ZT=class{getBundleMetadata(e,n){return fW(e).get(n).next(r=>{if(r)return yfe(r)})}saveBundleMetadata(e,n){return fW(e).put(Bfe(n))}getNamedQuery(e,n){return pW(e).get(n).next(r=>{if(r)return Qfe(r)})}saveNamedQuery(e,n){return pW(e).put(wfe(n))}};function fW(t){return Qn(t,PB)}function pW(t){return Qn(t,VB)}var AB=class t{constructor(e,n){this.serializer=e,this.userId=n}static forUser(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Gf(e).get(m3(this.userId,n)).next(r=>r?iT(this.serializer,r):null)}getOverlays(e,n){let r=Js();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new cp(n,o);i.push(this.saveOverlay(e,a))}),Q.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(hr(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Gf(e).deleteAll(ST,a))}),Q.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Js(),s=hr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Gf(e).loadAll(ST,o).next(a=>{for(let A of a){let l=iT(this.serializer,A);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Js(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Gf(e).iterate({index:E4,range:a},(A,l,c)=>{let u=iT(this.serializer,l);s.size()<i||u.largestBatchId===o?(s.set(u.getKey(),u),o=u.largestBatchId):c.done()}).next(()=>s)}saveOverlay(e,n){return Gf(e).put(Sfe(this.serializer,this.userId,n))}};function Gf(t){return Qn(t,GB)}var Rfe=5,Tfe=10,kfe=13,EW=15,Nfe=20,Ffe=25,Mfe=30,xfe=37,Lfe=45,Ofe=50,Ufe=55,Pfe=60,Vfe=2,bo=class{constructor(){}writeIndexValue(e,n){this.writeIndexValueAux(e,n),n.writeInfinity()}writeIndexValueAux(e,n){if("nullValue"in e)this.writeValueTypeLabel(n,Rfe);else if("booleanValue"in e)this.writeValueTypeLabel(n,Tfe),n.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(n,EW),n.writeNumber(Ut(e.integerValue));else if("doubleValue"in e){let r=Ut(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(n,kfe):(this.writeValueTypeLabel(n,EW),ip(r)?n.writeNumber(0):n.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(n,Nfe),typeof r=="string"?n.writeString(r):(n.writeString(`${r.seconds||""}`),n.writeNumber(r.nanos||0))}else if("stringValue"in e)this.writeIndexString(e.stringValue,n),this.writeTruncationMarker(n);else if("bytesValue"in e)this.writeValueTypeLabel(n,Mfe),n.writeBytes($a(e.bytesValue)),this.writeTruncationMarker(n);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(n,Lfe),n.writeNumber(r.latitude||0),n.writeNumber(r.longitude||0)}else"mapValue"in e?D4(e)?this.writeValueTypeLabel(n,Number.MAX_SAFE_INTEGER):(this.writeIndexMap(e.mapValue,n),this.writeTruncationMarker(n)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,n),this.writeTruncationMarker(n)):J()}writeIndexString(e,n){this.writeValueTypeLabel(n,Ffe),this.writeUnlabeledIndexString(e,n)}writeUnlabeledIndexString(e,n){n.writeString(e)}writeIndexMap(e,n){let r=e.fields||{};this.writeValueTypeLabel(n,Ufe);for(let i of Object.keys(r))this.writeIndexString(i,n),this.writeIndexValueAux(r[i],n)}writeIndexArray(e,n){let r=e.values||[];this.writeValueTypeLabel(n,Ofe);for(let i of r)this.writeIndexValueAux(i,n)}writeIndexEntityRef(e,n){this.writeValueTypeLabel(n,xfe),q.fromName(e).path.forEach(i=>{this.writeValueTypeLabel(n,Pfe),this.writeUnlabeledIndexString(i,n)})}writeValueTypeLabel(e,n){e.writeNumber(n)}writeTruncationMarker(e){e.writeNumber(Vfe)}};bo.INSTANCE=new bo;var mW="\uD800",CW="\uDBFF",Vu=0,IW=255,yW=1,Gu=255,BW=255,QW=0,Gfe=64,qfe=8,Hfe=1024;function Yfe(t){let e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}function Jfe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t=t<<4),t>>6||(e+=2,t=t<<2),t>>7||(e+=1),e}function Wfe(t){let e=0;for(let n=0;n<8;++n){let r=Jfe(t[n]&255);if(e+=r,r!==8)break}return e}function wW(t){let e=Gfe-Wfe(t);return Math.ceil(e/qfe)}var $T=class{constructor(){this.buffer=new Uint8Array(Hfe),this.position=0}writeBytesAscending(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.writeByteAscending(r.value),r=n.next();this.writeSeparatorAscending()}writeBytesDescending(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.writeByteDescending(r.value),r=n.next();this.writeSeparatorDescending()}writeUtf8Ascending(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.writeByteAscending(r);else if(r<2048)this.writeByteAscending(960|r>>>6),this.writeByteAscending(128|63&r);else if(n<mW||CW<n)this.writeByteAscending(480|r>>>12),this.writeByteAscending(128|63&r>>>6),this.writeByteAscending(128|63&r);else{let i=n.codePointAt(0);this.writeByteAscending(240|i>>>18),this.writeByteAscending(128|63&i>>>12),this.writeByteAscending(128|63&i>>>6),this.writeByteAscending(128|63&i)}}this.writeSeparatorAscending()}writeUtf8Descending(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.writeByteDescending(r);else if(r<2048)this.writeByteDescending(960|r>>>6),this.writeByteDescending(128|63&r);else if(n<mW||CW<n)this.writeByteDescending(480|r>>>12),this.writeByteDescending(128|63&r>>>6),this.writeByteDescending(128|63&r);else{let i=n.codePointAt(0);this.writeByteDescending(240|i>>>18),this.writeByteDescending(128|63&i>>>12),this.writeByteDescending(128|63&i>>>6),this.writeByteDescending(128|63&i)}}this.writeSeparatorDescending()}writeNumberAscending(e){let n=this.toOrderedBits(e),r=wW(n);this.ensureAvailable(1+r),this.buffer[this.position++]=r&255;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=n[i]&255}writeNumberDescending(e){let n=this.toOrderedBits(e),r=wW(n);this.ensureAvailable(1+r),this.buffer[this.position++]=~(r&255);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(n[i]&255)}writeInfinityAscending(){this.writeEscapedByteAscending(Gu),this.writeEscapedByteAscending(BW)}writeInfinityDescending(){this.writeEscapedByteDescending(Gu),this.writeEscapedByteDescending(BW)}reset(){this.position=0}seed(e){this.ensureAvailable(e.length),this.buffer.set(e,this.position),this.position+=e.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(e){let n=Yfe(e),r=(n[0]&128)!==0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}writeByteAscending(e){let n=e&255;n===Vu?(this.writeEscapedByteAscending(Vu),this.writeEscapedByteAscending(IW)):n===Gu?(this.writeEscapedByteAscending(Gu),this.writeEscapedByteAscending(QW)):this.writeEscapedByteAscending(n)}writeByteDescending(e){let n=e&255;n===Vu?(this.writeEscapedByteDescending(Vu),this.writeEscapedByteDescending(IW)):n===Gu?(this.writeEscapedByteDescending(Gu),this.writeEscapedByteDescending(QW)):this.writeEscapedByteDescending(e)}writeSeparatorAscending(){this.writeEscapedByteAscending(Vu),this.writeEscapedByteAscending(yW)}writeSeparatorDescending(){this.writeEscapedByteDescending(Vu),this.writeEscapedByteDescending(yW)}writeEscapedByteAscending(e){this.ensureAvailable(1),this.buffer[this.position++]=e}writeEscapedByteDescending(e){this.ensureAvailable(1),this.buffer[this.position++]=~e}ensureAvailable(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=this.buffer.length*2;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},ek=class{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesAscending(e)}writeString(e){this.orderedCode.writeUtf8Ascending(e)}writeNumber(e){this.orderedCode.writeNumberAscending(e)}writeInfinity(){this.orderedCode.writeInfinityAscending()}},tk=class{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesDescending(e)}writeString(e){this.orderedCode.writeUtf8Descending(e)}writeNumber(e){this.orderedCode.writeNumberDescending(e)}writeInfinity(){this.orderedCode.writeInfinityDescending()}},fl=class{constructor(){this.orderedCode=new $T,this.ascending=new ek(this.orderedCode),this.descending=new tk(this.orderedCode)}seed(e){this.orderedCode.seed(e)}forKind(e){return e===0?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}};var pl=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}successor(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Ha(t,e){let n=t.indexId-e.indexId;return n!==0||(n=_W(t.arrayValue,e.arrayValue),n!==0)||(n=_W(t.directionalValue,e.directionalValue),n!==0)?n:q.comparator(t.documentKey,e.documentKey)}function _W(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var lB=class{constructor(e){this.inequalityFilters=new it((n,r)=>jt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.orderBys=e.orderBy,this.equalityFilters=[];for(let n of e.filters){let r=n;r.isInequality()?this.inequalityFilters=this.inequalityFilters.add(r):this.equalityFilters.push(r)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex(e){if(Z(e.collectionGroup===this.collectionId),this.hasMultipleInequality)return!1;let n=hN(e);if(n!==void 0&&!this.hasMatchingEqualityFilter(n))return!1;let r=Bl(e),i=new Set,s=0,o=0;for(;s<r.length&&this.hasMatchingEqualityFilter(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.inequalityFilters.size>0){let a=this.inequalityFilters.getIterator().getNext();if(!i.has(a.field.canonicalString())){let A=r[s];if(!this.matchesFilter(a,A)||!this.matchesOrderBy(this.orderBys[o++],A))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[o++],a))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let e=new it(jt.comparator),n=[];for(let r of this.equalityFilters){if(r.field.isKeyField())continue;if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Zu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Zu(r.field,0))}}for(let r of this.orderBys)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Zu(r.field,r.dir==="asc"?0:1)));return new CT(CT.UNKNOWN_ID,this.collectionId,n,ep.empty())}hasMatchingEqualityFilter(e){for(let n of this.equalityFilters)if(this.matchesFilter(n,e))return!0;return!1}matchesFilter(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}matchesOrderBy(e,n){return e.field.isEqual(n.fieldPath)?n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc":!1}};function C3(t){var e,n;if(Z(t instanceof ke||t instanceof Xe),t instanceof ke)if(t instanceof tB){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ke.create(t.field,"==",s)))||[];return Xe.create(i,"or")}else return t;let r=t.filters.map(i=>C3(i));return Xe.create(r,t.op)}function zfe(t){if(t.getFilters().length===0)return[];let e=nk(C3(t));return Z(I3(e)),SN(e)||bN(e)?[e]:e.getFilters()}function SN(t){return t instanceof ke}function bN(t){return t instanceof Xe&&yN(t)}function I3(t){return SN(t)||bN(t)||jfe(t)}function jfe(t){if(t instanceof Xe&&TT(t)){for(let e of t.getFilters())if(!SN(e)&&!bN(e))return!1;return!0}return!1}function nk(t){if(Z(t instanceof ke||t instanceof Xe),t instanceof ke)return t;if(t.filters.length===1)return nk(t.filters[0]);let e=t.filters.map(r=>nk(r)),n=Xe.create(e,t.op);return n=cB(n),I3(n)?n:(Z(n instanceof Xe),Z(ih(n)),Z(n.filters.length>1),n.filters.reduce((r,i)=>DN(r,i)))}function DN(t,e){Z(t instanceof ke||t instanceof Xe),Z(e instanceof ke||e instanceof Xe);let n;return t instanceof ke?e instanceof ke?n=Kfe(t,e):n=vW(t,e):e instanceof ke?n=vW(e,t):n=Xfe(t,e),cB(n)}function Kfe(t,e){return Xe.create([t,e],"and")}function Xfe(t,e){if(Z(t.filters.length>0&&e.filters.length>0),ih(t)&&ih(e))return F4(t,e.getFilters());let n=TT(t)?t:e,r=TT(t)?e:t,i=n.filters.map(s=>DN(s,r));return Xe.create(i,"or")}function vW(t,e){if(ih(e))return F4(e,t.getFilters());{let n=e.filters.map(r=>DN(t,r));return Xe.create(n,"or")}}function cB(t){if(Z(t instanceof ke||t instanceof Xe),t instanceof ke)return t;let e=t.getFilters();if(e.length===1)return cB(e[0]);if(k4(t))return t;let n=e.map(i=>cB(i)),r=[];return n.forEach(i=>{i instanceof ke?r.push(i):i instanceof Xe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Xe.create(r,t.op)}var rk=class{constructor(){this.collectionParentIndex=new fp}addToCollectionParentIndex(e,n){return this.collectionParentIndex.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.collectionParentIndex.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Ri.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}},fp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new it(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(xe.comparator)).toArray()}};var SW="IndexedDbIndexManager",Ly=new Uint8Array(0),ik=class{constructor(e,n){this.databaseId=n,this.collectionParentsCache=new fp,this.targetToDnfSubTargets=new Ks(r=>vl(r),(r,i)=>Dp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.collectionParentsCache.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.collectionParentsCache.add(n)});let s={collectionId:r,parent:hr(i)};return bW(e).put(s)}return Q.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[i4(n),""],!1,!0);return bW(e).loadAll(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Ys(o.parent))}return r})}addFieldIndex(e,n){let r=qf(e),i=bfe(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=Hu(e);return s.next(a=>{o.put(gW(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}else return s.next()}deleteFieldIndex(e,n){let r=qf(e),i=Hu(e),s=qu(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=qf(e),r=qu(e),i=Hu(e);return n.deleteAll().next(()=>r.deleteAll()).next(()=>i.deleteAll())}createTargetIndexes(e,n){return Q.forEach(this.getSubTargets(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new lB(r).buildTargetIndex();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=qu(e),i=!0,s=new Map;return Q.forEach(this.getSubTargets(n),o=>this.getFieldIndex(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ce(),a=[];return Q.forEach(s,(A,l)=>{F(SW,`Using index ${Ahe(A)} to execute ${vl(n)}`);let c=Tde(l,A),u=kde(l,A),h=Nde(l,A),d=Fde(l,A),g=this.encodeBound(A,l,h),f=this.encodeBound(A,l,d),m=this.encodeValues(A,l,u),y=this.generateIndexRanges(A.indexId,c,g,h.inclusive,f,d.inclusive,m);return Q.forEach(y,I=>r.loadFirst(I,n.limit).next(w=>{w.forEach(_=>{let S=q.fromSegments(_.documentKey);o.has(S)||(o=o.add(S),a.push(S))})}))}).next(()=>a)}else return Q.resolve(null)})}getSubTargets(e){let n=this.targetToDnfSubTargets.get(e);return n||(e.filters.length===0?n=[e]:n=zfe(Xe.create(e.filters,"and")).map(i=>PT(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.targetToDnfSubTargets.set(e,n),n)}generateIndexRanges(e,n,r,i,s,o,a){let A=(n!=null?n.length:1)*Math.max(r.length,s.length),l=A/(n!=null?n.length:1),c=[];for(let u=0;u<A;++u){let h=n?this.encodeSingleElement(n[u/l]):Ly,d=this.generateLowerBound(e,h,r[u%l],i),g=this.generateUpperBound(e,h,s[u%l],o),f=a.map(m=>this.generateLowerBound(e,h,m,!0));c.push(...this.createRange(d,g,f))}return c}generateLowerBound(e,n,r,i){let s=new pl(e,q.empty(),n,r);return i?s:s.successor()}generateUpperBound(e,n,r,i){let s=new pl(e,q.empty(),n,r);return i?s.successor():s}getFieldIndex(e,n){let r=new lB(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.servedByIndex(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.getSubTargets(n);return Q.forEach(i,s=>this.getFieldIndex(e,s).next(o=>{o?r!==0&&o.fields.length<Mde(s)&&(r=1):r=0})).next(()=>xde(n)&&i.length>1&&r===2?1:r)}encodeDirectionalElements(e,n){let r=new fl;for(let i of Bl(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.forKind(i.kind);bo.INSTANCE.writeIndexValue(s,o)}return r.encodedBytes()}encodeSingleElement(e){let n=new fl;return bo.INSTANCE.writeIndexValue(e,n.forKind(0)),n.encodedBytes()}encodeDirectionalKey(e,n){let r=new fl;return bo.INSTANCE.writeIndexValue(wl(this.databaseId,n),r.forKind(ahe(e))),r.encodedBytes()}encodeValues(e,n,r){if(r===null)return[];let i=[];i.push(new fl);let s=0;for(let o of Bl(e)){let a=r[s++];for(let A of i)if(this.isInFilter(n,o.fieldPath)&&op(a))i=this.expandIndexValues(i,o,a);else{let l=A.forKind(o.kind);bo.INSTANCE.writeIndexValue(a,l)}}return this.getEncodedBytes(i)}encodeBound(e,n,r){return this.encodeValues(e,n,r.position)}getEncodedBytes(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].encodedBytes();return n}expandIndexValues(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let A=new fl;A.seed(a.encodedBytes()),bo.INSTANCE.writeIndexValue(o,A.forKind(n.kind)),s.push(A)}return s}isInFilter(e,n){return!!e.filters.find(r=>r instanceof ke&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=qf(e),i=Hu(e);return(n?r.loadAll(vT,IDBKeyRange.bound(n,n)):r.loadAll()).next(s=>{let o=[];return Q.forEach(s,a=>i.get([a.indexId,this.uid]).next(A=>{o.push(Dfe(a,A))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:me(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=qf(e),s=Hu(e);return this.getNextSequenceNumber(e).next(o=>i.loadAll(vT,IDBKeyRange.bound(n,n)).next(a=>Q.forEach(a,A=>s.put(gW(A.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return Q.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?Q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(A=>(r.set(i.collectionGroup,A),Q.forEach(A,l=>this.getExistingIndexEntries(e,i,l).next(c=>{let u=this.computeIndexEntries(s,l);return c.isEqual(u)?Q.resolve():this.updateEntries(e,s,l,c,u)}))))})}addIndexEntry(e,n,r,i){return qu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(r,n.key),documentKey:n.key.path.toArray()})}deleteIndexEntry(e,n,r,i){return qu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.encodeDirectionalKey(r,n.key),n.key.path.toArray()])}getExistingIndexEntries(e,n,r){let i=qu(e),s=new it(Ha);return i.iterate({index:p4,range:IDBKeyRange.only([r.indexId,this.uid,this.encodeDirectionalKey(r,n)])},(o,a)=>{s=s.add(new pl(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}computeIndexEntries(e,n){let r=new it(Ha),i=this.encodeDirectionalElements(n,e);if(i==null)return r;let s=hN(n);if(s!=null){let o=e.data.field(s.fieldPath);if(op(o))for(let a of o.arrayValue.values||[])r=r.add(new pl(n.indexId,e.key,this.encodeSingleElement(a),i))}else r=r.add(new pl(n.indexId,e.key,Ly,i));return r}updateEntries(e,n,r,i,s){F(SW,"Updating index entries for document '%s'",n.key);let o=[];return Yhe(i,s,Ha,a=>{o.push(this.addIndexEntry(e,n,r,a))},a=>{o.push(this.deleteIndexEntry(e,n,r,a))}),Q.waitFor(o)}getNextSequenceNumber(e){let n=1;return Hu(e).iterate({index:f4,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,o)=>{o.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ha(o,a)).filter((o,a,A)=>!a||Ha(o,A[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Ha(o,e),A=Ha(o,n);if(a===0)i[0]=e.successor();else if(a>0&&A<0)i.push(o),i.push(o.successor());else if(A>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.isRangeMatchable(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Ly,[]],A=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Ly,[]];s.push(IDBKeyRange.bound(a,A))}return s}isRangeMatchable(e,n){return Ha(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(DW)}getMinOffset(e,n){return Q.mapArray(this.getSubTargets(n),r=>this.getFieldIndex(e,r).next(i=>i||J())).next(DW)}};function bW(t){return Qn(t,tp)}function qu(t){return Qn(t,mN)}function qf(t){return Qn(t,pN)}function Hu(t){return Qn(t,EN)}function DW(t){Z(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;dN(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ri(e.readTime,e.documentKey,n)}function y3(t,e,n){let r=t.store($i),i=t.store(Ch),s=[],o=IDBKeyRange.only(n.batchId),a=0,A=r.iterate({range:o},(c,u,h)=>(a++,h.delete()));s.push(A.next(()=>{Z(a===1)}));let l=[];for(let c of n.mutations){let u=h4(e,c.key.path,n.batchId);s.push(i.delete(u)),l.push(c.key)}return Q.waitFor(s).next(()=>l)}function uB(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else if(t.noDocument)e=t.noDocument;else throw J();return JSON.stringify(e).length}var hB=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.documentKeysByBatchId={}}static forUser(e,n,r,i){Z(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).iterate({index:El,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=ju(e),o=Ya(e);return o.add({}).next(a=>{Z(typeof a=="number");let A=new lp(a,n,r,i),l=Cfe(this.serializer,this.userId,A),c=[],u=new it((h,d)=>me(h.canonicalString(),d.canonicalString()));for(let h of i){let d=h4(this.userId,h.key.path,a);u=u.add(h.key.path.popLast()),c.push(o.put(l)),c.push(s.put(d,phe))}return u.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.documentKeysByBatchId[a]=A.keys()}),Q.waitFor(c).next(()=>A)})}lookupMutationBatch(e,n){return Ya(e).get(n).next(r=>r?(Z(r.userId===this.userId),gl(this.serializer,r)):null)}lookupMutationKeys(e,n){return this.documentKeysByBatchId[n]?Q.resolve(this.documentKeysByBatchId[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.documentKeysByBatchId[n]=i,i}else return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Ya(e).iterate({index:El,range:i},(o,a,A)=>{a.userId===this.userId&&(Z(a.batchId>=r),s=gl(this.serializer,a)),A.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Ka;return Ya(e).iterate({index:El,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,Ka],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).loadAll(El,n).next(r=>r.map(i=>gl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Vy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ju(e).iterate({range:i},(o,a,A)=>{let[l,c,u]=o,h=Ys(c);if(l!==this.userId||!n.path.isEqual(h)){A.done();return}return Ya(e).get(u).next(d=>{if(!d)throw J();Z(d.userId===this.userId),s.push(gl(this.serializer,d))})}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(me),i=[];return n.forEach(s=>{let o=Vy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),A=ju(e).iterate({range:a},(l,c,u)=>{let[h,d,g]=l,f=Ys(d);if(h!==this.userId||!s.path.isEqual(f)){u.done();return}r=r.add(g)});i.push(A)}),Q.waitFor(i).next(()=>this.lookupMutationBatches(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=Vy(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new it(me);return ju(e).iterate({range:o},(A,l,c)=>{let[u,h,d]=A,g=Ys(h);if(u!==this.userId||!r.isPrefixOf(g)){c.done();return}g.length===i&&(a=a.add(d))}).next(()=>this.lookupMutationBatches(e,a))}lookupMutationBatches(e,n){let r=[],i=[];return n.forEach(s=>{i.push(Ya(e).get(s).next(o=>{if(o===null)throw J();Z(o.userId===this.userId),r.push(gl(this.serializer,o))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return y3(e.simpleDbTransaction,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.removeCachedMutationKeys(n.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}removeCachedMutationKeys(e){delete this.documentKeysByBatchId[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Q.resolve();let r=IDBKeyRange.lowerBound(fhe(this.userId)),i=[];return ju(e).iterate({range:r},(s,o,a)=>{if(s[0]!==this.userId){a.done();return}else{let l=Ys(s[1]);i.push(l)}}).next(()=>{Z(i.length===0)})})}containsKey(e,n){return B3(e,this.userId,n)}getMutationQueueMetadata(e){return Q3(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ka,lastStreamToken:""})}};function B3(t,e,n){let r=Vy(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return ju(t).iterate({range:s,keysOnly:!0},(a,A,l)=>{let[c,u,h]=a;c===e&&u===i&&(o=!0),l.done()}).next(()=>o)}function Zfe(t,e){let n=!1;return Q3(t).iterateSerial(r=>B3(t,r,e).next(i=>(i&&(n=!0),Q.resolve(!i)))).next(()=>n)}function Ya(t){return Qn(t,$i)}function ju(t){return Qn(t,Ch)}function Q3(t){return Qn(t,vp)}var sT=2,ch=class t{constructor(e){this.lastId=e}next(){return this.lastId+=sT,this.lastId}static forTargetCache(){return new t(2-sT)}static forSyncEngine(){return new t(1-sT)}};var sk=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.retrieveMetadata(e).next(n=>{let r=new ch(n.highestTargetId);return n.highestTargetId=r.next(),this.saveMetadata(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.retrieveMetadata(e).next(n=>ne.fromTimestamp(new Tt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.retrieveMetadata(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.retrieveMetadata(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.saveMetadata(e,i)))}addTargetData(e,n){return this.saveTargetData(e,n).next(()=>this.retrieveMetadata(e).next(r=>(r.targetCount+=1,this.updateMetadataFromTargetData(n,r),this.saveMetadata(e,r))))}updateTargetData(e,n){return this.saveTargetData(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Yu(e).delete(n.targetId)).next(()=>this.retrieveMetadata(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.saveMetadata(e,r)))}removeTargets(e,n,r){let i=0,s=[];return Yu(e).iterate((o,a)=>{let A=Wf(a);A.sequenceNumber<=n&&r.get(A.targetId)===null&&(i++,s.push(this.removeTargetData(e,A)))}).next(()=>Q.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Yu(e).iterate((r,i)=>{let s=Wf(i);n(s)})}retrieveMetadata(e){return RW(e).get(Zy).next(n=>(Z(n!==null),n))}saveMetadata(e,n){return RW(e).put(Zy,n)}saveTargetData(e,n){return Yu(e).put(E3(this.serializer,n))}updateMetadataFromTargetData(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.retrieveMetadata(e).next(n=>n.targetCount)}getTargetData(e,n){let r=vl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Yu(e).iterate({range:i,index:g4},(o,a,A)=>{let l=Wf(a);Dp(n,l.target)&&(s=l,A.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Wa(e);return n.forEach(o=>{let a=hr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Q.waitFor(i)}removeMatchingKeys(e,n,r){let i=Wa(e);return Q.forEach(n,s=>{let o=hr(s.path);return Q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Wa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Wa(e),s=Ce();return i.iterate({range:r,keysOnly:!0},(o,a,A)=>{let l=Ys(o[1]),c=new q(l);s=s.add(c)}).next(()=>s)}containsKey(e,n){let r=hr(n.path),i=IDBKeyRange.bound([r],[i4(r)],!1,!0),s=0;return Wa(e).iterate({index:fN,keysOnly:!0,range:i},([o,a],A,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}getTargetDataForTarget(e,n){return Yu(e).get(n).next(r=>r?Wf(r):null)}};function Yu(t){return Qn(t,Ih)}function RW(t){return Qn(t,Ml)}function Wa(t){return Qn(t,yh)}var TW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kp=-1,w3=40*1024*1024,bi=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};bi.DEFAULT_COLLECTION_PERCENTILE=10;bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3;bi.DEFAULT=new bi(w3,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);bi.DISABLED=new bi(kp,0,0);var kW="LruGarbageCollector",NW=1*1024*1024,$fe=1*60*1e3,epe=5*60*1e3;function FW([t,e],[n,r]){let i=me(t,n);return i===0?me(e,r):i}var ok=class{constructor(e){this.maxElements=e,this.buffer=new it(FW),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let n=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();FW(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},ak=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==kp&&this.scheduleGC($fe)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return this.gcTask!==null}scheduleGC(e){F(kW,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.gcTask=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){lA(n)?F(kW,"Ignoring IndexedDB error during garbage collection: ",n):yield AA(n)}yield this.scheduleGC(epe)}))}},Ak=class{constructor(e,n){this.delegate=e,this.params=n}calculateTargetCount(e,n){return this.delegate.getSequenceNumberCount(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(jr.INVALID);let r=new ok(n);return this.delegate.forEachTarget(e,i=>r.addElement(i.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,i=>r.addElement(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.delegate.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.delegate.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===kp?(F("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(TW)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TW):this.runGarbageCollection(e,n))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,n){let r,i,s,o,a,A,l,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),i=this.params.maximumSequenceNumbersToCollect):i=u,o=Date.now(),this.nthSequenceNumber(e,i))).next(u=>(r=u,a=Date.now(),this.removeTargets(e,r,n))).next(u=>(s=u,A=Date.now(),this.removeOrphanedDocuments(e,r))).next(u=>{if(l=Date.now(),Ju()<=hi.DEBUG){let h=`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in ${a-o}ms
	Removed ${s} targets in ${A-a}ms
	Removed ${u} documents in ${l-A}ms
Total Duration: ${l-c}ms`;F("LruGarbageCollector",h)}return Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:u})})}};function tpe(t,e){return new Ak(t,e)}var lk=class{constructor(e,n){this.db=e,this.garbageCollector=tpe(this,n)}getSequenceNumberCount(e){let n=this.orphanedDocumentCount(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}orphanedDocumentCount(e){let n=0;return this.forEachOrphanedDocumentSequenceNumber(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}forEachOrphanedDocumentSequenceNumber(e,n){return this.forEachOrphanedDocument(e,(r,i)=>n(i))}addReference(e,n,r){return Oy(e,r)}removeReference(e,n,r){return Oy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Oy(e,n)}isPinned(e,n){return Zfe(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],o=0;return this.forEachOrphanedDocument(e,(A,l)=>{if(l<=n){let c=this.isPinned(e,A).next(u=>{if(!u)return o++,i.getEntry(e,A).next(()=>(i.removeEntry(A,ne.min()),Wa(e).delete(npe(A))))});s.push(c)}}).next(()=>Q.waitFor(s)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Oy(e,n)}forEachOrphanedDocument(e,n){let r=Wa(e),i=jr.INVALID,s;return r.iterate({index:fN},([o,a],{path:A,sequenceNumber:l})=>{o===0?(i!==jr.INVALID&&n(new q(Ys(s)),i),i=l,s=A):i=jr.INVALID}).next(()=>{i!==jr.INVALID&&n(new q(Ys(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function npe(t){return[0,hr(t.path)]}function rpe(t,e){return{targetId:0,path:hr(t.path),sequenceNumber:e}}function Oy(t,e){return Wa(t).put(rpe(e,t.currentSequenceNumber))}var dB=class{constructor(){this.changes=new Ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ck=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ul(e).put(r)}removeEntry(e,n,r){return ul(e).delete(ipe(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.setMetadata(e,r)))}getEntry(e,n){let r=nn.newInvalidDocument(n);return ul(e).iterate({index:Gy,range:IDBKeyRange.only(Hf(n))},(i,s)=>{r=this.maybeDecodeDocument(n,s)}).next(()=>r)}getSizedEntry(e,n){let r={size:0,document:nn.newInvalidDocument(n)};return ul(e).iterate({index:Gy,range:IDBKeyRange.only(Hf(n))},(i,s)=>{r={document:this.maybeDecodeDocument(n,s),size:uB(s)}}).next(()=>r)}getEntries(e,n){let r=Sr();return this.forEachDbEntry(e,n,(i,s)=>{let o=this.maybeDecodeDocument(i,s);r=r.insert(i,o)}).next(()=>r)}getSizedEntries(e,n){let r=Sr(),i=new ft(q.comparator);return this.forEachDbEntry(e,n,(s,o)=>{let a=this.maybeDecodeDocument(s,o);r=r.insert(s,a),i=i.insert(s,uB(o))}).next(()=>({documents:r,sizeMap:i}))}forEachDbEntry(e,n,r){if(n.isEmpty())return Q.resolve();let i=new it(LW);n.forEach(A=>i=i.add(A));let s=IDBKeyRange.bound(Hf(i.first()),Hf(i.last())),o=i.getIterator(),a=o.getNext();return ul(e).iterate({index:Gy,range:s},(A,l,c)=>{let u=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&LW(a,u)<0;)r(a,null),a=o.getNext();a&&a.isEqual(u)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?c.skip(Hf(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),JB(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],A=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ul(e).loadAll(IDBKeyRange.bound(a,A,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let c=Sr();for(let u of l){let h=this.maybeDecodeDocument(q.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(Tp(n,h)||i.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=Sr(),o=xW(n,r),a=xW(n,Ri.max());return ul(e).iterate({index:d4,range:IDBKeyRange.bound(o,a,!0)},(A,l,c)=>{let u=this.maybeDecodeDocument(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(u.key,u),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new uk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return MW(e).get(_T).next(n=>(Z(!!n),n))}setMetadata(e,n){return MW(e).put(_T,n)}maybeDecodeDocument(e,n){if(n){let r=Efe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return nn.newInvalidDocument(e)}};function _3(t){return new ck(t)}var uk=class extends dB{constructor(e,n){super(),this.documentCache=e,this.trackRemovals=n,this.documentStates=new Ks(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new it((s,o)=>me(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.documentStates.get(s);if(n.push(this.documentCache.removeEntry(e,s,a.readTime)),o.isValidDocument()){let A=dW(this.documentCache.serializer,o);i=i.add(s.path.popLast());let l=uB(A);r+=l-a.size,n.push(this.documentCache.addEntry(e,s,A))}else if(r-=a.size,this.trackRemovals){let A=dW(this.documentCache.serializer,o.convertToNoDocument(ne.min()));n.push(this.documentCache.addEntry(e,s,A))}}),i.forEach(s=>{n.push(this.documentCache.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.documentCache.updateMetadata(e,r)),Q.waitFor(n)}getFromCache(e,n){return this.documentCache.getSizedEntry(e,n).next(r=>(this.documentStates.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.documentCache.getSizedEntries(e,n).next(({documents:r,sizeMap:i})=>(i.forEach((s,o)=>{this.documentStates.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function MW(t){return Qn(t,Sp)}function ul(t){return Qn(t,UB)}function Hf(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ipe(t,e){let n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],JB(e),n[n.length-1]]}function xW(t,e){let n=e.documentKey.path.toArray();return[t,JB(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function LW(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=me(n[s],r[s]),i)return i;return i=me(n.length,r.length),i||(i=me(n[n.length-2],r[r.length-2]),i)?i:me(n[n.length-1],r[r.length-1])}var spe=15;var hk=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var gB=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xf(r.mutation,i,Kr.empty(),Tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){let i=Js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Jf();return s.forEach((a,A)=>{o=o.insert(a,A.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Sr(),o=ap(),a=Xde();return n.forEach((A,l)=>{let c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof ns)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),Xf(c.mutation,l,c.mutation.getFieldMask(),Tt.now())):o.set(l.key,Kr.empty())}),this.recalculateAndSaveOverlays(e,s).next(A=>(A.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var u;return a.set(l,new hk(c,(u=o.get(l))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ap(),i=new ft((o,a)=>o-a),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(A=>{let l=n.get(A);if(l===null)return;let c=r.get(A)||Kr.empty();c=a.applyToLocalView(l,c),r.set(A,c);let u=(i.get(a.batchId)||Ce()).add(A);i=i.insert(a.batchId,u)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let A=a.getNext(),l=A.key,c=A.value,u=Y4();c.forEach(h=>{if(!s.has(h)){let d=$4(n.get(h),r.get(h));d!==null&&u.set(h,d),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,u))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return Pde(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(Js()),a=th,A=s;return o.next(l=>Q.forEach(l,(c,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),s.get(c)?Q.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{A=A.insert(c,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,A,l,Ce())).next(c=>({batchId:a,changes:H4(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Jf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Jf();return this.indexManager.getCollectionParents(e,s).next(a=>Q.forEach(a,A=>{let l=Lde(n,A.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(c=>{c.forEach((u,h)=>{o=o.insert(u,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((A,l)=>{let c=l.getKey();o.get(c)===null&&(o=o.insert(c,nn.newInvalidDocument(c)))});let a=Jf();return o.forEach((A,l)=>{let c=s.get(A);c!==void 0&&Xf(c.mutation,l,Kr.empty(),Tt.now()),Tp(n,l)&&(a=a.insert(A,l))}),a})}};var dk=class{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,n){return Q.resolve(this.bundles.get(n))}saveBundleMetadata(e,n){return this.bundles.set(n.id,vfe(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.namedQueries.get(n))}saveNamedQuery(e,n){return this.namedQueries.set(n.name,_fe(n)),Q.resolve()}};var gk=class{constructor(){this.overlays=new ft(q.comparator),this.overlayByBatchId=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Js();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.saveOverlay(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.overlayByBatchId.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.overlayByBatchId.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){let i=Js(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ft((l,c)=>l-c),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Js(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}let a=Js(),A=s.getIterator();for(;A.hasNext()&&(A.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return Q.resolve(a)}saveOverlay(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.overlayByBatchId.get(i.largestBatchId).delete(r.key);this.overlayByBatchId.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cp(n,r));let s=this.overlayByBatchId.get(n);s===void 0&&(s=Ce(),this.overlayByBatchId.set(n,s)),this.overlayByBatchId.set(n,s.add(r.key))}};var pp=class{constructor(){this.refsByKey=new it(tn.compareByKey),this.refsByTarget=new it(tn.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,n){let r=new tn(e,n);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.removeRef(new tn(e,n))}removeReferences(e,n){e.forEach(r=>this.removeReference(r,n))}removeReferencesForId(e){let n=new q(new xe([])),r=new tn(n,e),i=new tn(n,e+1),s=[];return this.refsByTarget.forEachInRange([r,i],o=>{this.removeRef(o),s.push(o.key)}),s}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let n=new q(new xe([])),r=new tn(n,e),i=new tn(n,e+1),s=Ce();return this.refsByTarget.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new tn(e,0),r=this.refsByKey.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},tn=class{constructor(e,n){this.key=e,this.targetOrBatchId=n}static compareByKey(e,n){return q.comparator(e.key,n.key)||me(e.targetOrBatchId,n.targetOrBatchId)}static compareByTargetId(e,n){return me(e.targetOrBatchId,n.targetOrBatchId)||q.comparator(e.key,n.key)}};var fk=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new it(tn.compareByKey)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lp(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new tn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.findMutationBatch(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.indexOfBatchId(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Ka:this.nextBatchId-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),s=[];return this.batchesByDocumentKey.forEachInRange([r,i],o=>{let a=this.findMutationBatch(o.targetOrBatchId);s.push(a)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(me);return n.forEach(i=>{let s=new tn(i,0),o=new tn(i,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([s,o],a=>{r=r.add(a.targetOrBatchId)})}),Q.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new tn(new q(s),0),a=new it(me);return this.batchesByDocumentKey.forEachWhile(A=>{let l=A.key.path;return r.isPrefixOf(l)?(l.length===i&&(a=a.add(A.targetOrBatchId)),!0):!1},o),Q.resolve(this.findMutationBatches(a))}findMutationBatches(e){let n=[];return e.forEach(r=>{let i=this.findMutationBatch(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){let r=this.indexOfExistingBatchId(n.batchId,"removed");Z(r===0),this.mutationQueue.shift();let i=this.batchesByDocumentKey;return Q.forEach(n.mutations,s=>{let o=new tn(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.batchesByDocumentKey=i})}removeCachedMutationKeys(e){}containsKey(e,n){let r=new tn(n,0),i=this.batchesByDocumentKey.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}indexOfExistingBatchId(e,n){return this.indexOfBatchId(e)}indexOfBatchId(e){if(this.mutationQueue.length===0)return 0;let n=this.mutationQueue[0].batchId;return e-n}findMutationBatch(e){let n=this.indexOfBatchId(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};function ope(){return new ft(q.comparator)}var pk=class{constructor(e){this.sizer=e,this.docs=ope(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.sizer(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Sr(),o=n.path,a=new q(o.child("")),A=this.docs.getIteratorFrom(a);for(;A.hasNext();){let{key:l,value:{document:c}}=A.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||dN(o4(c),r)<=0||!i.has(c.key)&&!Tp(n,c)||(s=s.insert(c.key,c.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}forEachDocumentKey(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ek(this)}getSize(e){return Q.resolve(this.size)}};function ape(t){return new pk(t)}var Ek=class extends dB{constructor(e){super(),this.documentCache=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.documentCache.addEntry(e,i)):this.documentCache.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.documentCache.getEntry(e,n)}getAllFromCache(e,n){return this.documentCache.getEntries(e,n)}};var mk=class{constructor(e){this.persistence=e,this.targets=new Ks(n=>vl(n),Dp),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new pp,this.targetCount=0,this.targetIdGenerator=ch.forTargetCache()}forEachTarget(e,n){return this.targets.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.highestSequenceNumber&&(this.highestSequenceNumber=n),Q.resolve()}saveTargetData(e){this.targets.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.targetIdGenerator=new ch(n),this.highestTargetId=n),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,n){return this.saveTargetData(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.saveTargetData(n),Q.resolve()}removeTargetData(e,n){return this.targets.delete(n.target),this.references.removeReferencesForId(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.targets.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.targets.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){let r=this.targets.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.references.addReferences(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.references.removeReferences(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.references.removeReferencesForId(n),Q.resolve()}getMatchingKeysForTargetId(e,n){let r=this.references.referencesForId(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.references.containsKey(n))}};var Ape="MemoryPersistence",fB=class{constructor(e,n){this.mutationQueues={},this.overlays={},this.listenSequence=new jr(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new mk(this);let r=i=>this.referenceDelegate.documentSize(i);this.indexManager=new rk,this.remoteDocumentCache=ape(r),this.serializer=new aB(n),this.bundleCache=new dk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.mutationQueues[e.toKey()];return r||(r=new fk(n,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,n,r){F(Ape,"Starting transaction:",e);let i=new Ck(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(i).next(s=>this.referenceDelegate.onTransactionCommitted(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}mutationQueuesContainKey(e,n){return Q.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,n)))}},Ck=class extends Ky{constructor(e){super(),this.currentSequenceNumber=e}},pB=class t{constructor(e){this.persistence=e,this.localViewReferences=new pp,this._orphanedDocuments=null}static factory(e){return new t(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw J()}addReference(e,n,r){return this.localViewReferences.addReference(r,n),this.orphanedDocuments.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.localViewReferences.removeReference(r,n),this.orphanedDocuments.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.orphanedDocuments.add(n.toString()),Q.resolve()}removeTarget(e,n){this.localViewReferences.removeReferencesForId(n.targetId).forEach(s=>this.orphanedDocuments.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.orphanedDocuments.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.orphanedDocuments,i=>{let s=q.fromPath(i);return this.isReferenced(e,s).next(o=>{o||r.removeEntry(s,ne.min())})}).next(()=>(this._orphanedDocuments=null,r.apply(e)))}updateLimboDocument(e,n){return this.isReferenced(e,n).next(r=>{r?this.orphanedDocuments.delete(n.toString()):this.orphanedDocuments.add(n.toString())})}documentSize(e){return 0}isReferenced(e,n){return Q.or([()=>Q.resolve(this.localViewReferences.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.mutationQueuesContainKey(e,n)])}};var Ik=class{constructor(e){this.serializer=e}createOrUpgrade(e,n,r,i){let s=new Xy("createOrUpgrade",n);r<1&&i>=1&&(cpe(e),upe(e),OW(e),dpe(e));let o=Q.resolve();return r<3&&i>=3&&(r!==0&&(ppe(e),OW(e)),o=o.next(()=>mpe(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>hpe(e,s))),o=o.next(()=>{Cpe(e)})),r<5&&i>=5&&(o=o.next(()=>this.removeAcknowledgedMutations(s))),r<6&&i>=6&&(o=o.next(()=>(fpe(e),this.addDocumentGlobal(s)))),r<7&&i>=7&&(o=o.next(()=>this.ensureSequenceNumbers(s))),r<8&&i>=8&&(o=o.next(()=>this.createCollectionParentIndex(e,s))),r<9&&i>=9&&(o=o.next(()=>{Epe(e)})),r<10&&i>=10&&(o=o.next(()=>this.rewriteCanonicalIds(s))),r<11&&i>=11&&(o=o.next(()=>{Ipe(e),ype(e)})),r<12&&i>=12&&(o=o.next(()=>{Qpe(e)})),r<13&&i>=13&&(o=o.next(()=>gpe(e)).next(()=>this.rewriteRemoteDocumentCache(e,s)).next(()=>e.deleteObjectStore(dl))),r<14&&i>=14&&(o=o.next(()=>this.runOverlayMigration(e,s))),r<15&&i>=15&&(o=o.next(()=>Bpe(e))),o}addDocumentGlobal(e){let n=0;return e.store(dl).iterate((r,i)=>{n+=uB(i)}).next(()=>{let r={byteSize:n};return e.store(Sp).put(_T,r)})}removeAcknowledgedMutations(e){let n=e.store(vp),r=e.store($i);return n.loadAll().next(i=>Q.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,Ka],[s.userId,s.lastAcknowledgedBatchId]);return r.loadAll(El,o).next(a=>Q.forEach(a,A=>{Z(A.userId===s.userId);let l=gl(this.serializer,A);return y3(e,s.userId,l).next(()=>{})}))}))}ensureSequenceNumbers(e){let n=e.store(yh),r=e.store(dl);return e.store(Ml).get(Zy).next(s=>{let o=A=>n.put({targetId:0,path:hr(A),sequenceNumber:s.highestListenSequenceNumber}),a=[];return r.iterate((A,l)=>{let c=new xe(A),u=lpe(c);a.push(n.get(u).next(h=>h?Q.resolve():o(c)))}).next(()=>Q.waitFor(a))})}createCollectionParentIndex(e,n){e.createObjectStore(tp,{keyPath:whe});let r=n.store(tp),i=new fp,s=o=>{if(i.add(o)){let a=o.lastSegment(),A=o.popLast();return r.put({collectionId:a,parent:hr(A)})}};return n.store(dl).iterate({keysOnly:!0},(o,a)=>{let A=new xe(o);return s(A.popLast())}).next(()=>n.store(Ch).iterate({keysOnly:!0},([o,a,A],l)=>{let c=Ys(a);return s(c.popLast())}))}rewriteCanonicalIds(e){let n=e.store(Ih);return n.iterate((r,i)=>{let s=Wf(i),o=E3(this.serializer,s);return n.put(o)})}rewriteRemoteDocumentCache(e,n){let r=n.store(dl),i=[];return r.iterate((s,o)=>{let a=n.store(UB),A=wpe(o).path.toArray(),l={prefixPath:A.slice(0,A.length-2),collectionGroup:A[A.length-2],documentId:A[A.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>Q.waitFor(i))}runOverlayMigration(e,n){let r=n.store($i),i=_3(this.serializer),s=new fB(pB.factory,this.serializer.remoteSerializer);return r.loadAll().next(o=>{let a=new Map;return o.forEach(A=>{var l;let c=(l=a.get(A.userId))!==null&&l!==void 0?l:Ce();gl(this.serializer,A).keys().forEach(h=>c=c.add(h)),a.set(A.userId,c)}),Q.forEach(a,(A,l)=>{let c=new rn(l),u=AB.forUser(this.serializer,c),h=s.getIndexManager(c),d=hB.forUser(c,this.serializer,h,s.referenceDelegate);return new gB(i,d,u,h).recalculateAndSaveOverlaysForDocumentKeys(new np(n,jr.INVALID),A).next()})})}};function lpe(t){return[0,hr(t)]}function cpe(t){t.createObjectStore(_p)}function upe(t){t.createObjectStore(vp,{keyPath:ghe}),t.createObjectStore($i,{keyPath:c4,autoIncrement:!0}).createIndex(El,u4,{unique:!0}),t.createObjectStore(Ch)}function hpe(t,e){return e.store($i).loadAll().next(r=>{t.deleteObjectStore($i),t.createObjectStore($i,{keyPath:c4,autoIncrement:!0}).createIndex(El,u4,{unique:!0});let s=e.store($i),o=r.map(a=>s.put(a));return Q.waitFor(o)})}function dpe(t){t.createObjectStore(dl)}function gpe(t){let e=t.createObjectStore(UB,{keyPath:Ehe});e.createIndex(Gy,mhe),e.createIndex(d4,Che)}function fpe(t){t.createObjectStore(Sp)}function OW(t){t.createObjectStore(yh,{keyPath:Bhe}).createIndex(fN,Qhe,{unique:!0}),t.createObjectStore(Ih,{keyPath:Ihe}).createIndex(g4,yhe,{unique:!0}),t.createObjectStore(Ml)}function ppe(t){t.deleteObjectStore(yh),t.deleteObjectStore(Ih),t.deleteObjectStore(Ml)}function Epe(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}function mpe(t){let e=t.store(Ml),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return e.put(Zy,n)}function Cpe(t){t.createObjectStore(nh,{keyPath:_he})}function Ipe(t){t.createObjectStore(PB,{keyPath:vhe})}function ype(t){t.createObjectStore(VB,{keyPath:She})}function Bpe(t){t.createObjectStore(pN,{keyPath:bhe,autoIncrement:!0}).createIndex(vT,Dhe,{unique:!1}),t.createObjectStore(EN,{keyPath:Rhe}).createIndex(f4,The,{unique:!1}),t.createObjectStore(mN,{keyPath:khe}).createIndex(p4,Nhe,{unique:!1})}function Qpe(t){let e=t.createObjectStore(GB,{keyPath:Fhe});e.createIndex(ST,Mhe,{unique:!1}),e.createIndex(E4,xhe,{unique:!1})}function wpe(t){return t.document?new q(xe.fromString(t.document.name).popFirst(5)):t.noDocument?q.fromSegments(t.noDocument.path):t.unknownDocument?q.fromSegments(t.unknownDocument.path):J()}var Ja="IndexedDbPersistence",oT=30*60*1e3,aT=5e3,_pe=4e3,AT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vpe="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Spe="firestore_zombie",v3="main",yk=class t{constructor(e,n,r,i,s,o,a,A,l,c,u=spe){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.queue=s,this.window=o,this.document=a,this.sequenceNumberSyncer=l,this.forceOwningTab=c,this.schemaVersion=u,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=h=>Promise.resolve(),!t.isAvailable())throw new D(v.UNIMPLEMENTED,vpe);this.referenceDelegate=new lk(this,i),this.dbName=n+v3,this.serializer=new aB(A),this.simpleDb=new Do(this.dbName,this.schemaVersion,new Ik(this.serializer)),this.targetCache=new sk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_3(this.serializer),this.bundleCache=new ZT,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,c===!1&&Rt(Ja,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new D(v.FAILED_PRECONDITION,AT);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.targetCache.getHighestSequenceNumber(e))}).then(e=>{this.listenSequence=new jr(e,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(e=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(e)))}setPrimaryStateListener(e){return this.primaryStateListener=n=>E(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.simpleDb.setVersionChangeListener(n=>E(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(()=>E(this,null,function*(){this.started&&(yield this.updateClientMetadataAndTryBecomePrimary())})))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(e).next(r=>{r||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(e)).next(r=>this.isPrimary&&!r?this.releasePrimaryLeaseIfHeld(e).next(()=>!1):r?this.acquireOrExtendPrimaryLease(e).next(()=>!0):!1)).catch(e=>{if(lA(e))return F(Ja,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F(Ja,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.queue.enqueueRetryable(()=>this.primaryStateListener(e)),this.isPrimary=e})}verifyPrimaryLease(e){return Yf(e).get(Uu).next(r=>Q.resolve(this.isLocalClient(r)))}removeClientMetadata(e){return Uy(e).delete(this.clientId)}maybeGarbageCollectMultiClientState(){return E(this,null,function*(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,oT)){this.lastGarbageCollectionTime=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Qn(n,nh);return r.loadAll().next(i=>{let s=this.filterActiveClients(i,oT),o=i.filter(a=>s.indexOf(a)===-1);return Q.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.webStorage)for(let n of e)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(n.clientId))}})}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",_pe,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(e){return e?e.ownerId===this.clientId:!1}canActAsPrimary(e){return this.forceOwningTab?Q.resolve(!0):Yf(e).get(Uu).next(r=>{if(r!==null&&this.isWithinAge(r.leaseTimestampMs,aT)&&!this.isClientZombied(r.ownerId)){if(this.isLocalClient(r)&&this.networkEnabled)return!0;if(!this.isLocalClient(r)){if(!r.allowTabSynchronization)throw new D(v.FAILED_PRECONDITION,AT);return!1}}return this.networkEnabled&&this.inForeground?!0:Uy(e).loadAll().next(s=>this.filterActiveClients(s,aT).find(a=>{if(this.clientId!==a.clientId){let A=!this.networkEnabled&&a.networkEnabled,l=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(A||l&&c)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&F(Ja,`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){return E(this,null,function*(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),yield this.simpleDb.runTransaction("shutdown","readwrite",[_p,nh],e=>{let n=new np(e,jr.INVALID);return this.releasePrimaryLeaseIfHeld(n).next(()=>this.removeClientMetadata(n))}),this.simpleDb.close(),this.removeClientZombiedEntry()})}filterActiveClients(e,n){return e.filter(r=>this.isWithinAge(r.updateTimeMs,n)&&!this.isClientZombied(r.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",e=>Uy(e).loadAll().next(n=>this.filterActiveClients(n,oT).map(r=>r.clientId)))}get started(){return this._started}getMutationQueue(e,n){return hB.forUser(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ik(e,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(e){return AB.forUser(this.serializer,e)}getBundleCache(){return this.bundleCache}runTransaction(e,n,r){F(Ja,"Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=Hhe(this.schemaVersion),o;return this.simpleDb.runTransaction(e,i,s,a=>(o=new np(a,this.listenSequence?this.listenSequence.next():jr.INVALID),n==="readwrite-primary"?this.verifyPrimaryLease(o).next(A=>A?!0:this.canActAsPrimary(o)).next(A=>{if(!A)throw Rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new D(v.FAILED_PRECONDITION,a4);return r(o)}).next(A=>this.acquireOrExtendPrimaryLease(o).next(()=>A)):this.verifyAllowTabSynchronization(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}verifyAllowTabSynchronization(e){return Yf(e).get(Uu).next(r=>{if(r!==null&&this.isWithinAge(r.leaseTimestampMs,aT)&&!this.isClientZombied(r.ownerId)&&!this.isLocalClient(r)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!r.allowTabSynchronization))throw new D(v.FAILED_PRECONDITION,AT)})}acquireOrExtendPrimaryLease(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yf(e).put(Uu,n)}static isAvailable(){return Do.isAvailable()}releasePrimaryLeaseIfHeld(e){let n=Yf(e);return n.get(Uu).next(r=>this.isLocalClient(r)?(F(Ja,"Releasing primary lease."),n.delete(Uu)):Q.resolve())}isWithinAge(e,n){let r=Date.now(),i=r-n,s=r;return e<i?!1:e>s?(Rt(`Detected an update time that is in the future: ${e} > ${s}`),!1):!0}attachVisibilityHandler(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground=this.document.visibilityState==="visible")}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.windowUnloadHandler=()=>{this.markClientZombied();let n=/(?:Version|Mobile)\/1[456]/;t0()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(e){var n;try{let r=((n=this.webStorage)===null||n===void 0?void 0:n.getItem(this.zombiedClientLocalStorageKey(e)))!==null;return F(Ja,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rt(Ja,"Failed to get zombied client id.",r),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){Rt("Failed to set zombie client id.",e)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch{}}zombiedClientLocalStorageKey(e){return`${Spe}_${this.persistenceKey}_${e}`}};function Yf(t){return Qn(t,_p)}function Uy(t){return Qn(t,nh)}function RN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function bpe(t){return E(this,null,function*(){if(!Do.isAvailable())return Promise.resolve();let e=t+v3;yield Do.delete(e)})}var TN="LocalStore",Dpe=5*60*1e6,Ep=class{constructor(e,n,r,i){this.persistence=e,this.queryEngine=n,this.serializer=i,this.targetDataByTarget=new ft(me),this.targetIdByTarget=new Ks(s=>vl(s),Dp),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gB(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.targetDataByTarget))}};function S3(t,e,n,r){return new Ep(t,e,n,r)}function b3(t,e){return E(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.initializeUserComponents(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],A=[],l=Ce();for(let c of s){a.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}for(let c of o){A.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({affectedDocuments:c,removedBatchIds:a,addedBatchIds:A}))})})})}function Rpe(t,e){let n=Y(t),r=Tt.now(),i=e.reduce((a,A)=>a.add(A.key),Ce()),s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",a=>{let A=Sr(),l=Ce();return n.remoteDocuments.getEntries(a,i).next(c=>{A=c,A.forEach((u,h)=>{h.isValidDocument()||(l=l.add(u))})}).next(()=>n.localDocuments.getOverlayedDocuments(a,A)).next(c=>{s=c;let u=[];for(let h of e){let d=lge(h,s.get(h.key).overlayedDocument);d!=null&&u.push(new ns(h.key,d,R4(d.value.mapValue),Ot.exists(!0)))}return n.mutationQueue.addMutationBatch(a,r,u,e)}).next(c=>{o=c;let u=c.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(a,c.batchId,u)})}).then(()=>({batchId:o.batchId,changes:H4(s)}))}function Tpe(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});return Vpe(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,kpe(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kpe(t){let e=Ce();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}function Npe(t,e){let n=Y(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",r=>{let i;return n.mutationQueue.lookupMutationBatch(r,e).next(s=>(Z(s!==null),i=s.keys(),n.mutationQueue.removeMutationBatch(r,s))).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,i)).next(()=>n.localDocuments.getDocuments(r,i))})}function Fpe(t){let e=Y(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",n=>e.mutationQueue.getHighestUnacknowledgedBatchId(n))}function D3(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.targetCache.getLastRemoteSnapshotVersion(n))}function Mpe(t,e){let n=Y(t),r=e.snapshotVersion,i=n.targetDataByTarget;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;let a=[];e.targetChanges.forEach((c,u)=>{let h=i.get(u);if(!h)return;a.push(n.targetCache.removeMatchingKeys(s,c.removedDocuments,u).next(()=>n.targetCache.addMatchingKeys(s,c.addedDocuments,u)));let d=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(u)!==null?d=d.withResumeToken(Bn.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,r)),i=i.insert(u,d),xpe(h,d,c)&&a.push(n.targetCache.updateTargetData(s,d))});let A=Sr(),l=Ce();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(R3(s,o,e.documentUpdates).next(c=>{A=c.changedDocuments,l=c.existenceChangedKeys})),!r.isEqual(ne.min())){let c=n.targetCache.getLastRemoteSnapshotVersion(s).next(u=>n.targetCache.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,A,l)).next(()=>A)}).then(s=>(n.targetDataByTarget=i,s))}function R3(t,e,n){let r=Ce(),i=Ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Sr();return n.forEach((a,A)=>{let l=s.get(a);A.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),A.isNoDocument()&&A.version.isEqual(ne.min())?(e.removeEntry(a,A.readTime),o=o.insert(a,A)):!l.isValidDocument()||A.version.compareTo(l.version)>0||A.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(A),o=o.insert(a,A)):F(TN,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",A.version)}),{changedDocuments:o,existenceChangedKeys:i}})}function xpe(t,e,n){return t.resumeToken.approximateByteSize()===0||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=Dpe?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}function Lpe(t,e){return E(this,null,function*(){let n=Y(t);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>Q.forEach(e,i=>Q.forEach(i.addedKeys,s=>n.persistence.referenceDelegate.addReference(r,i.targetId,s)).next(()=>Q.forEach(i.removedKeys,s=>n.persistence.referenceDelegate.removeReference(r,i.targetId,s)))))}catch(r){if(lA(r))F(TN,"Failed to update sequence numbers: "+r);else throw r}for(let r of e){let i=r.targetId;if(!r.fromCache){let s=n.targetDataByTarget.get(i),o=s.snapshotVersion,a=s.withLastLimboFreeSnapshotVersion(o);n.targetDataByTarget=n.targetDataByTarget.insert(i,a)}}})}function Ope(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ka),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Upe(t,e){let n=Y(t);return n.persistence.runTransaction("read document","readonly",r=>n.localDocuments.getDocument(r,e))}function uh(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.targetCache.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.targetCache.allocateTargetId(r).next(o=>(i=new lh(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.targetCache.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.targetDataByTarget.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.targetDataByTarget=n.targetDataByTarget.insert(r.targetId,r),n.targetIdByTarget.set(e,r.targetId)),r})}function Ppe(t,e,n){let r=Y(t),i=r.targetIdByTarget.get(n);return i!==void 0?Q.resolve(r.targetDataByTarget.get(i)):r.targetCache.getTargetData(e,n)}function hh(t,e,n){return E(this,null,function*(){let r=Y(t),i=r.targetDataByTarget.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(lA(o))F(TN,`Failed to update sequence numbers for target ${e}: ${o}`);else throw o}r.targetDataByTarget=r.targetDataByTarget.remove(e),r.targetIdByTarget.delete(i.target)})}function WB(t,e,n){let r=Y(t),i=ne.min(),s=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>Ppe(r,o,dr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.targetCache.getMatchingKeysForTargetId(o,a.targetId).next(A=>{s=A})}).next(()=>r.queryEngine.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:Ce())).next(a=>(N3(r,V4(e),a),{documents:a,remoteKeys:s})))}function Vpe(t,e,n,r){let i=n.batch,s=i.keys(),o=Q.resolve();return s.forEach(a=>{o=o.next(()=>r.getEntry(e,a)).next(A=>{let l=n.docVersions.get(a);Z(l!==null),A.version.compareTo(l)<0&&(i.applyToRemoteDocument(A,n),A.isValidDocument()&&(A.setReadTime(n.commitVersion),r.addEntry(A)))})}),o.next(()=>t.mutationQueue.removeMutationBatch(e,i))}function Gpe(t,e){let n=Y(t),r=Y(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",i=>r.lookupMutationKeys(i,e).next(s=>s?n.localDocuments.getDocuments(i,s):Q.resolve(null)))}function qpe(t,e){Y(Y(t,Ep).mutationQueue).removeCachedMutationKeys(e)}function Hpe(t){return Y(Y(t,Ep).persistence).getActiveClients()}function T3(t,e){let n=Y(t),r=Y(n.targetCache),i=n.targetDataByTarget.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.getTargetDataForTarget(s,e).next(o=>o?o.target:null))}function k3(t,e){let n=Y(t),r=n.collectionGroupReadTime.get(e)||ne.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.remoteDocuments.getAllFromCollectionGroup(i,e,s4(r,th),Number.MAX_SAFE_INTEGER)).then(i=>(N3(n,e,i),i))}function N3(t,e,n){let r=t.collectionGroupReadTime.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.collectionGroupReadTime.set(e,r)}function Ype(t){return dr(Bh(xe.fromString(`__bundle__/docs/${t}`)))}function Jpe(t,e,n,r){return E(this,null,function*(){let i=Y(t),s=Ce(),o=Sr();for(let l of n){let c=e.toDocumentKey(l.metadata.name);l.document&&(s=s.add(c));let u=e.toMutableDocument(l);u.setReadTime(e.toSnapshotVersion(l.metadata.readTime)),o=o.insert(c,u)}let a=i.remoteDocuments.newChangeBuffer({trackRemovals:!0}),A=yield uh(i,Ype(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>R3(l,a,o).next(c=>(a.apply(l),c)).next(c=>i.targetCache.removeMatchingKeysForTargetId(l,A.targetId).next(()=>i.targetCache.addMatchingKeys(l,s,A.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,c.changedDocuments,c.existenceChangedKeys)).next(()=>c.changedDocuments)))})}function Wpe(t,e){let n=Y(t),r=zt(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",i=>n.bundleCache.getBundleMetadata(i,e.id)).then(i=>!!i&&i.createTime.compareTo(r)>=0)}function zpe(t,e){let n=Y(t);return n.persistence.runTransaction("Save bundle","readwrite",r=>n.bundleCache.saveBundleMetadata(r,e))}function jpe(t,e){let n=Y(t);return n.persistence.runTransaction("Get named query","readonly",r=>n.bundleCache.getNamedQuery(r,e))}function Kpe(r,i){return E(this,arguments,function*(t,e,n=Ce()){let s=yield uh(t,dr(vN(e.bundledQuery))),o=Y(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let A=zt(e.readTime);if(s.snapshotVersion.compareTo(A)>=0)return o.bundleCache.saveNamedQuery(a,e);let l=s.withResumeToken(Bn.EMPTY_BYTE_STRING,A);return o.targetDataByTarget=o.targetDataByTarget.insert(l.targetId,l),o.targetCache.updateTargetData(a,l).next(()=>o.targetCache.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.targetCache.addMatchingKeys(a,n,s.targetId)).next(()=>o.bundleCache.saveNamedQuery(a,e))})})}var Bk=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Xpe=100;function Zpe(){return t0()?8:Do.getAndroidVersion(Td())>0?6:4}var EB=class{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=Xpe,this.relativeIndexReadCostPerDocument=Zpe()}initialize(e,n){this.localDocumentsView=e,this.indexManager=n,this.initialized=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.performQueryUsingIndex(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.performQueryUsingRemoteKeys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Bk;return this.executeFullCollectionScan(e,n,o).next(a=>{if(s.result=a,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,n,o,a.size)})}).next(()=>s.result)}createCacheIndexes(e,n,r,i){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(Ju()<=hi.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Wu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),Q.resolve()):(Ju()<=hi.DEBUG&&F("QueryEngine","Query:",Wu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*i?(Ju()<=hi.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Wu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):Q.resolve())}performQueryUsingIndex(e,n){if(sW(n))return Q.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rB(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ce(...s);return this.localDocumentsView.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(A=>{let l=this.applyQuery(n,a);return this.needsRefill(n,l,o,A.readTime)?this.performQueryUsingIndex(e,rB(n,null,"F")):this.appendRemainingResults(e,l,n,A)}))})))}performQueryUsingRemoteKeys(e,n,r,i){return sW(n)||i.isEqual(ne.min())?Q.resolve(null):this.localDocumentsView.getDocuments(e,r).next(s=>{let o=this.applyQuery(n,s);return this.needsRefill(n,o,r,i)?Q.resolve(null):(Ju()<=hi.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wu(n)),this.appendRemainingResults(e,o,n,s4(i,th)).next(a=>a))})}applyQuery(e,n){let r=new it(G4(e));return n.forEach((i,s)=>{Tp(e,s)&&(r=r.add(s))}),r}needsRefill(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return s?s.hasPendingWrites||s.version.compareTo(i)>0:!1}executeFullCollectionScan(e,n,r){return Ju()<=hi.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Wu(n)),this.localDocumentsView.getDocumentsMatchingQuery(e,n,Ri.min(),r)}appendRemainingResults(e,n,r,i){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var F3="firestore_clients";function UW(t,e){return`${F3}_${t}_${e}`}var M3="firestore_mutations";function PW(t,e,n){let r=`${M3}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var x3="firestore_targets";function lT(t,e){return`${x3}_${t}_${e}`}var $pe="firestore_online_state";function eEe(t){return`${$pe}_${t}`}var tEe="firestore_bundle_loaded_v2";function nEe(t){return`${tEe}_${t}`}var rEe="firestore_sequence_number";function iEe(t){return`${rEe}_${t}`}var Hs="SharedClientState",mB=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static fromWebStorageEntry(e,n,r){let i=JSON.parse(r),s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object"),o;return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new D(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Rt(Hs,`Failed to parse mutation state for ID '${n}': ${r}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Zf=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static fromWebStorageEntry(e,n){let r=JSON.parse(n),i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object"),s;return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new D(r.error.code,r.error.message))),i?new t(e,r.state,s):(Rt(Hs,`Failed to parse target state for ID '${e}': ${n}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},CB=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static fromWebStorageEntry(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=wN();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=S4(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Rt(Hs,`Failed to parse client data for instance '${e}': ${n}`),null)}},Qk=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static fromWebStorageEntry(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Rt(Hs,`Failed to parse online state: ${e}`),null)}},mp=class{constructor(){this.activeTargetIds=wN()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},$f=class{constructor(e,n,r,i,s){this.window=e,this.queue=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new ft(me),this.started=!1,this.earlyEvents=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.localClientStorageKey=UW(this.persistenceKey,this.localClientId),this.sequenceNumberKey=iEe(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new mp),this.clientStateKeyRe=new RegExp(`^${F3}_${o}_([^_]*)$`),this.mutationBatchKeyRe=new RegExp(`^${M3}_${o}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=new RegExp(`^${x3}_${o}_(\\d+)$`),this.onlineStateKey=eEe(this.persistenceKey),this.bundleLoadedKey=nEe(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(e){return!!(e&&e.localStorage)}start(){return E(this,null,function*(){let e=yield this.syncEngine.getActiveClients();for(let r of e){if(r===this.localClientId)continue;let i=this.getItem(UW(this.persistenceKey,r));if(i){let s=CB.fromWebStorageEntry(r,i);s&&(this.activeClients=this.activeClients.insert(s.clientId,s))}}this.persistClientState();let n=this.storage.getItem(this.onlineStateKey);if(n){let r=this.fromWebStorageOnlineState(n);r&&this.handleOnlineStateEvent(r)}for(let r of this.earlyEvents)this.handleWebStorageEvent(r);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(e){let n=!1;return this.activeClients.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.persistMutationState(e,"pending")}updateMutationState(e,n,r){this.persistMutationState(e,n,r),this.removeMutationState(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(lT(this.persistenceKey,e));if(r){let i=Zf.fromWebStorageEntry(e,r);i&&(n=i.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),n}removeLocalQueryTarget(e){this.localClientState.removeQueryTarget(e),this.persistClientState()}isLocalQueryTarget(e){return this.localClientState.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lT(this.persistenceKey,e))}updateQueryState(e,n,r){this.persistQueryTargetState(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.removeMutationState(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.persistOnlineState(e)}notifyBundleLoaded(e){this.persistBundleLoadedState(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return F(Hs,"READ",e,n),n}setItem(e,n){F(Hs,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){F(Hs,"REMOVE",e),this.storage.removeItem(e)}handleWebStorageEvent(e){let n=e;if(n.storageArea===this.storage){if(F(Hs,"EVENT",n.key,n.newValue),n.key===this.localClientStorageKey){Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");return}this.queue.enqueueRetryable(()=>E(this,null,function*(){if(!this.started){this.earlyEvents.push(n);return}if(n.key!==null){if(this.clientStateKeyRe.test(n.key))if(n.newValue!=null){let r=this.fromWebStorageClientState(n.key,n.newValue);if(r)return this.handleClientStateEvent(r.clientId,r)}else{let r=this.fromWebStorageClientStateKey(n.key);return this.handleClientStateEvent(r,null)}else if(this.mutationBatchKeyRe.test(n.key)){if(n.newValue!==null){let r=this.fromWebStorageMutationMetadata(n.key,n.newValue);if(r)return this.handleMutationBatchEvent(r)}}else if(this.queryTargetKeyRe.test(n.key)){if(n.newValue!==null){let r=this.fromWebStorageQueryTargetMetadata(n.key,n.newValue);if(r)return this.handleQueryTargetEvent(r)}}else if(n.key===this.onlineStateKey){if(n.newValue!==null){let r=this.fromWebStorageOnlineState(n.newValue);if(r)return this.handleOnlineStateEvent(r)}}else if(n.key===this.sequenceNumberKey){let r=sEe(n.newValue);r!==jr.INVALID&&this.sequenceNumberHandler(r)}else if(n.key===this.bundleLoadedKey){let r=this.fromWebStoreBundleLoadedState(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.synchronizeWithChangedDocuments(i)))}}}))}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(e,n,r){let i=new mB(this.currentUser,e,n,r),s=PW(this.persistenceKey,this.currentUser,e);this.setItem(s,i.toWebStorageJSON())}removeMutationState(e){let n=PW(this.persistenceKey,this.currentUser,e);this.removeItem(n)}persistOnlineState(e){let n={clientId:this.localClientId,onlineState:e};this.storage.setItem(this.onlineStateKey,JSON.stringify(n))}persistQueryTargetState(e,n,r){let i=lT(this.persistenceKey,e),s=new Zf(e,n,r);this.setItem(i,s.toWebStorageJSON())}persistBundleLoadedState(e){let n=JSON.stringify(Array.from(e));this.setItem(this.bundleLoadedKey,n)}fromWebStorageClientStateKey(e){let n=this.clientStateKeyRe.exec(e);return n?n[1]:null}fromWebStorageClientState(e,n){let r=this.fromWebStorageClientStateKey(e);return CB.fromWebStorageEntry(r,n)}fromWebStorageMutationMetadata(e,n){let r=this.mutationBatchKeyRe.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return mB.fromWebStorageEntry(new rn(s),i,n)}fromWebStorageQueryTargetMetadata(e,n){let r=this.queryTargetKeyRe.exec(e),i=Number(r[1]);return Zf.fromWebStorageEntry(i,n)}fromWebStorageOnlineState(e){return Qk.fromWebStorageEntry(e)}fromWebStoreBundleLoadedState(e){return JSON.parse(e)}handleMutationBatchEvent(e){return E(this,null,function*(){if(e.user.uid!==this.currentUser.uid){F(Hs,`Ignoring mutation for non-active user ${e.user.uid}`);return}return this.syncEngine.applyBatchState(e.batchId,e.state,e.error)})}handleQueryTargetEvent(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)}handleClientStateEvent(e,n){let r=n?this.activeClients.insert(e,n):this.activeClients.remove(e),i=this.extractActiveQueryTargets(this.activeClients),s=this.extractActiveQueryTargets(r),o=[],a=[];return s.forEach(A=>{i.has(A)||o.push(A)}),i.forEach(A=>{s.has(A)||a.push(A)}),this.syncEngine.applyActiveTargetsChange(o,a).then(()=>{this.activeClients=r})}handleOnlineStateEvent(e){this.activeClients.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}extractActiveQueryTargets(e){let n=wN();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}};function sEe(t){let e=jr.INVALID;if(t!=null)try{let n=JSON.parse(t);Z(typeof n=="number"),e=n}catch(n){Rt(Hs,"Failed to read sequence number from WebStorage",n)}return e}var IB=class{constructor(){this.localState=new mp,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,n,r){this.queryState[e]=n}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new mp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var wk=class{addCallback(e){}shutdown(){}};var _k=class{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}};var Py=null;function oEe(){return 268435456+Math.round(2147483648*Math.random())}function cT(){return Py===null?Py=oEe():Py++,"0x"+Py.toString(16)}function aEe(t){return new Promise((e,n)=>{t((r,i)=>{r?n(r):e(i)})})}var AEe="1.9.1",ur="GrpcConnection",lEe=`gl-node/${process.versions.node} fire/${mh} grpc/${AEe}`;function uT(t,e,n,r){Z(e===null||e.type==="OAuth");let i=new Il.Metadata;return e&&e.headers.forEach((s,o)=>i.set(o,s)),n&&n.headers.forEach((s,o)=>i.set(o,s)),r&&i.set("X-Firebase-GMPID",r),i.set("X-Goog-Api-Client",lEe),i.set("Google-Cloud-Resource-Prefix",t),i.set("x-goog-request-params",t),i}var vk=class{constructor(e,n){this.databaseInfo=n,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${n.databaseId.projectId}/databases/${n.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){F(ur,"Creating Firestore stub.");let e=this.databaseInfo.ssl?Il.credentials.createSsl():Il.credentials.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,n,r,i,s){let o=cT(),a=this.ensureActiveStub(),A=uT(this.databasePath,i,s,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return aEe(c=>(F(ur,`RPC '${e}' ${o} invoked with request:`,r),a[e](l,A,(u,h)=>{u?(F(ur,`RPC '${e}' ${o} failed with error:`,u),c(new D(Yy(u.code),u.message))):(F(ur,`RPC '${e}' ${o} completed with response:`,h),c(void 0,h))})))}invokeStreamingRPC(e,n,r,i,s,o){let a=cT(),A=[],l=new Wt;F(ur,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let c=this.ensureActiveStub(),u=uT(this.databasePath,i,s,this.databaseInfo.appId),h=Object.assign(Object.assign({},r),{database:this.databasePath}),d=c[e](h,u),g=!1;return d.on("data",f=>{F(ur,`RPC ${e} ${a} received result:`,f),A.push(f),o!==void 0&&A.length===o&&(g=!0,l.resolve(A))}),d.on("end",()=>{F(ur,`RPC '${e}' ${a} completed.`),g||(g=!0,l.resolve(A))}),d.on("error",f=>{F(ur,`RPC '${e}' ${a} failed with error:`,f);let m=Yy(f.code);l.reject(new D(m,f.message))}),l.promise}openStream(e,n,r){let i=cT(),s=this.ensureActiveStub(),o=uT(this.databasePath,n,r,this.databaseInfo.appId),a=s[e](o),A=!1,l=u=>{A||(A=!0,c.callOnClose(u),a.end())},c=new _k({sendFn:u=>{if(A)F(ur,`RPC '${e}' stream ${i} not sending because gRPC stream is closed:`,u);else{F(ur,`RPC '${e}' stream ${i} sending:`,u);try{a.write(u)}catch(h){throw Rt("Failure sending:",u),Rt("Error:",h),h}}},closeFn:()=>{F(ur,`RPC '${e}' stream ${i} closed locally via close().`),l()}});return a.on("data",u=>{A||(F(ur,`RPC '${e}' stream ${i} received:`,u),c.callOnMessage(u))}),a.on("end",()=>{F(ur,`RPC '${e}' stream ${i} ended.`),l()}),a.on("error",u=>{if(!A){Di(ur,`RPC '${e}' stream ${i} error. Code:`,u.code,"Message:",u.message);let h=Yy(u.code);l(new D(h,u.message))}}),F(ur,`Opening RPC '${e}' stream ${i} to ${this.databaseInfo.host}`),setTimeout(()=>{c.callOnOpen()},0),c}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}},L3={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}},cEe={nested:L3},uEe=Object.freeze({__proto__:null,nested:L3,default:cEe});var hEe={longs:String,enums:String,defaults:!0,oneofs:!1};function dEe(){let t=t4.fromJSON(uEe,hEe);return Il.loadPackageDefinition(t)}function gEe(t){let e=dEe();return new vk(e,t)}function fEe(){return new wk}function O3(){return process.env.USE_MOCK_PERSISTENCE==="YES"?window:null}function pEe(){return null}function Np(t){return new WT(t,!1)}var EEe="ExponentialBackoff",mEe=1e3,CEe=1.5,IEe=60*1e3,Cp=class{constructor(e,n,r=mEe,i=CEe,s=IEe){this.queue=e,this.timerId=n,this.initialDelayMs=r,this.backoffFactor=i,this.maxDelayMs=s,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);i>0&&F(EEe,`Backing off for ${i} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};var VW="PersistentStream",yEe=60*1e3,BEe=10*1e3,yB=class{constructor(e,n,r,i,s,o,a,A){this.queue=e,this.idleTimerId=r,this.healthTimerId=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=A,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.backoff=new Cp(e,n)}isStarted(){return this.state===1||this.state===5||this.isOpen()}isOpen(){return this.state===2||this.state===3}start(){if(this.state===4){this.performBackoff();return}this.auth()}stop(){return E(this,null,function*(){this.isStarted()&&(yield this.close(0))})}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&this.idleTimer===null&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,yEe,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}handleIdleCloseTimer(){return E(this,null,function*(){if(this.isOpen())return this.close(0)})}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}close(e,n){return E(this,null,function*(){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,e!==4?this.backoff.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(Rt(n.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.onClose(n)})}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.closeCount===n&&this.startStream(r,i)},r=>{e(()=>{let i=new D(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.handleStreamClose(i)})})}startStream(e,n){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,n),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,BEe,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(i=>{r(()=>this.handleStreamClose(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(()=>E(this,null,function*(){this.state=0,this.start()}))}handleStreamClose(e){return F(VW,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return n=>{this.queue.enqueueAndForget(()=>this.closeCount===e?n():(F(VW,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sk=class extends yB{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}startRpc(e,n){return this.connection.openStream("Listen",e,n)}onMessage(e){this.backoff.reset();let n=Fge(this.serializer,e),r=xge(e);return this.listener.onWatchChange(n,r)}watch(e){let n={};n.database=KT(this.serializer),n.addTarget=Wge(this.serializer,e);let r=Yge(this.serializer,e);r&&(n.labels=r),this.sendRequest(n)}unwatch(e){let n={};n.database=KT(this.serializer),n.removeTarget=e,this.sendRequest(n)}},bk=class extends yB{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.handshakeComplete_=!1}get handshakeComplete(){return this.handshakeComplete_}start(){this.handshakeComplete_=!1,this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete_&&this.writeMutations([])}startRpc(e,n){return this.connection.openStream("Write",e,n)}onMessage(e){if(Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();let n=Pge(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.onMutationResult(r,n)}else return Z(!e.writeResults||e.writeResults.length===0),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()}writeHandshake(){let e={};e.database=KT(this.serializer),this.sendRequest(e)}writeMutations(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>gp(this.serializer,r))};this.sendRequest(n)}};var Dk=class{},Rk=class extends Dk{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new D(v.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,n,r,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.invokeRPC(e,jT(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(v.UNKNOWN,s.toString())})}invokeStreamingRPC(e,n,r,i,s){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.invokeStreamingRPC(e,jT(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new D(v.UNKNOWN,o.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}};function QEe(t,e,n,r){return new Rk(t,e,n,r)}function wEe(t,e){return E(this,null,function*(){let n=Y(t),r={writes:e.map(i=>gp(n.serializer,i))};yield n.invokeRPC("Commit",n.serializer.databaseId,xe.emptyPath(),r)})}function _Ee(t,e){return E(this,null,function*(){let n=Y(t),r={documents:e.map(a=>dp(n.serializer,a))},i=yield n.invokeStreamingRPC("BatchGetDocuments",n.serializer.databaseId,xe.emptyPath(),r,e.length),s=new Map;i.forEach(a=>{let A=Nge(n.serializer,a);s.set(A.key.toString(),A)});let o=[];return e.forEach(a=>{let A=s.get(a.toString());Z(!!A),o.push(A)}),o})}function vEe(t,e,n){let r=Y(t);return r.verifyInitialized(),new bk(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}function SEe(t,e,n){let r=Y(t);return r.verifyInitialized(),new Sk(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}var bEe="OnlineStateTracker",GW=1,qW=10*1e3,Tk=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){this.watchStreamFailures===0&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",qW,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${qW/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){this.state==="Online"?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=GW&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${GW} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e==="Online"&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(Rt(n),this.shouldWarnClientIsOffline=!1):F(bEe,n)}clearOnlineStateTimer(){this.onlineStateTimer!==null&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}};var Rl="RemoteStore",DEe=10,kk=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=s,this.connectivityMonitor.addCallback(o=>{r.enqueueAndForget(()=>E(this,null,function*(){cA(this)&&(F(Rl,"Restarting streams for network reachability change."),yield JEe(this))}))}),this.onlineStateTracker=new Tk(r,i)}};function REe(t,e,n,r,i){return new kk(t,e,n,r,i)}function TEe(t){let e=Y(t);return e.offlineCauses.delete(0),Fp(e)}function Fp(t){return E(this,null,function*(){if(cA(t))for(let e of t.onNetworkStatusChange)yield e(!0)})}function kEe(t){return E(this,null,function*(){let e=Y(t);e.offlineCauses.add(0),yield Qh(e),e.onlineStateTracker.set("Offline")})}function Qh(t){return E(this,null,function*(){for(let e of t.onNetworkStatusChange)yield e(!1)})}function NEe(t){return E(this,null,function*(){let e=Y(t);F(Rl,"RemoteStore shutting down."),e.offlineCauses.add(5),yield Qh(e),e.connectivityMonitor.shutdown(),e.onlineStateTracker.set("Unknown")})}function zB(t,e){let n=Y(t);n.listenTargets.has(e.targetId)||(n.listenTargets.set(e.targetId,e),FN(n)?NN(n):_h(n).isOpen()&&kN(n,e))}function Mp(t,e){let n=Y(t),r=_h(n);n.listenTargets.delete(e),r.isOpen()&&U3(n,e),n.listenTargets.size===0&&(r.isOpen()?r.markIdle():cA(n)&&n.onlineStateTracker.set("Unknown"))}function kN(t,e){if(t.watchChangeAggregator.recordPendingTargetRequest(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_h(t).watch(e)}function U3(t,e){t.watchChangeAggregator.recordPendingTargetRequest(e),_h(t).unwatch(e)}function NN(t){t.watchChangeAggregator=new JT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),getTargetDataForTarget:e=>t.listenTargets.get(e)||null,getDatabaseId:()=>t.datastore.serializer.databaseId}),_h(t).start(),t.onlineStateTracker.handleWatchStreamStart()}function FN(t){return cA(t)&&!_h(t).isStarted()&&t.listenTargets.size>0}function cA(t){return Y(t).offlineCauses.size===0}function P3(t){t.watchChangeAggregator=void 0}function FEe(t){return E(this,null,function*(){t.listenTargets.forEach((e,n)=>{kN(t,e)})})}function MEe(t,e){return E(this,null,function*(){P3(t),FN(t)?(t.onlineStateTracker.handleWatchStreamFailure(e),NN(t)):t.onlineStateTracker.set("Unknown")})}function xEe(t,e,n){return E(this,null,function*(){if(t.onlineStateTracker.set("Online"),e instanceof sB&&e.state===2&&e.cause){try{yield OEe(t,e)}catch(r){F(Rl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield BB(t,r)}return}if(e instanceof eh?t.watchChangeAggregator.handleDocumentChange(e):e instanceof iB?t.watchChangeAggregator.handleExistenceFilter(e):t.watchChangeAggregator.handleTargetChange(e),!n.isEqual(ne.min()))try{let r=yield D3(t.localStore);n.compareTo(r)>=0&&(yield LEe(t,n))}catch(r){F(Rl,"Failed to raise snapshot:",r),yield BB(t,r)}})}function BB(t,e,n){return E(this,null,function*(){if(lA(e))t.offlineCauses.add(1),yield Qh(t),t.onlineStateTracker.set("Offline"),n||(n=()=>D3(t.localStore)),t.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){F(Rl,"Retrying IndexedDB access"),yield n(),t.offlineCauses.delete(1),yield Fp(t)}));else throw e})}function V3(t,e){return e().catch(n=>BB(t,n,e))}function LEe(t,e){let n=t.watchChangeAggregator.createRemoteEvent(e);return n.targetChanges.forEach((r,i)=>{if(r.resumeToken.approximateByteSize()>0){let s=t.listenTargets.get(i);s&&t.listenTargets.set(i,s.withResumeToken(r.resumeToken,e))}}),n.targetMismatches.forEach((r,i)=>{let s=t.listenTargets.get(r);if(!s)return;t.listenTargets.set(r,s.withResumeToken(Bn.EMPTY_BYTE_STRING,s.snapshotVersion)),U3(t,r);let o=new lh(s.target,r,i,s.sequenceNumber);kN(t,o)}),t.remoteSyncer.applyRemoteEvent(n)}function OEe(t,e){return E(this,null,function*(){let n=e.cause;for(let r of e.targetIds)t.listenTargets.has(r)&&(yield t.remoteSyncer.rejectListen(r,n),t.listenTargets.delete(r),t.watchChangeAggregator.removeTarget(r))})}function wh(t){return E(this,null,function*(){let e=Y(t),n=uA(e),r=e.writePipeline.length>0?e.writePipeline[e.writePipeline.length-1].batchId:Ka;for(;UEe(e);)try{let i=yield Ope(e.localStore,r);if(i===null){e.writePipeline.length===0&&n.markIdle();break}else r=i.batchId,PEe(e,i)}catch(i){yield BB(e,i)}G3(e)&&q3(e)})}function UEe(t){return cA(t)&&t.writePipeline.length<DEe}function PEe(t,e){t.writePipeline.push(e);let n=uA(t);n.isOpen()&&n.handshakeComplete&&n.writeMutations(e.mutations)}function G3(t){return cA(t)&&!uA(t).isStarted()&&t.writePipeline.length>0}function q3(t){uA(t).start()}function VEe(t){return E(this,null,function*(){uA(t).writeHandshake()})}function GEe(t){return E(this,null,function*(){let e=uA(t);for(let n of t.writePipeline)e.writeMutations(n.mutations)})}function qEe(t,e,n){return E(this,null,function*(){let r=t.writePipeline.shift(),i=GT.from(r,e,n);yield V3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield wh(t)})}function HEe(t,e){return E(this,null,function*(){e&&uA(t).handshakeComplete&&(yield YEe(t,e)),G3(t)&&q3(t)})}function YEe(t,e){return E(this,null,function*(){if(pge(e.code)){let n=t.writePipeline.shift();uA(t).inhibitBackoff(),yield V3(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),yield wh(t)}})}function JEe(t){return E(this,null,function*(){let e=Y(t);e.offlineCauses.add(4),yield Qh(e),e.onlineStateTracker.set("Unknown"),e.offlineCauses.delete(4),yield Fp(e)})}function HW(t,e){return E(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),F(Rl,"RemoteStore received new credentials");let r=cA(n);n.offlineCauses.add(3),yield Qh(n),r&&n.onlineStateTracker.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.offlineCauses.delete(3),yield Fp(n)})}function Nk(t,e){return E(this,null,function*(){let n=Y(t);e?(n.offlineCauses.delete(2),yield Fp(n)):e||(n.offlineCauses.add(2),yield Qh(n),n.onlineStateTracker.set("Unknown"))})}function _h(t){return t.watchStream||(t.watchStream=SEe(t.datastore,t.asyncQueue,{onOpen:FEe.bind(null,t),onClose:MEe.bind(null,t),onWatchChange:xEe.bind(null,t)}),t.onNetworkStatusChange.push(e=>E(this,null,function*(){e?(t.watchStream.inhibitBackoff(),FN(t)?NN(t):t.onlineStateTracker.set("Unknown")):(yield t.watchStream.stop(),P3(t))}))),t.watchStream}function uA(t){return t.writeStream||(t.writeStream=vEe(t.datastore,t.asyncQueue,{onOpen:VEe.bind(null,t),onClose:HEe.bind(null,t),onHandshakeComplete:GEe.bind(null,t),onMutationResult:qEe.bind(null,t)}),t.onNetworkStatusChange.push(e=>E(this,null,function*(){e?(t.writeStream.inhibitBackoff(),yield wh(t)):(yield t.writeStream.stop(),t.writePipeline.length>0&&(F(Rl,`Stopping write stream with ${t.writePipeline.length} pending writes`),t.writePipeline=[]))}))),t.writeStream}var WEe="AsyncQueue",Fk=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(v.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vh(t,e){if(Rt(WEe,`${e}: ${t}`),lA(t))return new D(v.UNAVAILABLE,`${e}: ${t}`);throw t}var QB=class t{constructor(e){e?this.comparator=(n,r)=>e(n,r)||q.comparator(n.key,r.key):this.comparator=(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Jf(),this.sortedSet=new ft(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var wB=class{constructor(){this.changeMap=new ft(q.comparator)}track(e){let n=e.doc.key,r=this.changeMap.get(n);if(!r){this.changeMap=this.changeMap.insert(n,e);return}e.type!==0&&r.type===3?this.changeMap=this.changeMap.insert(n,e):e.type===3&&r.type!==1?this.changeMap=this.changeMap.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.changeMap=this.changeMap.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.changeMap=this.changeMap.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.changeMap=this.changeMap.remove(n):e.type===1&&r.type===2?this.changeMap=this.changeMap.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.changeMap=this.changeMap.insert(n,{type:2,doc:e.doc}):J()}getChanges(){let e=[];return this.changeMap.inorderTraversal((n,r)=>{e.push(r)}),e}},dh=class t{constructor(e,n,r,i,s,o,a,A,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=A,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,QB.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!Rp(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Mk=class{constructor(){this.viewSnap=void 0,this.listeners=[]}};function zEe(){return new xk}var xk=class{constructor(){this.queries=new Ks(e=>P4(e),Rp),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}};function MN(t,e){return E(this,null,function*(){let n=Y(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Mk),i)try{s.viewSnap=yield n.onListen(r)}catch(o){let a=vh(o,`Initialization of query '${Wu(e.query)}' failed`);e.onError(a);return}n.queries.set(r,s),s.listeners.push(e),e.applyOnlineStateChange(n.onlineState),s.viewSnap&&e.onViewSnapshot(s.viewSnap)&&LN(n)})}function xN(t,e){return E(this,null,function*(){let n=Y(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function jEe(t,e){let n=Y(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.onViewSnapshot(i)&&(r=!0);o.viewSnap=i}}r&&LN(n)}function KEe(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let s of i.listeners)s.onError(n);r.queries.delete(e)}function XEe(t,e){let n=Y(t);n.onlineState=e;let r=!1;n.queries.forEach((i,s)=>{for(let o of s.listeners)o.applyOnlineStateChange(e)&&(r=!0)}),r&&LN(n)}function ZEe(t,e){Y(t).snapshotsInSyncListeners.add(e),e.next()}function $Ee(t,e){Y(t).snapshotsInSyncListeners.delete(e)}function LN(t){t.snapshotsInSyncListeners.forEach(e=>{e.next()})}var Ip=class{constructor(e,n,r){this.query=e,this.queryObserver=n,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new dh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),n=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),n=!0),this.snap=e,n}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let n=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),n=!0),n}shouldRaiseInitialEvent(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return this.options.waitForSyncWhenOnline&&r?!1:!e.docs.isEmpty()||e.hasCachedResults||n==="Offline"}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let n=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return e.syncStateChanged||n?this.options.includeMetadataChanges===!0:!1}raiseInitialEvent(e){e=dh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}};var Lk=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.addedKeys=r,this.removedKeys=i}static fromSnapshot(e,n){let r=Ce(),i=Ce();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key);break}return new t(e,n.fromCache,r,i)}};var _B=class{constructor(e){this.serializer=e}toDocumentKey(e){return Ws(this.serializer,e)}toMutableDocument(e){return e.metadata.exists?c3(this.serializer,e.document,!1):nn.newNoDocument(this.toDocumentKey(e.metadata.name),this.toSnapshotVersion(e.metadata.readTime))}toSnapshotVersion(e){return zt(e)}},Ok=class{constructor(e,n,r){this.bundleMetadata=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=H3(e)}addSizedElement(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;let r=xe.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}getQueryDocumentMapping(e){let n=new Map,r=new _B(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.toDocumentKey(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||Ce()).add(s);n.set(o,a)}}return n}complete(){return E(this,null,function*(){let e=yield Jpe(this.localStore,new _B(this.serializer),this.documents,this.bundleMetadata.id),n=this.getQueryDocumentMapping(this.documents);for(let r of this.queries)yield Kpe(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:e}})}};function H3(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}function eme(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var vB=class{constructor(e){this.key=e}},SB=class{constructor(e){this.key=e}},bB=class{constructor(e,n){this.query=e,this._syncedDocuments=n,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=Ce(),this.mutatedKeys=Ce(),this.docComparator=G4(e),this.documentSet=new QB(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,n){let r=n?n.changeSet:new wB,i=n?n.documentSet:this.documentSet,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,A=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,u)=>{let h=i.get(c),d=Tp(this.query,u)?u:null,g=h?this.mutatedKeys.has(h.key):!1,f=d?d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations:!1,m=!1;h&&d?h.data.isEqual(d.data)?g!==f&&(r.track({type:3,doc:d}),m=!0):this.shouldWaitForSyncedDocument(h,d)||(r.track({type:2,doc:d}),m=!0,(A&&this.docComparator(d,A)>0||l&&this.docComparator(d,l)<0)&&(a=!0)):!h&&d?(r.track({type:0,doc:d}),m=!0):h&&!d&&(r.track({type:1,doc:h}),m=!0,(A||l)&&(a=!0)),m&&(d?(o=o.add(d),f?s=s.add(c):s=s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{documentSet:o,changeSet:r,needsRefill:a,mutatedKeys:s}}shouldWaitForSyncedDocument(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let o=e.changeSet.getChanges();o.sort((u,h)=>tme(u.type,h.type)||this.docComparator(u.doc,h.doc)),this.applyTargetChange(r),i=i??!1;let a=n&&!i?this.updateLimboDocuments():[],l=this.limboDocuments.size===0&&this.current&&!i?1:0,c=l!==this.syncState;return this.syncState=l,o.length===0&&!c?{limboChanges:a}:{snapshot:new dh(this.query,e.documentSet,s,o,e.mutatedKeys,l===0,c,!1,r?r.resumeToken.approximateByteSize()>0:!1),limboChanges:a}}applyOnlineStateChange(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new wB,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!(this._syncedDocuments.has(e)||!this.documentSet.has(e)||this.documentSet.get(e).hasLocalMutations)}applyTargetChange(e){e&&(e.addedDocuments.forEach(n=>this._syncedDocuments=this._syncedDocuments.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this._syncedDocuments=this._syncedDocuments.delete(n)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=Ce(),this.documentSet.forEach(r=>{this.shouldBeInLimbo(r.key)&&(this.limboDocuments=this.limboDocuments.add(r.key))});let n=[];return e.forEach(r=>{this.limboDocuments.has(r)||n.push(new SB(r))}),this.limboDocuments.forEach(r=>{e.has(r)||n.push(new vB(r))}),n}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=Ce();let n=this.computeDocChanges(e.documents);return this.applyChanges(n,!0)}computeInitialSnapshot(){return dh.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===0,this.hasCachedResults)}};function tme(t,e){let n=r=>{switch(r){case 0:return 1;case 2:return 2;case 3:return 2;case 1:return 0;default:return J()}};return n(t)-n(e)}var hA="SyncEngine",Uk=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Pk=class{constructor(e){this.key=e,this.receivedDocument=!1}},Vk=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.syncEngineListener={},this.queryViewsByQuery=new Ks(a=>P4(a),Rp),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new ft(q.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new pp,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ch.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return this._isPrimaryClient===!0}};function nme(t,e,n,r,i,s,o){let a=new Vk(t,e,n,r,i,s);return o&&(a._isPrimaryClient=!0),a}function rme(t,e){return E(this,null,function*(){let n=qN(t),r,i,s=n.queryViewsByQuery.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.computeInitialSnapshot();else{let o=yield uh(n.localStore,dr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield ON(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&zB(n.remoteStore,o)}return i})}function ON(t,e,n,r,i){return E(this,null,function*(){t.applyDocChanges=(u,h,d)=>dme(t,u,h,d);let s=yield WB(t.localStore,e,!0),o=new bB(e,s.remoteKeys),a=o.computeDocChanges(s.documents),A=hp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,A);VN(t,n,l.limboChanges);let c=new Uk(e,n,o);return t.queryViewsByQuery.set(e,c),t.queriesByTarget.has(n)?t.queriesByTarget.get(n).push(e):t.queriesByTarget.set(n,[e]),l.snapshot})}function ime(t,e){return E(this,null,function*(){let n=Y(t),r=n.queryViewsByQuery.get(e),i=n.queriesByTarget.get(r.targetId);if(i.length>1){n.queriesByTarget.set(r.targetId,i.filter(s=>!Rp(s,e))),n.queryViewsByQuery.delete(e);return}n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Mp(n.remoteStore,r.targetId),gh(n,r.targetId)}).catch(AA))):(gh(n,r.targetId),yield hh(n.localStore,r.targetId,!0))})}function sme(t,e,n){return E(this,null,function*(){let r=HN(t);try{let i=yield Rpe(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),ume(r,i.batchId,n),yield Mo(r,i.changes),yield wh(r.remoteStore)}catch(i){let s=vh(i,"Failed to persist write");n.reject(s)}})}function Y3(t,e){return E(this,null,function*(){let n=Y(t);try{let r=yield Mpe(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.activeLimboResolutionsByTarget.get(s);o&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.receivedDocument=!0:i.modifiedDocuments.size>0?Z(o.receivedDocument):i.removedDocuments.size>0&&(Z(o.receivedDocument),o.receivedDocument=!1))}),yield Mo(n,r,e)}catch(r){yield AA(r)}})}function YW(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.queryViewsByQuery.forEach((s,o)=>{let a=o.view.applyOnlineStateChange(e);a.snapshot&&i.push(a.snapshot)}),XEe(r.eventManager,e),i.length&&r.syncEngineListener.onWatchChange(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ome(t,e,n){return E(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.activeLimboResolutionsByTarget.get(e),s=i&&i.key;if(s){let o=new ft(q.comparator);o=o.insert(s,nn.newNoDocument(s,ne.min()));let a=Ce().add(s),A=new up(ne.min(),new Map,new ft(me),o,a);yield Y3(r,A),r.activeLimboTargetsByKey=r.activeLimboTargetsByKey.remove(s),r.activeLimboResolutionsByTarget.delete(e),GN(r)}else yield hh(r.localStore,e,!1).then(()=>gh(r,e,n)).catch(AA)})}function ame(t,e){return E(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield Tpe(n.localStore,e);PN(n,r,null),UN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Mo(n,i)}catch(i){yield AA(i)}})}function Ame(t,e,n){return E(this,null,function*(){let r=Y(t);try{let i=yield Npe(r.localStore,e);PN(r,e,n),UN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Mo(r,i)}catch(i){yield AA(i)}})}function lme(t,e){return E(this,null,function*(){let n=Y(t);cA(n.remoteStore)||F(hA,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield Fpe(n.localStore);if(r===Ka){e.resolve();return}let i=n.pendingWritesCallbacks.get(r)||[];i.push(e),n.pendingWritesCallbacks.set(r,i)}catch(r){let i=vh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function UN(t,e){(t.pendingWritesCallbacks.get(e)||[]).forEach(n=>{n.resolve()}),t.pendingWritesCallbacks.delete(e)}function cme(t,e){t.pendingWritesCallbacks.forEach(n=>{n.forEach(r=>{r.reject(new D(v.CANCELLED,e))})}),t.pendingWritesCallbacks.clear()}function ume(t,e,n){let r=t.mutationUserCallbacks[t.currentUser.toKey()];r||(r=new ft(me)),r=r.insert(e,n),t.mutationUserCallbacks[t.currentUser.toKey()]=r}function PN(t,e,n){let r=Y(t),i=r.mutationUserCallbacks[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.mutationUserCallbacks[r.currentUser.toKey()]=i}}function gh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.queriesByTarget.get(e))t.queryViewsByQuery.delete(r),n&&t.syncEngineListener.onWatchError(r,n);t.queriesByTarget.delete(e),t.isPrimaryClient&&t.limboDocumentRefs.removeReferencesForId(e).forEach(i=>{t.limboDocumentRefs.containsKey(i)||J3(t,i)})}function J3(t,e){t.enqueuedLimboResolutions.delete(e.path.canonicalString());let n=t.activeLimboTargetsByKey.get(e);n!==null&&(Mp(t.remoteStore,n),t.activeLimboTargetsByKey=t.activeLimboTargetsByKey.remove(e),t.activeLimboResolutionsByTarget.delete(n),GN(t))}function VN(t,e,n){for(let r of n)r instanceof vB?(t.limboDocumentRefs.addReference(r.key,e),hme(t,r)):r instanceof SB?(F(hA,"Document no longer in limbo: "+r.key),t.limboDocumentRefs.removeReference(r.key,e),t.limboDocumentRefs.containsKey(r.key)||J3(t,r.key)):J()}function hme(t,e){let n=e.key,r=n.path.canonicalString();!t.activeLimboTargetsByKey.get(n)&&!t.enqueuedLimboResolutions.has(r)&&(F(hA,"New document in limbo: "+n),t.enqueuedLimboResolutions.add(r),GN(t))}function GN(t){for(;t.enqueuedLimboResolutions.size>0&&t.activeLimboTargetsByKey.size<t.maxConcurrentLimboResolutions;){let e=t.enqueuedLimboResolutions.values().next().value;t.enqueuedLimboResolutions.delete(e);let n=new q(xe.fromString(e)),r=t.limboTargetIdGenerator.next();t.activeLimboResolutionsByTarget.set(r,new Pk(n)),t.activeLimboTargetsByKey=t.activeLimboTargetsByKey.insert(n,r),zB(t.remoteStore,new lh(dr(Bh(n.path)),r,"TargetPurposeLimboResolution",jr.INVALID))}}function Mo(t,e,n){return E(this,null,function*(){let r=Y(t),i=[],s=[],o=[];r.queryViewsByQuery.isEmpty()||(r.queryViewsByQuery.forEach((a,A)=>{o.push(r.applyDocChanges(A,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(A.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let c=Lk.fromSnapshot(A.targetId,l);s.push(c)}}))}),yield Promise.all(o),r.syncEngineListener.onWatchChange(i),yield Lpe(r.localStore,s))})}function dme(t,e,n,r){return E(this,null,function*(){let i=e.view.computeDocChanges(n);i.needsRefill&&(i=yield WB(t.localStore,e.query,!1).then(({documents:A})=>e.view.computeDocChanges(A,i)));let s=r&&r.targetChanges.get(e.targetId),o=r&&r.targetMismatches.get(e.targetId)!=null,a=e.view.applyChanges(i,t.isPrimaryClient,s,o);return VN(t,e.targetId,a.limboChanges),a.snapshot})}function gme(t,e){return E(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){F(hA,"User change. New user:",e.toKey());let i=yield b3(n.localStore,e);n.currentUser=e,cme(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Mo(n,i.affectedDocuments)}})}function fme(t,e){let n=Y(t),r=n.activeLimboResolutionsByTarget.get(e);if(r&&r.receivedDocument)return Ce().add(r.key);{let i=Ce(),s=n.queriesByTarget.get(e);if(!s)return i;for(let o of s){let a=n.queryViewsByQuery.get(o);i=i.unionWith(a.view.syncedDocuments)}return i}}function pme(t,e){return E(this,null,function*(){let n=Y(t),r=yield WB(n.localStore,e.query,!0),i=e.view.synchronizeWithPersistedState(r);return n.isPrimaryClient&&VN(n,e.targetId,i.limboChanges),i})}function Eme(t,e){return E(this,null,function*(){let n=Y(t);return k3(n.localStore,e).then(r=>Mo(n,r))})}function mme(t,e,n,r){return E(this,null,function*(){let i=Y(t),s=yield Gpe(i.localStore,e);if(s===null){F(hA,"Cannot apply mutation batch with id: "+e);return}n==="pending"?yield wh(i.remoteStore):n==="acknowledged"||n==="rejected"?(PN(i,e,r||null),UN(i,e),qpe(i.localStore,e)):J(),yield Mo(i,s)})}function Cme(t,e){return E(this,null,function*(){let n=Y(t);if(qN(n),HN(n),e===!0&&n._isPrimaryClient!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield JW(n,r.toArray());n._isPrimaryClient=!0,yield Nk(n.remoteStore,!0);for(let s of i)zB(n.remoteStore,s)}else if(e===!1&&n._isPrimaryClient!==!1){let r=[],i=Promise.resolve();n.queriesByTarget.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(gh(n,o),hh(n.localStore,o,!0))),Mp(n.remoteStore,o)}),yield i,yield JW(n,r),Ime(n),n._isPrimaryClient=!1,yield Nk(n.remoteStore,!1)}})}function Ime(t){let e=Y(t);e.activeLimboResolutionsByTarget.forEach((n,r)=>{Mp(e.remoteStore,r)}),e.limboDocumentRefs.removeAllReferences(),e.activeLimboResolutionsByTarget=new Map,e.activeLimboTargetsByKey=new ft(q.comparator)}function JW(t,e,n){return E(this,null,function*(){let r=Y(t),i=[],s=[];for(let o of e){let a,A=r.queriesByTarget.get(o);if(A&&A.length!==0){a=yield uh(r.localStore,dr(A[0]));for(let l of A){let c=r.queryViewsByQuery.get(l),u=yield pme(r,c);u.snapshot&&s.push(u.snapshot)}}else{let l=yield T3(r.localStore,o);a=yield uh(r.localStore,l),yield ON(r,W3(l),o,!1,a.resumeToken)}i.push(a)}return r.syncEngineListener.onWatchChange(s),i})}function W3(t){return U4(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yme(t){let e=Y(t);return Hpe(e.localStore)}function Bme(t,e,n,r){return E(this,null,function*(){let i=Y(t);if(i._isPrimaryClient){F(hA,"Ignoring unexpected query state notification.");return}let s=i.queriesByTarget.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield k3(i.localStore,V4(s[0])),a=up.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Bn.EMPTY_BYTE_STRING);yield Mo(i,o,a);break}case"rejected":{yield hh(i.localStore,e,!0),gh(i,e,r);break}default:J()}})}function Qme(t,e,n){return E(this,null,function*(){let r=qN(t);if(r._isPrimaryClient){for(let i of e){if(r.queriesByTarget.has(i)){F(hA,"Adding an already active target "+i);continue}let s=yield T3(r.localStore,i),o=yield uh(r.localStore,s);yield ON(r,W3(s),o.targetId,!1,o.resumeToken),zB(r.remoteStore,o)}for(let i of n)r.queriesByTarget.has(i)&&(yield hh(r.localStore,i,!1).then(()=>{Mp(r.remoteStore,i),gh(r,i)}).catch(AA))}})}function qN(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fme.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ome.bind(null,e),e.syncEngineListener.onWatchChange=jEe.bind(null,e.eventManager),e.syncEngineListener.onWatchError=KEe.bind(null,e.eventManager),e}function HN(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ame.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ame.bind(null,e),e}function wme(t,e,n){let r=Y(t);_me(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}function _me(t,e,n){return E(this,null,function*(){try{let r=yield e.getMetadata();if(yield Wpe(t.localStore,r))return yield e.close(),n._completeWith(eme(r)),Promise.resolve(new Set);n._updateProgress(H3(r));let s=new Ok(r,t.localStore,e.serializer),o=yield e.nextElement();for(;o;){let A=yield s.addSizedElement(o);A&&n._updateProgress(A),o=yield e.nextElement()}let a=yield s.complete();return yield Mo(t,a.changedDocs,void 0),yield zpe(t.localStore,r),n._completeWith(a.progress),Promise.resolve(a.changedCollectionGroups)}catch(r){return Di(hA,`Loading bundle failed with ${r}`),n._failWith(r),Promise.resolve(new Set)}})}var yp=class{constructor(){this.synchronizeTabs=!1}initialize(e){return E(this,null,function*(){this.serializer=Np(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return S3(this.persistence,new EB,e.initialUser,this.serializer)}createPersistence(e){return new fB(pB.factory,this.serializer)}createSharedClientState(e){return new IB}terminate(){return E(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var DB=class t extends yp{constructor(e,n,r){super(),this.onlineComponentProvider=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return E(this,null,function*(){yield Jw(t.prototype,this,"initialize").call(this,e),yield this.onlineComponentProvider.initialize(this,e),yield HN(this.onlineComponentProvider.syncEngine),yield wh(this.onlineComponentProvider.remoteStore),yield this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return S3(this.persistence,new EB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new ak(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new QT(n,this.persistence);return new BT(e.asyncQueue,r)}createPersistence(e){let n=RN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?bi.withCacheSize(this.cacheSizeBytes):bi.DEFAULT;return new yk(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,O3(),pEe(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new IB}},Gk=class t extends DB{constructor(e,n){super(e,n,!1),this.onlineComponentProvider=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return E(this,null,function*(){yield Jw(t.prototype,this,"initialize").call(this,e);let n=this.onlineComponentProvider.syncEngine;this.sharedClientState instanceof $f&&(this.sharedClientState.syncEngine={applyBatchState:mme.bind(null,n),applyTargetState:Bme.bind(null,n),applyActiveTargetsChange:Qme.bind(null,n),getActiveClients:yme.bind(null,n),synchronizeWithChangedDocuments:Eme.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.setPrimaryStateListener(r=>E(this,null,function*(){yield Cme(this.onlineComponentProvider.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=O3();if(!$f.isAvailable(n))throw new D(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=RN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $f(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Bp=class{initialize(e,n){return E(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YW(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gme.bind(null,this.syncEngine),yield Nk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return zEe()}createDatastore(e){let n=Np(e.databaseInfo.databaseId),r=gEe(e.databaseInfo);return QEe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return REe(this.localStore,this.datastore,e.asyncQueue,n=>YW(this.syncEngine,n,0),fEe())}createSyncEngine(e,n){return nme(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return E(this,null,function*(){var e;yield NEe(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var vme=10240;function Sme(t,e=vme){let n=0;return{read(){return E(this,null,function*(){if(n<t.byteLength){let s={value:t.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}})},cancel(){return E(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}function YN(t,e,n){if(!n)throw new D(v.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JN(t,e,n,r){if(e===!0&&r===!0)throw new D(v.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WW(t){if(!q.isDocumentKey(t))throw new D(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zW(t){if(q.isDocumentKey(t))throw new D(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bme(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=Dme(t);return e?`a custom ${e} object`:"an object"}}else return typeof t=="function"?"a function":J()}function Dme(t){return t.constructor?t.constructor.name:null}function Le(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=xp(t);throw new D(v.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function z3(t,e){if(e<=0)throw new D(v.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Rme(t,e){if(!(t instanceof Uint8Array))throw new D(v.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${xp(t)}`);return Sme(t,e)}var fh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.observer.error?this.scheduleEvent(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString())}mute(){this.muted=!0}scheduleEvent(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var qk=class{constructor(e,n){this.payload=e,this.byteLength=n}isBundleMetadata(){return"metadata"in this.payload}};var Hk=class{constructor(e,n){this.reader=e,this.serializer=n,this.metadata=new Wt,this.buffer=new Uint8Array,this.textDecoder=Ege(),this.nextElementImpl().then(r=>{r&&r.isBundleMetadata()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.reader.cancel()}getMetadata(){return E(this,null,function*(){return this.metadata.promise})}nextElement(){return E(this,null,function*(){return yield this.getMetadata(),this.nextElementImpl()})}nextElementImpl(){return E(this,null,function*(){let e=yield this.readLength();if(e===null)return null;let n=this.textDecoder.decode(e),r=Number(n);isNaN(r)&&this.raiseError(`length string (${n}) is not valid number`);let i=yield this.readJsonString(r);return new qk(JSON.parse(i),e.length+r)})}indexOfOpenBracket(){return this.buffer.findIndex(e=>e===123)}readLength(){return E(this,null,function*(){for(;this.indexOfOpenBracket()<0&&!(yield this.pullMoreDataToBuffer()););if(this.buffer.length===0)return null;let e=this.indexOfOpenBracket();e<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}readJsonString(e){return E(this,null,function*(){for(;this.buffer.length<e;)(yield this.pullMoreDataToBuffer())&&this.raiseError("Reached the end of bundle when more is expected.");let n=this.textDecoder.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}raiseError(e){throw this.reader.cancel(),new Error(`Invalid bundle format: ${e}`)}pullMoreDataToBuffer(){return E(this,null,function*(){let e=yield this.reader.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};function Tme(t,e){return new Hk(t,e)}var Yk=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new D(v.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield _Ee(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new sA(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return E(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=q.fromPath(r);this.mutations.push(new Ap(i,this.precondition(i)))}),yield wEe(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else if(e.isNoDocument())n=ne.min();else throw J();let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new D(v.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ne.min())?Ot.exists(!1):Ot.updateTime(n):Ot.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ne.min()))throw new D(v.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ot.updateTime(n)}else return Ot.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Jk=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.attemptsRemaining=r.maxAttempts,this.backoff=new Cp(this.asyncQueue,"transaction_retry")}run(){this.attemptsRemaining-=1,this.runWithBackOff()}runWithBackOff(){this.backoff.backoffAndRun(()=>E(this,null,function*(){let e=new Yk(this.datastore),n=this.tryRunUpdateFunction(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.handleTransactionError(i)}))}).catch(r=>{this.handleTransactionError(r)})}))}tryRunUpdateFunction(e){try{let n=this.updateFunction(e);return bp(n)||!n.catch||!n.then?(this.deferred.reject(Error("Transaction callback must return a Promise")),null):n}catch(n){return this.deferred.reject(n),null}}handleTransactionError(e){this.attemptsRemaining>0&&this.isRetryableTransactionError(e)?(this.attemptsRemaining-=1,this.asyncQueue.enqueueAndForget(()=>(this.runWithBackOff(),Promise.resolve()))):this.deferred.reject(e)}isRetryableTransactionError(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!r3(n)}return!1}};var oA="FirestoreClient",kme=100,Nme=11,Fme=20,Mme=22,Wk=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=zy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>E(this,null,function*(){F(oA,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F(oA,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:kme}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=vh(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jy(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F(oA,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>E(this,null,function*(){r.isEqual(i)||(yield b3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function zk(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield WN(t);F(oA,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HW(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>HW(e.remoteStore,i)),t._onlineComponents=e})}function j3(t){return t.name==="FirebaseError"?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:typeof DOMException<"u"&&t instanceof DOMException?t.code===Mme||t.code===Fme||t.code===Nme:!0}function WN(t){return E(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(oA,"Using user provided OfflineComponentProvider");try{yield Jy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!j3(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),yield Jy(t,new yp)}}else F(oA,"Using default OfflineComponentProvider"),yield Jy(t,new yp);return t._offlineComponents})}function jB(t){return E(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(oA,"Using user provided OnlineComponentProvider"),yield zk(t,t._uninitializedComponentsProvider._online)):(F(oA,"Using default OnlineComponentProvider"),yield zk(t,new Bp))),t._onlineComponents})}function K3(t){return WN(t).then(e=>e.persistence)}function zN(t){return WN(t).then(e=>e.localStore)}function X3(t){return jB(t).then(e=>e.remoteStore)}function jN(t){return jB(t).then(e=>e.syncEngine)}function xme(t){return jB(t).then(e=>e.datastore)}function ph(t){return E(this,null,function*(){let e=yield jB(t),n=e.eventManager;return n.onListen=rme.bind(null,e.syncEngine),n.onUnlisten=ime.bind(null,e.syncEngine),n})}function Lme(t){return t.asyncQueue.enqueue(()=>E(this,null,function*(){let e=yield K3(t),n=yield X3(t);return e.setNetworkEnabled(!0),TEe(n)}))}function Ome(t){return t.asyncQueue.enqueue(()=>E(this,null,function*(){let e=yield K3(t),n=yield X3(t);return e.setNetworkEnabled(!1),kEe(n)}))}function Ume(t){let e=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let n=yield jN(t);return lme(n,e)})),e.promise}function Pme(t,e,n,r){let i=new fh(r),s=new Ip(e,i,n);return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let o=yield ph(t);return MN(o,s)})),()=>{i.mute(),t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let o=yield ph(t);return xN(o,s)}))}}function Vme(t,e){let n=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let r=yield zN(t);return Jme(r,e,n)})),n.promise}function Z3(t,e,n={}){let r=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let i=yield ph(t);return Wme(i,t.asyncQueue,e,n,r)})),r.promise}function Gme(t,e){let n=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let r=yield zN(t);return zme(r,e,n)})),n.promise}function $3(t,e,n={}){let r=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let i=yield ph(t);return jme(i,t.asyncQueue,e,n,r)})),r.promise}function qme(t,e){let n=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let r=yield jN(t);return sme(r,e,n)})),n.promise}function Hme(t,e){let n=new fh(e);return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let r=yield ph(t);return ZEe(r,n)})),()=>{n.mute(),t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let r=yield ph(t);return $Ee(r,n)}))}}function Yme(t,e,n){let r=new Wt;return t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){let i=yield xme(t);new Jk(t.asyncQueue,i,n,e,r).run()})),r.promise}function Jme(t,e,n){return E(this,null,function*(){try{let r=yield Upe(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new D(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(r){let i=vh(r,`Failed to get document '${e} from cache`);n.reject(i)}})}function Wme(t,e,n,r,i){let s=new fh({next:a=>{e.enqueueAndForget(()=>xN(t,o));let A=a.docs.has(n);!A&&a.fromCache?i.reject(new D(v.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&a.fromCache&&r&&r.source==="server"?i.reject(new D(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:a=>i.reject(a)}),o=new Ip(Bh(n.path),s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return MN(t,o)}function zme(t,e,n){return E(this,null,function*(){try{let r=yield WB(t,e,!0),i=new bB(e,r.remoteKeys),s=i.computeDocChanges(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(r){let i=vh(r,`Failed to execute query '${e} against cache`);n.reject(i)}})}function jme(t,e,n,r,i){let s=new fh({next:a=>{e.enqueueAndForget(()=>xN(t,o)),a.fromCache&&r.source==="server"?i.reject(new D(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(a)},error:a=>i.reject(a)}),o=new Ip(n,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return MN(t,o)}function Kme(t,e,n,r){let i=Zme(n,Np(e));t.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){wme(yield jN(t),i,r)}))}function Xme(t,e){return t.asyncQueue.enqueue(()=>E(this,null,function*(){return jpe(yield zN(t),e)}))}function Zme(t,e){let n;return typeof t=="string"?n=i3().encode(t):n=t,Tme(Rme(n),e)}function $me(t,e){return t.timeoutSeconds===e.timeoutSeconds}function e9(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var eCe="ComponentProvider",jW=new Map;function tCe(t){let e=jW.get(t);e&&(F(eCe,"Removing Datastore"),jW.delete(t),e.terminate())}function nCe(t,e,n,r){return new DT(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,e9(r.experimentalLongPollingOptions),r.useFetchStreams)}var t9="firestore.googleapis.com",KW=!0,XW=5,ZW=30,rCe=!0,RB=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new D(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=t9,this.ssl=KW}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:KW;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=w3;else{if(e.cacheSizeBytes!==kp&&e.cacheSizeBytes<NW)throw new D(v.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${NW}`);this.cacheSizeBytes=e.cacheSizeBytes}JN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=rCe:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e9((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),iCe(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&$me(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};function iCe(t){if(t.timeoutSeconds!==void 0){if(isNaN(t.timeoutSeconds))throw new D(v.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<XW)throw new D(v.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is ${XW})`);if(t.timeoutSeconds>ZW)throw new D(v.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is ${ZW})`)}}var Tl=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new D(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RB(e),e.credentials!==void 0&&(this._authCredentials=rhe(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return tCe(this),Promise.resolve()}};function n9(t,e,n,r={}){var i;t=Le(t,Tl);let s=t._getSettings(),o=`${e}:${n}`;if(s.host!==t9&&s.host!==o&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,A;if(typeof r.mockUserToken=="string")a=r.mockUserToken,A=rn.MOCK_USER;else{a=Cc(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new D(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new rn(l)}t._authCredentials=new dT(new Wy(a,A))}}var kn=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ct=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},zs=class t extends kn{constructor(e,n,r){super(e,n,Bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function KN(t,e,...n){if(t=de(t),YN("collection","path",e),t instanceof Tl){let r=xe.fromString(e,...n);return zW(r),new zs(t,null,r)}else{if(!(t instanceof ct)&&!(t instanceof zs))throw new D(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(xe.fromString(e,...n));return zW(r),new zs(t.firestore,null,r)}}function r9(t,e){if(t=Le(t,Tl),YN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new D(v.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kn(t,null,Ude(e))}function Lp(t,e,...n){if(t=de(t),arguments.length===1&&(e=zy.newId()),YN("doc","path",e),t instanceof Tl){let r=xe.fromString(e,...n);return WW(r),new ct(t,null,new q(r))}else{if(!(t instanceof ct)&&!(t instanceof zs))throw new D(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(xe.fromString(e,...n));return WW(r),new ct(t.firestore,t instanceof zs?t.converter:null,new q(r))}}function XN(t,e){return t=de(t),e=de(e),(t instanceof ct||t instanceof zs)&&(e instanceof ct||e instanceof zs)?t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter:!1}function ZN(t,e){return t=de(t),e=de(e),t instanceof kn&&e instanceof kn?t.firestore===e.firestore&&Rp(t._query,e._query)&&t.converter===e.converter:!1}var sCe="AsyncQueue",jk=class{constructor(){this.tail=Promise.resolve(),this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new Cp(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()}}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let n=new Wt;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}retryNextOp(){return E(this,null,function*(){if(this.retryableOps.length!==0){try{yield this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(lA(e))F(sCe,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}})}enqueueInternal(e){let n=this.tail.then(()=>(this.operationInProgress=!0,e().catch(r=>{this.failure=r,this.operationInProgress=!1;let i=aCe(r);throw Rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.operationInProgress=!1,r))));return this.tail=n,n}enqueueAfterDelay(e,n,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(n=0);let i=Fk.createAndSchedule(this,e,n,r,s=>this.removeDelayedOperation(s));return this.delayedOperations.push(i),i}verifyNotFailed(){this.failure&&J()}verifyOperationInProgress(){}drain(){return E(this,null,function*(){let e;do e=this.tail,yield e;while(e!==this.tail)})}containsDelayedOperation(e){for(let n of this.delayedOperations)if(n.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{this.delayedOperations.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.delayedOperations)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let n=this.delayedOperations.indexOf(e);this.delayedOperations.splice(n,1)}};function oCe(){return new jk}function aCe(t){let e=t.message||"";return t.stack&&(t.stack.includes(t.message)?e=t.stack:e=t.message+`
`+t.stack),e}var Kk=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var i9=kp,vt=class extends Tl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=oCe(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||s9(this),this._firestoreClient.terminate()}};function un(t){return t._firestoreClient||s9(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function s9(t){var e,n,r;let i=t._freezeSettings(),s=nCe(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Wk(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function o9(t,e){t=Le(t,vt),f9(t);let n=un(t);if(n._uninitializedComponentsProvider)throw new D(v.FAILED_PRECONDITION,"SDK cache is already specified.");Di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Bp,s=new DB(i,r.cacheSizeBytes,e?.forceOwnership);return A9(n,i,s)}function a9(t){t=Le(t,vt),f9(t);let e=un(t);if(e._uninitializedComponentsProvider)throw new D(v.FAILED_PRECONDITION,"SDK cache is already specified.");Di("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Bp,i=new Gk(r,n.cacheSizeBytes);return A9(e,r,i)}function A9(t,e,n){let r=new Wt;return t.asyncQueue.enqueue(()=>E(this,null,function*(){try{yield Jy(t,n),yield zk(t,e),r.resolve()}catch(i){let s=i;if(!j3(s))throw s;Di("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function l9(t){if(t._initialized&&!t._terminated)throw new D(v.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Wt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{yield bpe(RN(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function c9(t){t=Le(t,vt);let e=un(t);return Ume(e)}function u9(t){t=Le(t,vt);let e=un(t);return Lme(e)}function h9(t){t=Le(t,vt);let e=un(t);return Ome(e)}function d9(t,e){t=Le(t,vt);let n=un(t),r=new Kk;return Kme(n,t._databaseId,e,r),r}function g9(t,e){t=Le(t,vt);let n=un(t);return Xme(n,e).then(r=>r?new kn(t,null,r.query):null)}function f9(t){if(t._initialized||t._terminated)throw new D(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}function ACe(t,e=!0){the(Ic),ho(new bn("firestore",(n,{instanceIdentifier:r,options:i})=>{let s=n.getProvider("app").getImmediate(),o=new vt(new gT(n.getProvider("auth-internal")),new mT(n.getProvider("app-check-internal")),Zhe(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Or(HJ,YJ,t),Or(HJ,YJ,"esm2017")}var Xs=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Bn.fromBase64String(e))}catch(n){throw new D(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var rs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new D(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ko=class{constructor(e){this._methodName=e}};var kl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var lCe=/^__.*__$/,Xk=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new iA(e,this.data,n,this.fieldTransforms)}},TB=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function p9(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var kB=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return NB(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(p9(this.dataSource)&&lCe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},Zk=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Np(e)}createContext(e,n,r,i=!1){return new kB({dataSource:e,methodName:n,targetDoc:r,path:jt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ll(t){let e=t._freezeSettings(),n=Np(t._databaseId);return new Zk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KB(t,e,n,r,i,s={}){let o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);tF("Data must be an object, but it was:",o,r);let a=C9(r,o),A,l;if(s.merge)A=new Kr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let c=[];for(let u of s.mergeFields){let h=rN(e,u,n);if(!o.contains(h))throw new D(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);y9(c,h)||c.push(h)}A=new Kr(c),l=o.fieldTransforms.filter(u=>A.covers(u.field))}else A=null,l=o.fieldTransforms;return new Xk(new jn(a),A,l)}var Qp=class t extends ko{_toFieldTransform(e){if(e.dataSource===2)e.fieldMask.push(e.path);else throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(e){return e instanceof t}};function E9(t,e,n){return new kB({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var $k=class t extends ko{_toFieldTransform(e){return new Sl(e.path,new nA)}isEqual(e){return e instanceof t}},eN=class t extends ko{constructor(e,n){super(e),this._elements=n}_toFieldTransform(e){let n=E9(this,e,!0),r=this._elements.map(s=>Ol(s,n)),i=new Ro(r);return new Sl(e.path,i)}isEqual(e){return e instanceof t&&n0(this._elements,e._elements)}},tN=class t extends ko{constructor(e,n){super(e),this._elements=n}_toFieldTransform(e){let n=E9(this,e,!0),r=this._elements.map(s=>Ol(s,n)),i=new To(r);return new Sl(e.path,i)}isEqual(e){return e instanceof t&&n0(this._elements,e._elements)}},nN=class t extends ko{constructor(e,n){super(e),this._operand=n}_toFieldTransform(e){let n=new rA(e.serializer,z4(e.serializer,this._operand));return new Sl(e.path,n)}isEqual(e){return e instanceof t&&this._operand===e._operand}};function $N(t,e,n,r){let i=t.createContext(1,e,n);tF("Data must be an object, but it was:",i,r);let s=[],o=jn.empty();xl(r,(A,l)=>{let c=nF(e,A,n);l=de(l);let u=i.childContextForFieldPath(c);if(l instanceof Qp)s.push(c);else{let h=Ol(l,u);h!=null&&(s.push(c),o.set(c,h))}});let a=new Kr(s);return new TB(o,a,i.fieldTransforms)}function eF(t,e,n,r,i,s){let o=t.createContext(1,e,n),a=[rN(e,r,n)],A=[i];if(s.length%2!==0)throw new D(v.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(rN(e,s[h])),A.push(s[h+1]);let l=[],c=jn.empty();for(let h=a.length-1;h>=0;--h)if(!y9(l,a[h])){let d=a[h],g=A[h];g=de(g);let f=o.childContextForFieldPath(d);if(g instanceof Qp)l.push(d);else{let m=Ol(g,f);m!=null&&(l.push(d),c.set(d,m))}}let u=new Kr(l);return new TB(c,u,o.fieldTransforms)}function m9(t,e,n,r=!1){let i=t.createContext(r?4:3,e);return Ol(n,i)}function Ol(t,e){if(t=de(t),I9(t))return tF("Unsupported field value:",e,t),C9(t,e);if(t instanceof ko)return uCe(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return cCe(t,e)}else return hCe(t,e)}function C9(t,e){let n={};return y4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xl(t,(r,i)=>{let s=Ol(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function cCe(t,e){let n=[],r=0;for(let i of t){let s=Ol(i,e.childContextForArray(r));s==null&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}function uCe(t,e){if(!p9(e.dataSource))throw e.createError(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.createError(`${t._methodName}() is not currently supported inside arrays`);let n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}function hCe(t,e){if(t=de(t),t===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return z4(e.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){let n=Tt.fromDate(t);return{timestampValue:Ah(e.serializer,n)}}else if(t instanceof Tt){let n=new Tt(t.seconds,Math.floor(t.nanoseconds/1e3)*1e3);return{timestampValue:Ah(e.serializer,n)}}else{if(t instanceof kl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xs)return{bytesValue:s3(e.serializer,t._byteString)};if(t instanceof ct){let n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_N(t.firestore._databaseId||e.databaseId,t._key.path)}}else throw e.createError(`Unsupported field value: ${xp(t)}`)}}function I9(t){return typeof t=="object"&&t!==null&&!(t instanceof Array)&&!(t instanceof Date)&&!(t instanceof Tt)&&!(t instanceof kl)&&!(t instanceof Xs)&&!(t instanceof ct)&&!(t instanceof ko)}function tF(t,e,n){if(!I9(n)||!bme(n)){let r=xp(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function rN(t,e,n){if(e=de(e),e instanceof rs)return e._internalPath;if(typeof e=="string")return nF(t,e);throw NB("Field path arguments must be of type string or ",t,!1,void 0,n)}var dCe=new RegExp("[~\\*/\\[\\]]");function nF(t,e,n){if(e.search(dCe)>=0)throw NB(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rs(...e.split("."))._internalPath}catch{throw NB(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function NB(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let A="";return(s||o)&&(A+=" (found",s&&(A+=` in field ${r}`),o&&(A+=` in document ${i}`),A+=")"),new D(v.INVALID_ARGUMENT,a+t+A)}function y9(t,e){return t.some(n=>n.isEqual(e))}var Nl=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document)if(this._converter){let e=new iN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}else return this._userDataWriter.convertValue(this._document.data.value);else return}get(e){if(this._document){let n=this._document.data.field(XB("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},iN=class extends Nl{data(){return super.data()}};function XB(t,e){return typeof e=="string"?nF(t,e):e instanceof rs?e._internalPath:e._delegate._internalPath}function B9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new D(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wp=class{},Fl=class extends wp{};function xo(t,e,...n){let r=[];e instanceof wp&&r.push(e),r=r.concat(n),yCe(r);for(let i of r)t=i._apply(t);return t}var FB=class t extends Fl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return k9(e._query,n),new kn(e.firestore,e.converter,QN(e._query,n))}_parse(e){let n=Ll(e.firestore);return gCe(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Q9(t,e,n){let r=e,i=XB("where",t);return FB._create(i,r,n)}var sN=class t extends wp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(CCe(e._query,n),new kn(e.firestore,e.converter,QN(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var oN=class t extends Fl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=fCe(e._query,this._field,this._direction);return new kn(e.firestore,e.converter,Gde(e._query,n))}};function w9(t,e="asc"){let n=e,r=XB("orderBy",t);return oN._create(r,n)}var MB=class t extends Fl{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new kn(e.firestore,e.converter,rB(e._query,this._limit,this._limitType))}};function _9(t){return z3("limit",t),MB._create("limit",t,"F")}function v9(t){return z3("limitToLast",t),MB._create("limitToLast",t,"L")}var xB=class t extends Fl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=T9(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,qde(e._query,n))}};function S9(...t){return xB._create("startAt",t,!0)}function b9(...t){return xB._create("startAfter",t,!1)}var LB=class t extends Fl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=T9(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,Hde(e._query,n))}};function D9(...t){return LB._create("endBefore",t,!1)}function R9(...t){return LB._create("endAt",t,!0)}function T9(t,e,n,r){if(n[0]=de(n[0]),n[0]instanceof Nl)return pCe(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Ll(t.firestore);return ECe(t._query,t.firestore._databaseId,i,e,n,r)}}function gCe(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if(s==="array-contains"||s==="array-contains-any")throw new D(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if(s==="in"||s==="not-in"){e4(o,s);let l=[];for(let c of o)l.push($W(r,t,c));a={arrayValue:{values:l}}}else a=$W(r,t,o)}else(s==="in"||s==="not-in"||s==="array-contains-any")&&e4(o,s),a=m9(n,e,o,s==="in"||s==="not-in");return ke.create(i,s,a)}function fCe(t,e,n){if(t.startAt!==null)throw new D(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(t.endAt!==null)throw new D(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(e,n)}function pCe(t,e,n,r,i){if(!r)throw new D(v.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);let s=[];for(let o of sh(t))if(o.field.isKeyField())s.push(wl(e,r.key));else{let a=r.data.field(o.field);if(qB(a))throw new D(v.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(a!==null)s.push(a);else{let A=o.field.canonicalString();throw new D(v.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}}return new js(s,i)}function ECe(t,e,n,r,i,s){let o=t.explicitOrderBy;if(i.length>o.length)throw new D(v.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let a=[];for(let A=0;A<i.length;A++){let l=i[A];if(o[A].field.isKeyField()){if(typeof l!="string")throw new D(v.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!BN(t)&&l.indexOf("/")!==-1)throw new D(v.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);let u=t.path.child(xe.fromString(l));if(!q.isDocumentKey(u))throw new D(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${u}' is not because it contains an odd number of segments.`);let h=new q(u);a.push(wl(e,h))}else{let u=m9(n,r,l);a.push(u)}}return new js(a,s)}function $W(t,e,n){if(n=de(n),typeof n=="string"){if(n==="")throw new D(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BN(e)&&n.indexOf("/")!==-1)throw new D(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(xe.fromString(n));if(!q.isDocumentKey(r))throw new D(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wl(t,new q(r))}else{if(n instanceof ct)return wl(t,n._key);throw new D(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xp(n)}.`)}}function e4(t,e){if(!Array.isArray(t)||t.length===0)throw new D(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mCe(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function k9(t,e){let n=ICe(t.filters,mCe(e.op));if(n!==null)throw n===e.op?new D(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new D(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function CCe(t,e){let n=t,r=e.getFlattenedFilters();for(let i of r)k9(n,i),n=QN(n,i)}function ICe(t,e){for(let n of t)for(let r of n.getFlattenedFilters())if(e.indexOf(r.op)>=0)return r.op;return null}function yCe(t){let e=t.filter(r=>r instanceof sN).length,n=t.filter(r=>r instanceof FB).length;if(e>1||e>0&&n>0)throw new D(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}var Eh=class{convertValue(e,n="none"){switch(Ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return xl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new kl(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=CN(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){let n=Za(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=xe.fromString(e);Z(p3(r));let i=new eA(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||Rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function ZB(t,e,n){let r;return t?n&&(n.merge||n.mergeFields)?r=t.toFirestore(e,n):r=t.toFirestore(e):r=e,r}var aN=class extends Eh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}};function AN(t){return BCe(t,["next","error","complete"])}function BCe(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var No=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ti=class extends Nl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document)if(this._converter){let n=new aA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}else return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);else return}get(e,n={}){if(this._document){let r=this._document.data.field(XB("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},aA=class extends Ti{data(e={}){return super.data(e)}},is=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new No(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new aA(this._firestore,this._userDataWriter,r.key,r,new No(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return(!this._cachedChanges||this._cachedChangesIncludeMetadataChanges!==n)&&(this._cachedChanges=QCe(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function QCe(t,e){if(t._snapshot.oldDocs.isEmpty()){let n=0;return t._snapshot.docChanges.map(r=>{let i=new aA(t._firestore,t._userDataWriter,r.doc.key,r.doc,new No(t._snapshot.mutatedKeys.has(r.doc.key),t._snapshot.fromCache),t.query.converter);return r.doc,{type:"added",doc:i,oldIndex:-1,newIndex:n++}})}else{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(r=>e||r.type!==3).map(r=>{let i=new aA(t._firestore,t._userDataWriter,r.doc.key,r.doc,new No(t._snapshot.mutatedKeys.has(r.doc.key),t._snapshot.fromCache),t.query.converter),s=-1,o=-1;return r.type!==0&&(s=n.indexOf(r.doc.key),n=n.delete(r.doc.key)),r.type!==1&&(n=n.add(r.doc),o=n.indexOf(r.doc.key)),{type:wCe(r.type),doc:i,oldIndex:s,newIndex:o}})}}function wCe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function rF(t,e){return t instanceof Ti&&e instanceof Ti?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof is&&e instanceof is?t._firestore===e._firestore&&ZN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot):!1}function N9(t){t=Le(t,ct);let e=Le(t.firestore,vt),n=un(e);return Z3(n,t._key).then(r=>aF(e,t,r))}var Fo=class extends Eh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}};function F9(t){t=Le(t,ct);let e=Le(t.firestore,vt),n=un(e),r=new Fo(e);return Vme(n,t._key).then(i=>new Ti(e,r,t._key,i,new No(i!==null&&i.hasLocalMutations,!0),t.converter))}function M9(t){t=Le(t,ct);let e=Le(t.firestore,vt),n=un(e);return Z3(n,t._key,{source:"server"}).then(r=>aF(e,t,r))}function x9(t){t=Le(t,kn);let e=Le(t.firestore,vt),n=un(e),r=new Fo(e);return B9(t._query),$3(n,t._query).then(i=>new is(e,r,t,i))}function L9(t){t=Le(t,kn);let e=Le(t.firestore,vt),n=un(e),r=new Fo(e);return Gme(n,t._query).then(i=>new is(e,r,t,i))}function O9(t){t=Le(t,kn);let e=Le(t.firestore,vt),n=un(e),r=new Fo(e);return $3(n,t._query,{source:"server"}).then(i=>new is(e,r,t,i))}function iF(t,e,n){t=Le(t,ct);let r=Le(t.firestore,vt),i=ZB(t.converter,e,n),s=Ll(r),a=KB(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ot.none());return Sh(r,[a])}function sF(t,e,n,...r){t=Le(t,ct);let i=Le(t.firestore,vt),s=Ll(i);e=de(e);let o;typeof e=="string"||e instanceof rs?o=eF(s,"updateDoc",t._key,e,n,r):o=$N(s,"updateDoc",t._key,e);let a=o.toMutation(t._key,Ot.exists(!0));return Sh(i,[a])}function U9(t){let e=Le(t.firestore,vt),n=[new sA(t._key,Ot.none())];return Sh(e,n)}function P9(t,e){let n=Le(t.firestore,vt),r=Lp(t),i=ZB(t.converter,e),s=Ll(t.firestore),a=KB(s,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ot.exists(!1));return Sh(n,[a]).then(()=>r)}function oF(t,...e){var n,r,i;t=de(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]=="object"&&!AN(e[o])&&(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(AN(e[o])){let h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let A,l,c;if(t instanceof ct)l=Le(t.firestore,vt),c=Bh(t._key.path),A={next:h=>{e[o]&&e[o](aF(l,t,h))},error:e[o+1],complete:e[o+2]};else{let h=Le(t,kn);l=Le(h.firestore,vt),c=h._query;let d=new Fo(l);A={next:g=>{e[o]&&e[o](new is(l,d,h,g))},error:e[o+1],complete:e[o+2]},B9(t._query)}let u=un(l);return Pme(u,c,a,A)}function V9(t,e){t=Le(t,vt);let n=un(t),r=AN(e)?e:{next:e};return Hme(n,r)}function Sh(t,e){let n=un(t);return qme(n,e)}function aF(t,e,n){let r=n.docs.get(e._key),i=new Fo(t);return new Ti(t,i,e._key,r,new No(n.hasPendingWrites,n.fromCache),e.converter)}var _Ce={maxAttempts:5};function vCe(t){if(t.maxAttempts<1)throw new D(v.INVALID_ARGUMENT,"Max attempts must be at least 1")}var OB=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ll(e)}set(e,n,r){this._verifyNotCommitted();let i=ja(e,this._firestore),s=ZB(i.converter,n,r),o=KB(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ot.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=ja(e,this._firestore);n=de(n);let o;return typeof n=="string"||n instanceof rs?o=eF(this._dataReader,"WriteBatch.update",s._key,n,r,i):o=$N(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ot.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ja(e,this._firestore);return this._mutations=this._mutations.concat(new sA(n._key,Ot.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new D(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ja(t,e){if(t=de(t),t.firestore!==e)throw new D(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var lN=class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ll(e)}get(e){let n=ja(e,this._firestore),r=new aN(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return J();let s=i[0];if(s.isFoundDocument())return new Nl(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Nl(this._firestore,r,n._key,null,n.converter);throw J()})}set(e,n,r){let i=ja(e,this._firestore),s=ZB(i.converter,n,r),o=KB(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){let s=ja(e,this._firestore);n=de(n);let o;return typeof n=="string"||n instanceof rs?o=eF(this._dataReader,"Transaction.update",s._key,n,r,i):o=$N(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){let n=ja(e,this._firestore);return this._transaction.delete(n._key),this}};var cN=class extends lN{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=ja(e,this._firestore),r=new Fo(this._firestore);return super.get(e).then(i=>new Ti(this._firestore,r,n._key,i._document,new No(!1,!1),n.converter))}};function G9(t,e,n){t=Le(t,vt);let r=Object.assign(Object.assign({},_Ce),n);vCe(r);let i=un(t);return Yme(i,s=>e(new cN(t,s)),r)}function q9(){return new Qp("deleteField")}function H9(){return new $k("serverTimestamp")}function Y9(...t){return new eN("arrayUnion",t)}function J9(...t){return new tN("arrayRemove",t)}function W9(t){return new nN("increment",t)}ACe("node");var SCe="@firebase/firestore-compat",bCe="0.3.25";function dF(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new D("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function z9(){if(typeof Uint8Array>"u")throw new D("unimplemented","Uint8Arrays are not available in this environment.")}function j9(){if(!B4())throw new D("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $B=class t{constructor(e){this._delegate=e}static fromBase64String(e){return j9(),new t(Xs.fromBase64String(e))}static fromUint8Array(e){return z9(),new t(Xs.fromUint8Array(e))}toBase64(){return j9(),this._delegate.toBase64()}toUint8Array(){return z9(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function AF(t){return DCe(t,["next","error","complete"])}function DCe(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var lF=class{enableIndexedDbPersistence(e,n){return o9(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return a9(e._delegate)}clearIndexedDbPersistence(e){return l9(e._delegate)}},eQ=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof eA||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Di("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){n9(this._delegate,e,n,r)}enableNetwork(){return u9(this._delegate)}disableNetwork(){return h9(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JN("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return c9(this._delegate)}onSnapshotsInSync(e){return V9(this._delegate,e)}get app(){if(!this._appCompat)throw new D("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rh(this,KN(this._delegate,e))}catch(n){throw gr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Zs(this,Lp(this._delegate,e))}catch(n){throw gr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gl(this,r9(this._delegate,e))}catch(n){throw gr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return G9(this._delegate,n=>e(new tQ(this,n)))}batch(){return un(this._delegate),new nQ(new OB(this._delegate,e=>Sh(this._delegate,e)))}loadBundle(e){return d9(this._delegate,e)}namedQuery(e){return g9(this._delegate,e).then(n=>n?new Gl(this,n):null)}},bh=class extends Eh{constructor(e){super(),this.firestore=e}convertBytes(e){return new $B(new Xs(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Zs.forKey(n,this.firestore,null)}};function RCe(t){n4(t)}var tQ=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new bh(e)}get(e){let n=Ul(e);return this._delegate.get(n).then(r=>new Pl(this._firestore,new Ti(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Ul(e);return r?(dF("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=Ul(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=Ul(e);return this._delegate.delete(n),this}},nQ=class{constructor(e){this._delegate=e}set(e,n,r){let i=Ul(e);return r?(dF("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=Ul(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=Ul(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Dh=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new aA(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vl(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new bh(e),n),i.set(n,s)),s}};Dh.INSTANCES=new WeakMap;var Zs=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bh(e)}static forPath(e,n,r){if(e.length%2!==0)throw new D("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new ct(n._delegate,r,new q(e)))}static forKey(e,n,r){return new t(n,new ct(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Rh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rh(this.firestore,KN(this._delegate,e))}catch(n){throw gr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=de(e),e instanceof ct?XN(this._delegate,e):!1}set(e,n){n=dF("DocumentReference.set",n);try{return n?iF(this._delegate,e,n):iF(this._delegate,e)}catch(r){throw gr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?sF(this._delegate,e):sF(this._delegate,e,n,...r)}catch(i){throw gr(i,"updateDoc()","DocumentReference.update()")}}delete(){return U9(this._delegate)}onSnapshot(...e){let n=K9(e),r=X9(e,i=>new Pl(this.firestore,new Ti(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return oF(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=F9(this._delegate):e?.source==="server"?n=M9(this._delegate):n=N9(this._delegate),n.then(r=>new Pl(this.firestore,new Ti(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Dh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function gr(t,e,n){return t.message=t.message.replace(e,n),t}function K9(t){for(let e of t)if(typeof e=="object"&&!AF(e))return e;return{}}function X9(t,e){var n,r;let i;return AF(t[0])?i=t[0]:AF(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Pl=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Zs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return rF(this._delegate,e._delegate)}},Vl=class extends Pl{data(e){let n=this._delegate.data(e);return this._delegate._converter||r4(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Gl=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bh(e)}where(e,n,r){try{return new t(this.firestore,xo(this._delegate,Q9(e,n,r)))}catch(i){throw gr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,xo(this._delegate,w9(e,n)))}catch(r){throw gr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,xo(this._delegate,_9(e)))}catch(n){throw gr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,xo(this._delegate,v9(e)))}catch(n){throw gr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,xo(this._delegate,S9(...e)))}catch(n){throw gr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,xo(this._delegate,b9(...e)))}catch(n){throw gr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,xo(this._delegate,D9(...e)))}catch(n){throw gr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,xo(this._delegate,R9(...e)))}catch(n){throw gr(n,"endAt()","Query.endAt()")}}isEqual(e){return ZN(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=L9(this._delegate):e?.source==="server"?n=O9(this._delegate):n=x9(this._delegate),n.then(r=>new Op(this.firestore,new is(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=K9(e),r=X9(e,i=>new Op(this.firestore,new is(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return oF(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Dh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},cF=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Vl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Op=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Gl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new cF(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Vl(this._firestore,r))})}isEqual(e){return rF(this._delegate,e._delegate)}},Rh=class t extends Gl{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Zs(this.firestore,e):null}doc(e){try{return e===void 0?new Zs(this.firestore,Lp(this._delegate)):new Zs(this.firestore,Lp(this._delegate,e))}catch(n){throw gr(n,"doc()","CollectionReference.doc()")}}add(e){return P9(this._delegate,e).then(n=>new Zs(this.firestore,n))}isEqual(e){return XN(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Dh.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ul(t){return Le(t,ct)}var uF=class t{constructor(...e){this._delegate=new rs(...e)}static documentId(){return new t(jt.keyField().canonicalString())}isEqual(e){return e=de(e),e instanceof rs?this._delegate._internalPath.isEqual(e._internalPath):!1}};var hF=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=H9();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=q9();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Y9(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=J9(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=W9(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var TCe={Firestore:eQ,GeoPoint:kl,Timestamp:Tt,Blob:$B,Transaction:tQ,WriteBatch:nQ,DocumentReference:Zs,DocumentSnapshot:Pl,Query:Gl,QueryDocumentSnapshot:Vl,QuerySnapshot:Op,CollectionReference:Rh,FieldPath:uF,FieldValue:hF,setLogLevel:RCe,CACHE_SIZE_UNLIMITED:i9};function kCe(t,e){t.INTERNAL.registerComponent(new bn("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},TCe)))}function NCe(t){kCe(t,(e,n)=>new eQ(e,n,new lF)),t.registerVersion(SCe,bCe,"node")}NCe(Mt);function FCe(t,e=uc){return new hs(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function Z9(t,e){return FCe(t,e)}function MCe(t,e){return Z9(t,e).pipe(kE(void 0),TE(),ot(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function pF(t,e){return Z9(t,e).pipe(ot(n=>({payload:n,type:"query"})))}var rQ=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=rz(r,n);return new sQ(i,s,this.afs)}snapshotChanges(){return MCe(this.ref,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return this.snapshotChanges().pipe(ot(({payload:n})=>e.idField?se(M({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return tr(this.ref.get(e)).pipe(yt)}};function iQ(t,e){return pF(t,e).pipe(kE(void 0),TE(),ot(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,A)=>{let l=s.find(u=>u.doc.ref.isEqual(a.ref)),c=r?.payload.docs.find(u=>u.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&c&&JSON.stringify(c.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:A,newIndex:A,type:"modified",doc:a}})}),o}))}function $9(t,e,n){return iQ(t,n).pipe(DA((r,i)=>xCe(r,i.map(s=>s.payload),e),[]),RE(),ot(r=>r.map(i=>({type:i.type,payload:i}))))}function xCe(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=LCe(t,r))}),t}function gF(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function LCe(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return gF(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return gF(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gF(t,e.oldIndex,1);break}return t}function ez(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var sQ=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=iQ(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ot(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(kE(void 0),TE(),bA(([r,i])=>i.length>0||!r),ot(([,r])=>r),yt)}auditTrail(e){return this.stateChanges(e).pipe(DA((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=ez(e);return $9(this.query,n,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return pF(this.query,this.afs.schedulers.outsideAngular).pipe(ot(n=>n.payload.docs.map(r=>e.idField?se(M({},r.data()),{[e.idField]:r.id}):r.data())),yt)}get(e){return tr(this.query.get(e)).pipe(yt)}add(e){return this.ref.add(e)}doc(e){return new rQ(this.ref.doc(e),this.afs)}},fF=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?iQ(this.query,this.afs.schedulers.outsideAngular).pipe(yt):iQ(this.query,this.afs.schedulers.outsideAngular).pipe(ot(n=>n.filter(r=>e.indexOf(r.type)>-1)),bA(n=>n.length>0),yt)}auditTrail(e){return this.stateChanges(e).pipe(DA((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=ez(e);return $9(this.query,n,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return pF(this.query,this.afs.schedulers.outsideAngular).pipe(ot(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),yt)}get(e){return tr(this.query.get(e)).pipe(yt)}},tz=new je("angularfire2.enableFirestorePersistence"),nz=new je("angularfire2.firestore.persistenceSettings"),OCe=new je("angularfire2.firestore.settings"),UCe=new je("angularfire2.firestore.use-emulator");function rz(t,e=n=>n){return{query:e(t),ref:t}}var PCe=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,A,l,c,u,h,d,g,f,m,y,I){this.schedulers=A;let w=go(n,a,r),_=c;u&&Vd(w,a,h,g,f,m,d,y),[this.firestore,this.persistenceEnabled$]=ra(`${w.name}.firestore`,"AngularFirestore",w.name,()=>{let S=a.runOutsideAngular(()=>w.firestore());if(s&&S.settings(s),_&&S.useEmulator(..._),i&&!LE(o)){let T=()=>{try{return tr(S.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(oe){return typeof console<"u"&&console.warn(oe),Mr(!1)}};return[S,a.runOutsideAngular(T)]}else return[S,Mr(!1)]},[s,_,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=rz(i,r),a=this.schedulers.ngZone.run(()=>s);return new sQ(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new fF(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new rQ(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(j(ps),j(Es,8),j(tz,8),j(OCe,8),j(ds),j(ci),j(ta),j(nz,8),j(UCe,8),j(XE,8),j(Md,8),j(xd,8),j(Ld,8),j(Od,8),j(Ud,8),j(Pd,8),j(Ui,8))};static \u0275prov=xr({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),iz=(()=>{class t{constructor(){Mt.registerVersion("angularfire",fs.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:tz,useValue:!0},{provide:nz,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ln({type:t});static \u0275inj=An({providers:[PCe]})}return t})();var $6=DE(J6(),1);var eX="firebasestorage.googleapis.com",tX="storageBucket",qbe=2*60*1e3,Hbe=10*60*1e3,Ybe=1e3;var Gt=class t extends GE{constructor(e,n,r=0){super(tL(e),`Firebase Storage: ${n} (${tL(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tL(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Nt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Nt||{});function tL(t){return"storage/"+t}function lL(){let t="An unknown error occurred, please check the error payload for server response.";return new Gt(Nt.UNKNOWN,t)}function Jbe(t){return new Gt(Nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Wbe(t){return new Gt(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zbe(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gt(Nt.UNAUTHENTICATED,t)}function jbe(){return new Gt(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Kbe(t){return new Gt(Nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nX(){return new Gt(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rX(){return new Gt(Nt.CANCELED,"User canceled the upload/download.")}function Xbe(t){return new Gt(Nt.INVALID_URL,"Invalid URL '"+t+"'.")}function Zbe(t){return new Gt(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $be(){return new Gt(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tX+"' property when initializing the app?")}function iX(){return new Gt(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eDe(){return new Gt(Nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function tDe(){return new Gt(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ac(t){return new Gt(Nt.INVALID_ARGUMENT,t)}function sX(){return new Gt(Nt.APP_DELETED,"The Firebase app was deleted.")}function cL(t){return new Gt(Nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cd(t,e){return new Gt(Nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wE(t){throw new Gt(Nt.INTERNAL_ERROR,"Internal error: "+t)}var yr=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw Zbe(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),A={bucket:1,path:3};function l(_){_.path_=decodeURIComponent(_.path)}let c="v[A-Za-z0-9_]+",u=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",d=new RegExp(`^https?://${u}/${c}/b/${i}/o${h}`,"i"),g={bucket:1,path:3},f=n===eX?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",y=new RegExp(`^https?://${f}/${i}/${m}`,"i"),w=[{regex:a,indices:A,postModify:s},{regex:d,indices:g,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let _=0;_<w.length;_++){let S=w[_],T=S.regex.exec(e);if(T){let oe=T[S.indices.bucket],Qe=T[S.indices.path];Qe||(Qe=""),r=new t(oe,Qe),S.postModify(r);break}}if(r==null)throw Xbe(e);return r}},rL=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function nDe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function A(){return a===2}let l=!1;function c(...m){l||(l=!0,e.apply(null,m))}function u(m){i=setTimeout(()=>{i=null,t(d,A())},m)}function h(){s&&clearTimeout(s)}function d(m,...y){if(l){h();return}if(m){h(),c.call(null,m,...y);return}if(A()||o){h(),c.call(null,m,...y);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,u(w)}let g=!1;function f(m){g||(g=!0,h(),!l&&(i!==null?(m||(a=2),clearTimeout(i),u(0)):m||(a=1)))}return u(0),s=setTimeout(()=>{o=!0,f(!0)},n),f}function rDe(t){t(!1)}function iDe(t){return t!==void 0}function sDe(t){return typeof t=="function"}function oDe(t){return typeof t=="object"&&!Array.isArray(t)}function Lw(t){return typeof t=="string"||t instanceof String}function W6(t){return uL()&&t instanceof Blob}function uL(){return typeof Blob<"u"}function iL(t,e,n,r){if(r<e)throw ac(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ac(`Invalid value for '${t}'. Expected ${n} or less.`)}function vA(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function oX(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Id=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Id||{});function aX(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var sL=class{constructor(e,n,r,i,s,o,a,A,l,c,u,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=A,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,g)=>{this.resolve_=d,this.reject_=g,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new md(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let A=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(A,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Id.NO_ERROR,A=s.getStatus();if(!a||aX(A,this.additionalRetryCodes_)&&this.retry){let c=s.getErrorCode()===Id.ABORT;r(!1,new md(!1,null,c));return}let l=this.successCodes_.indexOf(A)!==-1;r(!0,new md(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let A=this.callback_(a,a.getResponse());iDe(A)?s(A):s()}catch(A){o(A)}else if(a!==null){let A=lL();A.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,A)):o(A)}else if(i.canceled){let A=this.appDelete_?sX():rX();o(A)}else{let A=nX();o(A)}};this.canceled_?n(!1,new md(!1,null,!0)):this.backoffId_=nDe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rDe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},md=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function aDe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ADe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lDe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cDe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uDe(t,e,n,r,i,s,o=!0){let a=oX(t.urlParams),A=t.url+a,l=Object.assign({},t.headers);return lDe(l,e),aDe(l,n),ADe(l,s),cDe(l,r),new sL(A,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function hDe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dDe(...t){let e=hDe();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(uL())return new Blob(t);throw new Gt(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gDe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function fDe(t){if(/[^-A-Za-z0-9+/=]/.test(t))throw Cd("base64","Invalid character found");return Buffer.from(t,"base64").toString("binary")}var Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},_E=class{constructor(e,n){this.data=e,this.contentType=n||null}};function hL(t,e){switch(t){case Ai.RAW:return new _E(AX(e));case Ai.BASE64:case Ai.BASE64URL:return new _E(lX(t,e));case Ai.DATA_URL:return new _E(EDe(e),mDe(e))}throw lL()}function AX(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function pDe(t){let e;try{e=decodeURIComponent(t)}catch{throw Cd(Ai.DATA_URL,"Malformed data URL.")}return AX(e)}function lX(t,e){switch(t){case Ai.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Cd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Cd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fDe(e)}catch(i){throw i.message.includes("polyfill")?i:Cd(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var xw=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Cd(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=CDe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function EDe(t){let e=new xw(t);return e.base64?lX(Ai.BASE64,e.rest):pDe(e.rest)}function mDe(t){return new xw(t).contentType}function CDe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var yd=class t{constructor(e,n){let r=0,i="";W6(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(W6(this.data_)){let r=this.data_,i=gDe(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(uL()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(dDe.apply(null,n))}else{let n=e.map(o=>Lw(o)?hL(Ai.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function dL(t){let e;try{e=JSON.parse(t)}catch{return null}return oDe(e)?e:null}function IDe(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function yDe(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function cX(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function BDe(t,e){return e}var Ln=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||BDe}},Mw=null;function QDe(t){return!Lw(t)||t.length<2?t:cX(t)}function Ow(){if(Mw)return Mw;let t=[];t.push(new Ln("bucket")),t.push(new Ln("generation")),t.push(new Ln("metageneration")),t.push(new Ln("name","fullPath",!0));function e(s,o){return QDe(o)}let n=new Ln("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new Ln("size");return i.xform=r,t.push(i),t.push(new Ln("timeCreated")),t.push(new Ln("updated")),t.push(new Ln("md5Hash",null,!0)),t.push(new Ln("cacheControl",null,!0)),t.push(new Ln("contentDisposition",null,!0)),t.push(new Ln("contentEncoding",null,!0)),t.push(new Ln("contentLanguage",null,!0)),t.push(new Ln("contentType",null,!0)),t.push(new Ln("metadata","customMetadata",!0)),Mw=t,Mw}function wDe(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new yr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function _De(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return wDe(r,t),r}function uX(t,e,n){let r=dL(e);return r===null?null:_De(t,r,n)}function vDe(t,e,n,r){let i=dL(e);if(i===null||!Lw(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let c=t.bucket,u=t.fullPath,h="/b/"+o(c)+"/o/"+o(u),d=vA(h,n,r),g=oX({alt:"media",token:l});return d+g})[0]}function gL(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var z6="prefixes",j6="items";function SDe(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[z6])for(let i of n[z6]){let s=i.replace(/\/$/,""),o=t._makeStorageReference(new yr(e,s));r.prefixes.push(o)}if(n[j6])for(let i of n[j6]){let s=t._makeStorageReference(new yr(e,i.name));r.items.push(s)}return r}function bDe(t,e,n){let r=dL(n);return r===null?null:SDe(t,e,r)}var ls=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function uo(t){if(!t)throw lL()}function Uw(t,e){function n(r,i){let s=uX(t,i,e);return uo(s!==null),s}return n}function DDe(t,e){function n(r,i){let s=bDe(t,e,i);return uo(s!==null),s}return n}function RDe(t,e){function n(r,i){let s=uX(t,i,e);return uo(s!==null),vDe(s,i,t.host,t._protocol)}return n}function wd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=jbe():i=zbe():n.getStatus()===402?i=Wbe(t.bucket):n.getStatus()===403?i=Kbe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Pw(t){let e=wd(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Jbe(t.path)),s.serverResponse=i.serverResponse,s}return n}function hX(t,e,n){let r=e.fullServerUrl(),i=vA(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ls(i,s,Uw(t,n),o);return a.errorHandler=Pw(e),a}function TDe(t,e,n,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);let o=e.bucketOnlyServerUrl(),a=vA(o,t.host,t._protocol),A="GET",l=t.maxOperationRetryTime,c=new ls(a,A,DDe(t,e.bucket),l);return c.urlParams=s,c.errorHandler=wd(e),c}function kDe(t,e,n){let r=e.fullServerUrl(),i=vA(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ls(i,s,RDe(t,n),o);return a.errorHandler=Pw(e),a}function NDe(t,e,n,r){let i=e.fullServerUrl(),s=vA(i,t.host,t._protocol),o="PATCH",a=gL(n,r),A={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,c=new ls(s,o,Uw(t,r),l);return c.headers=A,c.body=a,c.errorHandler=Pw(e),c}function FDe(t,e){let n=e.fullServerUrl(),r=vA(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(A,l){}let a=new ls(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Pw(e),a}function MDe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function dX(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=MDe(null,e)),r}function xDe(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let _=0;_<2;_++)w=w+Math.random().toString().slice(2);return w}let A=a();o["Content-Type"]="multipart/related; boundary="+A;let l=dX(e,r,i),c=gL(l,n),u="--"+A+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+A+`\r
Content-Type: `+l.contentType+`\r
\r
`,h=`\r
--`+A+"--",d=yd.getBlob(u,r,h);if(d===null)throw iX();let g={name:l.fullPath},f=vA(s,t.host,t._protocol),m="POST",y=t.maxUploadRetryTime,I=new ls(f,m,Uw(t,n),y);return I.urlParams=g,I.headers=o,I.body=d.uploadData(),I.errorHandler=wd(e),I}var Bd=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function fL(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{uo(!1)}return uo(!!n&&(e||["active"]).indexOf(n)!==-1),n}function LDe(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o=dX(e,r,i),a={name:o.fullPath},A=vA(s,t.host,t._protocol),l="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=gL(o,n),h=t.maxUploadRetryTime;function d(f){fL(f);let m;try{m=f.getResponseHeader("X-Goog-Upload-URL")}catch{uo(!1)}return uo(Lw(m)),m}let g=new ls(A,l,d,h);return g.urlParams=a,g.headers=c,g.body=u,g.errorHandler=wd(e),g}function ODe(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function s(l){let c=fL(l,["active","final"]),u=null;try{u=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{uo(!1)}u||uo(!1);let h=Number(u);return uo(!isNaN(h)),new Bd(h,r.size(),c==="final")}let o="POST",a=t.maxUploadRetryTime,A=new ls(n,o,s,a);return A.headers=i,A.errorHandler=wd(e),A}var K6=256*1024;function UDe(t,e,n,r,i,s,o,a){let A=new Bd(0,0);if(o?(A.current=o.current,A.total=o.total):(A.current=0,A.total=r.size()),r.size()!==A.total)throw eDe();let l=A.total-A.current,c=l;i>0&&(c=Math.min(c,i));let u=A.current,h=u+c,d="";c===0?d="finalize":l===c?d="upload, finalize":d="upload";let g={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${A.current}`},f=r.slice(u,h);if(f===null)throw iX();function m(_,S){let T=fL(_,["active","final"]),oe=A.current+c,Qe=r.size(),Pe;return T==="final"?Pe=Uw(e,s)(_,S):Pe=null,new Bd(oe,Qe,T==="final",Pe)}let y="POST",I=e.maxUploadRetryTime,w=new ls(n,y,m,I);return w.headers=g,w.body=f.uploadData(),w.progressCallback=a||null,w.errorHandler=wd(t),w}var gX={STATE_CHANGED:"state_changed"},Zn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nL(t){switch(t){case"running":case"pausing":case"canceling":return Zn.RUNNING;case"paused":return Zn.PAUSED;case"success":return Zn.SUCCESS;case"canceled":return Zn.CANCELED;case"error":return Zn.ERROR;default:return Zn.ERROR}}var oL=class{constructor(e,n,r){if(sDe(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function Ed(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var X6=null,aL=class{constructor(){this.errorText_="",this.sent_=!1,this.fetch_=$6.fetch,this.errorCode_=Id.NO_ERROR}send(e,n,r,i){return E(this,null,function*(){if(this.sent_)throw wE("cannot .send() more than once");this.sent_=!0;try{let s=yield this.fetch_(e,{method:n,headers:i||{},body:r});this.headers_=s.headers,this.statusCode_=s.status,this.errorCode_=Id.NO_ERROR,this.body_=yield s.arrayBuffer()}catch(s){this.errorText_=s?.message,this.statusCode_=0,this.errorCode_=Id.NETWORK_ERROR}})}getErrorCode(){if(this.errorCode_===void 0)throw wE("cannot .getErrorCode() before receiving response");return this.errorCode_}getStatus(){if(this.statusCode_===void 0)throw wE("cannot .getStatus() before receiving response");return this.statusCode_}getErrorText(){return this.errorText_}abort(){}getResponseHeader(e){if(!this.headers_)throw wE("cannot .getResponseHeader() before receiving response");return this.headers_.get(e)}addUploadProgressListener(e){}removeUploadProgressListener(e){}},AL=class extends aL{getResponse(){if(!this.body_)throw wE("cannot .getResponse() before receiving response");return Buffer.from(this.body_).toString("utf-8")}};function co(){return X6?X6():new AL}var vE=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Ow(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Nt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(aX(i.status,[]))if(s)i=nX();else{this.sleepTime=Math.max(this.sleepTime*2,Ybe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Nt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=LDe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,co,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=ODe(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,co,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=K6*this._chunkMultiplier,n=new Bd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=UDe(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(A){this._error=A,this._transition("error");return}let a=this._ref.storage._makeRequest(o,co,i,s,!1);this._request=a,a.getPromise().then(A=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(A.current),A.finalized?(this._metadata=A.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){K6*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=hX(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,co,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=xDe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,co,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=rX(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=nL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let s=new oL(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(nL(this._state)){case Zn.SUCCESS:Ed(this._resolve.bind(null,this.snapshot))();break;case Zn.CANCELED:case Zn.ERROR:let n=this._reject;Ed(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(nL(this._state)){case Zn.RUNNING:case Zn.PAUSED:e.next&&Ed(e.next.bind(e,this.snapshot))();break;case Zn.SUCCESS:e.complete&&Ed(e.complete.bind(e))();break;case Zn.CANCELED:case Zn.ERROR:e.error&&Ed(e.error.bind(e,this._error))();break;default:e.error&&Ed(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Qd=class t{constructor(e,n){this._service=e,n instanceof yr?this._location=n:this._location=yr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new yr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cX(this._location.path)}get storage(){return this._service}get parent(){let e=IDe(this._location.path);if(e===null)return null;let n=new yr(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cL(e)}};function PDe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new vE(t,new yd(e),n)}function VDe(t){let e={prefixes:[],items:[]};return fX(t,e).then(()=>e)}function fX(t,e,n){return E(this,null,function*(){let i=yield pX(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield fX(t,e,i.nextPageToken))})}function pX(t,e){e!=null&&typeof e.maxResults=="number"&&iL("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=TDe(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,co)}function GDe(t){t._throwIfRoot("getMetadata");let e=hX(t.storage,t._location,Ow());return t.storage.makeRequestWithTokens(e,co)}function qDe(t,e){t._throwIfRoot("updateMetadata");let n=NDe(t.storage,t._location,e,Ow());return t.storage.makeRequestWithTokens(n,co)}function HDe(t){t._throwIfRoot("getDownloadURL");let e=kDe(t.storage,t._location,Ow());return t.storage.makeRequestWithTokens(e,co).then(n=>{if(n===null)throw tDe();return n})}function YDe(t){t._throwIfRoot("deleteObject");let e=FDe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,co)}function EX(t,e){let n=yDe(t._location.path,e),r=new yr(t._location.bucket,n);return new Qd(t.storage,r)}function JDe(t){return/^[A-Za-z]+:\/\//.test(t)}function WDe(t,e){return new Qd(t,e)}function mX(t,e){if(t instanceof SE){let n=t;if(n._bucket==null)throw $be();let r=new Qd(n,n._bucket);return e!=null?mX(r,e):r}else return e!==void 0?EX(t,e):t}function zDe(t,e){if(e&&JDe(e)){if(t instanceof SE)return WDe(t,e);throw ac("To use ref(service, url), the first argument must be a Storage instance.")}else return mX(t,e)}function Z6(t,e){let n=e?.[tX];return n==null?null:yr.makeFromBucketSpec(n,t)}function jDe(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Cc(i,t.app.options.projectId))}var SE=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=eX,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qbe,this._maxUploadRetryTime=Hbe,this._requests=new Set,i!=null?this._bucket=yr.makeFromBucketSpec(i,this._host):this._bucket=Z6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yr.makeFromBucketSpec(this._url,e):this._bucket=Z6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return E(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return E(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qd(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rL(sX());{let o=uDe(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return E(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},KDe="@firebase/storage",XDe="0.12.1";var ZDe="storage";function CX(t,e,n){return t=de(t),PDe(t,e,n)}function IX(t){return t=de(t),GDe(t)}function yX(t,e){return t=de(t),qDe(t,e)}function BX(t,e){return t=de(t),pX(t,e)}function QX(t){return t=de(t),VDe(t)}function wX(t){return t=de(t),HDe(t)}function _X(t){return t=de(t),YDe(t)}function pL(t,e){return t=de(t),zDe(t,e)}function vX(t,e){return EX(t,e)}function SX(t,e,n,r={}){jDe(t,e,n,r)}function $De(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new SE(n,r,i,e,Ic)}function eRe(){ho(new bn(ZDe,$De,"PUBLIC").setMultipleInstances(!0)),Or(KDe,XDe)}eRe();var _d=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Vw=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _d(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new _d(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new _d(o,this,this._ref)):s={next:n.next?o=>n.next(new _d(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}},Gw=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ac(e,this._service))}get items(){return this._delegate.items.map(e=>new Ac(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Ac=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=vX(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Vw(CX(this._delegate,e,n),this)}putString(e,n=Ai.RAW,r){this._throwIfRoot("putString");let i=hL(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new Vw(new vE(this._delegate,new yd(i.data,!0),s),this)}listAll(){return QX(this._delegate).then(e=>new Gw(e,this.storage))}list(e){return BX(this._delegate,e||void 0).then(n=>new Gw(n,this.storage))}getMetadata(){return IX(this._delegate)}updateMetadata(e){return yX(this._delegate,e)}getDownloadURL(){return wX(this._delegate)}delete(){return this._throwIfRoot("delete"),_X(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw cL(e)}};var qw=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(bX(e))throw ac("ref() expected a child path but got a URL, use refFromURL instead.");return new Ac(pL(this._delegate,e),this)}refFromURL(e){if(!bX(e))throw ac("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yr.makeFromUrl(e,this._delegate.host)}catch{throw ac("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ac(pL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){SX(this._delegate,e,n,r)}};function bX(t){return/^[A-Za-z]+:\/\//.test(t)}var tRe="@firebase/storage-compat",nRe="0.3.4";var rRe="storage-compat";function iRe(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new qw(n,r)}function sRe(t){let e={TaskState:Zn,TaskEvent:gX,StringFormat:Ai,Storage:qw,Reference:Ac};t.INTERNAL.registerComponent(new bn(rRe,iRe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(tRe,nRe)}sRe(Mt);function oRe(t){return new hs(e=>{let n=o=>e.next(o),r=o=>e.error(o),i=()=>e.complete();n(t.snapshot);let s=t.on("state_changed",n);return t.then(o=>{n(o),i()},o=>{n(t.snapshot),r(o)}),function(){s()}}).pipe(IL(0))}function DX(t){let e=oRe(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ot(n=>n.bytesTransferred/n.totalBytes*100))}}function Hw(t){return{getDownloadURL:()=>Mr(void 0).pipe(a0,li(()=>t.getDownloadURL()),yt),getMetadata:()=>Mr(void 0).pipe(a0,li(()=>t.getMetadata()),yt),delete:()=>tr(t.delete()),child:e=>Hw(t.child(e)),updateMetadata:e=>tr(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return DX(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return DX(i)},list:e=>tr(t.list(e)),listAll:()=>tr(t.listAll())}}var aRe=new je("angularfire2.storageBucket"),ARe=new je("angularfire2.storage.maxUploadRetryTime"),lRe=new je("angularfire2.storage.maxOperationRetryTime"),cRe=new je("angularfire2.storage.use-emulator"),uRe=(()=>{class t{storage;constructor(n,r,i,s,o,a,A,l,c,u){let h=go(n,o,r);this.storage=ra(`${h.name}.storage.${i}`,"AngularFireStorage",h.name,()=>{let d=o.runOutsideAngular(()=>h.storage(i||void 0)),g=c;return g&&d.useEmulator(...g),A&&d.setMaxUploadRetryTime(A),l&&d.setMaxOperationRetryTime(l),d},[A,l])}ref(n){return Hw(this.storage.ref(n))}refFromURL(n){return Hw(this.storage.refFromURL(n))}upload(n,r,i){let s=this.storage.ref(n);return Hw(s).put(r,i)}static \u0275fac=function(r){return new(r||t)(j(ps),j(Es,8),j(aRe,8),j(ds),j(ci),j(ta),j(ARe,8),j(lRe,8),j(cRe,8),j(Ui,8))};static \u0275prov=xr({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var hRe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ln({type:t});static \u0275inj=An({})}return t})(),RX=(()=>{class t{constructor(){Mt.registerVersion("angularfire",fs.full,"gcs-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ln({type:t});static \u0275inj=An({providers:[uRe],imports:[hRe]})}return t})();var TX={production:!1,firebase:{apiKey:"AIzaSyDxcpvdhNonZCKPUv-bMOGjtGf6SpS_BgI",authDomain:"account-58c0e.firebaseapp.com",databaseURL:"https://account-58c0e-default-rtdb.firebaseio.com",projectId:"account-58c0e",storageBucket:"account-58c0e.appspot.com",messagingSenderId:"1054730131196",appId:"1:1054730131196:web:8bbef9a3faf1282631a979"}};var kX=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ln({type:e,bootstrap:[Yc]}),e.\u0275inj=An({imports:[PL,$2,g1.initializeApp(TX.firebase),y2,iz,RX,G2]});let t=e;return t})();var dRe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ln({type:e,bootstrap:[Yc]}),e.\u0275inj=An({imports:[kX,VL]});let t=e;return t})();export{Cs as a,dRe as b};
